(self["webpackChunkzp_chat_glm"]=self["webpackChunkzp_chat_glm"]||[]).push([[1892],{28095:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".el-message{--el-message-bg-color:var(--el-color-info-light-9);--el-message-border-color:var(--el-border-color-lighter);--el-message-padding:11px 15px;--el-message-close-size:16px;--el-message-close-icon-color:var(--el-text-color-placeholder);--el-message-close-hover-color:var(--el-text-color-secondary);align-items:center;background-color:var(--el-message-bg-color);border-color:var(--el-message-border-color);border-radius:var(--el-border-radius-base);border-style:var(--el-border-style);border-width:var(--el-border-width);box-sizing:border-box;display:flex;gap:8px;left:50%;max-width:calc(100% - 32px);padding:var(--el-message-padding);position:fixed;top:20px;transform:translateX(-50%);transition:opacity var(--el-transition-duration),transform .4s,top .4s;width:-moz-fit-content;width:fit-content}.el-message.is-center{justify-content:center}.el-message.is-plain{background-color:var(--el-bg-color-overlay);border-color:var(--el-bg-color-overlay);box-shadow:var(--el-box-shadow-light)}.el-message p{margin:0}.el-message--success{--el-message-bg-color:var(--el-color-success-light-9);--el-message-border-color:var(--el-color-success-light-8);--el-message-text-color:var(--el-color-success)}.el-message--success .el-message__content{color:var(--el-message-text-color);overflow-wrap:break-word}.el-message .el-message-icon--success{color:var(--el-message-text-color)}.el-message--info{--el-message-bg-color:var(--el-color-info-light-9);--el-message-border-color:var(--el-color-info-light-8);--el-message-text-color:var(--el-color-info)}.el-message--info .el-message__content{color:var(--el-message-text-color);overflow-wrap:break-word}.el-message .el-message-icon--info{color:var(--el-message-text-color)}.el-message--warning{--el-message-bg-color:var(--el-color-warning-light-9);--el-message-border-color:var(--el-color-warning-light-8);--el-message-text-color:var(--el-color-warning)}.el-message--warning .el-message__content{color:var(--el-message-text-color);overflow-wrap:break-word}.el-message .el-message-icon--warning{color:var(--el-message-text-color)}.el-message--error{--el-message-bg-color:var(--el-color-error-light-9);--el-message-border-color:var(--el-color-error-light-8);--el-message-text-color:var(--el-color-error)}.el-message--error .el-message__content{color:var(--el-message-text-color);overflow-wrap:break-word}.el-message .el-message-icon--error{color:var(--el-message-text-color)}.el-message .el-message__badge{position:absolute;right:-8px;top:-8px}.el-message__content{font-size:14px;line-height:1;padding:0}.el-message__content:focus{outline-width:0}.el-message .el-message__closeBtn{color:var(--el-message-close-icon-color);cursor:pointer;font-size:var(--el-message-close-size)}.el-message .el-message__closeBtn:focus{outline-width:0}.el-message .el-message__closeBtn:hover{color:var(--el-message-close-hover-color)}.el-message-fade-enter-from,.el-message-fade-leave-to{opacity:0;transform:translate(-50%,-100%)}",""]),e["default"]=s},40701:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(81607),i.b),u=new URL(i(6958),i.b),h=new URL(i(90260),i.b),d=a()(o()),g=l()(c),p=l()(u),f=l()(h);d.push([t.id,'/*!\n * TOAST UI ImageEditor\n * @version 3.15.3\n * @license MIT\n */body>textarea{position:fixed!important}.tui-image-editor-container{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;min-height:300px;height:100%;position:relative;background-color:#282828;overflow:hidden;letter-spacing:.3px}.tui-image-editor-container div,.tui-image-editor-container input,.tui-image-editor-container label,.tui-image-editor-container li,.tui-image-editor-container ul{-webkit-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;-ms-user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none;user-select:none}.tui-image-editor-container .tui-image-editor-header{min-width:533px;position:absolute;background-color:#151515;top:0;width:100%}.tui-image-editor-container .tui-image-editor-controls-buttons,.tui-image-editor-container .tui-image-editor-header-buttons{float:right;margin:8px}.tui-image-editor-container .tui-image-editor-controls-logo,.tui-image-editor-container .tui-image-editor-header-logo{float:left;width:30%;padding:17px}.tui-image-editor-container .tui-image-editor-controls-buttons,.tui-image-editor-container .tui-image-editor-controls-logo{width:270px;height:100%;display:none}.tui-image-editor-container .tui-image-editor-controls-buttons button,.tui-image-editor-container .tui-image-editor-controls-buttons div,.tui-image-editor-container .tui-image-editor-header-buttons button,.tui-image-editor-container .tui-image-editor-header-buttons div{display:inline-block;position:relative;width:120px;height:40px;padding:0;line-height:40px;outline:none;border-radius:20px;border:1px solid #ddd;font-family:Noto Sans,sans-serif;font-size:12px;font-weight:700;cursor:pointer;vertical-align:middle;letter-spacing:.3px;text-align:center}.tui-image-editor-container .tui-image-editor-download-btn{background-color:#fdba3b;border-color:#fdba3b;color:#fff}.tui-image-editor-container .tui-image-editor-load-btn{position:absolute;left:0;right:0;display:inline-block;top:0;bottom:0;width:100%;cursor:pointer;opacity:0}.tui-image-editor-container .tui-image-editor-main-container{position:absolute;width:100%;top:0;bottom:64px}.tui-image-editor-container .tui-image-editor-main{position:absolute;text-align:center;top:64px;bottom:0;right:0;left:0}.tui-image-editor-container .tui-image-editor-wrap{bottom:0;width:100%;overflow:auto}.tui-image-editor-container .tui-image-editor-wrap .tui-image-editor-size-wrap{display:table;width:100%;height:100%}.tui-image-editor-container .tui-image-editor-wrap .tui-image-editor-size-wrap .tui-image-editor-align-wrap{display:table-cell;vertical-align:middle}.tui-image-editor-container .tui-image-editor{position:relative;display:inline-block}.tui-image-editor-container .tui-image-editor-help-menu,.tui-image-editor-container .tui-image-editor-menu{width:auto;list-style:none;padding:0;margin:0 auto;display:table-cell;text-align:center;vertical-align:middle;white-space:nowrap}.tui-image-editor-container .tui-image-editor-help-menu>.tui-image-editor-item,.tui-image-editor-container .tui-image-editor-menu>.tui-image-editor-item{position:relative;display:inline-block;border-radius:2px;padding:7px 8px 3px 8px;cursor:pointer;margin:0 4px}.tui-image-editor-container .tui-image-editor-help-menu>.tui-image-editor-item[tooltip-content]:hover:before,.tui-image-editor-container .tui-image-editor-menu>.tui-image-editor-item[tooltip-content]:hover:before{content:"";position:absolute;display:inline-block;margin:0 auto 0;width:0;height:0;border-right:7px solid transparent;border-top:7px solid #2f2f2f;border-left:7px solid transparent;left:13px;top:-2px}.tui-image-editor-container .tui-image-editor-help-menu>.tui-image-editor-item[tooltip-content]:hover:after,.tui-image-editor-container .tui-image-editor-menu>.tui-image-editor-item[tooltip-content]:hover:after{content:attr(tooltip-content);position:absolute;display:inline-block;background-color:#2f2f2f;color:#fff;padding:5px 8px;font-size:11px;font-weight:lighter;border-radius:3px;max-height:23px;top:-25px;left:0;min-width:24px}.tui-image-editor-container .tui-image-editor-help-menu>.tui-image-editor-item.active,.tui-image-editor-container .tui-image-editor-menu>.tui-image-editor-item.active{background-color:#fff;-webkit-transition:all .3s ease;transition:all .3s ease}.tui-image-editor-container .tui-image-editor-wrap{position:absolute}.tui-image-editor-container .tui-image-editor-grid-visual{display:none;position:absolute;width:100%;height:100%;border:1px solid hsla(0,0%,100%,.7)}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor{-webkit-transition:none;transition:none}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor-grid-visual,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-resize .tui-image-editor-grid-visual,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor-grid-visual{display:block}.tui-image-editor-container .tui-image-editor-grid-visual table{width:100%;height:100%;border-collapse:collapse}.tui-image-editor-container .tui-image-editor-grid-visual table td{border:1px solid hsla(0,0%,100%,.3)}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot:before{content:"";position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;width:10px;height:10px;border:0;-webkit-box-shadow:0 0 1px 0 rgba(0,0,0,.3);box-shadow:0 0 1px 0 rgba(0,0,0,.3);border-radius:100%;background-color:#fff}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.left-top:before{top:-5px;left:-5px}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.right-top:before{top:-5px;right:-5px}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.left-bottom:before{bottom:-5px;left:-5px}.tui-image-editor-container .tui-image-editor-grid-visual table td.dot.right-bottom:before{bottom:-5px;right:-5px}.tui-image-editor-container .tui-image-editor-submenu{display:none;position:absolute;bottom:0;width:100%;height:150px;white-space:nowrap;z-index:2}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover svg>use.active{display:block}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item li{display:inline-block;vertical-align:top}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-newline{display:block;margin-top:0}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button{position:relative;cursor:pointer;display:inline-block;font-weight:400;font-size:11px;margin:0 9px 0 9px}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button.preset{margin:0 9px 20px 5px}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item label>span{display:inline-block;cursor:pointer;padding-top:5px;font-family:Noto Sans,sans-serif;font-size:11px}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button.apply label,.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-image-editor-button.cancel label{vertical-align:7px}.tui-image-editor-container .tui-image-editor-submenu>div{display:none;vertical-align:bottom}.tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-submenu-style{opacity:.95;z-index:-1;position:absolute;top:0;bottom:0;left:0;right:0;display:block}.tui-image-editor-container .tui-image-editor-partition>div{width:1px;height:52px;border-left:1px solid #3c3c3c;margin:0 8px 0 8px}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-filter .tui-image-editor-partition>div{height:108px;margin:0 29px 0 0}.tui-image-editor-container .tui-image-editor-submenu-align{text-align:left;margin-right:30px}.tui-image-editor-container .tui-image-editor-submenu-align label>span{width:55px;white-space:nowrap}.tui-image-editor-container .tui-image-editor-submenu-align:first-child{margin-right:0}.tui-image-editor-container .tui-image-editor-submenu-align:first-child label>span{width:70px}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-crop .tui-image-editor-submenu>div.tui-image-editor-menu-crop,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-draw .tui-image-editor-submenu>div.tui-image-editor-menu-draw,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-filter .tui-image-editor-submenu>div.tui-image-editor-menu-filter,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor-submenu>div.tui-image-editor-menu-flip,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-icon .tui-image-editor-submenu>div.tui-image-editor-menu-icon,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-mask .tui-image-editor-submenu>div.tui-image-editor-menu-mask,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-resize .tui-image-editor-submenu>div.tui-image-editor-menu-resize,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor-submenu>div.tui-image-editor-menu-rotate,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-shape .tui-image-editor-submenu>div.tui-image-editor-menu-shape,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-text .tui-image-editor-submenu>div.tui-image-editor-menu-text,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-zoom .tui-image-editor-submenu>div.tui-image-editor-menu-zoom{display:table-cell}.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-crop .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-draw .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-filter .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-flip .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-icon .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-mask .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-resize .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-rotate .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-shape .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-text .tui-image-editor-submenu,.tui-image-editor-container .tui-image-editor-main.tui-image-editor-menu-zoom .tui-image-editor-submenu{display:table}.tui-image-editor-container .tui-image-editor-help-menu{list-style:none;padding:0;margin:0 auto;text-align:center;vertical-align:middle;border-radius:20px;background-color:hsla(0,0%,100%,.06);z-index:2;position:absolute}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history{display:none;background-color:#fff;color:#444;position:absolute;width:196px;height:276px;padding:4px 2px;-webkit-box-shadow:0 2px 6px 0 rgba(0,0,0,.15);box-shadow:0 2px 6px 0 rgba(0,0,0,.15);cursor:auto;-webkit-transform:translateX(calc(-50% + 12px));transform:translateX(calc(-50% + 12px))}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list{height:268px;padding:0;overflow:hidden scroll;list-style:none}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list .history-item{height:24px;font-size:11px;line-height:24px}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list .history-item .tui-image-editor-history-item{position:relative;height:24px;cursor:pointer}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list .history-item .tui-image-editor-history-item svg{width:24px;height:24px}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list .history-item .tui-image-editor-history-item span{display:inline-block;width:128px;height:24px;text-align:left}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list .history-item .tui-image-editor-history-item .history-item-icon{display:inline-block;width:24px;height:24px;position:absolute;top:6px;left:6px}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list .history-item .tui-image-editor-history-item .history-item-checkbox{display:none;width:24px;height:24px;position:absolute;top:5px;right:-6px}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list .history-item.selected-item{background-color:hsla(0,0%,47%,.12)}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list .history-item.selected-item .history-item-checkbox{display:inline-block}.tui-image-editor-container .tui-image-editor-help-menu .tie-panel-history .history-list .history-item.disabled-item{color:#333;opacity:.3}.tui-image-editor-container .tui-image-editor-help-menu .opened .tie-panel-history{display:block}.tui-image-editor-container .tui-image-editor-help-menu .opened .tie-panel-history:before{content:"";position:absolute;display:inline-block;margin:0 auto;width:0;height:0}.tui-image-editor-container .filter-color-item{display:inline-block}.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox{display:block}.tui-image-editor-container .tui-image-editor-checkbox-wrap{display:inline-block!important;text-align:left}.tui-image-editor-container .tui-image-editor-checkbox-wrap.fixed-width{width:187px;white-space:normal}.tui-image-editor-container .tui-image-editor-checkbox{display:inline-block;margin:1px 0 1px 0}.tui-image-editor-container .tui-image-editor-checkbox input{width:14px;height:14px;opacity:0}.tui-image-editor-container .tui-image-editor-checkbox>label>span{color:#fff;height:14px;position:relative}.tui-image-editor-container .tui-image-editor-checkbox input+label:before,.tui-image-editor-container .tui-image-editor-checkbox>label>span:before{content:"";position:absolute;width:14px;height:14px;background-color:#fff;top:6px;left:-19px;display:inline-block;margin:0;text-align:center;font-size:11px;border:0;border-radius:2px;padding-top:1px;-webkit-box-sizing:border-box;box-sizing:border-box}.tui-image-editor-container .tui-image-editor-checkbox input[type=checkbox]:checked+span:before{background-size:cover;background-image:url('+g+')}.tui-image-editor-container .tui-image-editor-selectlist-wrap{position:relative}.tui-image-editor-container .tui-image-editor-selectlist-wrap select{width:100%;height:28px;margin-top:4px;border:0;outline:0;border-radius:0;border:1px solid #cbdbdb;background-color:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0 7px 0 10px}.tui-image-editor-container .tui-image-editor-selectlist-wrap .tui-image-editor-selectlist{display:none;position:relative;top:-1px;border:1px solid #ccc;background-color:#fff;border-top:0;padding:4px 0}.tui-image-editor-container .tui-image-editor-selectlist-wrap .tui-image-editor-selectlist li{display:block;text-align:left;padding:7px 10px;font-family:Noto Sans,sans-serif}.tui-image-editor-container .tui-image-editor-selectlist-wrap .tui-image-editor-selectlist li:hover{background-color:rgba(81,92,230,.05)}.tui-image-editor-container .tui-image-editor-selectlist-wrap:before{content:"";position:absolute;display:inline-block;width:14px;height:14px;right:5px;top:10px;background-image:url('+p+');background-size:cover}.tui-image-editor-container .tui-image-editor-selectlist-wrap select::-ms-expand{display:none}.tui-image-editor-container .tui-image-editor-virtual-range-bar .tui-image-editor-disabled,.tui-image-editor-container .tui-image-editor-virtual-range-pointer .tui-image-editor-disabled,.tui-image-editor-container .tui-image-editor-virtual-range-subbar .tui-image-editor-disabled{backbround-color:red}.tui-image-editor-container .tui-image-editor-range{position:relative;top:5px;width:166px;height:17px;display:inline-block}.tui-image-editor-container .tui-image-editor-virtual-range-bar{top:7px;position:absolute;width:100%;height:2px;background-color:#666}.tui-image-editor-container .tui-image-editor-virtual-range-subbar{position:absolute;height:100%;left:0;right:0;background-color:#d1d1d1}.tui-image-editor-container .tui-image-editor-virtual-range-pointer{position:absolute;cursor:pointer;top:-5px;left:0;width:12px;height:12px;background-color:#fff;border-radius:100%}.tui-image-editor-container .tui-image-editor-range-wrap{display:inline-block;margin-left:4px}.tui-image-editor-container .tui-image-editor-range-wrap.short .tui-image-editor-range{width:100px}.tui-image-editor-container .color-picker-control .tui-image-editor-range{width:108px;margin-left:10px}.tui-image-editor-container .color-picker-control .tui-image-editor-virtual-range-pointer{background-color:#333}.tui-image-editor-container .color-picker-control .tui-image-editor-virtual-range-bar{background-color:#ccc}.tui-image-editor-container .color-picker-control .tui-image-editor-virtual-range-subbar{background-color:#606060}.tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short{margin-top:-2px;margin-left:19px}.tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label{color:#8e8e8e;font-weight:400}.tui-image-editor-container .tui-image-editor-range-wrap label{vertical-align:baseline;font-size:11px;margin-right:7px;color:#fff}.tui-image-editor-container .tui-image-editor-range-value{cursor:default;width:40px;height:24px;outline:none;border-radius:2px;-webkit-box-shadow:none;box-shadow:none;border:1px solid #d5d5d5;text-align:center;background-color:#1c1c1c;color:#fff;font-weight:lighter;vertical-align:baseline;font-family:Noto Sans,sans-serif;margin-top:15px;margin-left:4px}.tui-image-editor-container .tui-image-editor-controls{position:absolute;background-color:#151515;width:100%;height:64px;display:table;bottom:0;z-index:2}.tui-image-editor-container .tui-image-editor-icpartition{display:inline-block;background-color:#444;width:1px;height:24px}.tui-image-editor-container.left .tui-image-editor-menu>.tui-image-editor-item[tooltip-content]:before{left:28px;top:11px;border-right:7px solid #2f2f2f;border-top:7px solid transparent;border-bottom:7px solid transparent}.tui-image-editor-container.left .tui-image-editor-menu>.tui-image-editor-item[tooltip-content]:after{top:7px;left:42px;white-space:nowrap}.tui-image-editor-container.left .tui-image-editor-submenu{left:0;height:100%;width:248px}.tui-image-editor-container.left .tui-image-editor-main-container{left:64px;width:calc(100% - 64px);height:100%}.tui-image-editor-container.left .tui-image-editor-controls{width:64px;height:100%;display:table}.tui-image-editor-container.left .tui-image-editor-menu,.tui-image-editor-container.right .tui-image-editor-menu{white-space:inherit}.tui-image-editor-container.left .tui-image-editor-submenu,.tui-image-editor-container.right .tui-image-editor-submenu{white-space:normal}.tui-image-editor-container.left .tui-image-editor-submenu>div,.tui-image-editor-container.right .tui-image-editor-submenu>div{vertical-align:middle}.tui-image-editor-container.left .tui-image-editor-controls li,.tui-image-editor-container.right .tui-image-editor-controls li{display:inline-block;margin:4px auto}.tui-image-editor-container.left .tui-image-editor-icpartition,.tui-image-editor-container.right .tui-image-editor-icpartition{position:relative;top:-7px;width:24px;height:1px}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition{display:block;width:75%;margin:auto}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition>div,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition>div{border-left:0;height:10px;border-bottom:1px solid #3c3c3c;width:100%;margin:0}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-submenu-align,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-submenu-align{margin-right:0}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-submenu-item li,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-submenu-item li{margin-top:15px}.tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-colorpicker-clearfix li,.tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-submenu-item .tui-colorpicker-clearfix li{margin-top:0}.tui-image-editor-container.left .tui-image-editor-checkbox-wrap.fixed-width,.tui-image-editor-container.right .tui-image-editor-checkbox-wrap.fixed-width{width:182px;white-space:normal}.tui-image-editor-container.left .tui-image-editor-range-wrap.tui-image-editor-newline label.range,.tui-image-editor-container.right .tui-image-editor-range-wrap.tui-image-editor-newline label.range{display:block;text-align:left;width:75%;margin:auto}.tui-image-editor-container.left .tui-image-editor-range,.tui-image-editor-container.right .tui-image-editor-range{width:136px}.tui-image-editor-container.right .tui-image-editor-menu>.tui-image-editor-item[tooltip-content]:before{left:-3px;top:11px;border-left:7px solid #2f2f2f;border-top:7px solid transparent;border-bottom:7px solid transparent}.tui-image-editor-container.right .tui-image-editor-menu>.tui-image-editor-item[tooltip-content]:after{top:7px;left:unset;right:43px;white-space:nowrap}.tui-image-editor-container.right .tui-image-editor-submenu{right:0;height:100%;width:248px}.tui-image-editor-container.right .tui-image-editor-main-container{right:64px;width:calc(100% - 64px);height:100%}.tui-image-editor-container.right .tui-image-editor-controls{right:0;width:64px;height:100%;display:table}.tui-image-editor-container.bottom .tui-image-editor-submenu .tui-image-editor-partition.only-left-right,.tui-image-editor-container.top .tui-image-editor-submenu .tui-image-editor-partition.only-left-right{display:none}.tui-image-editor-container.bottom .tui-image-editor-submenu>div{padding-bottom:24px}.tui-image-editor-container.top .color-picker-control .triangle{top:-8px;border-right:7px solid transparent;border-top:0;border-left:7px solid transparent;border-bottom:8px solid #fff}.tui-image-editor-container.top .tui-image-editor-size-wrap{height:100%}.tui-image-editor-container.top .tui-image-editor-main-container{bottom:0}.tui-image-editor-container.top .tui-image-editor-menu>.tui-image-editor-item[tooltip-content]:before{left:13px;border-top:0;border-bottom:7px solid #2f2f2f;top:33px}.tui-image-editor-container.top .tui-image-editor-menu>.tui-image-editor-item[tooltip-content]:after{top:38px}.tui-image-editor-container.top .tui-image-editor-submenu{top:0;bottom:auto}.tui-image-editor-container.top .tui-image-editor-submenu>div{padding-top:24px;vertical-align:top}.tui-image-editor-container.top .tui-image-editor-controls-buttons,.tui-image-editor-container.top .tui-image-editor-controls-logo{display:table-cell}.tui-image-editor-container.top .tui-image-editor-main{top:64px;height:calc(100% - 64px)}.tui-image-editor-container.top .tui-image-editor-controls{top:0;bottom:inherit}.tui-image-editor-container .tui-image-editor-help-menu.top{white-space:nowrap;width:506px;height:40px;top:8px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.tui-image-editor-container .tui-image-editor-help-menu.top .tie-panel-history{top:45px}.tui-image-editor-container .tui-image-editor-help-menu.top .opened .tie-panel-history:before{border-right:8px solid transparent;border-left:8px solid transparent;border-bottom:8px solid #fff;left:90px;top:-8px}.tui-image-editor-container .tui-image-editor-help-menu.top>.tui-image-editor-item[tooltip-content]:before{left:13px;top:35px;border:none;border-bottom:7px solid #2f2f2f;border-left:7px solid transparent;border-right:7px solid transparent}.tui-image-editor-container .tui-image-editor-help-menu.top>.tui-image-editor-item[tooltip-content]:after{top:41px;left:-4px;white-space:nowrap}.tui-image-editor-container .tui-image-editor-help-menu.top>.tui-image-editor-item[tooltip-content].opened:after,.tui-image-editor-container .tui-image-editor-help-menu.top>.tui-image-editor-item[tooltip-content].opened:before{content:none}.tui-image-editor-container .tui-image-editor-help-menu.bottom{white-space:nowrap;width:506px;height:40px;bottom:8px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.tui-image-editor-container .tui-image-editor-help-menu.bottom .tie-panel-history{bottom:45px}.tui-image-editor-container .tui-image-editor-help-menu.bottom .opened .tie-panel-history:before{border-right:8px solid transparent;border-left:8px solid transparent;border-top:8px solid #fff;left:90px;bottom:-8px}.tui-image-editor-container .tui-image-editor-help-menu.bottom>.tui-image-editor-item[tooltip-content]:before{left:13px;top:auto;bottom:36px;border:none;border-top:7px solid #2f2f2f;border-left:7px solid transparent;border-right:7px solid transparent}.tui-image-editor-container .tui-image-editor-help-menu.bottom>.tui-image-editor-item[tooltip-content]:after{top:auto;left:-4px;bottom:41px;white-space:nowrap}.tui-image-editor-container .tui-image-editor-help-menu.bottom>.tui-image-editor-item[tooltip-content].opened:after,.tui-image-editor-container .tui-image-editor-help-menu.bottom>.tui-image-editor-item[tooltip-content].opened:before{content:none}.tui-image-editor-container .tui-image-editor-help-menu.left{white-space:inherit;width:40px;height:506px;left:8px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.tui-image-editor-container .tui-image-editor-help-menu.left .tie-panel-history{left:140px;top:-4px}.tui-image-editor-container .tui-image-editor-help-menu.left .opened .tie-panel-history:before{border-top:8px solid transparent;border-bottom:8px solid transparent;border-right:8px solid #fff;left:-8px;top:14px}.tui-image-editor-container .tui-image-editor-help-menu.left .tui-image-editor-item{margin:4px auto;padding:6px 8px}.tui-image-editor-container .tui-image-editor-help-menu.left>.tui-image-editor-item[tooltip-content]:before{left:27px;top:11px;border:none;border-right:7px solid #2f2f2f;border-top:7px solid transparent;border-bottom:7px solid transparent}.tui-image-editor-container .tui-image-editor-help-menu.left>.tui-image-editor-item[tooltip-content]:after{top:7px;left:40px;white-space:nowrap}.tui-image-editor-container .tui-image-editor-help-menu.left>.tui-image-editor-item[tooltip-content].opened:after,.tui-image-editor-container .tui-image-editor-help-menu.left>.tui-image-editor-item[tooltip-content].opened:before{content:none}.tui-image-editor-container .tui-image-editor-help-menu.right{white-space:inherit;width:40px;height:506px;right:8px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.tui-image-editor-container .tui-image-editor-help-menu.right .tie-panel-history{right:-30px;top:-4px}.tui-image-editor-container .tui-image-editor-help-menu.right .opened .tie-panel-history:before{border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:8px solid #fff;right:-8px;top:14px}.tui-image-editor-container .tui-image-editor-help-menu.right .tui-image-editor-item{margin:4px auto;padding:6px 8px}.tui-image-editor-container .tui-image-editor-help-menu.right>.tui-image-editor-item[tooltip-content]:before{left:-6px;top:11px;border:none;border-left:7px solid #2f2f2f;border-top:7px solid transparent;border-bottom:7px solid transparent}.tui-image-editor-container .tui-image-editor-help-menu.right>.tui-image-editor-item[tooltip-content]:after{top:7px;left:auto;right:39px;white-space:nowrap}.tui-image-editor-container .tui-image-editor-help-menu.right>.tui-image-editor-item[tooltip-content].opened:after,.tui-image-editor-container .tui-image-editor-help-menu.right>.tui-image-editor-item[tooltip-content].opened:before{content:none}.tui-image-editor-container .tie-icon-add-button .tui-image-editor-button{min-width:42px}.tui-image-editor-container .svg_ic-helpmenu,.tui-image-editor-container .svg_ic-menu{width:24px;height:24px}.tui-image-editor-container .svg_ic-submenu{width:32px;height:32px}.tui-image-editor-container .svg_img-bi{width:257px;height:26px}.tui-image-editor-container .tui-image-editor-controls svg>use,.tui-image-editor-container .tui-image-editor-help-menu svg>use{display:none}.tui-image-editor-container .tui-image-editor-controls .enabled svg:hover>use.hover,.tui-image-editor-container .tui-image-editor-controls .normal svg:hover>use.hover,.tui-image-editor-container .tui-image-editor-help-menu .enabled svg:hover>use.hover,.tui-image-editor-container .tui-image-editor-help-menu .normal svg:hover>use.hover{display:block}.tui-image-editor-container .tui-image-editor-controls .active svg:hover>use.hover,.tui-image-editor-container .tui-image-editor-help-menu .active svg:hover>use.hover{display:none}.tui-image-editor-container .tui-image-editor-controls .active svg>use.active,.tui-image-editor-container .tui-image-editor-controls .enabled svg>use.enabled,.tui-image-editor-container .tui-image-editor-controls .on svg>use.hover,.tui-image-editor-container .tui-image-editor-controls .opened svg>use.hover,.tui-image-editor-container .tui-image-editor-controls svg>use.normal,.tui-image-editor-container .tui-image-editor-help-menu .active svg>use.active,.tui-image-editor-container .tui-image-editor-help-menu .enabled svg>use.enabled,.tui-image-editor-container .tui-image-editor-help-menu .on svg>use.hover,.tui-image-editor-container .tui-image-editor-help-menu .opened svg>use.hover,.tui-image-editor-container .tui-image-editor-help-menu svg>use.normal{display:block}.tui-image-editor-container .tui-image-editor-controls .active svg>use.normal,.tui-image-editor-container .tui-image-editor-controls .enabled svg>use.normal,.tui-image-editor-container .tui-image-editor-help-menu .active svg>use.normal,.tui-image-editor-container .tui-image-editor-help-menu .enabled svg>use.normal{display:none}.tui-image-editor-container .tui-image-editor-controls .help svg>use.disabled,.tui-image-editor-container .tui-image-editor-controls .help.enabled svg>use.normal,.tui-image-editor-container .tui-image-editor-help-menu .help svg>use.disabled,.tui-image-editor-container .tui-image-editor-help-menu .help.enabled svg>use.normal{display:block}.tui-image-editor-container .tui-image-editor-controls .help.enabled svg>use.disabled,.tui-image-editor-container .tui-image-editor-help-menu .help.enabled svg>use.disabled{display:none}.tui-image-editor-container .tui-image-editor-controls:hover{z-index:3}.tui-image-editor-container div.tui-colorpicker-clearfix{width:159px;height:28px;border:1px solid #d5d5d5;border-radius:2px;background-color:#f5f5f5;margin-top:6px;padding:4px 7px 4px 7px}.tui-image-editor-container .tui-colorpicker-palette-hex{width:114px;background-color:#f5f5f5;border:0;font-size:11px;margin-top:2px;font-family:Noto Sans,sans-serif}.tui-image-editor-container .tui-colorpicker-palette-hex[value=""]+.tui-colorpicker-palette-preview,.tui-image-editor-container .tui-colorpicker-palette-hex[value="#ffffff"]+.tui-colorpicker-palette-preview{border:1px solid #ccc}.tui-image-editor-container .tui-colorpicker-palette-hex[value=""]+.tui-colorpicker-palette-preview{background-size:cover;background-image:url('+f+')}.tui-image-editor-container .tui-colorpicker-palette-preview{border-radius:100%;float:left;width:17px;height:17px;border:0}.tui-image-editor-container .color-picker-control{position:absolute;display:none;z-index:99;width:192px;background-color:#fff;-webkit-box-shadow:0 3px 22px 6px rgba(0,0,0,.15);box-shadow:0 3px 22px 6px rgba(0,0,0,.15);padding:16px;border-radius:2px}.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-toggle-slider{display:none}.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-button{border:0;border-radius:100%;margin:2px;background-size:cover;font-size:1px}.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-button[title=""],.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-button[title="#ffffff"]{border:1px solid #ccc}.tui-image-editor-container .color-picker-control .triangle{width:0;height:0;border-right:7px solid transparent;border-top:8px solid #fff;border-left:7px solid transparent;position:absolute;bottom:-8px;left:84px}.tui-image-editor-container .color-picker-control .tui-colorpicker-container,.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-container,.tui-image-editor-container .color-picker-control .tui-colorpicker-palette-container ul{width:100%;height:auto}.tui-image-editor-container .filter-color-item .color-picker-control label{font-color:#333;font-weight:400;margin-right:7pxleft}.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox{margin-top:0}.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox input+label:before,.tui-image-editor-container .filter-color-item .tui-image-editor-checkbox>label:before{left:-16px}.tui-image-editor-container .color-picker{width:100%;height:auto}.tui-image-editor-container .color-picker-value{width:32px;height:32px;border:0;border-radius:100%;margin:auto;margin-bottom:1px}.tui-image-editor-container .color-picker-value.transparent{border:1px solid #cbcbcb;background-size:cover;background-image:url('+f+")}.tui-image-editor-container .color-picker-value+label{color:#fff}.tui-image-editor-container .tui-image-editor-submenu svg>use{display:none}.tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype=icon-arrow] svg>use.active,.tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype=icon-arrow-2] svg>use.active,.tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype=icon-arrow-3] svg>use.active,.tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype=icon-bubble] svg>use.active,.tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype=icon-heart] svg>use.active,.tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype=icon-location] svg>use.active,.tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype=icon-polygon] svg>use.active,.tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype=icon-star] svg>use.active,.tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype=icon-star-2] svg>use.active,.tui-image-editor-container .tui-image-editor-submenu svg>use.normal{display:block}.tie-draw-line-select-button.free .tui-image-editor-button.free svg>use.normal,.tie-draw-line-select-button.line .tui-image-editor-button.line svg>use.normal{display:none}.tie-draw-line-select-button.free .tui-image-editor-button.free svg>use.active,.tie-draw-line-select-button.line .tui-image-editor-button.line svg>use.active{display:block}.tie-flip-button.flipX .tui-image-editor-button.flipX svg>use.normal,.tie-flip-button.flipY .tui-image-editor-button.flipY svg>use.normal,.tie-flip-button.resetFlip .tui-image-editor-button.resetFlip svg>use.normal{display:none}.tie-flip-button.flipX .tui-image-editor-button.flipX svg>use.active,.tie-flip-button.flipY .tui-image-editor-button.flipY svg>use.active,.tie-flip-button.resetFlip .tui-image-editor-button.resetFlip svg>use.active{display:block}.tie-mask-apply.apply.active .tui-image-editor-button.apply label{color:#fff}.tie-mask-apply.apply.active .tui-image-editor-button.apply svg>use.active{display:block}.tie-crop-button .tui-image-editor-button.apply,.tie-crop-preset-button .tui-image-editor-button.apply{margin-right:24px}.tie-crop-button .tui-image-editor-button.apply.active svg>use.active,.tie-crop-button .tui-image-editor-button.preset.active svg>use.active,.tie-crop-preset-button .tui-image-editor-button.apply.active svg>use.active,.tie-crop-preset-button .tui-image-editor-button.preset.active svg>use.active{display:block}.tie-resize-button .tui-image-editor-button.apply,.tie-resize-preset-button .tui-image-editor-button.apply{margin-right:24px}.tie-resize-button .tui-image-editor-button.apply.active svg>use.active,.tie-resize-button .tui-image-editor-button.preset.active svg>use.active,.tie-resize-preset-button .tui-image-editor-button.apply.active svg>use.active,.tie-resize-preset-button .tui-image-editor-button.preset.active svg>use.active{display:block}.tie-shape-button.circle .tui-image-editor-button.circle svg>use.normal,.tie-shape-button.rect .tui-image-editor-button.rect svg>use.normal,.tie-shape-button.triangle .tui-image-editor-button.triangle svg>use.normal{display:none}.tie-shape-button.circle .tui-image-editor-button.circle svg>use.active,.tie-shape-button.rect .tui-image-editor-button.rect svg>use.active,.tie-shape-button.triangle .tui-image-editor-button.triangle svg>use.active,.tie-text-align-button.tie-text-align-center .tui-image-editor-button.center svg>use.active,.tie-text-align-button.tie-text-align-left .tui-image-editor-button.left svg>use.active,.tie-text-align-button.tie-text-align-right .tui-image-editor-button.right svg>use.active,.tie-text-effect-button .tui-image-editor-button.active svg>use.active{display:block}.tie-icon-image-file,.tie-mask-image-file{opacity:0;position:absolute;width:100%;height:100%;border:1px solid green;cursor:inherit;left:0;top:0}.tie-zoom-button.flipX .tui-image-editor-button.flipX svg>use.normal,.tie-zoom-button.flipY .tui-image-editor-button.flipY svg>use.normal,.tie-zoom-button.resetFlip .tui-image-editor-button.resetFlip svg>use.normal{display:none}.tie-zoom-button.flipX .tui-image-editor-button.flipX svg>use.active,.tie-zoom-button.flipY .tui-image-editor-button.flipY svg>use.active,.tie-zoom-button.resetFlip .tui-image-editor-button.resetFlip svg>use.active{display:block}.tui-image-editor-container.top.tui-image-editor-top-optimization .tui-image-editor-controls ul{text-align:right}.tui-image-editor-container.top.tui-image-editor-top-optimization .tui-image-editor-controls-logo{display:none}",""]),e["default"]=d},59263:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(94054),i.b),u=new URL(i(97099),i.b),h=new URL(i(16897),i.b),d=new URL(i(75292),i.b),g=new URL(i(37311),i.b),p=new URL(i(9062),i.b),f=new URL(i(80578),i.b),m=a()(o()),v=l()(c),b=l()(u),x=l()(h),y=l()(d),_=l()(g),w=l()(p),k=l()(f);m.push([t.id,".cloud-knowledge-file-dialog{left:50%;top:50%;transform:translate(-50%,-50%);margin:0!important;box-sizing:border-box;text-align:left;border-radius:8px;border:1px solid var(--floating_stroke_grey_1,#f5f5f5);background:var(--bg_pop_white_1,#fff);box-shadow:0 2px 20px 0 rgba(22,47,82,.1);display:flex;min-width:400px;width:50%;max-width:600px;padding:16px 18px 20px 24px!important;flex-direction:column;align-items:flex-start;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC}.cloud-knowledge-file-dialog .el-dialog__header{padding:0;width:100%}.cloud-knowledge-file-dialog .el-dialog__header .info{width:100%;display:flex;flex-direction:column;padding-bottom:16px}.cloud-knowledge-file-dialog .el-dialog__header .info .header{width:100%;display:flex;justify-content:space-between;align-items:center}.cloud-knowledge-file-dialog .el-dialog__header .info .header .header-left{display:flex;align-items:center;gap:4px}.cloud-knowledge-file-dialog .el-dialog__header .info .header .header-left .text{color:var(--txt_icon_black_1,#1a2029);font-size:20px;font-weight:600;line-height:28px}.cloud-knowledge-file-dialog .el-dialog__header .info .header .header-left .icon{width:42px;height:28px;background:url("+v+") no-repeat;background-size:cover}.cloud-knowledge-file-dialog .el-dialog__header .info .header .header-left .icon.is-vip{background-image:url("+b+")}.cloud-knowledge-file-dialog .el-dialog__header .info .header .cancel-icon{width:32px;height:32px;background:url("+x+") 50% no-repeat;background-size:20px 20px;cursor:pointer}.cloud-knowledge-file-dialog .el-dialog__header .info .header .cancel-icon.cancel-icon-dark{background:url("+y+") 50% no-repeat;background-size:20px 20px}.cloud-knowledge-file-dialog .el-dialog__header .info .header .cancel-icon:hover{border-radius:8px;background-color:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box{display:flex;align-items:center;gap:24px}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box .progress-box{display:flex;flex-direction:column;align-items:flex-start;gap:4px}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box .progress-box .value{color:var(--txt_icon_black_1,#1a2029);font-size:12px;font-weight:400}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box .progress-box .el-progress{width:100%;height:3px}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box .progress-box .el-progress .el-progress-bar__outer{height:3px!important;background-color:#d8dadd}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box .progress-box .el-progress.is-vip .el-progress-bar__outer{background-color:#c6d3ff}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box .vip-rights-button{box-sizing:border-box;display:flex;height:32px;padding:6px 12px;align-items:center;gap:4px;border-radius:45px;background:linear-gradient(70deg,#f2cd6f .2%,#f7cf6a 63.08%,#ffefdb 122.81%);cursor:pointer}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box .vip-rights-button .text{color:#532f0e;font-size:12px;font-weight:600;line-height:22px}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box .vip-rights-button .icon{width:8px;height:12px;background:url("+_+") no-repeat;background-size:cover}.cloud-knowledge-file-dialog .el-dialog__header .vip-progress-box .vip-rights-button:hover{color:#6d4e32;background:linear-gradient(0deg,hsla(0,0%,100%,.2),hsla(0,0%,100%,.2)),linear-gradient(70deg,#f2cd6f .2%,#f7cf6a 63.08%,#ffefdb 122.81%)}.cloud-knowledge-file-dialog .el-dialog__body,.cloud-knowledge-file-dialog .el-dialog__footer{width:100%;padding:0;display:flex;justify-content:center;align-items:center}.cloud-knowledge-file-dialog .el-dialog__footer{align-self:center;flex-direction:column}.cloud-knowledge-file-dialog .el-dialog__footer .content{display:flex;flex-direction:column;align-items:center;width:100%;height:365px}.cloud-knowledge-file-dialog .el-dialog__footer .content .th-header{box-sizing:border-box;width:100%;padding:6px 24px;text-align:left;background:var(--bg_stroke_grey_3_5,#f8f8f8);color:var(--txt_icon_grey_5,#838a95);font-size:12px;font-weight:600;line-height:18px}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper{height:100%;width:100%;display:flex;flex-direction:column}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper::-webkit-scrollbar{width:4px}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper::-webkit-scrollbar-track{border-radius:4px}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper::-webkit-scrollbar-thumb{background:transparent;border-radius:4px}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper:hover::-webkit-scrollbar-thumb{background:hsla(217,8%,55%,.5)}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list{width:100%;box-sizing:border-box;align-self:center;display:flex;flex-direction:column;align-items:center}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item{box-sizing:border-box;width:100%;display:flex;padding:10px 0;padding-left:24px;align-items:center;background:var(--bg_pop_white_1,#fff);gap:16px;border-bottom:1px solid var(--bg_grey_1,#f2f4f6);border-radius:4px;cursor:pointer}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .el-checkbox{display:flex;align-items:center;width:100%}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .el-checkbox .el-checkbox__label{width:calc(100% - 24px);display:flex}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .file-info{width:100%;flex:1;display:flex;align-items:center;gap:16px;position:relative}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .file-info .icon{width:28px;height:28px;background:url("+w+") no-repeat;background-size:cover;flex-shrink:0}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .file-info .icon.image{border-radius:8px}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .file-info .file-name{width:200px;flex:1;display:flex;flex-direction:column;align-items:flex-start;flex-wrap:nowrap}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .file-info .file-name .name{width:100%;display:flex;align-items:center;gap:3px}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .file-info .file-name .name .is-invalid{display:flex;height:16px;padding:3px 8px;justify-content:center;align-items:center;gap:4px;border-radius:8px;border:1px solid #fff;background:#fef1ef;color:var(--warn_lable_red_2,#a9433c);text-align:center;font-size:10px;font-weight:600;line-height:10px}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .file-info .file-name .name .text{display:inline-block;word-break:break-all;text-align:left;overflow:hidden;text-overflow:ellipsis;color:var(--txt_icon_black_1,#1a2029);font-size:14px;font-weight:400;line-height:22px}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item .file-info .file-name .file-time{width:160px;color:var(--txt_icon_grey_5,#838a95);font-size:10px;font-weight:400;line-height:18px;align-self:flex-start;text-align:left}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item:hover{background:var(--bg_stroke_grey_3_5,#f8f8f8)}.cloud-knowledge-file-dialog .el-dialog__footer .content .file-list-wrapper .file-list .file-item:hover .file-info .action{display:flex}.cloud-knowledge-file-dialog .el-dialog__footer .content .empty-box{width:100%;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;justify-content:center;align-items:center;gap:16px;flex:1}.cloud-knowledge-file-dialog .el-dialog__footer .content .empty-box .icon{width:90px;height:90px;background:url("+k+") no-repeat;background-size:cover}.cloud-knowledge-file-dialog .el-dialog__footer .content .empty-box .tip{color:var(--txt_icon_grey_5,#838a95);text-align:center;font-size:14px;font-weight:600;line-height:24px}.cloud-knowledge-file-dialog .el-dialog__footer .content .empty-box .tip .hl-blue{color:var(--txt_stroke_blue_1,#2454ff);cursor:pointer}.cloud-knowledge-file-dialog .el-dialog__footer .content .empty-box .tip .hl-blue:hover{color:#204ce5}.cloud-knowledge-file-dialog .el-dialog__footer .button{box-sizing:border-box;display:flex;width:180px;height:40px;padding:0 24px;justify-content:center;align-items:center;gap:10px;border-radius:8px;cursor:pointer}.cloud-knowledge-file-dialog .el-dialog__footer .button.confirm-button{margin-top:16px;background:var(--bg_blue_1,#2454ff);color:#fff;font-size:16px;font-weight:600;line-height:28px}.cloud-knowledge-file-dialog .el-dialog__footer .button.confirm-button:hover{background:linear-gradient(0deg,rgba(0,0,0,.1),rgba(0,0,0,.1)),#2454ff}.cloud-knowledge-file-dialog .el-dialog__footer .button.confirm-button.is-disabled{opacity:.3}.cloud-knowledge-file-dialog .el-checkbox__input.is-checked .el-checkbox__inner{background-color:#2454ff!important;border-color:#2454ff!important}",""]),e["default"]=m},862:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".first-debug-tips[data-v-ca92b9d4]{position:relative;width:259px;margin-left:10px;z-index:9999}.first-debug-tips .first-debug[data-v-ca92b9d4]{width:100%;height:74px}.first-debug-tips .first-debug-close[data-v-ca92b9d4]{width:24px;height:24px;position:absolute;right:0;top:-5px;cursor:pointer}.firstDebug-fade-enter-active[data-v-ca92b9d4],.firstDebug-fade-leave-active[data-v-ca92b9d4]{transition:opacity .5s}.firstDebug-fade-enter[data-v-ca92b9d4],.firstDebug-fade-leave-to[data-v-ca92b9d4]{opacity:0}",""]),e["default"]=s},6236:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".file-slice-down[data-v-5ae87268]{display:flex;align-items:center}.shimGrey[data-v-5ae87268]:hover{background:none!important}.shimGrey img[data-v-5ae87268]{opacity:.3}.shim[data-v-5ae87268]{width:28px;height:28px;margin-right:8px;color:#999;font-size:16px;text-align:center;line-height:20px;border-radius:8px;padding:6px;display:flex;align-items:center;justify-content:center;opacity:.5;cursor:not-allowed}.shim img[data-v-5ae87268]{width:16px;height:16px}.shim.thumbs-selecting[data-v-5ae87268]{background:rgba(26,32,41,.06)}.shim[data-v-5ae87268]:hover{background:var(--hover_icon_grey_1,#434346)}.shim[data-v-5ae87268]:last-child{margin-right:0}.shim.canuse[data-v-5ae87268]{opacity:1;cursor:pointer}[data-v-5ae87268] .el-popover__reference-wrapper .shim{display:block}",""]),e["default"]=s},38598:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(18385),i.b),u=a()(o()),h=l()(c);u.push([t.id,".iframe-container[data-v-a4332d18]{top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:10000}.iframe-container .iframe-style[data-v-a4332d18]{width:100%;height:100%}.iframe-container .close-btn[data-v-a4332d18]{position:absolute;top:33px;left:32px;width:42px;height:42px;background-image:url("+h+");background-repeat:no-repeat;background-size:cover;flex:0 0 42px}.iframe-container .close-btn[data-v-a4332d18]:hover{cursor:pointer}",""]),e["default"]=u},16241:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".interact-container[data-v-7339bc8f]{height:20px}.thumbs-up[data-v-7339bc8f]{color:transparent}.interact[data-v-7339bc8f]{margin-top:0;position:relative;z-index:1}.interact_reset_padding[data-v-7339bc8f]{padding-top:0!important}.line[data-v-7339bc8f]{height:16px;width:1px;border-right:var(--txt_icon_black_1,#1a2029) 1px solid;margin:auto;margin-right:8px;opacity:.3}",""]),e["default"]=s},58548:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".regenerate[data-v-c8311c8e]{display:flex;align-items:center;gap:8px}.btn[data-v-c8311c8e]{width:20px;height:20px;cursor:pointer;color:#999;font-size:16px;text-align:center;line-height:20px;border:1px solid transparent;border-radius:4px}.btn[data-v-c8311c8e]:hover{background-color:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.indicator[data-v-c8311c8e]{color:var(--txt_icon_black_1);font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:600;line-height:20px;width:20px;display:inline-block}.disabled[data-v-c8311c8e]{opacity:.3}.disabled[data-v-c8311c8e]:hover{background:transparent}",""]),e["default"]=s},2030:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".copy[data-v-6b3dad21]{display:flex;align-items:center}.copy .shim[data-v-6b3dad21]:hover{border-radius:8px;background:var(--hover_icon_grey_1,#434346)}.shimGrey[data-v-6b3dad21]:hover{background:none!important}.shimGrey img[data-v-6b3dad21]{opacity:.3}",""]),e["default"]=s},62010:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".down[data-v-1d32b5a8]{display:flex;align-items:center}.shimGrey[data-v-1d32b5a8]:hover{background:none!important}.shimGrey img[data-v-1d32b5a8]{opacity:.3}[data-v-1d32b5a8] .thumbs-down-popover{border-radius:8px;padding:0;border:0;margin-top:40px}[data-v-1d32b5a8] .thumbs-down-popover .thumbs-up-container-outer .thumbs-up-container{position:static}[data-v-1d32b5a8] .thumbs-down-popover .thumbs-up-container-outer .thumbs-up-container .submit-button{text-align:center}[data-v-1d32b5a8] .el-popover__reference-wrapper .shim{display:block}",""]),e["default"]=s},86049:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".regenerate[data-v-b5803b0a]{display:flex;align-items:center}.shimGrey[data-v-b5803b0a]:hover{background:none!important}.shimGrey img[data-v-b5803b0a]{opacity:.3}",""]),e["default"]=s},34163:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".share[data-v-6d5c6b19]{display:flex;align-items:center}.shimGrey[data-v-6d5c6b19]:hover{background:none!important}.shimGrey img[data-v-6d5c6b19]{opacity:.3}",""]),e["default"]=s},4127:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(11930),i.b),u=a()(o()),h=l()(c);u.push([t.id,".code-box .loading .icon[data-v-490d2b4c]{background-image:url(https://sfile.chatglm.cn/chatglm/web/markdown_loading_1692873581597.gif);background-repeat:no-repeat;background-size:cover;display:inline-block;width:17px;height:17px;transform:translateY(4px)}.code-box .loading .icon.icon-dark[data-v-490d2b4c]{background-image:url("+h+");background-repeat:no-repeat;background-size:cover}.code-box .stop-answer-default[data-v-490d2b4c]{color:#b0b7c0;margin-bottom:16px}",""]),e["default"]=u},92041:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(90741),i.b),u=new URL(i(87013),i.b),h=new URL(i(89287),i.b),d=new URL(i(78077),i.b),g=new URL(i(61624),i.b),p=new URL(i(46669),i.b),f=a()(o()),m=l()(c),v=l()(u),b=l()(h),x=l()(d),y=l()(g),_=l()(p);f.push([t.id,".answer-content-wrap[data-v-2efe711e]{font-family:PingFang SC;font-style:normal}.answer-content-wrap+.answer-content-wrap.code[data-v-2efe711e]{margin-top:16px}.answer-content-wrap .searching[data-v-2efe711e]{background:url("+m+") no-repeat 100% 100%;background-position:50%;background-size:cover;width:20px;height:20px}.answer-content-wrap .searching.searching-dark[data-v-2efe711e]{background:url("+v+") no-repeat 100% 100%;background-position:50%;background-size:cover}.answer-content-wrap .searched[data-v-2efe711e]{background:url("+b+") no-repeat 100% 100%;background-position:50%;background-size:cover;width:20px;height:20px}.answer-content-wrap .searched.search-stop[data-v-2efe711e]{background:url("+x+") no-repeat 100% 100%;background-position:50%;background-size:cover}.answer-content-wrap .searched.searched-dark[data-v-2efe711e]{background:url("+y+") no-repeat 100% 100%;background-position:50%;background-size:cover}.answer-content-wrap .searched.search-stop-dark[data-v-2efe711e]{background:url("+_+") no-repeat 100% 100%;background-position:50%;background-size:cover}.answer-content-wrap .text-search-container[data-v-2efe711e]{display:flex;align-items:center;box-sizing:border-box;padding-right:4px}.answer-content-wrap .text-search-container[data-v-2efe711e]:hover{cursor:pointer;background:var(--angent_special_grey_1,#f6f7f9);border-radius:6px}.answer-content-wrap .text-search-container i[data-v-2efe711e]{margin-left:2px}.answer-content-wrap .title.isSearch[data-v-2efe711e]{color:#464e94}.answer-content-wrap .title.isSearch-dark[data-v-2efe711e]{color:hsla(0,0%,100%,.95)}.answer-content-wrap .title.stop[data-v-2efe711e]{color:var(--txt_icon_black_2,#4f5866)}.is-expend[data-v-2efe711e]{margin-top:16px}.answer-content-wrap[data-v-2efe711e]{margin-bottom:16px}.answer-content-wrap .answer-status-wrap[data-v-2efe711e]{display:flex;align-items:center}.answer-content-wrap span.source-item[data-v-2efe711e]{display:inline-block;border-radius:14px;width:14px;height:14px;text-align:center;font-size:10px;color:var(--txt_icon_white_7,#fff);box-sizing:border-box;margin-left:3px;margin-right:3px}",""]),e["default"]=f},3432:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".answer-content-wrap[data-v-8ded7a40]{font-family:PingFang SC;font-style:normal}",""]),e["default"]=s},84882:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(19975),i.b),u=new URL(i(78673),i.b),h=a()(o()),d=l()(c),g=l()(u);h.push([t.id,".markdown-body img.source-img{background:none;width:6px!important;height:16px!important;flex:0 0 6px;margin-left:4px}.markdown-body img.shuzijiaobiao{background:none;width:14px!important;height:14px!important;max-width:none}.answer-content-wrap{color:var(--txt_icon_black_1,hsla(0,0%,100%,.95))}.answer-content-wrap span.source-item{cursor:pointer;border-radius:14px;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:24px;height:18px;text-align:center;color:var(--bg_blue_2,rgba(36,84,255,.06));position:relative;box-sizing:border-box;display:inline-block}.answer-content-wrap span.source-item .source-text-flex{display:flex}.answer-content-wrap span.source-item .source-zhanweifu-ai-search{display:none;width:220px;padding:12px;position:absolute;bottom:18px;box-sizing:border-box;left:0;z-index:1000;border-radius:8px;border:1px solid var(--floating_stroke_grey_1,#f5f5f5);background:var(--bg_floating_white_1,#fff);box-shadow:0 12px 40px 0 rgba(26,32,41,.12)}.answer-content-wrap span.source-item .source-zhanweifu-ai-search:hover{display:block;background:linear-gradient(0deg,var(--bg_grey_1,#f6f7f9) 0,var(--bg_grey_1,#f6f7f9) 100%),#fff}.answer-content-wrap span.source-item .source-zhanweifu-ai-search .aisearch-source-text-flex{display:flex;flex-direction:column;align-items:flex-start;gap:6px}.answer-content-wrap span.source-item .source-zhanweifu-ai-search .aisearch-source-text-flex .aisearch-source-title{overflow:hidden;color:var(--txt_icon_black_1,#1a2029);text-overflow:ellipsis;font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:600;line-height:20px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;align-self:stretch;text-align:left}.answer-content-wrap span.source-item .source-zhanweifu-ai-search .aisearch-source-text-flex .aisearch-source-name-container{display:flex;align-items:center;gap:4px}.answer-content-wrap span.source-item .source-zhanweifu-ai-search .aisearch-source-text-flex .aisearch-source-name-container .aisearch-source-icon{width:12px;height:12px;background-repeat:no-repeat;background-size:cover;border-radius:6px;background-image:url("+d+")}.answer-content-wrap span.source-item .source-zhanweifu-ai-search .aisearch-source-text-flex .aisearch-source-name-container .aisearch-source-name{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;flex:1 0 0;overflow:hidden;color:var(--txt_icon_grey_5,#838a95);text-overflow:ellipsis;font-family:PingFang SC;font-size:10px;font-style:normal;font-weight:400;line-height:14px;max-width:140px;text-align:left;word-break:break-all}.answer-content-wrap span.source-item .source-zhanweifu{display:none;position:absolute;white-space:nowrap;bottom:18px;height:100px;height:36px;max-width:240px;border-radius:6px;background:#363739;color:#1a2029;padding:10px 10px 20px;left:0;box-sizing:border-box;box-shadow:0 4px 12px 0 rgba(17,49,95,.08);z-index:1000}.answer-content-wrap span.source-item .source-zhanweifu:hover{background:#434346}.answer-content-wrap span.source-item .source-zhanweifu .source-text-container{line-height:15px;align-items:center;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer;color:var(--txt_icon_white_7,#fff);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:400}.answer-content-wrap span.source-item:hover{transition:all 1s linear}.answer-content-wrap span.source-item:hover .source-zhanweifu,.answer-content-wrap span.source-item:hover .source-zhanweifu-ai-search{display:block}.answer-content-wrap span.source-item .source-item-num{position:relative;display:inline-flex;border-radius:8px;width:16px;height:16px;align-items:center;justify-content:center;top:-2px;background:var(--bg_blue_2,rgba(36,84,255,.06));color:var(--txt_icon_black_2,#4f5866);font-size:10px;line-height:15px;font-weight:600}.answer-content-wrap span.source-item .source-item-num:hover{background:var(--bg-lable_grey_216,rgba(79,88,102,.16))}.answer-content-wrap .iframe-link{display:flex;width:-moz-fit-content;width:fit-content;margin:4px 0;height:36px;padding:10px 8px;align-items:center;gap:6px;box-sizing:border-box;border-radius:8px;border:1px solid var(--box_stroke_grey_1,#d3d7dd)}.answer-content-wrap .iframe-link .iframe-btn-text{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:20px}.answer-content-wrap .iframe-link .iframe-right-arrow{width:9px;height:16px;background-repeat:no-repeat;background-size:cover;background-image:url("+g+")}.answer-content-wrap .iframe-link:hover{cursor:pointer;border:1px solid var(--box_stroke_black_2,#1a2029)}",""]),e["default"]=h},11558:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".result-top[data-v-a87d84e2]{height:36px;box-sizing:border-box;width:100%;padding:6px 12px;justify-content:space-between;border-radius:8px 8px 0 0;background:var(--hover_icon_grey_2,rgba(79,88,102,.08));text-align:left;font-weight:600}.result-top[data-v-a87d84e2],.result-top .copy-button[data-v-a87d84e2]{display:flex;align-items:center;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:12px;font-style:normal;line-height:20px}.result-top .copy-button[data-v-a87d84e2]{position:absolute;right:10px;padding:2px 8px;justify-content:center;gap:2px;border-radius:6px;background:hsla(0,0%,100%,.6);font-weight:400}.result-top .copy-button[data-v-a87d84e2]:hover{color:var(--txt_stroke_blue_1,#2454ff);cursor:pointer}.md-body-result[data-v-a87d84e2]{background:#f8fafd;padding:12px 30px;border-radius:0 0 8px 8px;background-color:var(--bg_grey_1,#252728);margin-bottom:20px}",""]),e["default"]=s},18677:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".img-answer-content-wrap[data-v-e5279fda]{margin-top:16px}.img-answer-content-wrap .img-answer-list[data-v-e5279fda]{display:flex;flex-wrap:wrap;max-width:500px}.img-answer-content-wrap .img-answer-list .img-answer-item[data-v-e5279fda]:nth-child(2n){padding-left:8px}.img-answer-content-wrap .img-answer-list .img-answer-item[data-v-e5279fda]:nth-child(3),.img-answer-content-wrap .img-answer-list .img-answer-item[data-v-e5279fda]:nth-child(4){padding-top:8px}.img-answer-content-wrap .text-to-image-desc[data-v-e5279fda]{text-align:left;padding-top:20px}.img-answer-content-wrap .text-to-image-desc .recomend-text[data-v-e5279fda]{cursor:pointer;color:var(--txt_stroke_blue_1,#2454ff)}.img-answer-content-wrap .text-to-image-desc span[data-v-e5279fda]{color:var(--txt_icon_black_1,#1a2029);font-size:15px;font-weight:400;line-height:27px}.img-answer-content-wrap .text-to-image-senitive[data-v-e5279fda]{text-align:left}.img-answer-content-wrap .text-to-image-senitive span[data-v-e5279fda]{color:var(--txt_icon_black_1,#1a2029);font-size:15px;font-weight:400;line-height:27px}",""]),e["default"]=s},32694:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(91599),i.b),u=new URL(i(16476),i.b),h=new URL(i(23432),i.b),d=new URL(i(43288),i.b),g=new URL(i(35833),i.b),p=new URL(i(88405),i.b),f=a()(o()),m=l()(c),v=l()(u),b=l()(h),x=l()(d),y=l()(g),_=l()(p);f.push([t.id,".search-loading-container[data-v-54cee6f4]{display:flex;align-items:center;gap:8px;margin-bottom:8px;padding:4px 8px}.search-loading-container .loading-icon[data-v-54cee6f4]{width:20px;height:20px;background-image:url("+m+");background-repeat:no-repeat;background-size:cover}.search-loading-container .loading-icon-dark[data-v-54cee6f4]{background-image:url("+v+")}.search-loading-container .loading-text[data-v-54cee6f4]{text-align:center;font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:24px;background:linear-gradient(270deg,#1a2029 -64.79%,rgba(26,32,41,.6) 34.02%,#1a2029 116.52%);background-size:250%;background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:move-54cee6f4 1s linear infinite}.search-loading-container .loading-text-dark[data-v-54cee6f4]{background:linear-gradient(270deg,#fff -40.79%,hsla(0,0%,100%,.6) 34.02%,#fff 130.52%);background-size:250%;-webkit-background-clip:text;background-clip:text}.search-loading-container .expand-btn[data-v-54cee6f4]{width:20px;height:20px;background-repeat:no-repeat;background-size:cover;background-image:url("+b+")}.search-loading-container .expand-btn-dark[data-v-54cee6f4]{background-image:url("+x+")}.search-loading-container .fold-btn[data-v-54cee6f4]{background-image:url("+y+")}.search-loading-container .fold-btn-dark[data-v-54cee6f4]{background-image:url("+_+")}@keyframes move-54cee6f4{0%{background-position:0 50%}to{background-position:100% 50%}}",""]),e["default"]=f},70895:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(34264),i.b),u=new URL(i(89287),i.b),h=new URL(i(61624),i.b),d=new URL(i(30311),i.b),g=new URL(i(88509),i.b),p=a()(o()),f=l()(c),m=l()(u),v=l()(h),b=l()(d),x=l()(g);p.push([t.id,".action-result-wrap[data-v-37bdb19e]{padding:0 12px 0 0}.action-result-wrap .action-result-content[data-v-37bdb19e]{background-color:var(--bg_grey_1,#f6f7f9);border-radius:12px;margin-top:8px;margin-top:4px}.action-result-wrap .action-result-content .header[data-v-37bdb19e]{border-radius:8px 8px 0 0;background:var(--hover_icon_grey_2,rgba(79,88,102,.08));color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:600;line-height:36px}.action-result-wrap .title[data-v-37bdb19e]{font-weight:600;padding:0 2px 0 7px;color:var(--txt_icon_black_1,#1a2029)}.action-result-wrap .title.search-stop[data-v-37bdb19e]{color:var(--txt_icon_grey_6,#b0b7c0)}.action-result-wrap .action-status-wrap[data-v-37bdb19e]{display:flex;flex-direction:row;align-items:flex-start;margin-top:4px}.action-result-wrap .action-status-wrap .content[data-v-37bdb19e]{padding-right:4px;color:var(--txt_icon_black_1,hsla(0,0%,100%,.95))}.action-result-wrap .action-status-wrap .content.flex-y-center[data-v-37bdb19e]{align-items:flex-start}.action-result-wrap .action-status-wrap .content .text[data-v-37bdb19e]{font-weight:700;margin-top:6px}.action-result-wrap .action-status-wrap .content .text.stop[data-v-37bdb19e]{color:var(--txt_icon_grey_6,#b0b7c0)}.action-result-wrap .action-status-wrap .content[data-v-37bdb19e]:hover{cursor:pointer;background-color:var(--bg_grey_1,#f6f7f9);border-radius:6px}.action-result-wrap .action-status-wrap .searching[data-v-37bdb19e]{background:url("+f+") no-repeat 100% 100%;background-position:50%;background-size:cover;width:20px;height:20px}.action-result-wrap .action-status-wrap .searched[data-v-37bdb19e]{background:url("+m+") no-repeat 100% 100%;background-position:50%;background-size:cover;width:22px;height:20px;margin-top:3px}.action-result-wrap .action-status-wrap .searched.seatched-dark[data-v-37bdb19e]{background:url("+v+") no-repeat 100% 100%;background-position:50%;background-size:cover}.action-result-wrap .action-status-wrap .searched.search-stop[data-v-37bdb19e]{background:url("+b+") no-repeat 100% 100%;background-position:50%;background-size:cover}.action-result-wrap .params-style[data-v-37bdb19e]{background-color:var(--bg_grey_1,#f6f7f9);width:100%;border-radius:10px}.action-result-wrap .result-style[data-v-37bdb19e]{padding:0 15px;margin-bottom:15px}.action-result-wrap .result-style .tool-result[data-v-37bdb19e]{background-color:var(--bg_grey_1,#f6f7f9);color:var(--txt_icon_black_1,#1a2029);padding-bottom:15px;overflow-wrap:break-word;word-wrap:break-word}.fw_bold[data-v-37bdb19e]{margin-bottom:8px;color:var(--txt_icon_black_1,#1a2029)}.auth-wrap[data-v-37bdb19e]{margin-top:20px}.auth-wrap .auth-text[data-v-37bdb19e]{color:var(--txt_icon_black_1,#1a2029)}.auth-wrap .auth-button[data-v-37bdb19e]{margin-top:8px;text-align:left;font-size:14px;cursor:pointer}.auth-wrap .auth-button .btn[data-v-37bdb19e]{border-radius:8px;border:1px solid var(--txt_stroke_blue_1,#2454ff);color:var(--txt_stroke_blue_1,#2454ff);height:16px;line-height:16px;padding:8px 16px;display:inline-block;width:auto}.auth-wrap .auth-button .btn.loading[data-v-37bdb19e]{display:flex;width:140px}.auth-wrap .auth-button .btn.loading .loading-icon[data-v-37bdb19e]{width:16px;height:16px;flex:none;background-image:url("+x+");background-repeat:no-repeat;background-size:cover;animation:loading-37bdb19e 1.4s linear infinite}@keyframes loading-37bdb19e{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.auth-wrap .auth-button .btn.loading .loading-text[data-v-37bdb19e]{color:rgba(36,84,255,.5);margin-left:8px}",""]),e["default"]=p},33281:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".slice-detail[data-v-234e4e46]{margin-top:24px;display:flex;flex-direction:column;align-items:flex-start;gap:8px}.slice-detail.is-doc[data-v-234e4e46]{margin-top:16px}.slice-detail .document-name[data-v-234e4e46]{width:100%;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:600;line-height:24px}.slice-detail .document-name img[data-v-234e4e46]{width:24px;height:24px;margin-right:6px}.slice-detail .document-name-left[data-v-234e4e46]{max-width:calc(100% - 26px)}.slice-detail .document-order[data-v-234e4e46]{width:100%;color:var(--txt_icon_black_1,#1a2029);text-align:justify;font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:24px;margin-bottom:4px}.slice-detail .text[data-v-234e4e46]{color:var(--txt_icon_black_2,#4f5866);font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:400;line-height:20px;text-align:left;word-break:break-word}.slice-detail[data-v-234e4e46]:first-child{margin-top:0}.slice-detail .slice-score[data-v-234e4e46]{height:24px;border-radius:var(--R4,6px);background:var(--bg_blue_2,rgba(36,84,255,.06));color:var(--txt_stroke_blue_1,#2454ff);text-align:center;font-family:PingFang SC;font-size:11px;font-style:normal;font-weight:600;line-height:18px;padding:4px}",""]),e["default"]=s},27161:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(82608),i.b),u=new URL(i(46669),i.b),h=new URL(i(76518),i.b),d=a()(o()),g=l()(c),p=l()(u),f=l()(h);d.push([t.id,".file-slices-container[data-v-3387698e]{border-radius:12px;display:flex;margin-bottom:12px;flex-direction:column;align-items:flex-start;border-radius:8px}.file-slices-container[data-v-3387698e] *{box-sizing:border-box}.file-slices-container.expand[data-v-3387698e]{margin-bottom:20px}.file-slices-container .slice-left[data-v-3387698e]{display:flex;gap:8px;align-items:center;width:20px}.file-slices-container .slice-left .slice-icon[data-v-3387698e]{width:20px;height:20px;background-size:cover;background-repeat:no-repeat;background-image:url("+g+");flex:0 0 20px}.file-slices-container .slice-left .slice-icon.slice-icon-dark[data-v-3387698e]{background-size:cover;background-repeat:no-repeat;background-image:url("+p+")}.file-slices-container .slice-left .slice-title[data-v-3387698e]{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:600;line-height:27px;text-align:left;display:flex}.file-slices-container .slice-left .slice-title .slice-title-name[data-v-3387698e]{display:inline}.file-slices-container .slice-loading[data-v-3387698e]{gap:8px;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:600;line-height:27px;text-align:left;display:flex}.file-slices-container .slice-loading .loading-icon[data-v-3387698e]{width:20px;height:20px;flex:0 0 20px;flex-shrink:0;background-image:url("+f+");background-repeat:no-repeat;background-size:cover}.file-slices-container .slice-loading .loading-title[data-v-3387698e]{color:var(--search_blue_1,#464e94);font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:600;line-height:24px}.file-slices-container .slice-not-found[data-v-3387698e]{gap:8px}.file-slices-container .slice-not-found .slice-icon[data-v-3387698e]{width:20px;height:20px;background-size:cover;background-repeat:no-repeat;background-image:url("+g+");flex:0 0 20px}.file-slices-container .slice-not-found .slice-icon.slice-icon-dark[data-v-3387698e]{background-size:cover;background-repeat:no-repeat;background-image:url("+p+")}.file-slices-container .slice-not-found .slice-title[data-v-3387698e]{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:600;line-height:27px;text-align:left;display:flex}.file-slices-container .slice-not-found .slice-title .slice-title-name[data-v-3387698e]{display:inline}.file-slices-container .hover-style[data-v-3387698e]:hover{cursor:pointer}.file-slices-container .slice-header[data-v-3387698e]{display:flex;align-items:center;width:100%}.file-slices-container .slice-header .slice-right[data-v-3387698e]{padding:0 6px;border-radius:6px;max-width:calc(100% - 20px)}.file-slices-container .slice-header .slice-right[data-v-3387698e]:hover{background:var(--angent_special_grey_1,#f6f7f9)}.file-slices-container .slice-header .slice-right .slice-title[data-v-3387698e]{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:600;line-height:27px;text-align:left;display:flex}.file-slices-container .slice-header .slice-right .slice-title .slice-title-name[data-v-3387698e]{display:inline}.file-slices-container .slice-header .slice-arrow[data-v-3387698e]{display:block;background-image:none;font-weight:700;max-width:400px;min-width:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:4px}.file-slices-container .slice-header .slice-arrow.el-icon-arrow-down[data-v-3387698e]{color:var(--txt_icon_black_1,#fff)}.file-slices-container .slice-header .slice-arrow[data-v-3387698e]:hover{cursor:pointer}.file-slices-container .slice-header .contract[data-v-3387698e]{transform:rotate(180deg)}.file-slices-container .slice-detail-wrapper[data-v-3387698e]{padding:16px 16px 12px 16px;background:var(--angent_special_grey_1,#f6f7f9);border-radius:8px;margin-top:12px;width:100%}.file-slices-container .slice-detail-wrapper.thumsUp[data-v-3387698e]{display:flex;justify-content:space-between;align-items:center;padding:6px 16px;margin-top:4px;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:500;line-height:24px}.file-slices-container .hint[data-v-3387698e]{margin-top:8px;color:var(--txt_icon_grey_6,#b0b7c0);text-align:justify;font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:400;line-height:20px}.file-slices-container .show-all-btn[data-v-3387698e]{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:600;line-height:24px;margin-top:12px}.file-slices-container .show-all-btn img[data-v-3387698e]{width:16px;height:16px}.file-slices-container .show-all-text[data-v-3387698e]{padding:4px 16px;border-radius:8px;width:100px;cursor:pointer;color:var(--txt_icon_black_1,#1a2029)}.file-slices-container .show-all-text[data-v-3387698e]:hover{background:var(--hover_icon_grey_2,rgba(79,88,102,.08))}",""]),e["default"]=d},59586:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(44003),i.b),u=a()(o()),h=l()(c);u.push([t.id,".tools-answer[data-v-4cc61afc]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.search[data-v-4cc61afc]{display:flex;align-items:center;cursor:pointer;line-height:28px;margin-bottom:8px;height:28px}.search .tingzhiyuedu[data-v-4cc61afc]{width:16px;height:16}.search .text-stop-yuedu[data-v-4cc61afc]{color:var(--txt_icon_grey_6,#b0b7c0);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:700;line-height:14px;display:flex;align-items:center;justify-content:center}.search .text-stop-yuedu .text-stop-yuedu-container[data-v-4cc61afc]{box-sizing:border-box;padding:0 0 0 5px}.search .text-stop-yuedu img[data-v-4cc61afc]{width:20px;height:20px;display:block}.search .text-error[data-v-4cc61afc]{color:var(--txt_icon_black_1,#1a2029);font-size:15px;font-style:normal;font-weight:600;line-height:24px}.search .searching[data-v-4cc61afc]{width:16px;height:16px}.search .searched[data-v-4cc61afc]{width:20px;height:20px}.search .text-parent-container[data-v-4cc61afc]{box-sizing:border-box;padding:0 5px}.search .text-parent-container[data-v-4cc61afc]:not(.text-parent-container-stop):hover{background:var(--bg_grey_1,#f6f7f9);border-radius:6px}.search .text-parent-container.text-parent-container-searhing[data-v-4cc61afc]{display:flex;align-items:center}.search .text-parent-container.text-parent-container-searhing .text[data-v-4cc61afc]{display:block;background-image:none;font-weight:700;color:#464e94;max-width:400px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search .text-parent-container.text-parent-container-searhing .text.text-dark[data-v-4cc61afc]{color:hsla(0,0%,100%,.95)}.search .text.text-done[data-v-4cc61afc]{color:var(--txt_icon_black_1,#1a2029);font-weight:700}.search .text.el-icon-arrow-down[data-v-4cc61afc]{font-size:16px}.search .text.el-icon-arrow-down.text-searching-icon[data-v-4cc61afc]{margin-left:4px}.search .text.el-icon-arrow-down.text-stop[data-v-4cc61afc]{color:var(--txt_icon_grey_6,#b0b7c0)}.search .text.text-done-icon[data-v-4cc61afc]{color:var(--txt_icon_black_1,#1a2029);margin-left:4px;background-image:none}.search .text.text-done-icon-rotate[data-v-4cc61afc]{transform-origin:center center;transform:rotate(180deg)}.search .text.text-stop[data-v-4cc61afc]{color:var(--txt_icon_grey_6,#b0b7c0);margin-left:4px;background-image:#ff0}.search .item[data-v-4cc61afc]{padding:0}.cogview[data-v-4cc61afc]{line-height:28px;height:28px;display:flex;align-items:center}.cogview .ai-stop-container[data-v-4cc61afc]{display:flex;align-items:center;color:var(--txt_icon_grey_6,#b0b7c0);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:14px}.cogview .ai-stop-container img[data-v-4cc61afc]{width:20px;height:20px;display:block;margin-right:7px}.cogview .searched[data-v-4cc61afc],.cogview .searching[data-v-4cc61afc]{width:20px;height:20px}.cogview .text[data-v-4cc61afc]{padding:0 5px;box-sizing:border-box;font-weight:700}.cogview .text[data-v-4cc61afc],.cogview .text.text-searchinng[data-v-4cc61afc]{color:var(--txt_icon_black_1,#1a2029)}.cogview .text-code-hover[data-v-4cc61afc]{border-radius:6px}.cogview .text-code-hover[data-v-4cc61afc]:hover{background:var(--bg_grey_1,#f6f7f9)}.search_container[data-v-4cc61afc]{border-radius:8px;background:var(--angent_special_grey_1,#f6f7f9);padding-top:24px;padding-left:24px;padding-right:24px;padding-bottom:24px;flex-wrap:wrap;display:flex;flex-direction:column;margin-bottom:16px}.search_container .search-item-inner-container[data-v-4cc61afc]{width:100%}.search_container .search-item-inner-container[data-v-4cc61afc]:not(:last-child){margin-bottom:20px}.search_container .search-item-inner-container .search-item-container .item-title[data-v-4cc61afc]{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:13px;font-style:normal;font-weight:600;line-height:16px;display:flex;align-items:center}.search_container .search-item-inner-container .search-item-container .item-title img[data-v-4cc61afc]{width:16px;height:16px;flex:0 0 16px;margin-right:6px}.search_container .search-item-inner-container .search-item-container .item-title .item-day[data-v-4cc61afc]{display:flex;align-items:center;gap:6px;color:var(--txt_icon_grey_5,#838a95);font-family:PingFang SC;font-size:13px;font-style:normal;font-weight:500;line-height:16px;margin-left:6px}.search_container .search-item-inner-container .search-item-container .item-open-url[data-v-4cc61afc]{display:flex;align-items:center;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:13px;font-style:normal;font-weight:500;line-height:16px;margin-bottom:10px;margin-top:16px}.search_container .search-item-inner-container .search-item-container .item-open-url .item-open-text[data-v-4cc61afc]{color:var(--warn_lable_red_2,#a9433c)}.search_container .search-item-inner-container .search-item-container .item-open-url img[data-v-4cc61afc]{width:16px;height:16px;flex:0 0 16px;margin-right:6px}.search_wrap[data-v-4cc61afc]{width:100%;display:flex;flex-wrap:wrap}.search_wrap.search_wrap_odd .process[data-v-4cc61afc]:not(:nth-last-child(-n+1)){margin-bottom:0}.search_wrap.search_wrap_odd .process[data-v-4cc61afc]:not(:nth-last-child(-n+2)){margin-bottom:10px}.search_wrap .process[data-v-4cc61afc]{width:calc(50% - 5px);flex:0 0 calc(50% - 5px);padding:12px;border-radius:12px;background:var(--bg_white_1,#fff);box-sizing:border-box;cursor:pointer}.search_wrap .process[data-v-4cc61afc]:hover{box-shadow:0 4px 12px 0 rgba(17,49,95,.08)}.search_wrap .process:hover .process-title[data-v-4cc61afc]{color:var(--txt_stroke_blue_1,#2454ff)}.search_wrap .process[data-v-4cc61afc]:not(:nth-last-child(-n+1)){margin-bottom:10px}.search_wrap .process[data-v-4cc61afc]:nth-child(odd){margin-right:10px}.search_wrap .process .process-title-wrap[data-v-4cc61afc]{display:flex;align-items:center;margin-bottom:8px}.search_wrap .process .process-title-wrap .process_icon[data-v-4cc61afc]{margin-right:6px;background:url("+h+") no-repeat 100% 100%;background-position:50%;background-size:cover;width:16px;height:16px}.search_wrap .process .process-title-wrap .process-title[data-v-4cc61afc]{color:var(--txt_icon_black_1,#1a2029);font-size:12px;line-height:18px;width:100%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.search_wrap .process .process-title-wrap .process-title[data-v-4cc61afc],.search_wrap .process .process-url[data-v-4cc61afc]{font-family:PingFang SC;font-style:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden}.search_wrap .process .process-url[data-v-4cc61afc]{color:var(--txt_icon_grey_6,#b0b7c0);font-size:10px;line-height:12px;white-space:nowrap}.duquzongjie-container[data-v-4cc61afc]{display:flex;align-items:center;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:13px;font-style:normal;font-weight:500;line-height:16px}.duquzongjie-container img[data-v-4cc61afc]{width:16px;height:16px;margin-right:4px}",""]),e["default"]=u},69317:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(89287),i.b),u=new URL(i(61624),i.b),h=new URL(i(23432),i.b),d=a()(o()),g=l()(c),p=l()(u),f=l()(h);d.push([t.id,".search-loading-container[data-v-cda18e26]{display:inline-flex;align-items:flex-start;padding:4px;gap:8px;margin-bottom:8px}.search-loading-container[data-v-cda18e26]:hover{cursor:pointer;border-radius:8px;background:var(--hover-icon-grey-28,rgba(79,88,102,.08))}.search-loading-container .loading-icon[data-v-cda18e26]{width:20px;height:20px;background-image:url("+g+");background-repeat:no-repeat;background-size:cover}.search-loading-container .loading-icon-dark[data-v-cda18e26]{background-image:url("+p+")}.search-loading-container .loading-text[data-v-cda18e26]{color:var(--txt_icon_black_1,#1a2029);text-align:center;font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:20px;text-align:left}.search-loading-container .expand-btn[data-v-cda18e26]{width:20px;height:20px;background-repeat:no-repeat;background-size:cover;background-image:url("+f+")}",""]),e["default"]=d},74725:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(19975),i.b),u=new URL(i(59491),i.b),h=new URL(i(34742),i.b),d=new URL(i(84902),i.b),g=new URL(i(62582),i.b),p=new URL(i(48070),i.b),f=new URL(i(62255),i.b),m=new URL(i(63993),i.b),v=new URL(i(80443),i.b),b=new URL(i(91845),i.b),x=a()(o()),y=l()(c),_=l()(u),w=l()(h),k=l()(d),C=l()(g),S=l()(p),I=l()(f),M=l()(m),T=l()(v),E=l()(b);x.push([t.id,".sites-cited-list-container[data-v-6e91c563]{display:flex;gap:8px;align-items:center;position:relative}.sites-cited-list-container .site-card[data-v-6e91c563]{display:flex;flex:0 1 auto;padding:10px 12px;flex-direction:column;gap:6px;border-radius:8px;background:var(--bg_grey_1,#f6f7f9);width:180px;box-sizing:border-box}.sites-cited-list-container .site-card[data-v-6e91c563]:hover{cursor:pointer;background:linear-gradient(0deg,var(--hover-icon-grey-28,rgba(79,88,102,.08)) 0,var(--hover-icon-grey-28,rgba(79,88,102,.08)) 100%),#fff}.sites-cited-list-container .site-card .site-description[data-v-6e91c563]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;color:var(--txt_icon_black_1,#1a2029);text-overflow:ellipsis;font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:400;line-height:20px;height:40px;word-break:break-word}.sites-cited-list-container .site-card .site-info[data-v-6e91c563]{display:flex;align-items:center;gap:4px}.sites-cited-list-container .site-card .site-info .site-icon[data-v-6e91c563]{width:12px;height:12px;background-repeat:no-repeat;background-size:cover;background-image:url("+y+");border-radius:7px;flex:0 0 12px}.sites-cited-list-container .site-card .site-info .dark-site-icon[data-v-6e91c563]{background-image:url("+_+")}.sites-cited-list-container .site-card .site-info .site-name[data-v-6e91c563]{overflow:hidden;color:var(--txt_icon_grey_5,#838a95);text-overflow:ellipsis;font-family:PingFang SC;font-size:10px;font-style:normal;font-weight:400;line-height:14px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;flex:0 1 auto;word-break:break-word}.sites-cited-list-container .left-btn[data-v-6e91c563]{width:24px;height:24px;background-repeat:no-repeat;background-size:cover;background-image:url("+w+");position:absolute;left:-12px}.sites-cited-list-container .left-btn[data-v-6e91c563]:hover{background-image:url("+k+");cursor:pointer}.sites-cited-list-container .left-btn-dark[data-v-6e91c563]{background-image:url("+C+")}.sites-cited-list-container .left-btn-dark[data-v-6e91c563]:hover{background-image:url("+S+")}.sites-cited-list-container .right-btn[data-v-6e91c563]{width:24px;height:24px;background-repeat:no-repeat;background-size:cover;background-image:url("+I+");position:absolute;right:-12px}.sites-cited-list-container .right-btn[data-v-6e91c563]:hover{cursor:pointer;background-image:url("+M+")}.sites-cited-list-container .right-btn-dark[data-v-6e91c563]{background-image:url("+T+")}.sites-cited-list-container .right-btn-dark[data-v-6e91c563]:hover{background-image:url("+E+")}.sites-cited-list-container .left-block[data-v-6e91c563]{left:-12px;transform:rotate(90deg)}.sites-cited-list-container .left-block[data-v-6e91c563],.sites-cited-list-container .right-block[data-v-6e91c563]{position:absolute;width:80px;height:78px;background:linear-gradient(180deg,hsla(0,0%,100%,0) 11.6%,#fff 92.28%)}.sites-cited-list-container .right-block[data-v-6e91c563]{right:-12px;transform:rotate(-90deg)}.sites-cited-list-container .block-dark[data-v-6e91c563]{background:linear-gradient(180deg,rgba(43,46,48,0) 11.6%,#2b2e30 92.28%)}",""]),e["default"]=x},77006:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".msearch-container[data-v-16e925a0]{-webkit-user-select:text;-moz-user-select:text;user-select:text}",""]),e["default"]=s},62103:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(90076),i.b),u=new URL(i(36514),i.b),h=new URL(i(79897),i.b),d=new URL(i(89287),i.b),g=new URL(i(61624),i.b),p=new URL(i(33475),i.b),f=new URL(i(26862),i.b),m=new URL(i(91068),i.b),v=new URL(i(83050),i.b),b=a()(o()),x=l()(c),y=l()(u),_=l()(h),w=l()(d),k=l()(g),C=l()(p),S=l()(f),I=l()(m),M=l()(v);b.push([t.id,".open-url-container[data-v-9bd17f76]{display:flex;flex-direction:column;margin-bottom:12px}.open-url-container .search[data-v-9bd17f76]{display:flex;align-items:center;cursor:pointer;line-height:32px;margin-bottom:4px;min-height:32px}.open-url-container .search .tingzhiyuedu[data-v-9bd17f76]{width:16px;height:16}.open-url-container .search .text-stop-yuedu[data-v-9bd17f76]{color:var(--txt_icon_grey_6,#b0b7c0);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:700;line-height:14px;display:flex;align-items:center;justify-content:center}.open-url-container .search .text-stop-yuedu .text-stop-yuedu-container[data-v-9bd17f76]{box-sizing:border-box;padding:0 0 0 5px}.open-url-container .search .text-stop-yuedu img[data-v-9bd17f76]{width:20px;height:20px;display:block}.open-url-container .search .text-error[data-v-9bd17f76]{color:var(--txt_icon_black_1,#1a2029);font-size:15px;font-style:normal;font-weight:600;line-height:24px;display:flex;align-items:center;gap:7px}.open-url-container .search .text-error .warning-icon[data-v-9bd17f76]{background:url("+x+") no-repeat 100% 100%;background-position:50%;background-size:cover;width:20px;height:20px}.open-url-container .search .text-error[data-v-9bd17f76]:hover{cursor:default}.open-url-container .search .searching[data-v-9bd17f76]{background:url("+y+") no-repeat 100% 100%;background-position:50%;background-size:cover;width:16px;height:16px}.open-url-container .search .searching.searching-dark[data-v-9bd17f76]{background:url("+_+") no-repeat 100% 100%;background-position:50%;background-size:cover}.open-url-container .search .searched[data-v-9bd17f76]{background:url("+w+") no-repeat 100% 100%;background-position:50%;background-size:cover;width:20px;height:20px}.open-url-container .search .searched.searched-dark[data-v-9bd17f76]{background:url("+k+") no-repeat 100% 100%;background-position:50%;background-size:cover}.open-url-container .search .text-parent-container[data-v-9bd17f76]{box-sizing:border-box;padding:0 5px}.open-url-container .search .text-parent-container[data-v-9bd17f76]:not(.text-parent-container-stop):hover{background:var(--bg_grey_1,#f6f7f9);border-radius:6px}.open-url-container .search .text-parent-container.text-parent-container-searhing[data-v-9bd17f76]{display:flex;align-items:center}.open-url-container .search .text-parent-container.text-parent-container-searhing .text[data-v-9bd17f76]{display:block;background-image:none;color:var(--search_txt_blue_1,#464e94);font-weight:700;max-width:400px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.open-url-container .search .text.text-done[data-v-9bd17f76]{color:var(--txt_icon_black_1,#1a2029);font-weight:700}.open-url-container .search .text.el-icon-arrow-down[data-v-9bd17f76]{font-size:16px}.open-url-container .search .text.el-icon-arrow-down.text-searching-icon[data-v-9bd17f76]{margin-left:4px}.open-url-container .search .text.el-icon-arrow-down.text-stop[data-v-9bd17f76]{color:var(--txt_icon_grey_6,#b0b7c0)}.open-url-container .search .text.text-done-icon[data-v-9bd17f76]{color:var(--txt_icon_black_1,#1a2029);margin-left:4px;background-image:none}.open-url-container .search .text.text-done-icon-rotate[data-v-9bd17f76]{transform-origin:center center;transform:rotate(180deg)}.open-url-container .search .text.text-stop[data-v-9bd17f76]{color:var(--txt_icon_grey_6,#b0b7c0);margin-left:4px;background-image:#ff0}.open-url-container .search .item[data-v-9bd17f76]{padding:0}.open-url-container .open-url-detail[data-v-9bd17f76]{display:flex;flex-direction:column;border-radius:8px;background:var(--angent_special_grey_1,#f6f7f9);padding:24px;align-items:flex-start;margin-bottom:4px}.open-url-container .open-url-detail .title[data-v-9bd17f76]{display:flex}.open-url-container .open-url-detail .title .open-url-icon[data-v-9bd17f76]{width:16px;height:16px;background-size:cover;background-repeat:no-repeat;background-image:url("+C+");flex:0 0 16px;margin-right:6px}.open-url-container .open-url-detail .title .open-url-icon.open-url-icon-dark[data-v-9bd17f76]{background-image:url("+S+");background-size:cover;background-repeat:no-repeat}.open-url-container .open-url-detail .title .open-url-text[data-v-9bd17f76]{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:13px;font-style:normal;font-weight:500;line-height:16px}.open-url-container .open-url-detail .search-pages[data-v-9bd17f76]{display:flex;gap:10px;margin-top:10px;margin-bottom:16px}.open-url-container .open-url-detail .search-pages .single-page[data-v-9bd17f76]{border-radius:12px;background:var(--bg_white_1,#fff);display:flex;width:261.5px;height:58px;padding:10px 12px;flex-direction:column;justify-content:center;align-items:flex-start;gap:8px;box-sizing:border-box}.open-url-container .open-url-detail .search-pages .single-page[data-v-9bd17f76]:hover{cursor:pointer;box-shadow:0 4px 12px 0 rgba(17,49,95,.04)}.open-url-container .open-url-detail .search-pages .single-page .title[data-v-9bd17f76]{color:var(--txt_icon_black_1,#1a2029);font-size:13px;line-height:18px}.open-url-container .open-url-detail .search-pages .single-page .title[data-v-9bd17f76],.open-url-container .open-url-detail .search-pages .single-page .url[data-v-9bd17f76]{overflow:hidden;text-overflow:ellipsis;font-family:PingFang SC;font-style:normal;font-weight:400;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;align-self:stretch}.open-url-container .open-url-detail .search-pages .single-page .url[data-v-9bd17f76]{color:var(--txt_icon_grey_6,#b0b7c0);font-size:10px;line-height:12px}.open-url-container .open-url-detail .conclusion[data-v-9bd17f76]{display:flex}.open-url-container .open-url-detail .conclusion .conclusion-icon[data-v-9bd17f76]{width:16px;height:16px;background-size:cover;background-repeat:no-repeat;background-image:url("+I+");flex:0 0 16px;margin-right:6px}.open-url-container .open-url-detail .conclusion .conclusion-icon.conclusion-icon-dark[data-v-9bd17f76]{background-size:cover;background-repeat:no-repeat;background-image:url("+M+")}.open-url-container .open-url-detail .conclusion .conclusion-text[data-v-9bd17f76]{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:13px;font-style:normal;font-weight:500;line-height:16px}",""]),e["default"]=b},97880:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".searchinfo-container .search-container[data-v-4d8e0ad8]{width:100%;padding:16px;border-radius:12px;background:var(--bg_grey_1,#f6f7f9);margin-bottom:16px;box-sizing:border-box;overflow:hidden;min-height:116px}.searchinfo-container .singlesearch-enter-active[data-v-4d8e0ad8]{transition:opacity .5s ease,background-color .5s ease}.searchinfo-container .singlesearch-leave-active[data-v-4d8e0ad8]{transition:height .5s ease,padding .5s ease,opacity .5s ease,margin .5s ease}.searchinfo-container .singlesearch-enter-from[data-v-4d8e0ad8]{opacity:0;background-color:rgba(246,247,249,0)}.searchinfo-container .singlesearch-enter-to[data-v-4d8e0ad8]{opacity:1;background-color:#f6f7f9}.searchinfo-container .singlesearch-leave-to[data-v-4d8e0ad8]{height:0;padding:0;opacity:0;margin-bottom:0}.searchinfo-container .singlesearch-leave-from[data-v-4d8e0ad8]{height:auto;padding:16px;opacity:1;margin-bottom:16px}",""]),e["default"]=s},41134:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".site-icons-popper.el-popper .icons-left-container{display:flex;max-width:288px;justify-content:center;align-items:center}.site-icons-popper.el-popper .icons-left-container img{width:15px;height:15px;border-radius:28px;border:1px solid #fff;flex:0 0 15px}.site-icons-popper.el-popper .icons-left-container img:not(:last-child){margin-right:-3px}",""]),e["default"]=s},39752:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(84872),i.b),u=new URL(i(96891),i.b),h=a()(o()),d=l()(c),g=l()(u);h.push([t.id,".single-search-container[data-v-0f07f598]{display:flex;flex-direction:column;align-items:flex-start;gap:6px;align-self:stretch;overflow:hidden}.single-search-container .search-header[data-v-0f07f598]{display:flex;align-items:flex-start;gap:8px;max-width:calc(100% - 32px)}.single-search-container .search-header .search-icon[data-v-0f07f598]{width:20px;height:20px;background-image:url("+d+");background-repeat:no-repeat;background-size:cover;flex:0 0 auto}.single-search-container .search-header .search-icon-dark[data-v-0f07f598]{background-image:url("+g+")}.single-search-container .search-header .search-text[data-v-0f07f598]{color:var(--txt_icon_black_1,#1a2029);text-align:center;font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:600;line-height:20px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-align:left}.single-search-container .search-title[data-v-0f07f598]{display:flex;gap:10px;padding-left:28px;flex-wrap:wrap}.single-search-container .search-title .title[data-v-0f07f598]{display:flex;padding:4px 10px;align-items:center;justify-content:center;border-radius:6px;background:var(--bg_floating_white_1,#fff);color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:400;line-height:20px;box-sizing:border-box}.single-search-container .search-title .title .title-text[data-v-0f07f598]{max-width:280px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.single-search-container .reference-site[data-v-0f07f598]{display:flex;align-items:center;gap:6px;padding-left:28px;height:20px}.single-search-container .reference-site .site-icons[data-v-0f07f598]{display:flex;align-items:center}.single-search-container .reference-site .site-icons .site-icon[data-v-0f07f598]{display:flex;box-sizing:border-box;width:15px;height:15px;padding:0 3px;justify-content:center;align-items:center;border-radius:28px;background:var(--box_stroke_grey_1,#d3d7dd);margin-right:-3px}.single-search-container .reference-site .site-icons .site-icon img[data-v-0f07f598]{width:15px;height:15px;border-radius:28px;border:1px solid var(--bg_white_1,#fff);flex:0 0 15px}.single-search-container .reference-site .site-conclusion[data-v-0f07f598]{color:var(--txt-icon-grey-360,rgba(79,88,102,.6));text-align:center;font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:400;line-height:20px}.single-search-container .slide-in-animate[data-v-0f07f598]{transform:translateX(70px);animation:slide-in-0f07f598 .5s forwards}@keyframes slide-in-0f07f598{0%{transform:translateX(70px)}to{transform:translateX(0)}}",""]),e["default"]=h},11601:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,"",""]),e["default"]=s},81703:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".editor-bar[data-v-319164be]{justify-content:center;height:60px;gap:12px;flex-shrink:0}.editor-bar[data-v-319164be],.editor-bar .btn[data-v-319164be]{display:flex;align-items:center}.editor-bar .btn[data-v-319164be]{width:88px;height:32px}.editor-bar .btn img[data-v-319164be]{width:20px;height:20px;margin-right:8px}.editor-bar .btn span[data-v-319164be]{color:var(--txt_icon_black_1,#1a2029);font-size:14px;font-style:normal;font-weight:400;line-height:20px}.editor-bar .btn[data-v-319164be]:hover{border-radius:8px;background:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.editor-bar .btn+.btn[data-v-319164be]{margin-left:10px}.editor-content[data-v-319164be]{width:100%;flex:1;display:flex;align-items:center;justify-content:center;cursor:default;box-sizing:border-box;padding:20px}.editor-content .editor-wrapper[data-v-319164be]{position:relative;min-height:420px;height:100%;width:100%;max-width:calc(100% - 80px);border-radius:12px;overflow:hidden;box-sizing:border-box}.editor-content .editor-wrapper .editor[data-v-319164be]{width:100%;height:100%;z-index:10;position:relative;display:flex;align-items:center;justify-content:center;border-radius:12px}.editor-content .editor-wrapper .image[data-v-319164be]{z-index:9;-o-object-fit:contain;object-fit:contain}.editor-content .editor-wrapper .image[data-v-319164be],.editor-content .editor-wrapper .loading-mask[data-v-319164be]{position:absolute;top:50%;left:50%;max-width:100%;max-height:100%;border-radius:12px;transform:translate(-50%,-50%)}.editor-content .editor-wrapper .loading-mask[data-v-319164be]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;background:rgba(0,0,0,.7);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:11}.editor-content .editor-wrapper .loading-mask .invisible[data-v-319164be]{visibility:hidden;-o-object-fit:contain;object-fit:contain}.editor-content .editor-wrapper .loading-mask .absolute-area[data-v-319164be]{position:absolute;width:100%;height:100%;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;justify-content:center}.editor-content .editor-wrapper .loading-mask .absolute-area img[data-v-319164be]{width:100px;height:100px}.editor-content .editor-wrapper .loading-mask .absolute-area video[data-v-319164be]{width:150px;height:150px;border-radius:12px}.editor-content .editor-wrapper .loading-mask .absolute-area p[data-v-319164be]{color:var(--txt_icon_white_7,#fff);font-size:16px;font-style:normal;font-weight:600;line-height:24px;margin:20px 0}.editor-content .editor-wrapper .loading-mask .absolute-area .stop-generate[data-v-319164be]{display:flex;width:80px;height:32px;padding:0 12px;justify-content:center;align-items:center;border-radius:8px;border:1px solid var(--box_stroke_grey_1,#d3d7dd);color:var(--txt_icon_white_7,#fff);font-size:13px;font-style:normal;font-weight:400;line-height:20px;cursor:pointer;box-sizing:border-box}.editor-content .editor-wrapper .loading-mask .absolute-area .stop-generate[data-v-319164be]:hover{background:hsla(0,0%,100%,.1)}",""]),e["default"]=s},83467:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".swiper-container[data-v-96a88a54]{height:108px;box-sizing:border-box;padding:4px 0 24px 0}.swiper-container[data-v-96a88a54],.swiper-container .swiper-content[data-v-96a88a54]{display:flex;align-items:center;justify-content:center}.swiper-container .swiper-content[data-v-96a88a54]{max-width:100%;position:relative}.swiper-container .swiper-content .swiper-page[data-v-96a88a54]{width:60px;height:80px;display:flex;align-items:center;justify-content:center;z-index:20}.swiper-container .swiper-content .swiper-page img[data-v-96a88a54]{width:8px;height:14px}.swiper-container .swiper-content .swiper-page-prev[data-v-96a88a54]{background:linear-gradient(to right,var(--image_swiper_gradient_2,#f6f7f9) 0,var(--image_swiper_gradient_2,#f6f7f9) 75%,var(--image_swiper_gradient_1,rgba(246,247,249,0)) 100%);transform:translateX(20px)}.swiper-container .swiper-content .swiper-page-prev .swiper-prev img[data-v-96a88a54]{transform:rotate(180deg)}.swiper-container .swiper-content .swiper-page-next[data-v-96a88a54]{background:linear-gradient(to right,var(--image_swiper_gradient_1,rgba(246,247,249,0)) 0,var(--image_swiper_gradient_2,#f6f7f9) 25%,var(--image_swiper_gradient_2,#f6f7f9) 100%);transform:translateX(-20px)}.swiper-container .swiper-content .swiper-next[data-v-96a88a54],.swiper-container .swiper-content .swiper-prev[data-v-96a88a54]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;color:#4f5866;border-radius:36px;border:1px solid var(--stroke_chat_box_grey_1,#eee);background:var(--bg_white_1,#fff);box-shadow:0 4px 12px 0 rgba(17,49,95,.08);font-size:15px;font-weight:700;cursor:pointer}.swiper-container .swiper-content .swiper-next[data-v-96a88a54]:hover,.swiper-container .swiper-content .swiper-prev[data-v-96a88a54]:hover{background:var(--bg_grey_1,#f6f7f9)}.swiper-container .swiper-content .custom-swiper[data-v-96a88a54]{display:flex;align-items:center;max-width:calc(100% - 120px);overflow-x:auto;overflow-y:hidden;flex-wrap:nowrap;height:80px;margin:0;scrollbar-width:none;position:relative}.swiper-container .swiper-content .custom-swiper .swiper-slide[data-v-96a88a54]{width:64px;height:64px;cursor:pointer;flex-shrink:0;position:relative;transition:all .2s ease-in-out}.swiper-container .swiper-content .custom-swiper .swiper-slide .swiper-img[data-v-96a88a54]{width:100%;height:100%;border-radius:8px}.swiper-container .swiper-content .custom-swiper .swiper-slide .origin-tag[data-v-96a88a54]{width:57.5%;height:30%;position:absolute;left:50%;transform:translateX(-50%);bottom:5%}.swiper-container .swiper-content .custom-swiper .swiper-slide+.swiper-slide[data-v-96a88a54]{margin-left:10px}.swiper-container .swiper-content .custom-swiper .swiper-slide-active[data-v-96a88a54],.swiper-container .swiper-content .custom-swiper .swiper-slide[data-v-96a88a54]:hover{height:80px;width:80px}",""]),e["default"]=s},40710:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".operation-area{width:360px;display:flex;background:var(--bg_white_1,#fff);flex-direction:column;height:100%;gap:12px;padding:20px;flex-shrink:0;box-sizing:border-box;cursor:default}.operation-area .operation-title{color:var(--txt_icon_black_1,#1a2029);font-size:16px;font-style:normal;font-weight:600;line-height:22px;display:flex;align-items:center;justify-content:flex-start;width:100%}.operation-area .operation-title img{width:28px;height:14px;margin-left:4px}.operation-area .operation-example{flex:1;display:flex;flex-direction:column}.operation-area .operation-example .img-wrapper{display:flex;flex-direction:column;gap:10px;border-radius:12px;background:var(--hover_icon_grey_1,rgba(79,88,102,.06));padding:16px 16px 12px 16px}.operation-area .operation-example .img-wrapper p{text-align:left;width:100%;color:var(--txt_icon_black_1,#1a2029);font-size:13px;font-style:normal;font-weight:600;line-height:20px}.operation-area .operation-example .img-wrapper .mt-10{margin-top:10px}.operation-area .operation-example .img-wrapper .text-item{color:var(--txt_icon_black_2,#4f5866);font-size:13px;font-style:normal;font-weight:400;line-height:22px}.operation-area .operation-example .img-wrapper .text-item span{font-weight:700}.operation-area .operation-example .img-wrapper .text-item+.text-item{margin-top:-10px}.operation-area .operation-example .example-img{width:288px;height:120px}.operation-area .operation-example .example-text{color:var(--txt_icon_black_2,#4f5866);font-size:14px;font-style:normal;font-weight:400;line-height:24px;margin-top:10px;width:100%;text-align:left}.operation-area .operation-example .mt-0{margin-top:0}.operation-area .operation-example .btn{display:flex;height:40px;width:100%;justify-content:center;align-items:center;border-radius:8px;cursor:pointer;font-style:normal;font-weight:600;line-height:20px}.operation-area .operation-example .btn img{width:20px;height:20px;margin-right:8px}.operation-area .operation-example .hd-btn{border:1px solid var(--box_stroke_grey_1,#d3d7dd);background:var(--bg_white_1,#fff);color:var(--txt_icon_black_1,#1a2029);font-size:14px;margin-top:20px}.operation-area .operation-example .hd-btn:not(.isLoading):hover{background:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.operation-area .operation-example .download-btn{background:var(--bg_blue_1,#2454ff);color:var(--txt_icon_white_7,#fff);font-size:16px;margin-top:auto}.operation-area .operation-example .download-btn:not(.isLoading):hover{background:#0033e7}.operation-area .operation-example .download-btn.isLoading{opacity:.3}.operation-area .radio-area{margin-top:20px;gap:12px}.operation-area .radio-area .custom-radio-btn{display:flex;height:40px;justify-content:center;align-items:center;border-radius:8px;border:1px solid var(--box_stroke_grey_1,#d3d7dd);background:var(--bg_white_1,#fff);flex:1;overflow:hidden}.operation-area .radio-area .custom-radio-btn span{display:flex;align-items:center;justify-content:center;flex:1;color:var(--txt_icon_black_1,#1a2029);background:var(--bg_white_1,#fff);border-radius:8px;height:100%;border:none;font-size:14px;font-style:normal;font-weight:600;line-height:20px;box-shadow:none!important}.operation-area .radio-area .custom-radio-btn span img{width:20px;height:20px;margin-right:8px}.operation-area .radio-area .custom-radio-btn .radio-icon{display:block}.operation-area .radio-area .custom-radio-btn .radio-icon-hover{display:none}.operation-area .radio-area .custom-radio-btn:hover,.operation-area .radio-area .custom-radio-btn:hover span{background:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.operation-area .radio-area .is-active{border:1px solid var(--txt-stroke-blue-1,#2454ff)!important;background:var(--bg_blue_2,rgba(36,84,255,.06))!important}.operation-area .radio-area .is-active span{background:var(--bg_blue_2,rgba(36,84,255,.06))!important;color:var(--txt-stroke-blue-1,#2454ff)!important}.operation-area .slider-area{display:flex;align-items:center;height:40px;margin-top:12px;color:var(--txt_icon_black_2,#4f5866);font-size:13px;font-style:normal;font-weight:400;line-height:20px;white-space:nowrap}.operation-area .slider-area .el-slider{margin-left:12px}.operation-area .slider-area .el-slider__bar{background-color:#2454ff}.operation-area .slider-area .el-slider__button{border-color:#2454ff;width:16px;height:16px}.operation-area .slider-area .el-slider__button:hover{transform:scale(1.25)}.operation-area .prompt-text-area{margin-top:12px;height:148px;border-radius:8px;border:1px solid var(--box_stroke_black_2,hsla(0,0%,100%,.5));background:var(--bg_floating_white_1,#363739);overflow:hidden;position:relative}.operation-area .prompt-text-area.isLoading{border:1px solid var(--bt_stroke_black_1,#1a2029);background:var(--bg_floating_white_1,#363739)}.operation-area .prompt-text-area .el-button.isLoading{background:var(--txt_icon_grey_6_x,C5CAD1)}.operation-area .prompt-text-area .is-disabled .el-textarea__inner,.operation-area .prompt-text-area textarea{background:var(--bg_floating_white_1,#363739);box-shadow:none}.operation-area .prompt-text-area textarea{padding:12px 16px;border:none;height:120px;color:var(--txt_icon_black_1,#1a2029)}.operation-area .prompt-text-area .el-textarea__inner{resize:none}.operation-area .prompt-text-area .submit-btn{position:absolute;right:12px;bottom:12px;width:68px;height:28px;display:flex;padding:4px 8px;border-radius:6px;box-sizing:border-box;align-items:center;justify-content:center;background:var(--txt_icon_black_1,hsla(0,0%,100%,.95));color:var(--bg_white_1,#1e1f20);font-style:normal;font-weight:600;line-height:20px;border:none}.operation-area .prompt-text-area .submit-btn span{width:100%;display:flex;align-items:center;justify-content:space-between}.operation-area .btn-area{margin-top:auto;display:flex;align-items:center;gap:12px}.operation-area .btn-area .btn img{margin-right:6px}.operation-area .btn-area .regenerate-btn{display:flex;width:110px;height:38px;padding:0 12px;justify-content:center;align-items:center;border-radius:8px;border:1px solid var(--box_stroke_grey_1,#d3d7dd);background:var(--bg_white_1,#1e1f20);color:var(--txt_icon_black_1,#1a2029);font-size:16px;font-style:normal;font-weight:600;line-height:20px}.operation-area .btn-area .regenerate-btn:not(.isLoading) :hover{background:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.operation-area .btn-area .regenerate-btn.isLoading{opacity:.3}.operation-area .btn-area .download-btn{width:198px}.operation-area .btn-area .download-btn.isLoading{opacity:.3}",""]),e["default"]=s},79174:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".vip-tips-modal[data-v-6dcb0f5f]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:9999;display:flex;justify-content:center;align-items:center}.vip-tips-modal .vip-tips[data-v-6dcb0f5f]{position:relative;width:288px;height:366px}.vip-tips-modal .vip-tips img[data-v-6dcb0f5f]{width:100%;height:100%}.vip-tips-modal .vip-tips .desc-text[data-v-6dcb0f5f]{position:absolute;top:223px;left:50%;transform:translateX(-50%);width:247px;height:20px;color:#1a2029;text-align:center;font-size:12px;font-style:normal;font-weight:400;background:#fff;line-height:20px}.vip-tips-modal .vip-tips .goVip[data-v-6dcb0f5f]{width:248px;height:40px;top:255px;left:20px;background:transparent;position:absolute;cursor:pointer}.vip-tips-modal .vip-tips .close[data-v-6dcb0f5f]{position:absolute;top:330px;right:126px;border-radius:50%;width:36px;height:36px;box-sizing:border-box;cursor:pointer;background:transparent;box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.5)}",""]),e["default"]=s},40822:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".editor-dialog{display:flex;flex-direction:column;border-radius:0}.editor-dialog .el-dialog__header{padding:0}.editor-dialog .el-dialog__body{flex:1;display:flex;min-height:630px;max-height:100vh;max-width:100vw;position:relative;padding:0}.editor-dialog .tabs{display:flex;flex-direction:column;width:81px;padding:20px 8px;box-sizing:border-box;gap:20px;border-right:1px solid var(--bg_stroke_grey_3_4,#e7e7e7b3);background:var(--bg_white_1,#1e1f20);flex-shrink:0}.editor-dialog .tabs .tabs-item{display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:8px;gap:8px;padding:8px;cursor:pointer;position:relative}.editor-dialog .tabs .tabs-item .tabs-icon{width:20px;height:20px}.editor-dialog .tabs .tabs-item .vip{width:28px;height:12px;position:absolute;top:20px;right:8px}.editor-dialog .tabs .tabs-item .tabs-title{color:var(--txt_icon_black_2,#4f5866);text-align:center;font-size:12px;font-style:normal;font-weight:400;line-height:14px}.editor-dialog .tabs .active-item,.editor-dialog .tabs .tabs-item:hover{background:var(--hover_icon_grey_2,rgba(79,88,102,.08))}.editor-dialog .tabs .active-item .tabs-title{font-weight:600;color:var(--txt_icon_black_1,#1a2029)}.editor-dialog .editor-container{display:flex;align-items:center;justify-content:center;height:100%;max-width:calc(100% - 81px);flex:1;box-sizing:border-box;padding:0;background:var(--bg_grey_1,#f6f7f9);position:relative;min-width:750px}.editor-dialog .editor-container .editor-area{display:flex;flex-direction:column;flex:1;height:100%;max-width:calc(100% - 360px);position:relative}.editor-dialog .editor-container .editor-area .repaint-content{padding:0 20px 20px 20px;max-height:calc(100% - 168px)}.editor-dialog .editor-container .editor-area .close-btn{position:absolute;top:14px;right:14px;width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center}.editor-dialog .editor-container .editor-area .close-btn img{width:20px;height:20px;cursor:pointer}.editor-dialog .editor-container .editor-area .close-btn:hover{background:var(--hover_icon_grey_2,rgba(79,88,102,.08))}.editor-dialog .isLoading{background:var(--bg_floating_white_1,#363739)}.editor-dialog .isDisabled{opacity:.5;cursor:not-allowed}.editor-dialog .disableBorder{border:1px solid var(--bg_stroke_grey_3_1,#eee)!important}.el-message-box__container{display:flex;align-items:center;width:100%}.custom-confirm-button{display:flex;width:120px;height:40px;padding:0 24px;justify-content:center;align-items:center;gap:10px;border-radius:8px;background:#2454ff;color:var(--text_White2,#fff);font-size:16px;font-style:normal;border:none;font-weight:600;line-height:28px}.custom-confirm-button:hover{background:linear-gradient(0deg,rgba(0,0,0,.1),rgba(0,0,0,.1)),#2454ff;border:none}.custom-confirm-button:focus-visible{outline:none}.custom-confirm-button:focus{background:#2454ff}.custom-cancel-button{display:flex;width:120px;height:40px;padding:8px 24px;justify-content:center;align-items:center;gap:8px;border-radius:8px;border:1px solid var(--txt_stroke_blue_1,#2454ff);font-size:16px;font-style:normal;font-weight:400;line-height:28px}.custom-cancel-button,.custom-cancel-button:hover{color:var(--txt_stroke_blue_1,var(--bg_blue_1,#2454ff))}.custom-cancel-button:hover{background:rgba(36,84,255,.06);border-color:#2454ff}.custom-confirm-box{width:520px;max-width:520px;border-radius:16px}.custom-confirm-box .el-message-box__title{color:var(--txt_icon_black_1,#1a2029);font-size:20px;font-style:normal;font-weight:600;line-height:28px}.custom-confirm-box .el-message-box__headerbtn{top:50%;transform:translateY(-50%);display:flex;align-items:center;justify-content:center;width:32px;height:32px}.custom-confirm-box .el-message-box__headerbtn:hover{border-radius:8px;background-color:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.custom-confirm-box .el-message-box__headerbtn:hover .el-message-box__close{color:#909399}.custom-confirm-box .el-message-box__headerbtn .el-message-box__close{font-size:20px;font-weight:600}.custom-confirm-box .el-message-box__message{width:434px}.custom-confirm-box .el-message-box__message p{color:var(--txt_icon_black_1,#1a2029);font-size:15px;font-style:normal;font-weight:400;line-height:27px}.custom-confirm-box .el-message-box__btns{padding-bottom:15px}",""]),e["default"]=s},70136:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".answer .answer-content[data-v-7d75bd00]{width:calc(100% - 32px);-webkit-user-select:text;-moz-user-select:text;user-select:text;padding-top:3px;display:flex;flex-direction:column;gap:8px;position:relative}.answer .answer-content .assistant-name[data-v-7d75bd00]{line-height:24px;padding-left:8px;text-align:left;font-size:15px;font-weight:700;color:var(--txt_icon_black_1,#1a2029);-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;align-items:center}.answer .answer-content .assistant-name .label[data-v-7d75bd00]{margin-left:4px;display:flex;width:14px;height:14px;align-items:center;justify-content:center;gap:2px;border-radius:3px}.answer .error-box[data-v-7d75bd00]{padding-left:8px;color:var(--txt_icon_grey_6,#b0b7c0);font-family:PingFang SC;font-size:15px;font-weight:400;line-height:27px}.answer .robotIcon .glmsChatAvatar.isLoading[data-v-7d75bd00]{animation:move-7d75bd00 2s linear infinite}@keyframes move-7d75bd00{0%{transform:translateZ(-200px) rotate(0deg)}to{transform:translateZ(-200px) rotate(1turn)}}",""]),e["default"]=s},4490:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".answer-content:hover .interact{display:flex!important}",""]),e["default"]=s},32765:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".new_type[data-v-68408d8c]{text-align:left;margin-bottom:10px}.new_type .item[data-v-68408d8c]{padding:0}.answer-content-wrap+.new_type[data-v-68408d8c]{margin-top:16px}",""]),e["default"]=s},26771:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".animate__bounceInUp.bottom[data-v-90715b9e]{position:relative}.component-box-new[data-v-90715b9e]{max-width:800px;min-width:388px;margin:0 auto;box-sizing:border-box}",""]),e["default"]=s},79192:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".atAssistPopover{position:relative;z-index:999}.assist-popover{position:absolute;bottom:calc(100% + 8px);border-radius:12px;border:1px solid var(--stroke_chat_box_grey_1,#eee);background:var(--float_List,#fff);padding:0 8px;box-shadow:0 2px 12px 0 rgba(26,72,137,.08);width:calc(100% + 2px);left:-1px;box-sizing:border-box;display:flex;flex-direction:column;max-height:290px;overflow-y:auto;z-index:1100}.assist-popover .title{padding:12px;font-size:14px;line-height:22px;font-weight:600;color:var(--txt_icon_black_2,#4f5866);display:flex;justify-content:space-between;align-items:center}.assist-popover .content{flex:1;overflow-y:auto;display:flex;flex-direction:column}.assist-popover .content .el-skeleton{margin-top:-8px}.assist-popover .content .skeleton-item{display:flex;align-items:center;padding:8px 12px;line-height:24px}.assist-popover .content .assist-item{color:var(--txt_icon_black_1,#1a2029);font-size:15px;font-weight:400;font-style:normal;line-height:24px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.assist-popover .content .assist-item .assist-padding{padding:8px 12px;display:flex;align-items:center;justify-content:space-between;cursor:pointer}.assist-popover .content .assist-item .item-text{display:flex;align-items:center;width:calc(100% - 36px)}.assist-popover .content .assist-item .item-text img{width:24px;height:24px;border-radius:50%;margin-right:8px;-o-object-fit:cover;object-fit:cover}.assist-popover .content .assist-item .item-text .text-content{font-size:12px;line-height:20px;color:#b0b7c0;margin-left:8px;flex:1;text-align:left;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.assist-popover .content .assist-item .item-type{width:16px;height:16px}.assist-popover .content .assist-item.selected{font-weight:600;background:var(--hover_icon_grey_1,rgba(79,88,102,.06));border-radius:8px}.assist-popover .content .assist-item+.assist-item{margin-top:6px}.assist-popover .content::-webkit-scrollbar{width:4px}.assist-popover .content::-webkit-scrollbar-track{border-radius:4px}.assist-popover .content::-webkit-scrollbar-thumb{background:hsla(217,8%,55%,.5);border-radius:4px}.popover-bottom{padding-bottom:10px}.current-assist{background:var(--angent_special_grey_1,#f6f7f9);border-bottom:none;padding:8px 12px 8px 16px;width:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;color:var(--txt_icon_grey_5,#838a95);font-size:14px;line-height:24px;font-weight:600;border-top-left-radius:12px;border-top-right-radius:12px}.current-assist .assist-title{display:flex;align-items:center;white-space:nowrap}.current-assist .assist-title .click-area{display:flex;align-items:center;min-width:auto;padding:2px 4px;margin:0 4px}.current-assist .assist-title .clickable{cursor:pointer}.current-assist .assist-title .clickable:hover{border-radius:4px;background:var(--hover_icon_grey_2,rgba(79,88,102,.08))}.current-assist .assist-title img{width:20px;height:20px;border-radius:50%;-o-object-fit:cover;object-fit:cover}.current-assist .assist-title span{color:var(--txt_icon_black_1,#1a2029);margin:0 0 0 2px}.current-assist.no-top-border{border-radius:0}.close-area{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin:-5px -4px -5px 0}.close-area .close-icon,.close-area svg{width:16px;height:16px}.close-area:hover{background:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.atAssistPopover{z-index:1000}",""]),e["default"]=s},48976:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(43868),i.b),u=new URL(i(46560),i.b),h=new URL(i(98006),i.b),d=new URL(i(69114),i.b),g=new URL(i(34670),i.b),p=new URL(i(75616),i.b),f=new URL(i(56716),i.b),m=new URL(i(57409),i.b),v=new URL(i(45363),i.b),b=new URL(i(60410),i.b),x=new URL(i(63684),i.b),y=new URL(i(43798),i.b),_=new URL(i(44567),i.b),w=new URL(i(78287),i.b),k=new URL(i(40736),i.b),C=new URL(i(76885),i.b),S=new URL(i(75926),i.b),I=new URL(i(8292),i.b),M=new URL(i(30068),i.b),T=new URL(i(540),i.b),E=new URL(i(66874),i.b),A=a()(o()),D=l()(c),L=l()(u),O=l()(h),j=l()(d),P=l()(g),N=l()(p),z=l()(f),R=l()(m),B=l()(v),F=l()(b),U=l()(x),H=l()(y),W=l()(_),X=l()(w),G=l()(k),Y=l()(C),V=l()(S),Z=l()(I),Q=l()(M),J=l()(T),q=l()(E);A.push([t.id,".shareFooter[data-v-87100820]{display:flex;height:40px;align-items:center;justify-content:space-between;margin-left:18px}.shareFooter .shareLeft[data-v-87100820]{display:flex;align-items:center;white-space:nowrap}.shareFooter .shareLeft .unCheckedStatusBtn[data-v-87100820]{background-image:url("+D+");background-repeat:no-repeat;background-position:50%;background-size:cover;height:16px;width:16px}.shareFooter .shareLeft .unCheckedStatusBtn[data-v-87100820]:active,.shareFooter .shareLeft .unCheckedStatusBtn[data-v-87100820]:hover{background-image:url("+L+");cursor:pointer}.shareFooter .shareLeft .onCheckedStatusBtn[data-v-87100820]{background-image:url("+O+");background-repeat:no-repeat;background-position:50%;background-size:cover;height:16px;width:16px}.shareFooter .shareLeft .onCheckedStatusBtn[data-v-87100820]:active,.shareFooter .shareLeft .onCheckedStatusBtn[data-v-87100820]:hover{background-image:url("+j+");cursor:pointer}.shareFooter .shareLeft .selectAllText[data-v-87100820]{margin-left:8px;color:var(--txt_icon_black_2,#4f5866);font-size:16px;font-family:PingFang SC;font-style:normal;font-weight:400;line-height:28px}.shareFooter .shareRight[data-v-87100820]{display:flex;align-items:center;flex:1;justify-content:flex-end;margin-left:12px}.shareFooter .shareRight .cancelBtn[data-v-87100820]{display:flex;box-sizing:border-box;width:100px;height:40px;justify-content:center;align-items:center;border-radius:8px;border:1px solid var(--blue,#2454ff);font-size:16px;font-family:PingFang SC;font-style:normal;font-weight:400;line-height:28px;color:var(--blue,#2454ff);margin-right:12px}.shareFooter .shareRight .cancelBtn[data-v-87100820]:active,.shareFooter .shareRight .cancelBtn[data-v-87100820]:hover{border:1px solid #2454ff;color:#2454ff;cursor:pointer}.shareFooter .shareRight .generateLink[data-v-87100820]{display:flex;max-width:280px;height:40px;justify-content:center;align-items:center;border-radius:8px;background:#2454ff;color:#f9f9f9;font-size:16px;font-family:PingFang SC;font-style:normal;font-weight:600;line-height:28px;flex:1}.shareFooter .shareRight .generateLink .link[data-v-87100820]{background-image:url("+P+");background-repeat:no-repeat;background-position:50%;background-size:cover;height:20px;width:20px;margin-right:8px}.shareFooter .shareRight .generateLink[data-v-87100820]:active,.shareFooter .shareRight .generateLink[data-v-87100820]:hover{background:linear-gradient(0deg,rgba(0,0,0,.1),rgba(0,0,0,.1)),#2454ff;cursor:pointer}.shareFooter .shareRight .generateLinkGrey[data-v-87100820]{display:flex;max-width:280px;height:40px;justify-content:center;align-items:center;border-radius:8px;background:#2454ff;color:#f9f9f9;font-size:16px;font-family:PingFang SC;font-style:normal;font-weight:600;line-height:28px;opacity:.30000001;flex:1}.shareFooter .shareRight .generateLinkGrey[data-v-87100820]:hover{cursor:not-allowed}.shareFooter .shareRight .generateLinkGrey .link[data-v-87100820]{background-image:url("+P+");background-repeat:no-repeat;background-position:50%;background-size:cover;height:20px;width:20px;margin-right:8px}.shareFooter .shareRight .generateLinkGrey[data-v-87100820]:active,.shareFooter .shareRight .generateLinkGrey[data-v-87100820]:hover{background:linear-gradient(0deg,rgba(0,0,0,.1),rgba(0,0,0,.1)),#2454ff}.nouse[data-v-87100820]{cursor:not-allowed}.suggest-slot[data-v-87100820]{width:calc(100% + 26px);align-self:flex-end;display:flex;height:24px;margin-top:8px;padding-top:12px;border-top:1px solid #f5f5f5}.suggest-slot.show-upload-icon[data-v-87100820]{width:calc(100% + 70px);position:relative;left:-44px}.suggest-slot .suggest-slot-left[data-v-87100820]{display:flex;align-items:center;flex-shrink:0;padding-left:4.57px}.suggest-slot .suggest-slot-left .icon[data-v-87100820]{width:12px;height:15px;flex-shrink:0;background:url("+N+') no-repeat 100% 100%;background-position:50%}.suggest-slot .suggest-slot-left .text[data-v-87100820]{color:var(--txt_icon_black_2,#4f5866);font-feature-settings:"clig" off,"liga" off;font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:600;line-height:20px;margin-left:4px}.suggest-slot .suggest-slot-middle[data-v-87100820]{flex:1;width:0;display:flex;align-items:center;overflow:hidden;margin-left:16px;margin-right:12px}.suggest-slot .suggest-slot-middle .suggest-slot-middle-inner[data-v-87100820]{width:-moz-max-content;width:max-content;display:flex;flex-wrap:nowrap;gap:8px}.suggest-slot .suggest-slot-middle .suggest-slot-middle-inner .ask[data-v-87100820]{flex-shrink:0;display:flex;align-items:center;background:var(--floating_stroke_grey_1,#f5f5f5);padding:6px 8px 6px 12px;border-radius:8px;gap:6px;color:var(--txt_icon_black_2,#4f5866);font-feature-settings:"clig" off,"liga" off;font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:400;line-height:12px;cursor:pointer}.suggest-slot .suggest-slot-middle .suggest-slot-middle-inner .ask .icon[data-v-87100820]{width:12px;height:12px;flex-shrink:0;background:url('+z+") no-repeat 100% 100%;background-position:50%}.suggest-slot .suggest-slot-middle .suggest-slot-middle-inner .ask[data-v-87100820]:active,.suggest-slot .suggest-slot-middle .suggest-slot-middle-inner .ask[data-v-87100820]:hover{color:#2454ff;background-color:rgba(36,84,255,.1)}.suggest-slot .suggest-slot-middle .suggest-slot-middle-inner .ask:active .icon[data-v-87100820],.suggest-slot .suggest-slot-middle .suggest-slot-middle-inner .ask:hover .icon[data-v-87100820]{padding:0;width:12px;height:12px;background-image:url("+R+")}.suggest-slot .suggest-slot-right[data-v-87100820]{display:flex;align-items:center;gap:4px}.suggest-slot .suggest-slot-right .left-arrow[data-v-87100820]{width:5px;height:9px;padding:6px 7px;flex-shrink:0;background:url("+B+") no-repeat 100% 100%;background-position:50%;cursor:pointer}.suggest-slot .suggest-slot-right .left-arrow[data-v-87100820]:hover{background-image:url("+F+")}.suggest-slot .suggest-slot-right .left-arrow.disabled[data-v-87100820]{background-image:url("+U+");cursor:not-allowed}.suggest-slot .suggest-slot-right .divider[data-v-87100820]{width:1px;height:16px;background-color:#eee}.suggest-slot .suggest-slot-right .right-arrow[data-v-87100820]{width:5px;height:9px;padding:6px 7px;flex-shrink:0;background:url("+H+") no-repeat 100% 100%;background-position:50%;cursor:pointer}.suggest-slot .suggest-slot-right .right-arrow[data-v-87100820]:hover{background-image:url("+W+")}.suggest-slot .suggest-slot-right .right-arrow.disabled[data-v-87100820]{background-image:url("+X+");cursor:not-allowed}.improve-editor[data-v-87100820]{display:flex;flex-direction:column}.improve-enter[data-v-87100820]{margin-bottom:50px}.improve-enter.improve-enter-end[data-v-87100820]{margin-bottom:0}.input-outer[data-v-87100820]{position:relative;z-index:1000}.input-outer .search .noTopBorder[data-v-87100820]{border-top:none!important;border-top-left-radius:0!important;border-top-right-radius:0!important}.search-container .input-top[data-v-87100820]{top:-112px}.search-container .search-box-container[data-v-87100820]{border-radius:12px;border:1px solid var(--bg_lable_grey_2,#545459);background:var(--bg_chat_box_grey_1,#434346)}.search-container .search-box-container .input-box[data-v-87100820]{border-radius:12px}.search-container .search-box-container .aidraw[data-v-87100820]{align-items:baseline}.search-container .search-box-container[data-v-87100820]:focus-within{box-shadow:0 4px 12px 0 #11315f14;border:1px solid var(--txt_icon_grey_4,rgba(26,32,41,.4))}.search-container.container-mt[data-v-87100820]{margin-top:49px}.input-msg[data-v-87100820]{position:absolute;bottom:100%;left:0;z-index:999;width:100%;padding:15px 2px 9px 2px;font-size:14px;color:#666;box-sizing:border-box;justify-content:center}.input-msg.sensitive[data-v-87100820]{padding:13px 2px 13px 2px}.input-msg .failed[data-v-87100820]{color:red}.input-msg .sensitive[data-v-87100820]{background:#2454ff;padding:7px 12px;color:#fff;border-radius:8px;font-weight:600;font-size:14px;line-height:22px;display:flex;align-items:center;cursor:pointer}.input-msg .sensitive img[data-v-87100820]{width:20px;height:20px}.input-msg .sensitive[data-v-87100820]:hover{background:linear-gradient(0deg,rgba(0,0,0,.08),rgba(0,0,0,.08)),#2454ff}.input-msg .btn[data-v-87100820]{height:32px;background:#fff;border-radius:8px;color:#1a2029;padding:5px 12px;font-size:14px;cursor:pointer}.input-msg .btn img[data-v-87100820]{width:20px;height:20px;filter:brightness(0);opacity:.8}.input-msg .btn span[data-v-87100820]{position:relative;top:-5px}.input-msg .btn[data-v-87100820]:hover{color:#2454ff}.input-msg .btn:hover img[data-v-87100820]{filter:brightness(100%);opacity:1}.search[data-v-87100820]{position:relative}.search #search-input-box[data-v-87100820]{max-height:370px}.search .input-wrap[data-v-87100820]{flex:1;flex-grow:0;height:0}.search .input-wrap .input-box-inner[data-v-87100820]{flex-grow:0}.search .search-improve[data-v-87100820]{box-sizing:border-box;width:100%;padding:12px 0;background:#fff;position:absolute;top:-12px;z-index:999;border-radius:12px;box-shadow:0 2px 12px 0 rgba(26,72,137,.08);border:1px solid #d3d7dd}.search .search-improve .title-box[data-v-87100820]{display:flex;justify-content:space-between;align-items:center;align-self:stretch;padding:0 12px 12px 20px}.search .search-improve .title-box .title-left[data-v-87100820]{display:flex;align-items:center;gap:8px;color:var(--txt_icon_black_2,#4f5866);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:22px}.search .search-improve .title-box .title-left .icon[data-v-87100820]{padding-left:4.57px;padding-top:4.57px;width:8.784px;height:10.98px;flex-shrink:0;background:url("+N+") no-repeat 100% 100%}.search .search-improve .title-box .title-left .text[data-v-87100820]{padding-top:2.28px}.search .search-improve .title-box .title-right[data-v-87100820]{width:32px;height:32px;padding-top:2.28px;flex-shrink:0;background:url("+G+") no-repeat 100% 100%;background-position:50%;cursor:pointer}.search .search-improve .title-box .title-right[data-v-87100820]:hover{background-image:url("+Y+')}.search .search-improve .content-container[data-v-87100820]{margin-right:4px;padding:0 8px;max-height:270px;overflow-y:scroll;cursor:pointer}.search .search-improve .content-container .content-outer[data-v-87100820]{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;text-align:left;border-radius:8px}.search .search-improve .content-container .content-outer .improve-content[data-v-87100820]{flex:1;width:0}.search .search-improve .content-container .content-outer .improve-content .title[data-v-87100820]{color:#1a2029;font-feature-settings:"clig" off,"liga" off;font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:600;line-height:25px}.search .search-improve .content-container .content-outer .improve-content .sub-title[data-v-87100820]{overflow:hidden;color:var(--txt_icon_grey_5,#838a95);font-feature-settings:"clig" off,"liga" off;text-overflow:ellipsis;white-space:nowrap;font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:400;line-height:20px}.search .search-improve .content-container .content-outer .icon[data-v-87100820]{width:16px;height:16px;flex-shrink:0;background:url('+V+") no-repeat 100% 100%}.search .search-improve .content-container .content-outer.content-outer-select[data-v-87100820]{background-color:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.search .search-improve .content-container .content-outer.content-outer-select .content[data-v-87100820]{margin-right:16px}.search .search-improve .content-container[data-v-87100820]::-webkit-scrollbar{width:4px}.search .search-improve .content-container[data-v-87100820]::-webkit-scrollbar-track{border-radius:4px;padding-right:4px}.search .search-improve .content-container[data-v-87100820]::-webkit-scrollbar-thumb{background:transparent;border-radius:4px}.search .search-improve .content-container[data-v-87100820]:hover::-webkit-scrollbar-thumb{background:hsla(217,8%,55%,.5)}.search .input-box[data-v-87100820]{display:flex;flex-direction:column;transition:padding .6s ease;width:100%;border-radius:12px;padding:5px 5px 5px 10px;box-sizing:border-box;line-height:30px;align-items:center}.search .input-box .overpercent-box[data-v-87100820]{align-self:flex-start;display:flex;justify-content:center;align-items:center;gap:4px;margin-bottom:8px}.search .input-box .overpercent-box .icon[data-v-87100820]{width:12px;height:12px;background:url("+Z+") no-repeat;background-size:cover}.search .input-box .overpercent-box .icon.icon-multi[data-v-87100820]{background-image:url("+Q+")}.search .input-box .overpercent-box .text[data-v-87100820]{color:var(--txt-icon-grey-360,rgba(79,88,102,.6));font-size:12px;font-weight:400;line-height:12px}.search .input-box .overpercent-box .text.text-multi[data-v-87100820]{color:var(--warn_lable_red_2,#a9433c)}.search .input-box .input-wrap[data-v-87100820]{width:100%;display:flex}.search .input-box .input-box-inner[data-v-87100820]{flex:1}.search .input-box .upload-image-wrap[data-v-87100820]{align-self:flex-start;cursor:pointer;position:relative;margin-top:2px;height:32px}.search .input-box .upload-image-wrap.disable[data-v-87100820]{cursor:auto}.search .input-box .upload-image-wrap .upload-image-animate[data-v-87100820]{position:absolute;width:214px;height:44px;top:-6px;left:-10px;background:url("+J+');background-size:100% 100%;background-repeat:no-repeat}.search .input-box.focused[data-v-87100820]{border:1px solid #2454ff}.search .input-box .close[data-v-87100820]{transition:margin .6s ease;margin-top:8px;margin-right:10px}.search .input-box.nouse[data-v-87100820]{background-color:#f0f0f1}.search .input-box.is-sensitive[data-v-87100820]{opacity:.5}.search .input-box.is-sensitive .enter[data-v-87100820]{cursor:not-allowed;opacity:.4}.search textarea[data-v-87100820]{width:calc(100% - 16px);flex:1;height:20px;margin:5px 0;transition:all .6s ease;display:block;box-sizing:border-box;background-color:#fff0;padding-right:5px;color:var(--txt_icon_black_1,#1a2029);outline:none;border:none;resize:none;font-size:15px;line-height:25px;font-family:PingFang SC;font-style:normal;caret-color:#2454ff}.search textarea[data-v-87100820]::-moz-placeholder{color:var(--txt_icon_grey_5,#838a95);font-family:PingFang SC;font-style:normal;font-weight:400;font-size:15px;line-height:25px}.search textarea[data-v-87100820]::placeholder{color:var(--txt_icon_grey_5,#838a95);font-family:PingFang SC;font-style:normal;font-weight:400;font-size:15px;line-height:25px}.search .enter[data-v-87100820]{cursor:pointer;display:flex;justify-content:flex-end}.search .enter .enter_icon[data-v-87100820]{width:28px;height:28px;position:relative;z-index:1}.search .enter .enter_icon[data-v-87100820]:hover{opacity:.8}.search .enter .enter_icon.disable[data-v-87100820]{opacity:.5;cursor:auto}.search .enter .inner-block[data-v-87100820]{background:#3e6ffb;border-radius:8px;padding:7px 12px}.search .enter .inner-block img[data-v-87100820]{width:16px;height:16px;margin-top:0;margin-bottom:0}.search .enter .inner-block span[data-v-87100820]{font-size:15px;font-weight:600;color:#fff;padding-left:12px}.search .enter.m-three-row[data-v-87100820]{align-self:flex-end}.search .enter.searching[data-v-87100820]{position:relative}.search .enter.searching .enter_icon[data-v-87100820]{width:28px;height:28px;position:relative;z-index:3;border-radius:100%}.search .enter.searching[data-v-87100820]:before{width:96%;height:96%;transform:translate(-50%,-50%);background:#fff;z-index:2}.search .enter.searching[data-v-87100820]:after,.search .enter.searching[data-v-87100820]:before{content:"";position:absolute;left:50%;top:50%;border-radius:100%}.search .enter.searching[data-v-87100820]:after{transform:scale(1) translate(-50%,-50%);text-align:center;line-height:40px;animation-name:scale-87100820;animation-iteration-count:infinite;animation-timing-function:ease-in-out;animation-fill-mode:forwards;animation-duration:1.8s;transform-origin:left top;width:100%;height:100%;z-index:1;background-color:var(--angent_special_grey_3,hsla(0,0%,100%,.15))}.search .search-btn[data-v-87100820]{width:52px;height:52px;margin-right:-14px}.search .search-btn:hover .icon[data-v-87100820],.search .search-btn[data-v-87100820]:hover:before{width:60px;height:60px;left:-2px;top:-2px}.search .search-btn .icon[data-v-87100820],.search .search-btn[data-v-87100820]:before{transition:all .4s ease;left:0;top:0;width:52px;height:52px;z-index:1}.search .search-btn[data-v-87100820]:before{position:absolute;description:"";display:block;z-index:2}.policy-wrap[data-v-87100820]{padding-top:12px}.policy-wrap a[data-v-87100820],.policy-wrap span[data-v-87100820]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px;line-height:12px;color:var(--txt_icon_grey_6,#b0b7c0)}.policy-wrap a[data-v-87100820]:hover{color:var(--txt_icon_grey_5,#838a95);-webkit-text-decoration-line:underline;text-decoration-line:underline}.over-content-tip[data-v-87100820]{display:flex;justify-content:center;align-items:center;gap:4px;padding-top:13px;padding-bottom:1px}.over-content-tip .icon[data-v-87100820]{width:12px;height:12px;flex-shrink:0;background:url('+q+") no-repeat;background-size:cover}.over-content-tip .text[data-v-87100820]{color:var(--warn_lable_red_2,#a9433c);text-align:center;font-size:12px;line-height:12px}@keyframes loader-87100820{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes scale-87100820{0%{transform:scale(1) translate(-50%,-50%)}50%{transform:scale(1.3) translate(-50%,-50%)}to{transform:scale(1) translate(-50%,-50%)}}",""]),e["default"]=A},91981:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".keep-starter-container[data-v-510e55d4]{height:100%;width:100%;flex:auto;display:flex;flex-direction:column;justify-content:flex-start;overflow:scroll;padding-bottom:30px}",""]),e["default"]=s},42653:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(31497),i.b),u=new URL(i(30586),i.b),h=new URL(i(31491),i.b),d=new URL(i(57189),i.b),g=new URL(i(23806),i.b),p=new URL(i(1463),i.b),f=new URL(i(8292),i.b),m=a()(o()),v=l()(c),b=l()(u),x=l()(h),y=l()(d),_=l()(g),w=l()(p),k=l()(f);m.push([t.id,"[data-v-15518d1c] .link-style{-webkit-text-decoration-line:underline;text-decoration-line:underline}[data-v-15518d1c] .link-style:hover{color:var(--txt_stroke_blue_1,#2454ff)!important}[data-v-15518d1c] .parsed-success-label{margin-right:16px;margin-left:2px;width:6px;height:6px;background-image:url("+v+");background-repeat:no-repeat;background-size:cover;display:inline-block;flex:0 0 6px;transform:translateY(-10px)}[data-v-15518d1c] .parsed-failure-label{margin-right:16px;margin-left:2px;width:6px;height:6px;background-image:url("+b+");background-repeat:no-repeat;background-size:cover;display:inline-block;flex:0 0 6px;transform:translateY(-10px)}.conversation .question-text-style[data-v-15518d1c]{position:relative}.conversation .question-text-style:hover .copy-btn[data-v-15518d1c]{display:flex}.conversation .question-text-style .question-txt:hover+.hover-style[data-v-15518d1c]{background:linear-gradient(270deg,var(--bg_grey_1,#f6f7f9) 63.08%,rgba(74,90,112,.059) 100%)}.conversation .question-text-style .question-txt:hover+.hover-style[data-v-15518d1c]:hover{background:linear-gradient(270deg,#fff 63.8%,rgba(74,90,112,.059))}.conversation .question-text-style .copy-btn[data-v-15518d1c]{display:none;position:absolute;left:5px;bottom:-40px;height:40px;box-sizing:border-box;padding:0 12px;justify-content:center;align-items:center;gap:5px;border-radius:8px;border:1px solid var(--stroke_chat_box_grey_1,#eee);background:var(--bg_floating_white_1,#fff);z-index:1000;box-shadow:0 4px 12px 0 rgba(17,49,95,.08)}.conversation .question-text-style .copy-btn .copy-btn-icon[data-v-15518d1c]{width:20px;height:20px;background-image:url("+x+");background-repeat:no-repeat;background-size:cover;flex:0 0 20px}.conversation .question-text-style .copy-btn .copy-btn-icon.copy-btn-icon-dark[data-v-15518d1c]{background-image:url("+y+");background-repeat:no-repeat;background-size:cover}.conversation .question-text-style .copy-btn[data-v-15518d1c]:hover{cursor:pointer}.conversation .question-text-style .copy-btn:hover .copy-btn-icon[data-v-15518d1c],.conversation .question-text-style .copy-btn:hover .copy-btn-icon-dark[data-v-15518d1c]{background-image:url("+_+")}.conversation .question-text-style .copy-btn:hover .copy-btn-text[data-v-15518d1c]{color:var(--txt_stroke_blue_1,#2454ff)}.conversation .question-text-style .copy-btn .copy-btn-text[data-v-15518d1c]{color:var(--bg_bt_black_1,#1a2029);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:400;line-height:22px}.conversation .echo-BgColor[data-v-15518d1c]{padding:5px 0;border-radius:8px}.conversation.question[data-v-15518d1c]{position:relative}.conversation.question .image-with-text[data-v-15518d1c]{margin-top:12px}.conversation.question .question-txt[data-v-15518d1c]{padding-top:0;padding-bottom:5px;padding-left:7px;margin-left:5px;padding-right:5px;position:relative;cursor:pointer}.conversation.question .question-txt[data-v-15518d1c]:hover{background:#4a5a700f;border-radius:8px}.conversation.question .question-txt.question-txt-share[data-v-15518d1c]{border-radius:8px;background:transparent;cursor:default}.conversation.question .question-txt span[data-v-15518d1c]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:15px;line-height:27px;color:var(--txt_icon_black_1,#1a2029)}.conversation.question .question-txt[data-v-15518d1c]:not(:empty){padding-bottom:0}.conversation.question .user-img[data-v-15518d1c]{display:block;width:24px;height:24px}.conversation.question-image.question-image-upload[data-v-15518d1c]{margin-top:0}.conversation .question-file[data-v-15518d1c]{display:flex;flex-wrap:wrap;width:auto;background:transparent;padding:0;position:relative;top:10px;margin-bottom:8px}.conversation .question-file .file-box[data-v-15518d1c]{box-sizing:border-box;width:210px;height:56px;display:flex;padding:8px 10px;align-items:center;gap:10px;background:var(--hover_icon_grey_1,rgba(79,88,102,.06));border-radius:8px}.conversation .question-file .file-box .file[data-v-15518d1c]{width:100%;flex-shrink:0;flex-grow:0;box-sizing:border-box;display:flex;align-items:center;gap:10px;border-radius:8px;position:relative}.conversation .question-file .file-box .file .icon[data-v-15518d1c]{flex-shrink:0;width:36px;height:36px;background-size:cover;background-repeat:no-repeat;position:relative;overflow:hidden}.conversation .question-file .file-box .file .icon .answer-error-icon[data-v-15518d1c]{position:absolute;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);border-radius:8px;cursor:pointer}.conversation .question-file .file-box .file .icon .answer-error-icon .file-retry-icon[data-v-15518d1c]{display:flex;width:20px;height:20px;justify-content:center;align-items:center;flex-shrink:0;position:absolute;left:8px;top:8px;background:url("+w+") 50% no-repeat;background-size:cover}.conversation .question-file .file-box .file .icon.icon-img[data-v-15518d1c]{border-radius:8px}.conversation .question-file .file-box .file .icon.img-loading[data-v-15518d1c]{background:rgba(213,217,223,.5);border-radius:8px}.conversation .question-file .file-box .file .file-info[data-v-15518d1c]{width:calc(100% - 46px);flex-shrink:0;flex-grow:0;display:flex;flex-direction:column}.conversation .question-file .file-box .file .file-info .name[data-v-15518d1c]{width:100%;color:var(--txt_icon_black_1,#1a2029);font-size:12px;line-height:20px;text-align:left}.conversation .question-file .file-box .file .file-info .status .success[data-v-15518d1c]{display:flex;align-items:center;gap:8px;align-self:stretch;overflow:hidden;color:var(--txt_icon_grey_5,#838a95);text-overflow:ellipsis;font-family:PingFang SC;font-size:12px;font-weight:400;line-height:20px}.conversation .overpercent-box[data-v-15518d1c]{display:flex;align-items:center;gap:4px;margin-top:14px}.conversation .overpercent-box .icon[data-v-15518d1c]{width:12px;height:12px;background:url("+k+") no-repeat;background-size:cover}.conversation .overpercent-box .text[data-v-15518d1c]{color:var(--txt-icon-grey-360,rgba(79,88,102,.6));font-size:12px;font-weight:400;line-height:12px}.conversation .width_full .user-name[data-v-15518d1c]{color:var(--txt_icon_black_1,hsla(0,0%,100%,.95));font-size:15px;font-style:normal;font-weight:700;line-height:24px;text-align:left;margin-left:12px;padding-bottom:8px}.quote-echo-container:hover~.copy-btn[data-v-15518d1c]{display:none!important}",""]),e["default"]=m},50206:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".quote-button[data-v-1e489978]{box-shadow:0 4px 12px 0 rgba(17,49,95,.04);cursor:pointer;z-index:100;gap:6px}.quote-button[data-v-1e489978],.quote-button .button-mask[data-v-1e489978]{border-radius:8px;background:#fff;color:#1a2029;box-shadow:0 4px 12px 0 rgba(17,49,95,.08)}.quote-button .button-mask[data-v-1e489978]{padding:7px 11px;gap:var(--R4,6px);border:1px solid rgba(26,32,41,.16)}.quote-button .quote-button-text[data-v-1e489978]{color:#1a2029;font-weight:400;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:none;word-break:break-all;font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:20px}.quote-button img[data-v-1e489978]{width:20px;height:20px;border-radius:50%}.quote-button .quote-button-hover[data-v-1e489978]{display:none}.quote-button:hover .button-mask[data-v-1e489978]{border-radius:8px;border:1px solid rgba(26,32,41,.16);background:rgba(79,88,102,.06);box-shadow:0 4px 12px 0 rgba(17,49,95,.08)}.quote-button:hover .quote-button-text[data-v-1e489978]{color:#2454ff}.quote-button:hover img[data-v-1e489978]{display:none}.quote-button:hover .quote-button-hover[data-v-1e489978]{display:block}.active .quote-button-text[data-v-1e489978]{color:#007aff}",""]),e["default"]=s},45048:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,"#__quote-container-id__+*{margin-top:0}",""]),e["default"]=s},58407:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(59154),i.b),u=a()(o()),h=l()(c);u.push([t.id,".quote-content-show[data-v-ce887456]{background:var(--angent_special_grey_1,#f6f7f9);padding:12px 8px 0 16px;border-radius:12px 12px 0 0;border-bottom:none;display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex:1 0 0;-webkit-user-select:text;-moz-user-select:text;user-select:text}.quote-content-show .quote-content-show-box[data-v-ce887456]{padding-bottom:12px;display:flex;align-items:flex-start}.quote-content-show .quote-content-show-box.show-border-bottom[data-v-ce887456]{border-bottom:1px solid var(--box_stroke_grey_1,#d3d7dd);width:100%}.quote-content-show .quote-content-show-box .quote-content-show-content[data-v-ce887456]{text-align:left;color:var(--txt_icon_black_2,#4f5866);font-size:14px;line-height:24px;max-height:168px;overflow-y:auto;padding-right:36px;word-break:break-all}.quote-content-show .close-quote[data-v-ce887456]{background-image:url("+h+");background-size:16px 16px;background-position:50%;background-repeat:no-repeat;width:32px;height:32px;cursor:pointer;position:absolute;right:8px;top:12px}.quote-content-show .close-quote[data-v-ce887456]:hover{border-radius:8px;background-color:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.add-margin-bottom[data-v-ce887456]{margin-bottom:45px}",""]),e["default"]=u},14614:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,'.quote-echo-container[data-v-10096149]{position:relative}.quote-echo-container .quote-echo[data-v-10096149]{display:flex;margin-left:12px;margin-bottom:8px;padding-left:12px;align-items:center;gap:10px;align-self:stretch;text-align:left;-webkit-user-select:text;-moz-user-select:text;user-select:text;word-break:break-all;color:var(--txt_icon_grey_5,#838a95);position:relative;overflow:hidden;text-align:justify;line-height:24px;font-size:14px;font-style:normal;font-weight:400;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.quote-echo-container .quote-echo[data-v-10096149]:after{content:"";position:absolute;left:0;top:6px;width:3px;height:calc(100% - 12px);background:var(--bg_lable_grey_2,rgba(79,88,102,.16))}.quote-echo-container .quote-echo.quote-open[data-v-10096149]{-webkit-line-clamp:unset;overflow:unset;max-height:unset}.quote-echo-container .quote_open[data-v-10096149]{position:absolute;right:2px;bottom:13px;border-radius:6px;border:1px solid #e7e8ea;width:20px;height:20px;cursor:pointer}.quote-echo-container .quote_open img[data-v-10096149]{background:unset;width:12px;height:12px;transform:rotate(0deg);transition:all .3s}.quote-echo-container .quote_open.quote-open-img img[data-v-10096149]{transform:rotate(180deg)}.quote-echo-container .quote_open.close img[data-v-10096149]{transform:rotate(0deg)}',""]),e["default"]=s},25823:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".quote-guard-container[data-v-d0727766]{position:absolute;padding:8px;padding-left:0;width:205px}.quote-guard-container .quote-guard-content[data-v-d0727766]{background:#2757ff;border-radius:12px;padding:12px}.quote-guard-container .quote-guard-content p[data-v-d0727766]{color:#fff;font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:23px;margin:unset}.quote-guard-container .quote-guard-content p span[data-v-d0727766]{color:#8af8ff}.quote-guard-container .quote-guard-content .quote-guard-example[data-v-d0727766]{width:90px;height:54px;flex-shrink:0;border-radius:8px}.quote-guard-container .triangle-down[data-v-d0727766]{width:16px;height:8px;background-color:#2757ff;-webkit-clip-path:polygon(0 0,100% 0,50% 100%);clip-path:polygon(0 0,100% 0,50% 100%);position:absolute;bottom:0;left:50%;transform:translateX(-50%)}.quote-guard-container .close-btn[data-v-d0727766]{padding:2px;position:absolute;top:0;right:0}.quote-guard-container .close-btn .close-btn-circle[data-v-d0727766]{width:19px;height:19px;border-radius:50%}.quote-guard-container .close-btn .close-btn-circle img[data-v-d0727766]{width:19px;height:19px;background:unset}",""]),e["default"]=s},96652:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".retry-button[data-v-9b16f29a]{box-sizing:border-box;justify-content:center;margin-left:14px}.retry-button .btn[data-v-9b16f29a]{background:var(--bg_white_1,#fff);border-radius:8px;color:var(--txt_stroke_blue_1,#2454ff);font-size:15px;line-height:27px;cursor:pointer;font-weight:400;padding:4px 6px}.retry-button .btn[data-v-9b16f29a]:hover{border-radius:8px;background:var(--hover_icon_grey_2,rgba(79,88,102,.08))}.retry-button .btn img[data-v-9b16f29a]{width:15px;height:15px;padding-top:6px;opacity:.8;opacity:1}.retry-button .btn span[data-v-9b16f29a]{margin-left:6px}.disabled[data-v-9b16f29a]{opacity:.5}",""]),e["default"]=s},44324:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".conversation-container[data-v-a383a220]{width:100%;height:100%;display:flex;justify-content:center;overflow:hidden}.conversation-container .conversation-inner[data-v-a383a220]{overflow-x:auto;width:100%;height:100%;flex:auto;display:flex;flex-direction:column;align-items:center}.conversation-container .conversation-inner .conversation-bottom[data-v-a383a220]{width:100%;min-width:388px;max-width:872px;padding-bottom:12px;box-sizing:border-box;flex:none;position:relative}.conversation-container .conversation-inner .conversation-bottom .bg-gradient[data-v-a383a220]{width:100%;transform:translate(36px);height:56px;background:linear-gradient(0deg,var(--bg_white_1,#fff) 23.17%,hsla(0,0%,100%,0) 108.94%);position:absolute;top:-56px;left:-36px;pointer-events:none;z-index:1000}.conversation-container .conversation-inner .conversation-bottom .bg-gradient.bg-gradient-ai-draw[data-v-a383a220]{top:-22px;height:22px}.conversation-container .conversation-inner .conversation-bottom .seize-a-seat[data-v-a383a220]{width:100%;height:12px}.glm-4[data-v-a383a220]{margin:0!important}.dialogue .conversation-bottom[data-v-a383a220]{max-width:800px!important}.last-div-glms4[data-v-a383a220]{width:100%;max-width:800px;transform:translateX(-50%);height:56px;background:linear-gradient(0deg,var(--bg_grey_1,#fff) 23.17%,hsla(0,0%,100%,0) 108.94%);position:absolute;top:-52px;left:50%;pointer-events:none;z-index:100}@media (max-width:500px){.ai-draw-padding[data-v-a383a220]{padding:0 20px}}.keep-starter-container[data-v-a383a220]{height:100%;width:100%;flex:auto;display:flex;flex-direction:column;justify-content:flex-start;overflow:scroll;padding-bottom:30px}",""]),e["default"]=s},82839:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".item .sensitive[data-v-71df4e0a]{margin-top:10px;color:#999;font-size:14px}.item .latest-news .new-session[data-v-71df4e0a]{color:#2454ff;cursor:pointer}.new_ai_search_conversation[data-v-71df4e0a]{margin-top:16px;margin-left:48px;text-align:left;color:var(--txt-icon-grey-360,rgba(79,88,102,.6));font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:400;line-height:27px}",""]),e["default"]=s},5177:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".conversation-list[data-v-7a387a46]{height:100%;width:100%;flex:auto;display:flex;flex-direction:column;justify-content:flex-start;overflow:scroll;padding-bottom:30px}.conversation-list .last-div[data-v-7a387a46]{height:47px;flex:none;background:transparent}.conversation-list.detail .item[data-v-7a387a46]{margin:0 auto;box-sizing:border-box;width:100%}.keep-starter[data-v-7a387a46]{width:100%;height:-moz-fit-content;height:fit-content;overflow:initial;min-height:100%;justify-content:flex-start}.keep-starter .last-div[data-v-7a387a46]{height:47px;flex:none;background:transparent}.keep-starter.detail .item[data-v-7a387a46]{margin:0 auto;box-sizing:border-box;width:100%}.dialogue .detail .item[data-v-7a387a46]{max-width:872px!important}",""]),e["default"]=s},98133:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(17485),i.b),u=new URL(i(39078),i.b),h=new URL(i(38173),i.b),d=a()(o()),g=l()(c),p=l()(u),f=l()(h);d.push([t.id,".upload-demo[data-v-594e0e30]{height:28px}.upload-image-btn[data-v-594e0e30]{z-index:9999;width:28px;height:28px;margin-right:12px;background-size:100%;background:url("+g+") no-repeat;position:relative;cursor:auto}.upload-image-btn.upload-image-btn-dark[data-v-594e0e30]{background-size:100%;cursor:auto;background:url("+p+') no-repeat;position:relative}.upload-image-btn[data-v-594e0e30]:not(.upload-image-btn-disabled):after{display:none;content:"";position:absolute;width:100%;height:100%;top:0;left:0;cursor:pointer;z-index:9999;background-size:100%;background:url('+f+") no-repeat}.upload-image-btn[data-v-594e0e30]:not(.upload-image-btn-disabled):hover{background:none}.upload-image-btn[data-v-594e0e30]:not(.upload-image-btn-disabled):hover:after{display:block}.upload-image-btn.upload-image-btn-disabled[data-v-594e0e30]{opacity:.4;pointer-events:none}.upload-image-btn.upload-image-btn-disabled .select-box[data-v-594e0e30]{visibility:hidden;z-index:9999}.upload-image-btn .select-box[data-v-594e0e30]{visibility:hidden;box-sizing:border-box;min-width:138px;display:flex;padding:4px;flex-direction:column;align-items:flex-start;gap:6px;border-radius:12px;background:var(--bg_floating_white_1,#363739);box-shadow:0 4px 12px 0 rgba(17,49,95,.08);position:absolute;bottom:50px;left:-19px;height:90px;border:1px solid var(--floating_stroke_grey_1,#f5f5f5)}.upload-image-btn .select-box.select-box-disabled[data-v-594e0e30]{visibility:hidden}.upload-image-btn .select-box .select[data-v-594e0e30]{display:flex;padding:8px 10px;align-items:center;gap:8px}.upload-image-btn .select-box .select[data-v-594e0e30]:hover{border-radius:8px;background:var(--hover_icon_grey_2,#434346)}.upload-image-btn .select-box .select:hover .text[data-v-594e0e30]{font-weight:600}.upload-image-btn .select-box .select .cloud-icon[data-v-594e0e30]{width:16px;height:16px}.upload-image-btn .select-box .select .cloud-icon.cloud-icon-dark[data-v-594e0e30]{transform:rotate(-90deg)}.upload-image-btn .select-box .select .local-icon[data-v-594e0e30]{width:16px;height:16px}.upload-image-btn .select-box .select .text[data-v-594e0e30]{color:var(--txt_icon_black_1,#1a2029);font-size:14px;font-weight:400;line-height:22px;white-space:nowrap}",""]),e["default"]=d},94667:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(82071),i.b),u=new URL(i(1463),i.b),h=new URL(i(62939),i.b),d=new URL(i(1263),i.b),g=new URL(i(6611),i.b),p=new URL(i(2570),i.b),f=new URL(i(35324),i.b),m=a()(o()),v=l()(c),b=l()(u),x=l()(h),y=l()(d),_=l()(g),w=l()(p),k=l()(f);m.push([t.id,".file-list-box[data-v-40c935b1]{width:100%;margin-bottom:20px;align-self:flex-start;display:flex;flex-wrap:wrap;align-items:center;gap:8px}.file-list-box.isSmall .file-box[data-v-40c935b1]{width:calc(50% - 8px)}.file-list-box .file-box[data-v-40c935b1]{width:calc(33.33333% - 5.33333px);min-width:160px}.file-list-box .file-box .file[data-v-40c935b1]{width:100%;flex:1;flex-shrink:0;flex-grow:0;box-sizing:border-box;display:flex;height:52px;padding:10px;align-items:center;gap:10px;border-radius:8px;background:var(--floating_stroke_grey_1,#f5f5f5);position:relative}.file-list-box .file-box .file .icon[data-v-40c935b1]{flex-shrink:0;width:36px;height:36px;background-size:cover;background-repeat:no-repeat;position:relative;overflow:hidden}.file-list-box .file-box .file .icon .answer-error-icon[data-v-40c935b1]{position:absolute;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);border-radius:8px;cursor:pointer}.file-list-box .file-box .file .icon .answer-error-icon.file-retry-cover[data-v-40c935b1]{background:url("+v+") no-repeat;background-size:cover;background-color:transparent;border-radius:0}.file-list-box .file-box .file .icon .answer-error-icon .file-retry-icon[data-v-40c935b1]{display:flex;width:20px;height:20px;justify-content:center;align-items:center;flex-shrink:0;position:absolute;left:8px;top:8px;background:url("+b+") 50% no-repeat;background-size:cover}.file-list-box .file-box .file .icon.icon-img[data-v-40c935b1]{border-radius:8px}.file-list-box .file-box .file .file-info[data-v-40c935b1]{width:calc(100% - 46px);display:flex;flex-direction:column}.file-list-box .file-box .file .file-info .name[data-v-40c935b1]{width:100%;color:var(--txt_icon_black_1,#1a2029);font-size:12px;line-height:20px;text-align:left}.file-list-box .file-box .file .file-info .status .loading[data-v-40c935b1]{display:flex;align-items:center;gap:4px}.file-list-box .file-box .file .file-info .status .loading .icon[data-v-40c935b1]{display:flex;width:10.8px;height:10.8px;background:url("+x+") no-repeat;background-size:contain;animation:rotate-40c935b1 1s linear infinite;transform-style:preserve-3d;will-change:transform;transform-origin:center}.file-list-box .file-box .file .file-info .status .loading .icon.icon-dark[data-v-40c935b1]{background:url("+y+") no-repeat;background-size:contain}.file-list-box .file-box .file .file-info .status .loading .text[data-v-40c935b1]{color:var(--txt_icon_black_1,#1a2029);font-size:12px;line-height:20px}.file-list-box .file-box .file .file-info .status .success[data-v-40c935b1]{display:flex;align-items:center;gap:8px;align-self:stretch;overflow:hidden;color:var(--txt_icon_grey_5,#838a95);text-overflow:ellipsis;font-family:PingFang SC;font-size:12px;font-weight:400;line-height:20px}.file-list-box .file-box .file .file-info .status .retry[data-v-40c935b1]{color:var(--txt_stroke_blue_1,#2454ff);font-size:12px;font-weight:400;line-height:20px;text-align:left;cursor:pointer}.file-list-box .file-box .file .file-info .status .retry[data-v-40c935b1]:hover{color:var(--txt_stroke_blue_1,#2454ff)}.file-list-box .file-box .file .close[data-v-40c935b1]{width:16px;height:16px;background:url("+_+") 100% no-repeat;position:absolute;top:-4px;right:-4px;margin-top:0!important;cursor:pointer}.file-list-box .file-box .file .close[data-v-40c935b1]:hover{background-image:url("+w+")}.file-list-box .file-box .file .is-cloud[data-v-40c935b1]{width:20px;height:14px;background:url("+k+") no-repeat;background-size:cover;position:absolute;top:0;left:0}@keyframes rotate-40c935b1{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),e["default"]=m},42155:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".custom-skeleton-item-container{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px}.custom-skeleton-item-container .el-skeleton__image{border-radius:50%}",""]),e["default"]=s},15433:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(22622),i.b),u=new URL(i(66789),i.b),h=a()(o()),d=l()(c),g=l()(u);h.push([t.id,".init-page.pc[data-v-e538f990]{width:100%;flex:auto;padding-bottom:40px}.init-page.pc.init-scroll[data-v-e538f990]{overflow-y:auto}.init-page.pc.keep-starter[data-v-e538f990]{overflow:initial;height:-moz-fit-content;height:fit-content}.init-page.pc .content[data-v-e538f990]{margin:0 auto;width:700px;max-width:800px;min-width:550px;margin-top:3vh;flex-shrink:1;flex-grow:1}.init-page.pc .content.content-prod[data-v-e538f990]{margin-top:6vh;min-width:500px;max-width:500px}.init-page.pc .content .title-container[data-v-e538f990]{display:flex;flex-direction:column;padding:0;gap:4px;max-width:800px;margin:0 auto;width:-moz-fit-content;width:fit-content;text-align:center}.init-page.pc .content .title-container .title-logo[data-v-e538f990]{width:100px;height:100px;border-radius:484.849px;overflow:hidden;margin:0 auto}.init-page.pc .content .title-container .title-line[data-v-e538f990]{margin-top:16px;font-style:normal;font-weight:600;font-size:16px!important;line-height:24px!important;color:var(--txt_icon_black_1,#1a2029)}.init-page.pc .content .title-container .sub-title-line[data-v-e538f990]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px!important;line-height:18px!important;text-align:center;color:var(--txt_icon_grey_5,hsla(0,0%,100%,.5))}.init-page.pc .content .title-container .title-info[data-v-e538f990]{display:flex;flex-direction:row;-moz-column-gap:16px;column-gap:16px;justify-content:center}.init-page.pc .content .title-container .title-info .title-info-item[data-v-e538f990]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:12px;line-height:25px;color:var(--txt_icon_grey_5,#838a95)}.init-page.pc .content .title-container .title-info .title-info-item img[data-v-e538f990]{vertical-align:middle;transform:translateY(-1px)}.init-page.pc .content .title-container.form-title[data-v-e538f990]{flex-direction:row;margin-left:0;max-width:none;margin-right:32px;margin-top:-3vh}.init-page.pc .content .title-container.form-title .title-logo[data-v-e538f990]{width:68px;height:68px}.init-page.pc .content .title-container .title-right[data-v-e538f990]{text-align:left;margin-left:16px}.init-page.pc .content .title-container .title-right .sub-title-line[data-v-e538f990]{text-align:left}.init-page.pc .content .title-container .title-right .title-info[data-v-e538f990]{justify-content:flex-start}.init-page.pc .content .title-container .title-right .title-line[data-v-e538f990]{margin-top:0}.init-page.pc .content .actions-container[data-v-e538f990]{margin-top:20px}.init-page.pc .wrap[data-v-e538f990]{display:flex}.init-page.pc .wrap-null[data-v-e538f990]{width:100%;height:calc(100vh - 177px);display:flex;align-items:center;justify-content:center}.init-page.pc .wrap-null .none-assistant[data-v-e538f990]{width:285px;height:115px;display:flex;flex-direction:column;align-items:center;gap:16px}.init-page.pc .wrap-null .none-assistant .loading-icon[data-v-e538f990]{background-image:url("+d+");width:72px;height:72px;background-repeat:no-repeat;background-size:cover}.init-page.pc .wrap-null .none-assistant .loading-icon.loading-icon-dark[data-v-e538f990]{background-image:url("+g+");width:72px;height:72px;background-repeat:no-repeat;background-size:cover}.init-page.pc .wrap-null .none-assistant .loading-text[data-v-e538f990]{color:var(--txt_icon_grey_6,#b0b7c0);text-align:center;font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:400;line-height:27px}",""]),e["default"]=h},89104:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(79524),i.b),u=new URL(i(59542),i.b),h=a()(o()),d=l()(c),g=l()(u);h.push([t.id,".card[data-v-59d46ab4]{display:flex;flex-direction:column-reverse;width:var(--7c0053ff);height:var(--2b899be4);overflow:hidden;background:#fff;border-radius:16px}.card .cover[data-v-59d46ab4]{position:relative;display:flex;flex:1;flex-shrink:0;align-items:center;justify-content:center;width:100%;height:100%;background:var(--bg_grey_1,#f6f7f9)}.card .cover img[data-v-59d46ab4]{display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.card .cover .overlay[data-v-59d46ab4]{position:absolute;display:none;top:0;left:0;right:0;bottom:0;background:linear-gradient(180deg,transparent 50%,rgba(0,0,0,.59))}.card .cover .overlay .create[data-v-59d46ab4]{position:absolute;bottom:20px;left:calc(50% - 47px);padding:7px 10px;display:flex;justify-content:center;align-items:center;gap:4px;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:400;line-height:22px;border-radius:8px;background:var(--bg_grey_1,#f6f7f9);cursor:pointer}.card .cover .overlay .create .icon[data-v-59d46ab4]{width:14px;height:14px}.card .cover .overlay .create.dark .icon[data-v-59d46ab4]{content:url("+d+")}.card .cover .overlay .create[data-v-59d46ab4]:hover{color:var(--txt_stroke_blue_1,#2454ff)}.card .cover .overlay .create:hover .icon[data-v-59d46ab4]{content:url("+g+")}.card .cover:hover .overlay[data-v-59d46ab4]{display:block}.v-enter-active[data-v-59d46ab4],.v-leave-active[data-v-59d46ab4]{opacity:1;transition:all .4s linear;will-change:opacity}.v-enter-from[data-v-59d46ab4],.v-leave-to[data-v-59d46ab4]{opacity:0;will-change:opacity}",""]),e["default"]=h},19301:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".container[data-v-3c4998fa]{display:flex;padding:0;gap:16px;max-width:800px;width:-moz-fit-content;width:fit-content;text-align:center;padding:0 20px}.container .title-logo[data-v-3c4998fa],.container .title-logo img[data-v-3c4998fa]{width:68px;height:68px;border-radius:50%}.container .info[data-v-3c4998fa]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center}.container .title-line[data-v-3c4998fa]{font-style:normal;font-weight:600;font-size:16px!important;line-height:24px!important;color:var(--txt_icon_black_1,#1a2029)}.container .sub-title-line[data-v-3c4998fa]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px!important;line-height:18px!important;text-align:left;color:var(--txt_icon_grey_5,hsla(0,0%,100%,.5))}.container .title-info[data-v-3c4998fa]{display:flex;flex-direction:row;-moz-column-gap:16px;column-gap:16px;justify-content:center}.container .title-info .title-info-item[data-v-3c4998fa]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:12px;line-height:25px;color:var(--txt_icon_grey_5,#838a95)}.container .title-info .title-info-item img[data-v-3c4998fa]{vertical-align:middle;transform:translateY(-1px)}.container.form-title[data-v-3c4998fa]{flex-direction:row;margin-left:0;max-width:none;margin-right:32px;margin-top:-3vh}.container.form-title .title-logo[data-v-3c4998fa]{width:68px;height:68px}.container .title-right[data-v-3c4998fa]{text-align:left;margin-left:16px}.container .title-right .sub-title-line[data-v-3c4998fa]{text-align:left}.container .title-right .title-info[data-v-3c4998fa]{justify-content:flex-start}.container .title-right .title-line[data-v-3c4998fa]{margin-top:0}",""]),e["default"]=s},29979:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,'.box[data-v-536124dd]{margin-top:40px;position:relative;padding-left:20px}.title[data-v-536124dd]{display:flex;align-items:center;margin-bottom:10px;gap:2px}.title .tips[data-v-536124dd]{width:100%;height:100%}.title .text[data-v-536124dd]{font-family:PingFang SC;font-size:20px;font-style:normal;font-weight:600;line-height:30px;background:linear-gradient(94deg,#439aff 8.2%,#4be0bc 51.71%,#ab83ff 97.53%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;-webkit-user-select:none;-moz-user-select:none;user-select:none}.content[data-v-536124dd]{position:relative;display:flex;align-items:center;justify-content:space-between;box-sizing:border-box;scrollbar-width:none;-ms-overflow-style:none;overflow-x:auto}.content[data-v-536124dd]::-webkit-scrollbar{display:none}.content .more[data-v-536124dd]{position:absolute;right:-27px;top:0;bottom:0;width:89.093px;flex-shrink:0;z-index:999;background:linear-gradient(270deg,#fff 58.47%,hsla(0,0%,100%,0) 73.06%);display:none;cursor:pointer}.content .more .arrow[data-v-536124dd]{display:flex;width:32px;height:32px;justify-content:center;align-items:center;border-radius:36px;border:1px solid var(--stroke_chat_box_grey_1,#434346);background:var(--bg_white_1,#2b2e30);box-shadow:0 4px 12px 0 rgba(17,49,95,.08)}.content .more.dark[data-v-536124dd]{background:linear-gradient(270deg,#2b2e30 53.98%,rgba(43,46,48,0) 73.81%)}@media (max-width:500px){.content .more[data-v-536124dd]{display:flex;align-items:center;justify-content:center}}.content .tool-item[data-v-536124dd]{display:flex;flex-direction:column;align-items:center;gap:6px;border-radius:8px;flex-shrink:0;width:112px;height:170px;position:relative;padding-bottom:31px;border-radius:81px 81px 25px 25px;margin-right:27px}.content .tool-item[data-v-536124dd]:hover:after{content:"";position:absolute;bottom:12px;left:7px;width:98px;height:19px;background:#b3bccd;border-radius:50%;opacity:.65;filter:blur(6px)}.content .tool-item.tool-item-dark[data-v-536124dd]:hover:after{background:#131314}.content .tool-item img[data-v-536124dd]{width:100%;cursor:pointer;z-index:1}',""]),e["default"]=s},51835:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".icon[data-v-fd8ba988]{display:inline-block;border-radius:1px;border:1.3px solid var(--txt_icon_black_2,#4f5866)}.icon[data-v-fd8ba988],.icon-1-1[data-v-fd8ba988]{width:10px;height:10px}.icon-4-3[data-v-fd8ba988]{width:12px;height:10px}.icon-3-4[data-v-fd8ba988]{width:10px;height:12px}.icon-16-9[data-v-fd8ba988]{width:12px;height:7.429px}.icon-9-16[data-v-fd8ba988]{width:7.429px;height:12px}.options[data-v-fd8ba988]{gap:10px}.options[data-v-fd8ba988],.options .prompt-item[data-v-fd8ba988]{display:flex;align-items:center}.options .prompt-item[data-v-fd8ba988]{padding:2px 8px;border-radius:6px;background:var(--bg_grey_1,#f6f7f9);color:var(--txt_icon_black_2,#4f5866);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:400;line-height:22px;cursor:pointer}.options .prompt-item.active[data-v-fd8ba988],.options .prompt-item.cur[data-v-fd8ba988]{color:var(--txt_stroke_blue_1,#386fff)}.options .prompt-item.active .icon[data-v-fd8ba988],.options .prompt-item.cur .icon[data-v-fd8ba988]{border:1.3px solid var(--txt_stroke_blue_1,#2454ff)}.popover-wrap[data-v-fd8ba988]{width:250px}.popover-wrap .content[data-v-fd8ba988]{padding:0 16px;display:flex;flex-wrap:wrap;gap:12px;height:200px;box-sizing:border-box;overflow-y:auto}.popover-wrap .content .skill-item[data-v-fd8ba988]{display:flex;padding:8px 0;justify-content:center;align-items:center;gap:10px;flex:0 0 47%;box-sizing:border-box;border-radius:8px;border:1px solid transparent;cursor:pointer;color:var(--txt_icon_black_1,hsla(0,0%,100%,.95));font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:400;line-height:22px}.popover-wrap .content .skill-item.cur[data-v-fd8ba988]{color:var(--txt_stroke_blue_1,#2454ff);background:var(--bg-blue-26,rgba(36,84,255,.06));border:1px solid var(--txt_stroke_blue_1,#2454ff)}.popover-wrap .content .skill-item[data-v-fd8ba988]:hover{color:var(--txt_stroke_blue_1,#2454ff)}.style-wrap[data-v-fd8ba988]{display:flex;flex-direction:column;gap:12px;max-height:330px;overflow-y:auto;padding:1px 16px}.style-wrap .style-item[data-v-fd8ba988]{box-sizing:border-box;width:150px;display:flex;align-items:center;gap:8px;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:400;line-height:22px;outline:1px solid transparent;cursor:pointer}.style-wrap .style-item .icon[data-v-fd8ba988]{width:50px;height:50px;border-radius:12px}.style-wrap .style-item .text[data-v-fd8ba988]{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:400;line-height:22px}.style-wrap .style-item.cur[data-v-fd8ba988]{border-radius:12px;outline:1px solid var(--txt_stroke_blue_1,#2454ff);background:var(--bg-blue-26,rgba(36,84,255,.06))}.style-wrap .style-item.cur .text[data-v-fd8ba988],.style-wrap .style-item:hover .text[data-v-fd8ba988]{color:var(--txt_stroke_blue_1,#2454ff)}.style-wrap .ratio-item[data-v-fd8ba988]{padding:10px 14px;border-radius:8px;border:1px solid transparent;cursor:pointer;box-sizing:border-box}.style-wrap .ratio-item .text[data-v-fd8ba988]{color:var(--txt_icon_black_1,#1a2029);line-height:22px;display:flex;align-items:center}.style-wrap .ratio-item:hover .icon[data-v-fd8ba988]{border:1.3px solid var(--txt_stroke_blue_1,#2454ff)}.style-wrap .ratio-item:hover .text[data-v-fd8ba988]{color:var(--txt_stroke_blue_1,#2454ff)}.style-wrap .ratio-item.cur[data-v-fd8ba988]{border-radius:8px;border-color:var(--txt_stroke_blue_1,#2454ff);background:var(--bg-blue-26,rgba(36,84,255,.06))}.style-wrap .ratio-item.cur .icon[data-v-fd8ba988]{border:1.3px solid var(--txt_stroke_blue_1,#2454ff)}.style-wrap .ratio-item.cur .text[data-v-fd8ba988]{color:var(--txt_stroke_blue_1,#2454ff)}.style-wrap .dpi-item[data-v-fd8ba988],.style-wrap .ratio-item.cur .text[data-v-fd8ba988]{font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:400;line-height:22px}.style-wrap .dpi-item[data-v-fd8ba988]{border-radius:8px;padding:10px 13px;color:var(--txt-icon-grey-360,rgba(79,88,102,.6));text-align:center;cursor:pointer}.style-wrap .dpi-item .sub[data-v-fd8ba988]{font-size:12px;margin-left:10px}.style-wrap .dpi-item.cur[data-v-fd8ba988]{border:1px solid var(--txt_stroke_blue_1,#2454ff);color:var(--txt_stroke_blue_1,#2454ff)}",""]),e["default"]=s},75141:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".example_popover{margin-top:0!important;padding:16px 0!important;border-radius:12px!important;border:1px solid var(--stroke_chat_box_grey_1,#d3d7dd)!important;background:var(--bg_white_1,#fff)!important;box-shadow:0 4px 8px 0 rgba(0,0,0,.1)!important}.example_popover .el-tabs__active-bar{box-sizing:border-box!important;background-clip:content-box!important;padding:0 8px;border-radius:2px;background:var(--txt_stroke_blue_1,#386fff)}.example_popover .el-popover__title{font-size:14px;font-weight:600;line-height:24px}.example_popover .content,.example_popover .el-popover__title{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-style:normal}.example_popover .content{width:100%;text-align:left;font-size:13px;font-weight:400;line-height:22px;overflow-y:auto;max-height:330px;white-space:pre-line}.example_popover .content::-webkit-scrollbar{width:4px}.example_popover .content::-webkit-scrollbar-track{border-radius:4px}.example_popover .content::-webkit-scrollbar-thumb{background:transparent;border-radius:4px}.example_popover .content:hover::-webkit-scrollbar-thumb{background:hsla(217,8%,55%,.5)}.example_popover .el-tabs__header{justify-content:center}.example_popover .el-tabs__nav-wrap{flex:none}.example_popover .el-tabs__nav-wrap:after{background:none}.example_popover .el-tabs__item{height:24px;padding-left:0;padding-right:24px;color:var(--txt_icon_black_1,hsla(0,0%,100%,.95));font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:600;line-height:25px}.example_popover .el-tabs__item.is-active,.example_popover .el-tabs__item:hover{color:var(--txt_stroke_blue_1,#386fff)}.example_popover .line{border-bottom:1px solid var(--box_stroke_grey_1,#d3d7dd);opacity:.5;margin-top:16px}.example_popover .example_btn{height:49px;width:100%}.example_popover .example_btn .btn{color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:600;line-height:24px;padding:5px 24px;background:none}.example_popover .example_btn .btn:hover{background:var(--bg_stroke_grey_3_1,#eee);border-radius:8px}.example_popover .example_btn img{width:16px;height:16px;flex-shrink:0}.example{-webkit-user-select:none;-moz-user-select:none;user-select:none;color:var(--txt_icon_grey_3,rgba(79,88,102,.6));font-family:PingFang SC;font-size:12px;font-style:normal;font-weight:600;line-height:24px;padding:0 6px;display:flex;align-items:center;justify-content:center}.example:hover{border-radius:4px}.example:hover+.show{visibility:visible;transition:.4s}",""]),e["default"]=s},81925:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=a()(o());s.push([t.id,".box[data-v-0ba1927b]{margin-top:9px;padding:0 20px}.title[data-v-0ba1927b]{display:flex;align-items:center;margin-bottom:20px;gap:2px}.title .tips[data-v-0ba1927b]{width:100%;height:100%}.title .text[data-v-0ba1927b]{font-family:PingFang SC;font-size:20px;font-style:normal;font-weight:600;line-height:30px;background:linear-gradient(94deg,#439aff 8.2%,#4be0bc 51.71%,#ab83ff 97.53%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tool-item[data-v-0ba1927b]{display:flex;flex-direction:column;align-items:center;gap:6px;border-radius:8px}.tool-item img[data-v-0ba1927b]{width:117px}.tool-item .name[data-v-0ba1927b]{width:120px;height:30px;background:#968f83;color:#fff;font-family:PingFang SC;font-size:15px;font-style:normal;font-weight:600;line-height:20px}.content[data-v-0ba1927b]{display:flex;align-items:center;justify-content:space-between;height:900px}",""]),e["default"]=s},20533:function(t,e,i){"use strict";i.r(e);var n=i(14177),o=i.n(n),r=i(37770),a=i.n(r),s=i(98513),l=i.n(s),c=new URL(i(16897),i.b),u=new URL(i(75292),i.b),h=a()(o()),d=l()(c),g=l()(u);h.push([t.id,".chatglm-dialog{left:50%;top:50%;transform:translate(-50%,-50%);margin:0!important;width:50%!important;max-width:520px;text-align:left;border-radius:8px;border:1px solid var(--floating_stroke_grey_1,#f5f5f5);background:var(--bg_white_1,#fff);box-shadow:0 2px 20px 0 rgba(22,47,82,.1);display:flex;width:520px;padding:28px!important;flex-direction:column;align-items:flex-start;color:var(--txt_icon_black_1,#1a2029);font-family:PingFang SC}.chatglm-dialog .el-dialog__header{padding:0;display:flex;justify-content:space-between;align-items:center;align-self:stretch}.chatglm-dialog .el-dialog__header .text{color:var(--txt_icon_black_1,#1a2029);font-size:20px;font-weight:600;line-height:28px}.chatglm-dialog .el-dialog__header .icon{width:32px;height:32px;background:url("+d+") 50% no-repeat;background-size:20px 20px;cursor:pointer}.chatglm-dialog .el-dialog__header .icon.icon-dark{background:url("+g+") 50% no-repeat;background-size:20px 20px}.chatglm-dialog .el-dialog__header .icon:hover{border-radius:8px;background-color:var(--hover_icon_grey_1,rgba(79,88,102,.06))}.chatglm-dialog .el-dialog__body{padding:12px 0 32px 0}.chatglm-dialog .el-dialog__body .content{color:var(--txt_icon_black_1,#1a2029);font-size:15px;line-height:27px;font-weight:400;margin-top:12px}.chatglm-dialog .el-dialog__body .content .policy-link:hover{color:var(--txt_stroke_blue_1,#2454ff)!important}.chatglm-dialog .el-dialog__footer{align-self:flex-end;padding:0;display:flex;justify-content:center;align-items:flex-start;gap:12px}.chatglm-dialog .el-dialog__footer .button{box-sizing:border-box;display:flex;min-width:120px;height:40px;padding:8px 24px;justify-content:center;align-items:center;gap:8px;border-radius:8px;cursor:pointer}.chatglm-dialog .el-dialog__footer .button.cancel-button{border:1px solid var(--txt_stroke_blue_1,#2454ff);color:var(--txt_stroke_blue_1,#2454ff);font-size:16px;font-weight:400;line-height:28px}.chatglm-dialog .el-dialog__footer .button.cancel-button:hover{background:rgba(36,84,255,.06)}.chatglm-dialog .el-dialog__footer .button.confirm-button{background:var(--bg_blue_1,#2454ff);color:#fff;font-size:16px;font-weight:600;line-height:28px}.chatglm-dialog .el-dialog__footer .button.confirm-button:hover{background:linear-gradient(0deg,rgba(0,0,0,.1),rgba(0,0,0,.1)),#2454ff}",""]),e["default"]=h},66432:function(t,e,i){"use strict";i.d(e,{EF:function(){return u},Fg:function(){return s},VE:function(){return c},vU:function(){return l}});var n=i(72556);i(1823);const o="https://chatglm.cn/chatglm",r="/action-api",a=`${o}${r}`;function s(t){return(0,n.Ay)({url:`${a}/auth/login`,method:"get",params:t},{loading:!1,errorMessageShow:!1,codeMessageShow:!1})}function l(t){return(0,n.Ay)({url:`${a}/auth/status`,method:"post",data:t},{loading:!1,errorMessageShow:!1,codeMessageShow:!1})}async function c(t){return(0,n.Ay)({url:`${a}/auth/new`,method:"post",data:t},{loading:!1})}async function u(t){return(0,n.Ay)({url:`${o}/backend-api/assistant/auth/subscription_info`,method:"post",data:t},{loading:!1,errorMessageShow:!1})}},72839:function(t,e,i){"use strict";i.d(e,{RG:function(){return l},Ug:function(){return a},pq:function(){return c},rD:function(){return s}});var n=i(72556);const o="https://chatglm.cn/chatglm",r="/share-api";async function a(t){return(0,n.Ay)({url:`${o}${r}/short/assistant_history`,method:"post",data:t},{loading:!1})}async function s(t){return(0,n.Ay)({url:`${o}${r}/short/assistant`,method:"post",data:t},{loading:!1})}async function l(t){return(0,n.Ay)({url:`${o}${r}/conversation/info/${t}`,method:"get"},{withToken:!1})}async function c(t){return(0,n.Ay)({url:`${o}${r}/conversation/load/${t}`,method:"post"})}},77857:function(t,e,i){"use strict";i.d(e,{GI:function(){return a},UP:function(){return l},aI:function(){return s},m2:function(){return c}});var n=i(83458),o=i(52733),r=(i(81010),i(87865));const a=t=>{const e=n.A.state.Glms.createGmlsConfig?.Knowledge_tips?.is_open||!1;if(!e)return;const i=(0,r.Lg)("firstDebug","array")||[];i.includes(t)||((0,r.ZB)("firstDebug",[...i,t]),n.A.commit("Glms/FIRST_DEBUG",!0))},s=t=>{if(!t)return;const e=(0,r.Lg)("firstDebug","array")||[];e.includes(t)&&(0,r.ZB)("firstDebug",e.filter((e=>e!==t)))},l=t=>{if(!t)return!0;const e=(0,r.Lg)("firstDebug","array")||[];return e.includes(t)},c=async t=>{const e={...t},i=await(0,o.B7)(e);if(!i)return;const r=i.data;return r&&n.A.commit("Glms/SET_ASSISTANT_INFO",r),a(r?.assistant_id),r}},64497:function(t,e,i){"use strict";i.d(e,{N8:function(){return L},nO:function(){return T},ff:function(){return j},FN:function(){return M},X0:function(){return I},Fp:function(){return D}});i(45680);var n=i(2687),o=i.n(n),r=i(93266);const a={id:"",role:"",model:"",status:r.I.INIT,meta_data:{},error:{},content_type:"",content_status:"",content_role:"",answer_type:"",text:"",image:[],file:[],tool_calls:"",content:"",isBrowerSearch:!1,searchContent:"",searchPages:[],answer:"",image_list:[],image_count:0,answerList:[],ragSlices:[]};r.I.INIT;function s(t=!1){const e=o()(a);return e}var l=i(30980),c=i(43181);let u=0,h="",d=[],g=-1,p=[],f=[],m=1;function v(t,e){d=[],p=[],f=[],g=-1,m=1;const i=t.answerArray;for(let o=0;o<i.length;o++){const t=i[o];if(t.answer_type)if("tool_calls"===t.answer_type){const i=t.tool_calls,o=t.meta_data||{};if("function"===o.toolCallRecipient&&(h=s(!0),h.answer_type="tool_calls",h.tool_name="action",h.tool_done=!1,h.tool_is_error=!1,h.tool_host=i.host,h.tool_type=i.name,h.arguments=i.arguments,d.push(h),u=3),"browser"===i.name){if(i.arguments.indexOf("msearch")>-1)f={searchText:i.arguments,is_error:!1,page:[]},g=5,_(),b(4),h.searchPages.push(f),h.searchText=i.arguments,h.searchContent=i.arguments;else if(i.arguments.indexOf("open_url")>-1&&"659e54b1b8006379b4b2abd6"!==e)-1===g&&(f={searchText:i.arguments,is_error:!1,page:[],type:"openUrl"},g=4,x(),b(1),h.searchPages.push(f),h.searchText=i.arguments,h.searchContent=i.arguments);else if(i.arguments.indexOf("search")>-1)f={searchText:i.arguments,is_error:!1,page:[]},g=0,y(),b(1),h.searchPages.push(f),h.searchText=i.arguments,h.searchContent=i.arguments;else if(i.arguments.indexOf("mclick")>-1){if(0!==g&&5!==g)continue;h.tool_simple_search=!0;const e=i.arguments,o=e.match(/.*mclick\((.*)\).*$/);if(g=3,o){const e=o[1];if(e.includes("description=")&&e.includes("ids=")){const i=/description="([^"]*)"/,n=/ids=\[(.*?)\]/,o=e.match(i),r=e.match(n),a={description:o[1],ids:`[${r[1]}]`};k(h,t,"browser",a)}else try{const t=JSON.parse(e);t.forEach(((t,e)=>{const i=t,n=p[i];if(h&&n){n.title&&(h.searchContent=n.title),n.searchCount=m,m++;const t=h.searchPages[h.searchPages.length-1].page;t&&t.push(n)}}))}catch(n){}}}else if(i.arguments.indexOf("click")>-1){const t=i.arguments;g=1;const e=t.match(/.*click\((\d+)\).*$/);if(e){const t=e[1],i=p?.[t];if(!i)continue;if(i.page_index=t,i.searchCount=m,m++,i){h.searchContent=i.title;const t=h.searchPages[h.searchPages.length-1].page;t&&t.push(i)}}}i.arguments.indexOf("quote_lines")>-1&&(g=2)}"cogview"===i.name&&(h=s(!0),h.answer_type="tool_calls",h.tool_name=i.name,h.tool_done=!1,d.push(h),u=2)}else if("browser_result"===t.answer_type)5===g&&h?.searchPages?.length&&"finish"===t.status&&k(h,t,"browser_result"),4===g&&h?.searchPages?.length&&"finish"===t.status&&C(h,t),h&&h.tool_answer_time++,0===g&&(p=t.meta_data.metadata_list);else if("system_error"===t.answer_type){const e=t.meta_data||{};if(3===u){h.tool_is_error=!0,h.tool_done=!0,u=0,h="";continue}const{failedURL:i,failedCommand:n}=e;if(i){const t=h.searchPages||[],e=(0,c.P)(t);e&&e.page.forEach((t=>{t.url===i&&(t.is_error=!0)}));continue}if(n){let t=n.match(/.*click\((\d+)\).*$/);if(t){const e=h.searchPages||[],i=(0,c.P)(e);i?.page.forEach((e=>{e.page_index===t[1]&&(e.is_error=!0)}));continue}if(t=n.match(/.*mclick\((.*)\).*$/),t){const t=h.searchPages||[],e=(0,c.P)(t);e&&(e.is_error=!0,e?.page.forEach((t=>{t.is_error=!0})));continue}if(t=n.match(/.*search\((.*)\).*$/),t){const t=h.searchPages||[],e=(0,c.P)(t);e&&(e.is_error=!0,e?.page.forEach((t=>{t.is_error=!0})));continue}if(t=n.match(/.*open_url\((.*)\).*$/),t){h.tool_is_error=!0;const t=h.searchPages||[],e=(0,c.P)(t);e&&(e.is_error=!0,e?.page.forEach((t=>{t.is_error=!0}))),w();continue}}}else"quote_result"===t.answer_type||("image"===t.answer_type?(d.push(t),"finish"===t.status&&w()):"function_result"===t.answer_type?(h=h||s(!0),h.tool_result=t.content,h.tool_extra=t.extra,h.tool_is_error=!1,h.tool_done=!0,u=0,h=""):(w("else"),d.push(t)));else;}u=0,t.answerListDisplay=d}function b(t){0===u&&(u=t)}function x(){return 0===u&&(h=s(!0),h.answer_type="tool_calls",h.tool_name="open",h.tool_done=!1,h.tool_is_error=!1,h.tool_answer_time=0,d.push(h)),h}function y(){return 0===u&&(h=s(!0),h.answer_type="tool_calls",h.tool_name="search",h.tool_done=!1,h.tool_is_error=!1,h.tool_answer_time=0,d.push(h)),h}function _(){return 0===u&&(h=s(!0),h.answer_type="tool_calls",h.tool_name="msearch",h.tool_done=!1,h.tool_is_error=!1,h.tool_answer_time=0,d.push(h)),h}function w(t){g=-1,0!==u&&(h.is_error=0===h.answerTime,h.tool_done=!0,u=0,h="")}function k(t,e,i,n){const o=t.searchPages[t.searchPages.length-1],r={...o};if("browser_result"===i)r.searchSiteList=e.meta_data?.metadata_list;else if("browser"===i){r.conclusionObj=n;const i=e.meta_data?.metadata_list;i&&i.length&&(t.sitesList?r.sitesList.push(i):r.sitesList=i)}t.searchPages.pop(),t.searchPages.push(r)}function C(t,e){const i=t.searchPages[t.searchPages.length-1];let n={};try{const t=JSON.parse(e.content);n={searchText:i.searchText,is_error:!1,type:"openUrl",page:{url:t.url,title:t.title}}}catch(o){}e.meta_data&&(t.meta_data=e.meta_data),t.searchPages.pop(),t.searchPages.push(n),w("dealSearchPage")}var S=i(93945);function I(t,e){if(!t)return;let i={};const n=O(e);n.model=t.model,n.role=t.role,n.recipient=t.recipient,n.status=t.status,n.id=t.id,n.meta_data=t.meta_data,e.lastItem.fileList=e.lastItem.fileList?.map((t=>({...t,loading:!1})))||[],t.meta_data?.sensitive_img_list&&(e.lastItem.fileList=e.lastItem.fileList.map((e=>(t.meta_data?.sensitive_img_list.includes(e.imageurl)&&(e.imageurl=t.meta_data?.default_img),{...e}))));const o=e.lastItem.answerArray;let r="";switch(i=(0,c.P)(t.content),i&&(i.status=t.status),t.status){case"init":E(i,e,t);break;case"finish":E(i,e,t),r=o[o.length-2],r&&(r.meta_data=t.meta_data);break}v(e.lastItem,e.assistantId),R(e.lastItem)}function M(t,e){switch(t.intervene_type){case"input_sensitive":case"output_sensitive":e.lastItem.answerArray=[],e.lastItem.is_sensitive=!0,e.lastItem.image_type&&(e.lastItem.image_url="https://sfile.chatglm.cn/img2text/img2text_doudi.jpg"),A(e,t.intervene_text),e.handleSensitive(t.intervene_type,t.intervene_text),v(e.lastItem,e.assistantId)}}function T(t,e){const i=e.lastItem.answerListDisplay;let n;switch(t.error_code){default:n=i[i.length-1],n&&"image"===n.answer_type&&(n.imageLoadError=!0),e.hendleSpecialMsg("glms_error","",{forbidden:!0})}}function E(t,e,i){if(!t)return;const n=O(e),o=t.type;switch(n.content_type=o,n.content_status=t.status,n.content_role=t.role,n.answer_type=o,i.status){case"init":switch(o){case"image":var r=t.image;n.image=t.image,n.image_count=i.meta_data.image_count,n.image_list=r.map((t=>t.image_url));break;case"text":n.text=t.text;break;case"code":n.text=t.code;break;default:break}break;case"finish":switch(o){case"rag_slices":n.ragSlices=t.content;break;case"tool_calls":n.tool_calls=t.tool_calls;break;case"browser_result":n.content=t.content;break;case"quote_result":n.content=t.content;break;case"function_result":n.content=t.content,n.extra=t.extra;break;case"system_error":n.content=t.content;break;case"execution_output":n.content=t.content;break;case"text":n.text=t.text;break;case"image":r=t.image,n.image=r,n.image_count=r.length,n.image_list=r.map((t=>t.image_url));break;default:break}"text"===n.answer_type&&(n.text=t.text),n.status="finish",L(e);break}}function A(t,e){t.lastItem.answerArray.length=0,t.lastItem.answerListOutput.length=0,L(t);const i=O(t);i.content_type="text",i.content_status="finish",i.status="finish",i.content_role="user",i.answer_type="text",i.text=e}function D(t){t.lastItem.answerArray.pop()}function L(t){t.lastItem.answerArray.push({...s(!0)})}function O(t){return(0,c.P)(t.lastItem.answerArray)||{}}function j(t,e){const i=(0,l.GU)(!0),{input:n,output:o,score:r}=t;if(i.conversation_id=t.conversation_id,i.id=t.id,i.log_id=t.id,i.img_list=[],i.file_list=[],n.content.forEach((t=>{"text"===t.type?i.question=t.text:"image"===t.type?(i.image_url=t.image[0].image_url,i.img_list=t.image):"file"===t.type&&(i.file_list=t.file)})),n?.meta_data?.mention_assistant_id){const{mention_assistant_avatar:t,mention_assistant_id:e,mention_assistant_name:o,mention_conversation_id:r}=n?.meta_data;i.agent={mention_assistant_avatar:t,mention_assistant_id:e,mention_assistant_name:o,mention_conversation_id:r}}i.meta_data=n.meta_data;const a=o.parts?.[0]?.meta_data;i.fileList=i.img_list.concat(i.file_list).sort(((t,e)=>t.order-e.order)).map((t=>{let e=t.file_name||t.image_url;return-1===e.indexOf(".")&&(e+=(t.file_url||t.image_url).substring((t.file_url||t.image_url).lastIndexOf("."))),a?.sensitive_img_list&&a?.sensitive_img_list?.includes(t.image_url)&&(t.image_url=a?.default_img),{name:e,wholeName:e,imageurl:t.image_url,transferFileSize:(0,S.HB)(t.file_size),type:e.substring(e.lastIndexOf(".")+1),maxReadPercent:t.maxReadPercent||0}}));const s=[];i.answerArray=s,o.parts.forEach((t=>{P(t,s)}));const c=r&&r.status||{};return"good"===c?i.is_up=!0:"bad"===c&&(i.is_down=!0),z(o,i),v(i,e),R(i),i.answerListOutput=i.answerListDisplay,i}function P(t,e){t.content.forEach((i=>{const n=s();n.model=t.model,n.role=t.role,n.error=t.error,n.status=t.status,n.id=t.id,n.meta_data=t.meta_data,n.recipient=t.recipient,e.push(N(i,n))}))}function N(t,e){const i=t.type;switch(e.content_type=i,e.content_status=t.status,e.content_role=t.role,e.answer_type=i,i){case"rag_slices":e.ragSlices=t.content;break;case"image":var n=t.image||[];e.image_count=n.length,e.image=n,e.image_list=n.map((t=>t.image_url));break;case"text":e.answer=t.text,e.text=t.text;break;case"function_result":e.content=t.content,e.extra=t.extra;break;case"execution_output":e.content=t.content;break;case"code":e.answer=t.code,e.text=t.code;break;case"tool_calls":e.tool_calls=t.tool_calls;break;case"browser_result":case"system_error":e.content=t.content;break;default:break}return e}function z(t,e){if("error"===t.status){const i=t.last_error||{};10024===i.error_code?e.manualStopStream=!0:(e.errorType="glms_error",e.errorText="",e.forbidden=!0,e.isOnError=!0)}if("intervene"===t.status){const i=t.last_error||{};e.errorType=i.intervene_type,e.errorText=i.intervene_text,"input_sensitive"===e.errorType&&e.image_url&&(e.image_url="https://sfile.chatglm.cn/img2text/img2text_doudi.jpg"),e.is_sensitive=!0,e.forbidden=!0,e.answerArray=[]}}function R(t){const e=t.answerListDisplay,i=e.length;for(let n=0;n<e.length;n++){const t=e[n];"tool_calls"!==t.answer_type||"search"!==t.tool_name&&"msearch"!==t.tool_name||n!==i-1&&(t.tool_done=!0)}}},30980:function(t,e,i){"use strict";i.d(e,{GU:function(){return a},vX:function(){return s}});var n=i(2687),o=i.n(n);const r={question:"",img_list:[],question_type:"",image_url:"",image_type:!1,agent:null,answerArray:[],answerListDisplay:[],answerListOutput:[],id:"",conversation_id:"",assistant_id:"",status:"",meta_data:{},last_error:{},log_id:"",isHistory:!1,actionsStatus:{retryTimer:-1,isError:!1,isLoading:!1},isWaitforContent:!1,isOnClose:!1,printComleted:!1,isOnError:!1,errorType:"",errorMsg:"",isLoading:!0,isEventSourceaOpen:!1,imageLoadError:!1,manualStopStream:!1,canShowLoading:!0,isShowExpand:!1,isMouseMove:!1,isExpand:!0,is_down:!1,is_intervene:!1,is_pinned:!1,is_sensitive:!1,is_up:!1,onCheckedStatus:!1,forbidden:!1,pinned_id:"",userTouch:!1,fileList:[]};function a(t=!1){const e=o()(r);return t&&(e.isOnClose=!0,e.printComleted=!0,e.isExpand=!1,e.isLoading=!1,e.isHistory=!0),e}function s(t,{isRetry:e=!1,root:i}={}){t.id="",t.status="",t.last_error={},t.log_id="",t.canShowLoading=!0,t.isOnClose=!1,t.isLoading=!0,t.printComleted=!1,t.isEventSourceaOpen=!1,t.forbidden=!1,t.isRetry=e}},43181:function(t,e,i){"use strict";function n(t){return t?t[t.length-1]:null}i.d(e,{P:function(){return n}})},6321:function(t){
/*!
 * TOAST UI Color Picker
 * @version 2.2.8
 * @author NHN Cloud FE Development Team <dl_javascript@nhn.com>
 * @license MIT
 */
(function(e,i){t.exports=i()})(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="dist",i(i.s=33)}([function(t,e,i){"use strict";function n(t,e){var i,n,o,r,a=Object.prototype.hasOwnProperty;for(o=1,r=arguments.length;o<r;o+=1)for(n in i=arguments[o],i)a.call(i,n)&&(t[n]=i[n]);return t}t.exports=n},function(t,e,i){"use strict";function n(t){return t instanceof Array}t.exports=n},function(t,e,i){"use strict";var n=i(1),o=i(6),r=i(7);function a(t,e,i){n(t)?o(t,e,i):r(t,e,i)}t.exports=a},function(t,e,i){"use strict";function n(t){return void 0===t}t.exports=n},function(t,e,i){"use strict";var n=i(22),o=i(2),r=i(6),a=i(7),s=i(37),l=0,c={getLength:function(t){var e=0;return a(t,(function(){e+=1})),e},map:function(t,e,i){var n=[];return o(t,(function(){n.push(e.apply(i||null,arguments))})),n},filter:function(t,e,i){var n=[];return r(t,(function(t){e.apply(i||null,arguments)&&n.push(t)})),n},generateId:function(){return l+=1,l},isOldBrowser:function(){return n.msie&&n.version<9}(),sendHostName:function(){s("color-picker","UA-129987462-1")}};t.exports=c},function(t,e,i){"use strict";var n=i(1);function o(t,e,i){var o,r;if(i=i||0,!n(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,i);for(r=e.length,o=i;i>=0&&o<r;o+=1)if(e[o]===t)return o;return-1}t.exports=o},function(t,e,i){"use strict";function n(t,e,i){var n=0,o=t.length;for(i=i||null;n<o;n+=1)if(!1===e.call(i,t[n],n,t))break}t.exports=n},function(t,e,i){"use strict";function n(t,e,i){var n;for(n in i=i||null,t)if(t.hasOwnProperty(n)&&!1===e.call(i,t[n],n,t))break}t.exports=n},function(t,e,i){"use strict";var n=i(39),o=i(13),r=i(41),a=i(3),s=i(9),l=i(19),c=i(4);function u(t,e){var i=c.generateId();t=t||{},a(e)&&(e=s.appendHTMLElement("div")),n(e,"tui-view-"+i),this.id=i,this.container=e,this.childs=new l((function(t){return t.id})),this.parent=null}u.prototype.addChild=function(t,e){e&&e.call(t,this),t.parent=this,this.childs.add(t)},u.prototype.removeChild=function(t,e){var i=r(t)?this.childs.items[t]:t;e&&e.call(i,this),this.childs.remove(i.id)},u.prototype.render=function(){this.childs.each((function(t){t.render()}))},u.prototype.recursive=function(t,e){o(t)&&(e||t(this),this.childs.each((function(e){e.recursive(t)})))},u.prototype.resize=function(){var t=Array.prototype.slice.call(arguments),e=this.parent;while(e)o(e._onResize)&&e._onResize.apply(e,t),e=e.parent},u.prototype._beforeDestroy=function(){},u.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},u.prototype.destroy=function(t){this.childs&&(this.childs.each((function(t){t.destroy(!0),t._destroy()})),this.childs.clear()),t||this._destroy()},u.prototype.getViewBound=function(){var t=this.container.getBoundingClientRect();return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}},t.exports=u},function(t,e,i){"use strict";var n={appendHTMLElement:function(t,e,i){var n=document.createElement(t);return n.className=i||"",e?e.appendChild(n):document.body.appendChild(n),n}};t.exports=n},function(t,e,i){"use strict";var n=i(0),o=i(20),r=i(11),a=i(21),s=i(1),l=i(13),c=i(2),u=/\s+/g;function h(){this.events=null,this.contexts=null}h.mixin=function(t){n(t.prototype,h.prototype)},h.prototype._getHandlerItem=function(t,e){var i={handler:t};return e&&(i.context=e),i},h.prototype._safeEvent=function(t){var e,i=this.events;return i||(i=this.events={}),t&&(e=i[t],e||(e=[],i[t]=e),i=e),i},h.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},h.prototype._indexOfContext=function(t){var e=this._safeContext(),i=0;while(e[i]){if(t===e[i][0])return i;i+=1}return-1},h.prototype._memorizeContext=function(t){var e,i;o(t)&&(e=this._safeContext(),i=this._indexOfContext(t),i>-1?e[i][1]+=1:e.push([t,1]))},h.prototype._forgetContext=function(t){var e,i;o(t)&&(e=this._safeContext(),i=this._indexOfContext(t),i>-1&&(e[i][1]-=1,e[i][1]<=0&&e.splice(i,1)))},h.prototype._bindEvent=function(t,e,i){var n=this._safeEvent(t);this._memorizeContext(i),n.push(this._getHandlerItem(e,i))},h.prototype.on=function(t,e,i){var n=this;r(t)?(t=t.split(u),c(t,(function(t){n._bindEvent(t,e,i)}))):a(t)&&(i=e,c(t,(function(t,e){n.on(e,t,i)})))},h.prototype.once=function(t,e,i){var n=this;if(a(t))return i=e,void c(t,(function(t,e){n.once(e,t,i)}));function o(){e.apply(i,arguments),n.off(t,o,i)}this.on(t,o,i)},h.prototype._spliceMatches=function(t,e){var i,n=0;if(s(t))for(i=t.length;n<i;n+=1)!0===e(t[n])&&(t.splice(n,1),i-=1,n-=1)},h.prototype._matchHandler=function(t){var e=this;return function(i){var n=t===i.handler;return n&&e._forgetContext(i.context),n}},h.prototype._matchContext=function(t){var e=this;return function(i){var n=t===i.context;return n&&e._forgetContext(i.context),n}},h.prototype._matchHandlerAndContext=function(t,e){var i=this;return function(n){var o=t===n.handler,r=e===n.context,a=o&&r;return a&&i._forgetContext(n.context),a}},h.prototype._offByEventName=function(t,e){var i=this,n=l(e),o=i._matchHandler(e);t=t.split(u),c(t,(function(t){var e=i._safeEvent(t);n?i._spliceMatches(e,o):(c(e,(function(t){i._forgetContext(t.context)})),i.events[t]=[])}))},h.prototype._offByHandler=function(t){var e=this,i=this._matchHandler(t);c(this._safeEvent(),(function(t){e._spliceMatches(t,i)}))},h.prototype._offByObject=function(t,e){var i,n=this;this._indexOfContext(t)<0?c(t,(function(t,e){n.off(e,t)})):r(e)?(i=this._matchContext(t),n._spliceMatches(this._safeEvent(e),i)):l(e)?(i=this._matchHandlerAndContext(e,t),c(this._safeEvent(),(function(t){n._spliceMatches(t,i)}))):(i=this._matchContext(t),c(this._safeEvent(),(function(t){n._spliceMatches(t,i)})))},h.prototype.off=function(t,e){r(t)?this._offByEventName(t,e):arguments.length?l(t)?this._offByHandler(t):a(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},h.prototype.fire=function(t){this.invoke.apply(this,arguments)},h.prototype.invoke=function(t){var e,i,n,o;if(!this.hasListener(t))return!0;e=this._safeEvent(t),i=Array.prototype.slice.call(arguments,1),n=0;while(e[n]){if(o=e[n],!1===o.handler.apply(o.context,i))return!1;n+=1}return!0},h.prototype.hasListener=function(t){return this.getListenerLength(t)>0},h.prototype.getListenerLength=function(t){var e=this._safeEvent(t);return e.length},t.exports=h},function(t,e,i){"use strict";function n(t){return"string"===typeof t||t instanceof String}t.exports=n},function(t,e,i){"use strict";var n=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,o={leadingZero:function(t,e){var i="",n=0;if((t+"").length>e)return t+"";for(;n<e-1;n+=1)i+="0";return(i+t).slice(-1*e)},isValidRGB:function(t){return n.test(t)},
// @license RGB <-> HSV conversion utilities based off of http://www.cs.rit.edu/~ncs/color/t_convert.html
hexToRGB:function(t){var e,i,n;return!!o.isValidRGB(t)&&(t=t.substring(1),e=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),n=parseInt(t.substr(4,2),16),[e,i,n])},rgbToHEX:function(t,e,i){var n="#"+o.leadingZero(t.toString(16),2)+o.leadingZero(e.toString(16),2)+o.leadingZero(i.toString(16),2);return!!o.isValidRGB(n)&&n},rgbToHSV:function(t,e,i){var n,o,r,a,s,l;if(t/=255,e/=255,i/=255,n=Math.max(t,e,i),o=Math.min(t,e,i),s=n,l=n-o,a=0===n?0:l/n,n===o)r=0;else{switch(n){case t:r=(e-i)/l+(e<i?6:0);break;case e:r=(i-t)/l+2;break;case i:r=(t-e)/l+4;break}r/=6}return[Math.round(360*r),Math.round(100*a),Math.round(100*s)]},hsvToRGB:function(t,e,i){var n,o,r,a,s,l,c,u;if(t=Math.max(0,Math.min(360,t)),e=Math.max(0,Math.min(100,e)),i=Math.max(0,Math.min(100,i)),e/=100,i/=100,0===e)return n=o=r=i,[Math.round(255*n),Math.round(255*o),Math.round(255*r)];switch(t/=60,a=Math.floor(t),s=t-a,l=i*(1-e),c=i*(1-e*s),u=i*(1-e*(1-s)),a){case 0:n=i,o=u,r=l;break;case 1:n=c,o=i,r=l;break;case 2:n=l,o=i,r=u;break;case 3:n=l,o=c,r=i;break;case 4:n=u,o=l,r=i;break;default:n=i,o=l,r=c;break}return[Math.round(255*n),Math.round(255*o),Math.round(255*r)]}};t.exports=o},function(t,e,i){"use strict";function n(t){return t instanceof Function}t.exports=n},function(t,e,i){"use strict";var n=i(11),o=i(2),r=i(26);function a(t,e,i,r){n(e)?o(e.split(/\s+/g),(function(e){s(t,e,i,r)})):o(e,(function(e,n){s(t,n,e,i)}))}function s(t,e,i,n){function o(e){i.call(n||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,o):"attachEvent"in t&&t.attachEvent("on"+e,o),l(t,e,i,o)}function l(t,e,i,n){var a=r(t,e),s=!1;o(a,(function(t){return t.handler!==i||(s=!0,!1)})),s||a.push({handler:i,wrappedHandler:n})}t.exports=a},function(t,e,i){"use strict";function n(t){t.preventDefault?t.preventDefault():t.returnValue=!1}t.exports=n},function(t,e,i){"use strict";function n(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))}t.exports=n},function(t,e,i){"use strict";var n=i(11),o=i(2),r=i(26);function a(t,e,i){n(e)?o(e.split(/\s+/g),(function(e){s(t,e,i)})):o(e,(function(e,i){s(t,i,e)}))}function s(t,e,i){var n,a=r(t,e);i?(o(a,(function(o,r){return i!==o.handler||(l(t,e,o.wrappedHandler),n=r,!1)})),a.splice(n,1)):(o(a,(function(i){l(t,e,i.wrappedHandler)})),a.splice(0,a.length))}function l(t,e,i){"removeEventListener"in t?t.removeEventListener(e,i):"detachEvent"in t&&t.detachEvent("on"+e,i)}t.exports=a},function(t,e,i){"use strict";var n=i(50);function o(t,e){var i=n(e.prototype);i.constructor=t,t.prototype=i}t.exports=o},function(t,e,i){"use strict";var n=i(6),o=i(7),r=i(0),a=i(1),s=i(20),l=i(13),c=i(21),u=i(4),h=Array.prototype.slice;function d(t){this.items={},this.length=0,l(t)&&(this.getItemID=t)}d.and=function(t){var e;return t=h.call(arguments),e=t.length,function(i){for(var n=0;n<e;n+=1)if(!t[n].call(null,i))return!1;return!0}},d.or=function(t){var e;return t=h.call(arguments),e=t.length,function(i){for(var n=1,o=t[0].call(null,i);n<e;n+=1)o=o||t[n].call(null,i);return o}},d.merge=function(t){var e={},i=new d(t.getItemID);return n(arguments,(function(t){r(e,t.items)})),i.items=e,i.length=u.getLength(i.items),i},d.prototype.getItemID=function(t){return t._id+""},d.prototype.add=function(t){var e,i;arguments.length>1?n(h.call(arguments),(function(t){this.add(t)}),this):(e=this.getItemID(t),i=this.items,i[e]||(this.length+=1),i[e]=t)},d.prototype.remove=function(t){var e,i,n=[];return this.length?arguments.length>1?(n=u.map(h.call(arguments),(function(t){return this.remove(t)}),this),n):(e=this.items,c(t)&&(t=this.getItemID(t)),e[t]?(this.length-=1,i=e[t],delete e[t],i):n):n},d.prototype.clear=function(){this.items={},this.length=0},d.prototype.has=function(t){var e,i;return!!this.length&&(e=l(t),i=!1,e?this.each((function(e){return!0!==t(e)||(i=!0,!1)})):(t=c(t)?this.getItemID(t):t,i=s(this.items[t])),i)},d.prototype.doWhenHas=function(t,e,i){var n=this.items[t];s(n)&&e.call(i||this,n)},d.prototype.find=function(t){var e=new d;return this.hasOwnProperty("getItemID")&&(e.getItemID=this.getItemID),this.each((function(i){!0===t(i)&&e.add(i)})),e},d.prototype.groupBy=function(t,e){var i,o,r={},s=l(t),c=this.getItemID;if(a(t)){if(n(t,(function(t){r[t+""]=new d(c)})),!e)return r;t=e,s=!0}return this.each((function(e){s?o=t(e):(o=e[t],l(o)&&(o=o.apply(e))),i=r[o],i||(i=r[o]=new d(c)),i.add(e)})),r},d.prototype.single=function(){var t;return this.each((function(e){return t=e,!1}),this),t},d.prototype.sort=function(t){var e=[];return this.each((function(t){e.push(t)})),l(t)&&(e=e.sort(t)),e},d.prototype.each=function(t,e){o(this.items,t,e||this)},d.prototype.toArray=function(){return this.length?u.map(this.items,(function(t){return t})):[]},t.exports=d},function(t,e,i){"use strict";var n=i(3),o=i(36);function r(t){return!n(t)&&!o(t)}t.exports=r},function(t,e,i){"use strict";function n(t){return t===Object(t)}t.exports=n},function(t,e,i){"use strict";var n={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};function o(){var t,e,i=window.navigator,o=i.appName.replace(/\s/g,"_"),r=i.userAgent,a=/MSIE\s([0-9]+[.0-9]*)/,s=/Trident.*rv:11\./,l=/Edge\/(\d+)\./,c={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},u={Microsoft_Internet_Explorer:function(){var t=r.match(a);t?(n.msie=!0,n.version=parseFloat(t[1])):n.others=!0},Netscape:function(){var i=!1;if(s.exec(r))n.msie=!0,n.version=11,i=!0;else if(l.exec(r))n.edge=!0,n.version=r.match(l)[1],i=!0;else for(t in c)if(c.hasOwnProperty(t)&&(e=r.match(c[t]),e&&e.length>1)){n[t]=i=!0,n.version=parseFloat(e[1]||0);break}i||(n.others=!0)}},h=u[o];h&&u[o]()}"undefined"!==typeof window&&window.navigator&&o(),t.exports=n},function(t,e,i){"use strict";var n=i(3);function o(t){return t&&t.className?n(t.className.baseVal)?t.className:t.className.baseVal:""}t.exports=o},function(t,e,i){"use strict";(function(e){var n=i(10),o=i(42),r=i(44),a=i(47),s=i(28),l=i(17),c=i(14),u=i(15),h=i(0);function d(t,e){c(e,"mousedown",this._onMouseDown,this),this.options=h({distance:10},t),this.container=e,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}d.prototype.destroy=function(){l(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},d.prototype._toggleDragEvent=function(t){var i=this.container;t?(o(i),c(window,"dragstart",u),c(e.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(r(i),l(window,"dragstart",u),l(e.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},d.prototype._getEventData=function(t){return{target:s(t),originEvent:t}},d.prototype._onMouseDown=function(t){0===a(t)&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(t),this._toggleDragEvent(!0))},d.prototype._onMouseMove=function(t){var e=this.options.distance;u(t),this._isMoved=!0,this._distance<e?this._distance+=1:this._dragStartFired||(this._dragStartFired=!0,this.invoke("dragStart",this._dragStartEventData))?this.fire("drag",this._getEventData(t)):this._toggleDragEvent(!1)},d.prototype._onMouseUp=function(t){if(this._toggleDragEvent(!1),this._isMoved)return this._isMoved=!1,void this.fire("dragEnd",this._getEventData(t));this.fire("click",this._getEventData(t))},n.mixin(d),t.exports=d}).call(this,i(25))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n="_feEventKey";function o(t,e){var i,o=t[n];return o||(o=t[n]={}),i=o[e],i||(i=o[e]=[]),i}t.exports=o},function(t,e,i){"use strict";function n(t){var e,i,n=document.documentElement.style;for(e=0,i=t.length;e<i;e+=1)if(t[e]in n)return t[e];return!1}t.exports=n},function(t,e,i){"use strict";function n(t){return t.target||t.srcElement}t.exports=n},function(t,e,i){"use strict";var n=i(10),o=i(28),r=i(17),a=i(14),s=i(30),l=i(0),c=i(18),u=i(9),h=i(12),d=i(8),g=i(51);function p(t,e){this.options=l({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},t),e=u.appendHTMLElement("div",e,this.options.cssPrefix+"palette-container"),d.call(this,t,e)}c(p,d),p.prototype._onClick=function(t){var e=this.options,i=o(t),n={};if(s(i,e.cssPrefix+"palette-button"))return n.color=i.value,void this.fire("_selectColor",n);s(i,e.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},p.prototype._onChange=function(t){var e=this.options,i=o(t),n={};s(i,e.cssPrefix+"palette-hex")&&(n.color=i.value,this.fire("_selectColor",n))},p.prototype._beforeDestroy=function(){this._toggleEvent(!1)},p.prototype._toggleEvent=function(t){var e,i=this.options,n=this.container,o=t?a:r;o(n,"click",this._onClick,this),e=n.querySelector("."+i.cssPrefix+"palette-hex",n),e&&o(e,"change",this._onChange,this)},p.prototype.render=function(t){var e=this.options,i="";this._toggleEvent(!1),i=g({cssPrefix:e.cssPrefix,preset:e.preset,detailTxt:e.detailTxt,color:t,isValidRGB:h.isValidRGB,getItemClass:function(t){return t?"":" "+e.cssPrefix+"color-transparent"},isSelected:function(i){return i===t?" "+e.cssPrefix+"selected":""}}),this.container.innerHTML=i,this._toggleEvent(!0)},n.mixin(p),t.exports=p},function(t,e,i){"use strict";var n=i(5),o=i(23);function r(t,e){var i;return t.classList?t.classList.contains(e):(i=o(t).split(/\s+/),n(e,i)>-1)}t.exports=r},function(t,e,i){"use strict";var n=i(10),o=i(53),r=i(54),a=i(30),s=i(0),l=i(18),c=i(9),u=i(32),h=i(12),d=i(8),g=i(24),p=i(57),f=-7,m=112,v=-3,b=115,x=359.99;function y(t,e){e=c.appendHTMLElement("div",e,t.cssPrefix+"slider-container"),e.style.display="none",d.call(this,t,e),this.options=s({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},t),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new g({distance:0},e),this.colorSliderPosLimitRange=[f,m],this.huebarPosLimitRange=[v,b],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}l(y,d),y.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},y.prototype.toggle=function(t){this.container.style.display=t?"block":"none"},y.prototype.isVisible=function(){return"block"===this.container.style.display},y.prototype.render=function(t){var e,i,n=this.container,o=this.options,r=p.layout;h.isValidRGB(t)&&(r=r.replace(/{{slider}}/,p.slider),r=r.replace(/{{huebar}}/,p.huebar),r=r.replace(/{{cssPrefix}}/g,o.cssPrefix),r=r.replace(/{{id}}/g,o.id),this.container.innerHTML=r,this.sliderSvgElement=n.querySelector("."+o.cssPrefix+"svg-slider"),this.huebarSvgElement=n.querySelector("."+o.cssPrefix+"svg-huebar"),this.sliderHandleElement=n.querySelector("."+o.cssPrefix+"slider-handle"),this.huebarHandleElement=n.querySelector("."+o.cssPrefix+"huebar-handle"),this.baseColorElement=n.querySelector("."+o.cssPrefix+"slider-basecolor"),e=h.hexToRGB(t),i=h.rgbToHSV.apply(null,e),this.moveHue(i[0],!0),this.moveSaturationAndValue(i[1],i[2],!0))},y.prototype._setColorSliderPosMax=function(){var t=this.sliderSvgElement.getClientRects()[0];t&&(this.colorSliderPosLimitRange[1]=t.height-10)},y.prototype._moveColorSliderHandle=function(t,e,i){var n,o=this.sliderHandleElement;e=Math.max(this.colorSliderPosLimitRange[0],e),e=Math.min(this.colorSliderPosLimitRange[1],e),t=Math.max(this.colorSliderPosLimitRange[0],t),t=Math.min(this.colorSliderPosLimitRange[1],t),u.setTranslateXY(o,t,e),n=e>50?"white":"black",u.setStrokeColor(o,n),i||this.fire("_selectColor",{color:h.rgbToHEX.apply(null,this.getRGB())})},y.prototype.moveSaturationAndValue=function(t,e,i){var n,o,r,a;t=t||0,e=e||0,n=Math.abs(this.colorSliderPosLimitRange[0]),o=this.colorSliderPosLimitRange[1],r=t*o/100-n,a=o-e*o/100-n,this._moveColorSliderHandle(r,a,i)},y.prototype._moveColorSliderByPosition=function(t,e){var i=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(t+i,e+i)},y.prototype.getSaturationAndValue=function(){var t,e,i=Math.abs(this.colorSliderPosLimitRange[0]),n=i+this.colorSliderPosLimitRange[1],o=u.getTranslateXY(this.sliderHandleElement);return t=(o[1]+i)/n*100,e=100-(o[0]+i)/n*100,[t,e]},y.prototype._setHueBarPosMax=function(){var t=this.huebarSvgElement.getClientRects()[0];t&&(this.huebarPosLimitRange[1]=t.height-7)},y.prototype._moveHueHandle=function(t,e){var i,n,o=this.huebarHandleElement,r=this.baseColorElement;t=Math.max(this.huebarPosLimitRange[0],t),t=Math.min(this.huebarPosLimitRange[1],t),u.setTranslateY(o,t),i=h.hsvToRGB(this.getHue(),100,100),n=h.rgbToHEX.apply(null,i),u.setGradientColorStop(r,n),e||this.fire("_selectColor",{color:h.rgbToHEX.apply(null,this.getRGB())})},y.prototype.moveHue=function(t,e){var i,n,o=0;i=Math.abs(this.huebarPosLimitRange[0]),n=i+this.huebarPosLimitRange[1],t=t||0,o=n*t/x-i,this._moveHueHandle(o,e)},y.prototype._moveHueByPosition=function(t){var e=this.huebarPosLimitRange[0];this._moveHueHandle(t+e)},y.prototype.getHue=function(){var t,e,i=this.huebarHandleElement,n=u.getTranslateXY(i);return t=Math.abs(this.huebarPosLimitRange[0]),e=t+this.huebarPosLimitRange[1],(n[0]+t)*x/e},y.prototype.getHSV=function(){var t=this.getSaturationAndValue(),e=this.getHue();return[e].concat(t)},y.prototype.getRGB=function(){return h.hsvToRGB.apply(null,this.getHSV())},y.prototype._prepareColorSliderForMouseEvent=function(t){var e,i=this.options,n=r(t.target,"."+i.cssPrefix+"slider-part");return e=this._dragDataCache={isColorSlider:a(n,i.cssPrefix+"slider-left"),parentElement:n},e},y.prototype._onClick=function(t){var e=this._prepareColorSliderForMouseEvent(t),i=o(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(i[0],i[1]):this._moveHueByPosition(i[1]),this._dragDataCache=null},y.prototype._onDragStart=function(t){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(t)},y.prototype._onDrag=function(t){var e=this._dragDataCache,i=o(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(i[0],i[1]):this._moveHueByPosition(i[1])},y.prototype._onDragEnd=function(){this._dragDataCache=null},n.mixin(y),t.exports=y},function(t,e,i){"use strict";var n=i(4).isOldBrowser,o=/[\.\-0-9]+/g,r=-6,a={getTranslateXY:function(t){var e;return n?(e=t.style,[parseFloat(e.top),parseFloat(e.left)]):(e=t.getAttribute("transform"),e?(e=e.match(o),[parseFloat(e[1]),parseFloat(e[0])]):[0,0])},setTranslateXY:function(t,e,i){n?(t.style.left=e+"px",t.style.top=i+"px"):t.setAttribute("transform","translate("+e+","+i+")")},setTranslateY:function(t,e){n?t.style.top=e+"px":t.setAttribute("transform","translate("+r+","+e+")")},setStrokeColor:function(t,e){n?t.strokecolor=e:t.setAttribute("stroke",e)},setGradientColorStop:function(t,e){n?t.color=e:t.setAttribute("stop-color",e)}};t.exports=a},function(t,e,i){i(34),t.exports=i(35)},function(t,e,i){},function(t,e,i){"use strict";var n=i(19),o=i(8),r=i(24),a=i(48),s=i(29),l=i(31),c=i(12),u=i(32),h={Collection:n,View:o,Drag:r,create:a,Palette:s,Slider:l,colorutil:c,svgvml:u};t.exports=h},function(t,e,i){"use strict";function n(t){return null===t}t.exports=n},function(t,e,i){"use strict";var n=i(3),o=i(38),r=6048e5;function a(t){var e=(new Date).getTime();return e-t>r}function s(t,e){var i="https://www.google-analytics.com/collect",r=location.hostname,s="event",l="use",c="TOAST UI "+t+" for "+r+": Statistics",u=window.localStorage.getItem(c);(n(window.tui)||!1!==window.tui.usageStatistics)&&(u&&!a(u)||(window.localStorage.setItem(c,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||o(i,{v:1,t:s,tid:e,cid:r,dp:r,dh:t,el:t,ec:l})}),1e3)))}t.exports=s},function(t,e,i){"use strict";var n=i(7);function o(t,e){var i=document.createElement("img"),o="";return n(e,(function(t,e){o+="&"+e+"="+t})),o=o.substring(1),i.src=t+"?"+o,i.style.display="none",document.body.appendChild(i),document.body.removeChild(i),i}t.exports=o},function(t,e,i){"use strict";var n=i(2),o=i(5),r=i(23),a=i(40);function s(t){var e,i=Array.prototype.slice.call(arguments,1),s=t.classList,l=[];s?n(i,(function(e){t.classList.add(e)})):(e=r(t),e&&(i=[].concat(e.split(/\s+/),i)),n(i,(function(t){o(t,l)<0&&l.push(t)})),a(t,l))}t.exports=s},function(t,e,i){"use strict";var n=i(1),o=i(3);function r(t,e){e=n(e)?e.join(" "):e,e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),o(t.className.baseVal)?t.className=e:t.className.baseVal=e}t.exports=r},function(t,e,i){"use strict";function n(t){return"number"===typeof t||t instanceof Number}t.exports=n},function(t,e,i){"use strict";var n=i(14),o=i(15),r=i(43),a=i(27),s="onselectstart"in document,l="prevUserSelect",c=a(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function u(t){t||(t=document),s?n(t,"selectstart",o):(t=t===document?document.documentElement:t,r(t,l,t.style[c]),t.style[c]="none")}t.exports=u},function(t,e,i){"use strict";var n=i(16);function o(t,e,i){t.dataset?t.dataset[e]=i:t.setAttribute("data-"+n(e),i)}t.exports=o},function(t,e,i){"use strict";var n=i(17),o=i(15),r=i(45),a=i(46),s=i(27),l="onselectstart"in document,c="prevUserSelect",u=s(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function h(t){t||(t=document),l?n(t,"selectstart",o):(t=t===document?document.documentElement:t,t.style[u]=r(t,c)||"auto",a(t,c))}t.exports=h},function(t,e,i){"use strict";var n=i(16);function o(t,e){return t.dataset?t.dataset[e]:t.getAttribute("data-"+n(e))}t.exports=o},function(t,e,i){"use strict";var n=i(16);function o(t,e){t.dataset?delete t.dataset[e]:t.removeAttribute("data-"+n(e))}t.exports=o},function(t,e,i){"use strict";var n=i(22),o=i(5),r=["0","1","3","5","7"],a=["2","6"],s=["4"];function l(t){return n.msie&&n.version<=8?c(t):t.button}function c(t){var e=String(t.button);return o(e,r)>-1?0:o(e,a)>-1?2:o(e,s)>-1?1:null}t.exports=l},function(t,e,i){"use strict";var n=i(10),o=i(0),r=i(4),a=i(12),s=i(49),l=i(29),c=i(31),u=0;function h(){return u+=1,u}function d(t){var e;if(!(this instanceof d))return new d(t);if(t=this.options=o({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:h(),usageStatistics:!0},t),!t.container)throw new Error("ColorPicker(): need container option.");e=this.layout=new s(t,t.container),this.palette=new l(t,e.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new c(t,e.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),e.addChild(this.palette),e.addChild(this.slider),this.render(t.color),t.usageStatistics&&r.sendHostName()}d.prototype._onSelectColorInPalette=function(t){var e=t.color,i=this.options;a.isValidRGB(e)||""===e?(this.fire("selectColor",{color:e,origin:"palette"}),i.color!==e&&(i.color=e,this.render(e))):this.render()},d.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},d.prototype._onSelectColorInSlider=function(t){var e=t.color,i=this.options;this.fire("selectColor",{color:e,origin:"slider"}),i.color!==e&&(i.color=e,this.palette.render(e))},d.prototype.setColor=function(t){if(!a.isValidRGB(t))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=t,this.render(t)},d.prototype.getColor=function(){return this.options.color},d.prototype.toggle=function(t){this.layout.container.style.display=t?"block":"none"},d.prototype.render=function(t){this.layout.render(t||this.options.color)},d.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},n.mixin(d),t.exports=d},function(t,e,i){"use strict";var n=i(0),o=i(18),r=i(9),a=i(8);function s(t,e){this.options=n({cssPrefix:"tui-colorpicker-"},t),e=r.appendHTMLElement("div",e,this.options.cssPrefix+"container"),a.call(this,t,e),this.render()}o(s,a),s.prototype.render=function(t){this.recursive((function(e){e.render(t)}),!0)},t.exports=s},function(t,e,i){"use strict";function n(t){function e(){}return e.prototype=t,new e}t.exports=n},function(t,e,i){"use strict";var n=i(52);t.exports=function(t){var e=['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),i=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",e,"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join("\n");return n(i,t)}},function(t,e,i){"use strict";var n=i(5),o=i(2),r=i(1),a=i(11),s=i(0),l=/{{\s?|\s?}}/g,c=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,u=/\[\s?|\s?\]/,h=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,d=/\./,g=/^["']\w+["']$/,p=/"|'/g,f=/^-?\d+\.?\d*$/,m=2,v={if:w,each:k,with:C},b=3==="a".split(/a/).length,x=function(){return b?function(t,e){return t.split(e)}:function(t,e){var i,n,o=[],r=0;e.global||(e=new RegExp(e,"g")),i=e.exec(t);while(null!==i)n=i.index,o.push(t.slice(r,n)),r=n+i[0].length,i=e.exec(t);return o.push(t.slice(r)),o}}();function y(t,e){var i,n=e[t];return"true"===t?n=!0:"false"===t?n=!1:g.test(t)?n=t.replace(p,""):c.test(t)?(i=t.split(u),n=y(i[0],e)[y(i[1],e)]):h.test(t)?(i=t.split(d),n=y(i[0],e)[i[1]]):f.test(t)&&(n=parseFloat(t)),n}function _(t,e){var i=[t],n=[],r=0,a=0;return o(e,(function(t,o){0===t.indexOf("if")?r+=1:"/if"===t?r-=1:r||0!==t.indexOf("elseif")&&"else"!==t||(i.push("else"===t?["true"]:t.split(" ").slice(1)),n.push(e.slice(a,o)),a=o+1)})),n.push(e.slice(a)),{exps:i,sourcesInsideIf:n}}function w(t,e,i){var n=_(t,e),r=!1,a="";return o(n.exps,(function(t,e){return r=M(t,i),r&&(a=E(n.sourcesInsideIf[e],i)),!r})),a}function k(t,e,i){var n=M(t,i),a=r(n)?"@index":"@key",l={},c="";return o(n,(function(t,n){l[a]=n,l["@this"]=t,s(i,l),c+=E(e.slice(),i)})),c}function C(t,e,i){var o=n("as",t),r=t[o+1],a=M(t.slice(0,o),i),l={};return l[r]=a,E(e,s(i,l))||""}function S(t,e,i){var n=t.splice(e+1,i-e);return n.pop(),n}function I(t,e,i){var n,o=v[t],r=1,s=0,l=s+m,c=e[l];while(r&&a(c))0===c.indexOf(t)?r+=1:0===c.indexOf("/"+t)&&(r-=1,n=l),l+=m,c=e[l];if(r)throw Error(t+" needs {{/"+t+"}} expression.");return e[s]=o(e[s].split(" ").slice(1),S(e,s,n),i),e}function M(t,e){var i=y(t[0],e);return i instanceof Function?T(i,t.slice(1),e):i}function T(t,e,i){var n=[];return o(e,(function(t){n.push(y(t,i))})),t.apply(null,n)}function E(t,e){var i,n,o,r=1,s=t[r];while(a(s))i=s.split(" "),n=i[0],v[n]?(o=I(n,t.splice(r,t.length-r),e),t=t.concat(o)):t[r]=M(i,e),r+=m,s=t[r];return t.join("")}function A(t,e){return E(x(t,l),e)}t.exports=A},function(t,e,i){"use strict";var n=i(1);function o(t,e){var i,o=n(t),r=o?t[0]:t.clientX,a=o?t[1]:t.clientY;return e?(i=e.getBoundingClientRect(),[r-i.left-e.clientLeft,a-i.top-e.clientTop]):[r,a]}t.exports=o},function(t,e,i){"use strict";var n=i(55);function o(t,e){var i=t.parentNode;if(n(t,e))return t;while(i&&i!==document){if(n(i,e))return i;i=i.parentNode}return null}t.exports=o},function(t,e,i){"use strict";var n=i(5),o=i(56),r=Element.prototype,a=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return n(this,o(e.querySelectorAll(t)))>-1};function s(t,e){return a.call(t,e)}t.exports=s},function(t,e,i){"use strict";var n=i(6);function o(t){var e;try{e=Array.prototype.slice.call(t)}catch(i){e=[],n(t,(function(t){e.push(t)}))}return e}t.exports=o},function(t,e,i){"use strict";(function(e){var n=i(4).isOldBrowser,o=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join("\n"),r=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join("\n"),a=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join("\n"),s=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join("\n"),l=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join("\n");n&&e.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),t.exports={layout:o,slider:n?a:r,huebar:n?l:s}}).call(this,i(25))}])}))},55026:function(t,e,i){
/*!
 * TOAST UI ImageEditor
 * @version 3.15.3
 * @license MIT
 */
(function(e,n){t.exports=n(i(6321))})(self,(function(t){return function(){var e={2777:function(t,e,i){
/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
var n=n||{version:"4.6.0"};if(e.fabric=n,"undefined"!==typeof document&&"undefined"!==typeof window)document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?n.document=document:n.document=document.implementation.createHTMLDocument(""),n.window=window;else{var o=i(4960),r=new o.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;n.document=r.document,n.jsdomImplForWrapper=i(6759).implForWrapper,n.nodeCanvas=i(6272).Canvas,n.window=r,DOMParser=n.window.DOMParser}function a(t){var e=t.targetCanvas,i=e.width,n=e.height,o=t.destinationWidth,r=t.destinationHeight;i===o&&n===r||(e.width=o,e.height=r)}function s(t,e){var i=t.canvas,n=e.targetCanvas,o=n.getContext("2d");o.translate(0,n.height),o.scale(1,-1);var r=i.height-n.height;o.drawImage(i,0,r,n.width,n.height,0,0,n.width,n.height)}function l(t,e){var i=e.targetCanvas,n=i.getContext("2d"),o=e.destinationWidth,r=e.destinationHeight,a=o*r*4,s=new Uint8Array(this.imageBuffer,0,a),l=new Uint8ClampedArray(this.imageBuffer,0,a);t.readPixels(0,0,o,r,t.RGBA,t.UNSIGNED_BYTE,s);var c=new ImageData(l,o,r);n.putImageData(c,0,0)}n.isTouchSupported="ontouchstart"in n.window||"ontouchstart"in n.document||n.window&&n.window.navigator&&n.window.navigator.maxTouchPoints>0,n.isLikelyNode="undefined"!==typeof Buffer&&"undefined"===typeof window,n.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],n.DPI=96,n.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",n.commaWsp="(?:\\s+,?\\s*|,\\s*)",n.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,n.reNonWord=/[ \n\.,;!\?\-]/,n.fontPaths={},n.iMatrix=[1,0,0,1,0,0],n.svgNS="http://www.w3.org/2000/svg",n.perfLimitSizeTotal=2097152,n.maxCacheSideLimit=4096,n.minCacheSideLimit=256,n.charWidthsCache={},n.textureSize=2048,n.disableStyleCopyPaste=!1,n.enableGLFiltering=!0,n.devicePixelRatio=n.window.devicePixelRatio||n.window.webkitDevicePixelRatio||n.window.mozDevicePixelRatio||1,n.browserShadowBlurConstant=1,n.arcToSegmentsCache={},n.boundsOfCurveCache={},n.cachesBoundsOfCurve=!0,n.forceGLPutImageData=!1,n.initFilterBackend=function(){return n.enableGLFiltering&&n.isWebglSupported&&n.isWebglSupported(n.textureSize)?new n.WebglFilterBackend({tileSize:n.textureSize}):n.Canvas2dFilterBackend?new n.Canvas2dFilterBackend:void 0},"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=n),function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:n.util.array.fill(i,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);this.on(t,i)}function o(t,e){if(1===arguments.length)for(var n in t)i.call(this,n,t[n]);else i.call(this,t,e);return this}function r(e,i){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"===typeof arguments[0])for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}function a(t,e){if(!this.__eventListeners)return this;var i=this.__eventListeners[t];if(!i)return this;for(var n=0,o=i.length;n<o;n++)i[n]&&i[n].call(this,e||{});return this.__eventListeners[t]=i.filter((function(t){return!1!==t})),this}n.Observable={fire:a,on:e,once:o,off:r}}(),n.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,i){var n=this._objects;return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,i=!1,n=0,o=arguments.length;n<o;n++)t=e.indexOf(arguments[n]),-1!==t&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&i&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),n=0,o=i.length;n<o;n++)t.call(e,i[n],n,i);return this},getObjects:function(t){return"undefined"===typeof t?this._objects.concat():this._objects.filter((function(e){return e.type===t}))},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t,e){return this._objects.indexOf(t)>-1||!!e&&this._objects.some((function(e){return"function"===typeof e.contains&&e.contains(t,!0)}))},complexity:function(){return this._objects.reduce((function(t,e){return t+=e.complexity?e.complexity():0,t}),0)}},n.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof n.Gradient||this.set(e,new n.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof n.Pattern?i&&i():this.set(e,new n.Pattern(t,i))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"===typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"===typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,i=Math.atan2,o=Math.pow,r=Math.PI/180,a=Math.PI/2;n.util={cos:function(t){if(0===t)return 1;t<0&&(t=-t);var e=t/a;switch(e){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=t/a,i=1;switch(t<0&&(i=-1),e){case 1:return i;case 2:return 0;case 3:return-i}return Math.sin(t)},removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*r},radiansToDegrees:function(t){return t/r},rotatePoint:function(t,e,i){var o=new n.Point(t.x-e.x,t.y-e.y),r=n.util.rotateVector(o,i);return new n.Point(r.x,r.y).addEquals(e)},rotateVector:function(t,e){var i=n.util.sin(e),o=n.util.cos(e),r=t.x*o-t.y*i,a=t.x*i+t.y*o;return{x:r,y:a}},transformPoint:function(t,e,i){return i?new n.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new n.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var i=0;i<t.length;i++)t[i]=n.util.transformPoint(t[i],e);var o=[t[0].x,t[1].x,t[2].x,t[3].x],r=n.util.array.min(o),a=n.util.array.max(o),s=a-r,l=[t[0].y,t[1].y,t[2].y,t[3].y],c=n.util.array.min(l),u=n.util.array.max(l),h=u-c;return{left:r,top:c,width:s,height:h}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],o=n.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-o.x,i[5]=-o.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),o=parseFloat(t);switch(e||(e=n.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return o*n.DPI/25.4;case"cm":return o*n.DPI/2.54;case"in":return o*n.DPI;case"pt":return o*n.DPI/72;case"pc":return o*n.DPI/72*12;case"em":return o*e;default:return o}},falseFunction:function(){return!1},getKlass:function(t,e){return t=n.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),n.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"]);break}return e},resolveNamespace:function(e){if(!e)return n;var i,o=e.split("."),r=o.length,a=t||n.window;for(i=0;i<r;++i)a=a[o[i]];return a},loadImage:function(t,e,i,o){if(t){var r=n.util.createImage(),a=function(){e&&e.call(i,r,!1),r=r.onload=r.onerror=null};r.onload=a,r.onerror=function(){n.log("Error loading "+r.src),e&&e.call(i,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&void 0!==o&&null!==o&&(r.crossOrigin=o),"data:image/svg"===t.substring(0,14)&&(r.onload=null,n.util.loadImageInDom(r,a)),r.src=t}else e&&e.call(i,t)},loadImageInDom:function(t,e){var i=n.document.createElement("div");i.style.width=i.style.height="1px",i.style.left=i.style.top="-100%",i.style.position="absolute",i.appendChild(t),n.document.querySelector("body").appendChild(i),t.onload=function(){e(),i.parentNode.removeChild(i),i=null}},enlivenObjects:function(t,e,i,o){t=t||[];var r=[],a=0,s=t.length;function l(){++a===s&&e&&e(r.filter((function(t){return t})))}s?t.forEach((function(t,e){if(t&&t.type){var a=n.util.getKlass(t.type,i);a.fromObject(t,(function(i,n){n||(r[e]=i),o&&o(t,i,n),l()}))}else l()})):e&&e(r)},enlivenPatterns:function(t,e){function i(){++r===a&&e&&e(o)}t=t||[];var o=[],r=0,a=t.length;a?t.forEach((function(t,e){t&&t.source?new n.Pattern(t,(function(t){o[e]=t,i()})):(o[e]=t,i())})):e&&e(o)},groupSVGElements:function(t,e,i){var o;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),o=new n.Group(t,e),"undefined"!==typeof i&&(o.sourcePath=i),o)},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,o=i.length;n<o;n++)i[n]in t&&(e[i[n]]=t[i[n]])},drawDashedLine:function(t,n,o,r,a,s){var l=r-n,c=a-o,u=e(l*l+c*c),h=i(c,l),d=s.length,g=0,p=!0;t.save(),t.translate(n,o),t.moveTo(0,0),t.rotate(h),n=0;while(u>n)n+=s[g++%d],n>u&&(n=u),t[p?"lineTo":"moveTo"](n,0),p=!p;t.restore()},createCanvasElement:function(){return n.document.createElement("canvas")},copyCanvasElement:function(t){var e=n.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,i){return t.toDataURL("image/"+e,i)},createImage:function(){return n.document.createElement("img")},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var n=i(t[1],t[0]),a=o(t[0],2)+o(t[1],2),s=e(a),l=(t[0]*t[3]-t[2]*t[1])/s,c=i(t[0]*t[2]+t[1]*t[3],a);return{angle:n/r,scaleX:s,scaleY:l,skewX:c/r,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return n.iMatrix.concat();var e=n.util.degreesToRadians(t.angle),i=n.util.cos(e),o=n.util.sin(e);return[i,o,-o,i,0,0]},calcDimensionsMatrix:function(t){var e="undefined"===typeof t.scaleX?1:t.scaleX,i="undefined"===typeof t.scaleY?1:t.scaleY,o=[t.flipX?-e:e,0,0,t.flipY?-i:i,0,0],r=n.util.multiplyTransformMatrices,a=n.util.degreesToRadians;return t.skewX&&(o=r(o,[1,0,Math.tan(a(t.skewX)),1],!0)),t.skewY&&(o=r(o,[1,Math.tan(a(t.skewY)),0,1],!0)),o},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],i=n.util.multiplyTransformMatrices;return t.angle&&(e=i(e,n.util.calcRotateMatrix(t))),(1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=i(e,n.util.calcDimensionsMatrix(t))),e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,i,n){n>0&&(e>n?e-=n:e=0,i>n?i-=n:i=0);var o,r,a=!0,s=t.getImageData(e,i,2*n||1,2*n||1),l=s.data.length;for(o=3;o<l;o+=4)if(r=s.data[o],a=r<=0,!1===a)break;return s=null,a},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",n="Mid",o="Mid",r=t.split(" ");return r&&r.length&&(i=r.pop(),"meet"!==i&&"slice"!==i?(e=i,i="meet"):r.length&&(e=r.pop())),n="none"!==e?e.slice(1,4):"none",o="none"!==e?e.slice(5,8):"none",{meetOrSlice:i,alignX:n,alignY:o}},clearFabricFontCache:function(t){t=(t||"").toLowerCase(),t?n.charWidthsCache[t]&&delete n.charWidthsCache[t]:n.charWidthsCache={}},limitDimsByArea:function(t,e){var i=Math.sqrt(e*t),n=Math.floor(e/i);return{x:Math.floor(i),y:n}},capValue:function(t,e,i){return Math.max(t,Math.min(e,i))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map((function(t){return n.util.toFixed(t,n.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(t,e){var i=n.util.invertTransform(e),o=n.util.multiplyTransformMatrices(i,t.calcOwnMatrix());n.util.applyTransformToObject(t,o)},addTransformToObject:function(t,e){n.util.applyTransformToObject(t,n.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var i=n.util.qrDecompose(e),o=new n.Point(i.translateX,i.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",i.scaleX),t.set("scaleY",i.scaleY),t.skewX=i.skewX,t.skewY=i.skewY,t.angle=i.angle,t.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(t,e,i){var o=t/2,r=e/2,a=[{x:-o,y:-r},{x:o,y:-r},{x:-o,y:r},{x:o,y:r}],s=n.util.calcDimensionsMatrix(i),l=n.util.makeBoundingBoxFromPoints(a,s);return{x:l.width,y:l.height}}}}(e),function(){var t=Array.prototype.join,e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i={m:"l",M:"L"};function o(t,e,i,o,r,a,s,l,c,u,h){var d=n.util.cos(t),g=n.util.sin(t),p=n.util.cos(e),f=n.util.sin(e),m=i*r*p-o*a*f+s,v=o*r*p+i*a*f+l,b=u+c*(-i*r*g-o*a*d),x=h+c*(-o*r*g+i*a*d),y=m+c*(i*r*f+o*a*p),_=v+c*(o*r*f-i*a*p);return["C",b,x,y,_,m,v]}function r(t,e,i,r,s,l,c){var u=Math.PI,h=c*u/180,d=n.util.sin(h),g=n.util.cos(h),p=0,f=0;i=Math.abs(i),r=Math.abs(r);var m=-g*t*.5-d*e*.5,v=-g*e*.5+d*t*.5,b=i*i,x=r*r,y=v*v,_=m*m,w=b*x-b*y-x*_,k=0;if(w<0){var C=Math.sqrt(1-w/(b*x));i*=C,r*=C}else k=(s===l?-1:1)*Math.sqrt(w/(b*y+x*_));var S=k*i*v/r,I=-k*r*m/i,M=g*S-d*I+.5*t,T=d*S+g*I+.5*e,E=a(1,0,(m-S)/i,(v-I)/r),A=a((m-S)/i,(v-I)/r,(-m-S)/i,(-v-I)/r);0===l&&A>0?A-=2*u:1===l&&A<0&&(A+=2*u);for(var D=Math.ceil(Math.abs(A/u*2)),L=[],O=A/D,j=8/3*Math.sin(O/4)*Math.sin(O/4)/Math.sin(O/2),P=E+O,N=0;N<D;N++)L[N]=o(E,P,g,d,i,r,M,T,j,p,f),p=L[N][5],f=L[N][6],E=P,P+=O;return L}function a(t,e,i,n){var o=Math.atan2(e,t),r=Math.atan2(n,i);return r>=o?r-o:2*Math.PI-(o-r)}function s(e,i,o,r,a,s,l,c){var u;if(n.cachesBoundsOfCurve&&(u=t.call(arguments),n.boundsOfCurveCache[u]))return n.boundsOfCurveCache[u];var h,d,g,p,f,m,v,b,x=Math.sqrt,y=Math.min,_=Math.max,w=Math.abs,k=[],C=[[],[]];d=6*e-12*o+6*a,h=-3*e+9*o-9*a+3*l,g=3*o-3*e;for(var S=0;S<2;++S)if(S>0&&(d=6*i-12*r+6*s,h=-3*i+9*r-9*s+3*c,g=3*r-3*i),w(h)<1e-12){if(w(d)<1e-12)continue;p=-g/d,0<p&&p<1&&k.push(p)}else v=d*d-4*g*h,v<0||(b=x(v),f=(-d+b)/(2*h),0<f&&f<1&&k.push(f),m=(-d-b)/(2*h),0<m&&m<1&&k.push(m));var I,M,T,E=k.length,A=E;while(E--)p=k[E],T=1-p,I=T*T*T*e+3*T*T*p*o+3*T*p*p*a+p*p*p*l,C[0][E]=I,M=T*T*T*i+3*T*T*p*r+3*T*p*p*s+p*p*p*c,C[1][E]=M;C[0][A]=e,C[1][A]=i,C[0][A+1]=l,C[1][A+1]=c;var D=[{x:y.apply(null,C[0]),y:y.apply(null,C[1])},{x:_.apply(null,C[0]),y:_.apply(null,C[1])}];return n.cachesBoundsOfCurve&&(n.boundsOfCurveCache[u]=D),D}function l(t,e,i){for(var n=i[1],o=i[2],a=i[3],s=i[4],l=i[5],c=i[6],u=i[7],h=r(c-t,u-e,n,o,s,l,a),d=0,g=h.length;d<g;d++)h[d][1]+=t,h[d][2]+=e,h[d][3]+=t,h[d][4]+=e,h[d][5]+=t,h[d][6]+=e;return h}function c(t){var e,i,n,o,r,a,s=0,c=0,u=t.length,h=0,d=0,g=[];for(i=0;i<u;++i){switch(n=!1,e=t[i].slice(0),e[0]){case"l":e[0]="L",e[1]+=s,e[2]+=c;case"L":s=e[1],c=e[2];break;case"h":e[1]+=s;case"H":e[0]="L",e[2]=c,s=e[1];break;case"v":e[1]+=c;case"V":e[0]="L",c=e[1],e[1]=s,e[2]=c;break;case"m":e[0]="M",e[1]+=s,e[2]+=c;case"M":s=e[1],c=e[2],h=e[1],d=e[2];break;case"c":e[0]="C",e[1]+=s,e[2]+=c,e[3]+=s,e[4]+=c,e[5]+=s,e[6]+=c;case"C":r=e[3],a=e[4],s=e[5],c=e[6];break;case"s":e[0]="S",e[1]+=s,e[2]+=c,e[3]+=s,e[4]+=c;case"S":"C"===o?(r=2*s-r,a=2*c-a):(r=s,a=c),s=e[3],c=e[4],e[0]="C",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=r,e[2]=a,r=e[3],a=e[4];break;case"q":e[0]="Q",e[1]+=s,e[2]+=c,e[3]+=s,e[4]+=c;case"Q":r=e[1],a=e[2],s=e[3],c=e[4];break;case"t":e[0]="T",e[1]+=s,e[2]+=c;case"T":"Q"===o?(r=2*s-r,a=2*c-a):(r=s,a=c),e[0]="Q",s=e[1],c=e[2],e[1]=r,e[2]=a,e[3]=s,e[4]=c;break;case"a":e[0]="A",e[6]+=s,e[7]+=c;case"A":n=!0,g=g.concat(l(s,c,e)),s=e[6],c=e[7];break;case"z":case"Z":s=h,c=d;break;default:}n||g.push(e),o=e[0]}return g}function u(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))}function h(t){return t*t*t}function d(t){return 3*t*t*(1-t)}function g(t){return 3*t*(1-t)*(1-t)}function p(t){return(1-t)*(1-t)*(1-t)}function f(t,e,i,n,o,r,a,s){return function(l){var c=h(l),u=d(l),f=g(l),m=p(l);return{x:a*c+o*u+i*f+t*m,y:s*c+r*u+n*f+e*m}}}function m(t,e,i,n,o,r,a,s){return function(l){var c=1-l,u=3*c*c*(i-t)+6*c*l*(o-i)+3*l*l*(a-o),h=3*c*c*(n-e)+6*c*l*(r-n)+3*l*l*(s-r);return Math.atan2(h,u)}}function v(t){return t*t}function b(t){return 2*t*(1-t)}function x(t){return(1-t)*(1-t)}function y(t,e,i,n,o,r){return function(a){var s=v(a),l=b(a),c=x(a);return{x:o*s+i*l+t*c,y:r*s+n*l+e*c}}}function _(t,e,i,n,o,r){return function(a){var s=1-a,l=2*s*(i-t)+2*a*(o-i),c=2*s*(n-e)+2*a*(r-n);return Math.atan2(c,l)}}function w(t,e,i){var n,o,r={x:e,y:i},a=0;for(o=1;o<=100;o+=1)n=t(o/100),a+=u(r.x,r.y,n.x,n.y),r=n;return a}function k(t,e){var i,n,o,r=0,a=0,s=t.iterator,l={x:t.x,y:t.y},c=.01,h=t.angleFinder;while(a<e&&r<=1&&c>1e-4)i=s(r),o=r,n=u(l.x,l.y,i.x,i.y),n+a>e?(c/=2,r-=c):(l=i,r+=c,a+=n);return i.angle=h(o),i}function C(t){for(var e,i,n,o,r=0,a=t.length,s=0,l=0,c=0,h=0,d=[],g=0;g<a;g++){switch(e=t[g],n={x:s,y:l,command:e[0]},e[0]){case"M":n.length=0,c=s=e[1],h=l=e[2];break;case"L":n.length=u(s,l,e[1],e[2]),s=e[1],l=e[2];break;case"C":i=f(s,l,e[1],e[2],e[3],e[4],e[5],e[6]),o=m(s,l,e[1],e[2],e[3],e[4],e[5],e[6]),n.iterator=i,n.angleFinder=o,n.length=w(i,s,l),s=e[5],l=e[6];break;case"Q":i=y(s,l,e[1],e[2],e[3],e[4]),o=_(s,l,e[1],e[2],e[3],e[4]),n.iterator=i,n.angleFinder=o,n.length=w(i,s,l),s=e[3],l=e[4];break;case"Z":case"z":n.destX=c,n.destY=h,n.length=u(s,l,c,h),s=c,l=h;break}r+=n.length,d.push(n)}return d.push({length:r,x:s,y:l}),d}function S(t,e,i){i||(i=C(t));var o=0;while(e-i[o].length>0&&o<i.length-2)e-=i[o].length,o++;var r,a=i[o],s=e/a.length,l=a.command,c=t[o];switch(l){case"M":return{x:a.x,y:a.y,angle:0};case"Z":case"z":return r=new n.Point(a.x,a.y).lerp(new n.Point(a.destX,a.destY),s),r.angle=Math.atan2(a.destY-a.y,a.destX-a.x),r;case"L":return r=new n.Point(a.x,a.y).lerp(new n.Point(c[1],c[2]),s),r.angle=Math.atan2(c[2]-a.y,c[1]-a.x),r;case"C":return k(a,e);case"Q":return k(a,e)}}function I(t){var o,r,a,s,l,c=[],u=[],h=n.rePathCommand,d="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",g="("+d+")"+n.commaWsp,p="([01])"+n.commaWsp+"?",f=g+"?"+g+"?"+g+p+p+g+"?("+d+")",m=new RegExp(f,"g");if(!t||!t.match)return c;l=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var v,b=0,x=l.length;b<x;b++){o=l[b],s=o.slice(1).trim(),u.length=0;var y=o.charAt(0);if(v=[y],"a"===y.toLowerCase())for(var _;_=m.exec(s);)for(var w=1;w<_.length;w++)u.push(_[w]);else while(a=h.exec(s))u.push(a[0]);w=0;for(var k=u.length;w<k;w++)r=parseFloat(u[w]),isNaN(r)||v.push(r);var C=e[y.toLowerCase()],S=i[y]||y;if(v.length-1>C)for(var I=1,M=v.length;I<M;I+=C)c.push([y].concat(v.slice(I,I+C))),y=S;else c.push(v)}return c}function M(t,e){var i,o=[],r=new n.Point(t[0].x,t[0].y),a=new n.Point(t[1].x,t[1].y),s=t.length,l=1,c=0,u=s>2;for(e=e||0,u&&(l=t[2].x<a.x?-1:t[2].x===a.x?0:1,c=t[2].y<a.y?-1:t[2].y===a.y?0:1),o.push(["M",r.x-l*e,r.y-c*e]),i=1;i<s;i++){if(!r.eq(a)){var h=r.midPointFrom(a);o.push(["Q",r.x,r.y,h.x,h.y])}r=t[i],i+1<t.length&&(a=t[i+1])}return u&&(l=r.x>t[i-2].x?1:r.x===t[i-2].x?0:-1,c=r.y>t[i-2].y?1:r.y===t[i-2].y?0:-1),o.push(["L",r.x+l*e,r.y+c*e]),o}function T(t,e,i){return i&&(e=n.util.multiplyTransformMatrices(e,[1,0,0,1,-i.x,-i.y])),t.map((function(t){for(var i=t.slice(0),o={},r=1;r<t.length-1;r+=2)o.x=t[r],o.y=t[r+1],o=n.util.transformPoint(o,e),i[r]=o.x,i[r+1]=o.y;return i}))}function E(t,e,i,n,o,a,l,c,u){for(var h,d=0,g=0,p=[],f=r(c-t,u-e,i,n,a,l,o),m=0,v=f.length;m<v;m++)h=s(d,g,f[m][1],f[m][2],f[m][3],f[m][4],f[m][5],f[m][6]),p.push({x:h[0].x+t,y:h[0].y+e}),p.push({x:h[1].x+t,y:h[1].y+e}),d=f[m][5],g=f[m][6];return p}function A(t,e,i,n){n=n.slice(0).unshift("X");var o=l(e,i,n);o.forEach((function(e){t.bezierCurveTo.apply(t,e.slice(1))}))}n.util.joinPath=function(t){return t.map((function(t){return t.join(" ")})).join(" ")},n.util.parsePath=I,n.util.makePathSimpler=c,n.util.getSmoothPathFromPoints=M,n.util.getPathSegmentsInfo=C,n.util.getBoundsOfCurve=s,n.util.getPointOnPath=S,n.util.transformPath=T,n.util.fromArcToBeizers=l,n.util.getBoundsOfArc=E,n.util.drawArc=A}(),function(){var t=Array.prototype.slice;function e(e,i){for(var n=t.call(arguments,2),o=[],r=0,a=e.length;r<a;r++)o[r]=n.length?e[r][i].apply(e[r],n):e[r][i].call(e[r]);return o}function i(t,e){return a(t,e,(function(t,e){return t>=e}))}function o(t,e){return a(t,e,(function(t,e){return t<e}))}function r(t,e){var i=t.length;while(i--)t[i]=e;return t}function a(t,e,i){if(t&&0!==t.length){var n=t.length-1,o=e?t[n][e]:t[n];if(e)while(n--)i(t[n][e],o)&&(o=t[n][e]);else while(n--)i(t[n],o)&&(o=t[n]);return o}}n.util.array={fill:r,invoke:e,min:o,max:i}}(),function(){function t(e,i,o){if(o)if(!n.isLikelyNode&&i instanceof Element)e=i;else if(i instanceof Array){e=[];for(var r=0,a=i.length;r<a;r++)e[r]=t({},i[r],o)}else if(i&&"object"===typeof i)for(var s in i)"canvas"===s||"group"===s?e[s]=null:i.hasOwnProperty(s)&&(e[s]=t({},i[s],o));else e=i;else for(var s in i)e[s]=i[s];return e}function e(e,i){return t({},e,i)}n.util.object={extend:t,clone:e},n.util.object.extend(n.util,n.Observable)}(),function(){function t(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(t){var e,i=0,n=[];for(i=0,e;i<t.length;i++)!1!==(e=r(t,i))&&n.push(e);return n}function r(t,e){var i=t.charCodeAt(e);if(isNaN(i))return"";if(i<55296||i>57343)return t.charAt(e);if(55296<=i&&i<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var n=t.charCodeAt(e+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var o=t.charCodeAt(e-1);if(55296>o||o>56319)throw"Low surrogate without preceding high surrogate";return!1}n.util.string={camelize:t,capitalize:e,escapeXml:i,graphemeSplit:o}}(),function(){var t=Array.prototype.slice,e=function(){},i=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),o=function(t,e,n){for(var o in e)o in t.prototype&&"function"===typeof t.prototype[o]&&(e[o]+"").indexOf("callSuper")>-1?t.prototype[o]=function(t){return function(){var i=this.constructor.superclass;this.constructor.superclass=n;var o=e[t].apply(this,arguments);if(this.constructor.superclass=i,"initialize"!==t)return o}}(o):t.prototype[o]=e[o],i&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function r(){}function a(e){var i=null,n=this;while(n.constructor.superclass){var o=n.constructor.superclass.prototype[e];if(n[e]!==o){i=o;break}n=n.constructor.superclass.prototype}if(i)return arguments.length>1?i.apply(this,t.call(arguments,1)):i.call(this)}function s(){var i=null,n=t.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"===typeof n[0]&&(i=n.shift()),s.superclass=i,s.subclasses=[],i&&(r.prototype=i.prototype,s.prototype=new r,i.subclasses.push(s));for(var l=0,c=n.length;l<c;l++)o(s,n[l],i);return s.prototype.initialize||(s.prototype.initialize=e),s.prototype.constructor=s,s.prototype.callSuper=a,s}n.util.createClass=s}(),function(){var t=!!n.document.createElement("div").attachEvent,e=["touchstart","touchmove","touchend"];function i(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}n.util.addListener=function(e,i,n,o){e&&e.addEventListener(i,n,!t&&o)},n.util.removeListener=function(e,i,n,o){e&&e.removeEventListener(i,n,!t&&o)},n.util.getPointer=function(t){var e=t.target,o=n.util.getScrollLeftTop(e),r=i(t);return{x:r.clientX+o.left,y:r.clientY+o.top}},n.util.isTouchEvent=function(t){return e.indexOf(t.type)>-1||"touch"===t.pointerType}}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"===typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?a(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)if("opacity"===n)a(t,e[n]);else{var o="float"===n||"cssFloat"===n?"undefined"===typeof i.styleFloat?"cssFloat":"styleFloat":n;i[o]=e[n]}return t}var e=n.document.createElement("div"),i="string"===typeof e.style.opacity,o="string"===typeof e.style.filter,r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(t){return t};i?a=function(t,e){return t.style.opacity=e,t}:o&&(a=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),r.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(r,e)):i.filter+=" alpha(opacity="+100*e+")",t}),n.util.setStyle=t}(),function(){var t=Array.prototype.slice;function e(t){return"string"===typeof t?n.document.getElementById(t):t}var i,o,r=function(e){return t.call(e,0)};try{i=r(n.document.childNodes)instanceof Array}catch(p){}function a(t,e){var i=n.document.createElement(t);for(var o in e)"class"===o?i.className=e[o]:"for"===o?i.htmlFor=e[o]:i.setAttribute(o,e[o]);return i}function s(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function l(t,e,i){return"string"===typeof e&&(e=a(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e}function c(t){var e=0,i=0,o=n.document.documentElement,r=n.document.body||{scrollLeft:0,scrollTop:0};while(t&&(t.parentNode||t.host))if(t=t.parentNode||t.host,t===n.document?(e=r.scrollLeft||o.scrollLeft||0,i=r.scrollTop||o.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1===t.nodeType&&"fixed"===t.style.position)break;return{left:e,top:i}}function u(t){var e,i,n=t&&t.ownerDocument,r={left:0,top:0},a={left:0,top:0},s={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return a;for(var l in s)a[s[l]]+=parseInt(o(t,l),10)||0;return e=n.documentElement,"undefined"!==typeof t.getBoundingClientRect&&(r=t.getBoundingClientRect()),i=c(t),{left:r.left+i.left-(e.clientLeft||0)+a.left,top:r.top+i.top-(e.clientTop||0)+a.top}}function h(t){var e=n.jsdomImplForWrapper(t);return e._canvas||e._image}function d(t){if(n.isLikelyNode){var e=n.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}function g(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e}i||(r=function(t){var e=new Array(t.length),i=t.length;while(i--)e[i]=t[i];return e}),o=n.document.defaultView&&n.document.defaultView.getComputedStyle?function(t,e){var i=n.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){var t=n.document.documentElement.style,e="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"";function i(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=n.util.falseFunction),e?t.style[e]="none":"string"===typeof t.unselectable&&(t.unselectable="on"),t}function o(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=null),e?t.style[e]="":"string"===typeof t.unselectable&&(t.unselectable=""),t}n.util.makeElementUnselectable=i,n.util.makeElementSelectable=o}(),n.util.setImageSmoothing=g,n.util.getById=e,n.util.toArray=r,n.util.addClass=s,n.util.makeElement=a,n.util.wrapElement=l,n.util.getScrollLeftTop=c,n.util.getElementOffset=u,n.util.getNodeCanvas=h,n.util.cleanUpJsdomNode=d}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,o){o||(o={});var r=o.method?o.method.toUpperCase():"GET",a=o.onComplete||function(){},s=new n.window.XMLHttpRequest,l=o.body||o.parameters;return s.onreadystatechange=function(){4===s.readyState&&(a(s),s.onreadystatechange=e)},"GET"===r&&(l=null,"string"===typeof o.parameters&&(i=t(i,o.parameters))),s.open(r,i,!0),"POST"!==r&&"PUT"!==r||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(l),s}n.util.request=i}(),n.log=console.log,n.warn=console.warn,function(){function t(){return!1}function e(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function i(i){var n=!1;return a((function(o){i||(i={});var r,s=o||+new Date,l=i.duration||500,c=s+l,u=i.onChange||t,h=i.abort||t,d=i.onComplete||t,g=i.easing||e,p="startValue"in i?i.startValue:0,f="endValue"in i?i.endValue:100,m=i.byValue||f-p;i.onStart&&i.onStart(),function t(e){r=e||+new Date;var i=r>c?l:r-s,o=i/l,v=g(i,p,m,l),b=Math.abs((v-p)/m);if(!n){if(!h(v,b,o))return r>c?(u(f,1,1),void d(f,1,1)):(u(v,b,o),void a(t));d(f,1,1)}}(s)})),function(){n=!0}}var o=n.window.requestAnimationFrame||n.window.webkitRequestAnimationFrame||n.window.mozRequestAnimationFrame||n.window.oRequestAnimationFrame||n.window.msRequestAnimationFrame||function(t){return n.window.setTimeout(t,1e3/60)},r=n.window.cancelAnimationFrame||n.window.clearTimeout;function a(){return o.apply(n.window,arguments)}function s(){return r.apply(n.window,arguments)}n.util.animate=i,n.util.requestAnimFrame=a,n.util.cancelAnimFrame=s}(),function(){function t(t,e,i){var n="rgba("+parseInt(t[0]+i*(e[0]-t[0]),10)+","+parseInt(t[1]+i*(e[1]-t[1]),10)+","+parseInt(t[2]+i*(e[2]-t[2]),10);return n+=","+(t&&e?parseFloat(t[3]+i*(e[3]-t[3])):1),n+=")",n}function e(e,i,o,r){var a=new n.Color(e).getSource(),s=new n.Color(i).getSource(),l=r.onComplete,c=r.onChange;return r=r||{},n.util.animate(n.util.object.extend(r,{duration:o||500,startValue:a,endValue:s,byValue:s,easing:function(e,i,n,o){var a=r.colorEasing?r.colorEasing(e,o):1-Math.cos(e/o*(Math.PI/2));return t(i,n,a)},onComplete:function(e,i,n){if(l)return l(t(s,s,0),i,n)},onChange:function(e,i,n){if(c){if(Array.isArray(e))return c(t(e,e,0),i,n);c(e,i,n)}}}))}n.util.animateColor=e}(),function(){function t(t,e,i,n){return t<Math.abs(e)?(t=e,n=i/4):n=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:n}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e}function o(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function r(t,e,i,n){return i*(t/=n)*t*t*t+e}function a(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e}function s(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function l(t,e,i,n){return i*(t/=n)*t*t*t*t+e}function c(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}function u(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function h(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function d(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e}function g(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}function p(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e}function f(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e}function m(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2,t<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e)}function v(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e}function b(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e}function x(t,e,i,n){return t/=n/2,t<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function y(i,n,o,r){var a=1.70158,s=0,l=o;if(0===i)return n;if(i/=r,1===i)return n+o;s||(s=.3*r);var c=t(l,o,s,a);return-e(c,i,r)+n}function _(e,i,n,o){var r=1.70158,a=0,s=n;if(0===e)return i;if(e/=o,1===e)return i+n;a||(a=.3*o);var l=t(s,n,a,r);return l.a*Math.pow(2,-10*e)*Math.sin((e*o-l.s)*(2*Math.PI)/l.p)+l.c+i}function w(i,n,o,r){var a=1.70158,s=0,l=o;if(0===i)return n;if(i/=r/2,2===i)return n+o;s||(s=r*(.3*1.5));var c=t(l,o,s,a);return i<1?-.5*e(c,i,r)+n:c.a*Math.pow(2,-10*(i-=1))*Math.sin((i*r-c.s)*(2*Math.PI)/c.p)*.5+c.c+n}function k(t,e,i,n,o){return void 0===o&&(o=1.70158),i*(t/=n)*t*((o+1)*t-o)+e}function C(t,e,i,n,o){return void 0===o&&(o=1.70158),i*((t=t/n-1)*t*((o+1)*t+o)+1)+e}function S(t,e,i,n,o){return void 0===o&&(o=1.70158),t/=n/2,t<1?i/2*(t*t*((1+(o*=1.525))*t-o))+e:i/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e}function I(t,e,i,n){return i-M(n-t,0,i,n)+e}function M(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function T(t,e,i,n){return t<n/2?.5*I(2*t,0,i,n)+e:.5*M(2*t-n,0,i,n)+.5*i+e}n.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:i,easeInOutCubic:o,easeInQuart:r,easeOutQuart:a,easeInOutQuart:s,easeInQuint:l,easeOutQuint:c,easeInOutQuint:u,easeInSine:h,easeOutSine:d,easeInOutSine:g,easeInExpo:p,easeOutExpo:f,easeInOutExpo:m,easeInCirc:v,easeOutCirc:b,easeInOutCirc:x,easeInElastic:y,easeOutElastic:_,easeInOutElastic:w,easeInBack:k,easeOutBack:C,easeInOutBack:S,easeInBounce:I,easeOutBounce:M,easeInOutBounce:T}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,o=e.util.toFixed,r=e.util.parseUnit,a=e.util.multiplyTransformMatrices,s=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],l=["symbol","image","marker","pattern","view","svg"],c=["pattern","defs","symbol","metadata","clipPath","mask","desc"],u=["symbol","g","a","svg","clipPath","defs"],h={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},d={stroke:"strokeOpacity",fill:"fillOpacity"},g="font-size",p="clip-path";function f(t){return t in h?h[t]:t}function m(t,i,n,o){var s,l="[object Array]"===Object.prototype.toString.call(i);if("fill"!==t&&"stroke"!==t||"none"!==i){if("strokeUniform"===t)return"non-scaling-stroke"===i;if("strokeDashArray"===t)i="none"===i?null:i.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)i=n&&n.transformMatrix?a(n.transformMatrix,e.parseTransformAttribute(i)):e.parseTransformAttribute(i);else if("visible"===t)i="none"!==i&&"hidden"!==i,n&&!1===n.visible&&(i=!1);else if("opacity"===t)i=parseFloat(i),n&&"undefined"!==typeof n.opacity&&(i*=n.opacity);else if("textAnchor"===t)i="start"===i?"left":"end"===i?"right":"center";else if("charSpacing"===t)s=r(i,o)/o*1e3;else if("paintFirst"===t){var c=i.indexOf("fill"),u=i.indexOf("stroke");i="fill";(c>-1&&u>-1&&u<c||-1===c&&u>-1)&&(i="stroke")}else{if("href"===t||"xlink:href"===t||"font"===t)return i;if("imageSmoothing"===t)return"optimizeQuality"===i;s=l?i.map(r):r(i,o)}}else i="";return!l&&isNaN(s)?i:s}function v(t){return new RegExp("^("+t.join("|")+")\\b","i")}function b(t){for(var i in d)if("undefined"!==typeof t[d[i]]&&""!==t[i]){if("undefined"===typeof t[i]){if(!e.Object.prototype[i])continue;t[i]=e.Object.prototype[i]}if(0!==t[i].indexOf("url(")){var n=new e.Color(t[i]);t[i]=n.setAlpha(o(n.getAlpha()*t[d[i]],2)).toRgba()}}return t}function x(t,e){var i,n,o,r,a=[];for(o=0,r=e.length;o<r;o++)i=e[o],n=t.getElementsByTagName(i),a=a.concat(Array.prototype.slice.call(n));return a}function y(t,e){var i,n;t.replace(/;\s*$/,"").split(";").forEach((function(t){var o=t.split(":");i=o[0].trim().toLowerCase(),n=o[1].trim(),e[i]=n}))}function _(t,e){var i,n;for(var o in t)"undefined"!==typeof t[o]&&(i=o.toLowerCase(),n=t[o],e[i]=n)}function w(t,i){var n={};for(var o in e.cssRules[i])if(k(t,o.split(" ")))for(var r in e.cssRules[i][o])n[r]=e.cssRules[i][o][r];return n}function k(t,e){var i,n=!0;return i=S(t,e.pop()),i&&e.length&&(n=C(t,e)),i&&n&&0===e.length}function C(t,e){var i,n=!0;while(t.parentNode&&1===t.parentNode.nodeType&&e.length)n&&(i=e.pop()),t=t.parentNode,n=S(t,i);return 0===e.length}function S(t,e){var i,n,o=t.nodeName,r=t.getAttribute("class"),a=t.getAttribute("id");if(i=new RegExp("^"+o,"i"),e=e.replace(i,""),a&&e.length&&(i=new RegExp("#"+a+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),r&&e.length)for(r=r.split(" "),n=r.length;n--;)i=new RegExp("\\."+r[n]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"");return 0===e.length}function I(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var n,o,r,a=t.getElementsByTagName("*");for(o=0,r=a.length;o<r;o++)if(n=a[o],e===n.getAttribute("id"))return n}function M(t){var i=x(t,["use","svg:use"]),n=0;while(i.length&&n<i.length){var o=i[n],r=o.getAttribute("xlink:href")||o.getAttribute("href");if(null===r)return;var a,s,l,c,u,h=r.substr(1),d=o.getAttribute("x")||0,g=o.getAttribute("y")||0,p=I(t,h).cloneNode(!0),f=(p.getAttribute("transform")||"")+" translate("+d+", "+g+")",m=i.length,v=e.svgNS;if(E(p),/^svg$/i.test(p.nodeName)){var b=p.ownerDocument.createElementNS(v,"g");for(l=0,c=p.attributes,u=c.length;l<u;l++)s=c.item(l),b.setAttributeNS(v,s.nodeName,s.nodeValue);while(p.firstChild)b.appendChild(p.firstChild);p=b}for(l=0,c=o.attributes,u=c.length;l<u;l++)s=c.item(l),"x"!==s.nodeName&&"y"!==s.nodeName&&"xlink:href"!==s.nodeName&&"href"!==s.nodeName&&("transform"===s.nodeName?f=s.nodeValue+" "+f:p.setAttribute(s.nodeName,s.nodeValue));p.setAttribute("transform",f),p.setAttribute("instantiated_by_use","1"),p.removeAttribute("id"),a=o.parentNode,a.replaceChild(p,o),i.length===m&&n++}}e.svgValidTagNamesRegEx=v(s),e.svgViewBoxElementsRegEx=v(l),e.svgInvalidAncestorsRegEx=v(c),e.svgValidParentsRegEx=v(u),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,i){var n=e.util.cos(i[0]),o=e.util.sin(i[0]),r=0,a=0;3===i.length&&(r=i[1],a=i[2]),t[0]=n,t[1]=o,t[2]=-o,t[3]=n,t[4]=r-(n*r-o*a),t[5]=a-(o*r+n*a)}function i(t,e){var i=e[0],n=2===e.length?e[1]:e[0];t[0]=i,t[3]=n}function n(t,i,n){t[n]=Math.tan(e.util.degreesToRadians(i[0]))}function o(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var r=e.iMatrix,a=e.reNum,s=e.commaWsp,l="(?:(skewX)\\s*\\(\\s*("+a+")\\s*\\))",c="(?:(skewY)\\s*\\(\\s*("+a+")\\s*\\))",u="(?:(rotate)\\s*\\(\\s*("+a+")(?:"+s+"("+a+")"+s+"("+a+"))?\\s*\\))",h="(?:(scale)\\s*\\(\\s*("+a+")(?:"+s+"("+a+"))?\\s*\\))",d="(?:(translate)\\s*\\(\\s*("+a+")(?:"+s+"("+a+"))?\\s*\\))",g="(?:(matrix)\\s*\\(\\s*("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")\\s*\\))",p="(?:"+g+"|"+d+"|"+h+"|"+u+"|"+l+"|"+c+")",f="(?:"+p+"(?:"+s+"*"+p+")*)",m="^\\s*(?:"+f+"?)\\s*$",v=new RegExp(m),b=new RegExp(p,"g");return function(a){var s=r.concat(),l=[];if(!a||a&&!v.test(a))return s;a.replace(b,(function(a){var c=new RegExp(p).exec(a).filter((function(t){return!!t})),u=c[1],h=c.slice(2).map(parseFloat);switch(u){case"translate":o(s,h);break;case"rotate":h[0]=e.util.degreesToRadians(h[0]),t(s,h);break;case"scale":i(s,h);break;case"skewX":n(s,h,2);break;case"skewY":n(s,h,1);break;case"matrix":s=h;break}l.push(s.concat()),s=r.concat()}));var c=l[0];while(l.length>1)l.shift(),c=e.util.multiplyTransformMatrices(c,l[0]);return c}}();var T=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function E(t){if(!e.svgViewBoxElementsRegEx.test(t.nodeName))return{};var i,n,o,a,s=t.getAttribute("viewBox"),l=1,c=1,u=0,h=0,d=t.getAttribute("width"),g=t.getAttribute("height"),p=t.getAttribute("x")||0,f=t.getAttribute("y")||0,m=t.getAttribute("preserveAspectRatio")||"",v=!s||!(s=s.match(T)),b=!d||!g||"100%"===d||"100%"===g,x=v&&b,y={},_="",w=0,k=0;if(y.width=0,y.height=0,y.toBeParsed=x,v&&(p||f)&&t.parentNode&&"#document"!==t.parentNode.nodeName&&(_=" translate("+r(p)+" "+r(f)+") ",o=(t.getAttribute("transform")||"")+_,t.setAttribute("transform",o),t.removeAttribute("x"),t.removeAttribute("y")),x)return y;if(v)return y.width=r(d),y.height=r(g),y;if(u=-parseFloat(s[1]),h=-parseFloat(s[2]),i=parseFloat(s[3]),n=parseFloat(s[4]),y.minX=u,y.minY=h,y.viewBoxWidth=i,y.viewBoxHeight=n,b?(y.width=i,y.height=n):(y.width=r(d),y.height=r(g),l=y.width/i,c=y.height/n),m=e.util.parsePreserveAspectRatioAttribute(m),"none"!==m.alignX&&("meet"===m.meetOrSlice&&(c=l=l>c?c:l),"slice"===m.meetOrSlice&&(c=l=l>c?l:c),w=y.width-i*l,k=y.height-n*l,"Mid"===m.alignX&&(w/=2),"Mid"===m.alignY&&(k/=2),"Min"===m.alignX&&(w=0),"Min"===m.alignY&&(k=0)),1===l&&1===c&&0===u&&0===h&&0===p&&0===f)return y;if((p||f)&&"#document"!==t.parentNode.nodeName&&(_=" translate("+r(p)+" "+r(f)+") "),o=_+" matrix("+l+" 0 0 "+c+" "+(u*l+w)+" "+(h*c+k)+") ","svg"===t.nodeName){a=t.ownerDocument.createElementNS(e.svgNS,"g");while(t.firstChild)a.appendChild(t.firstChild);t.appendChild(a)}else a=t,a.removeAttribute("x"),a.removeAttribute("y"),o=a.getAttribute("transform")+o;return a.setAttribute("transform",o),y}function A(t,e){while(t&&(t=t.parentNode))if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}function D(t,e){var i=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],n="xlink:href",o=e.getAttribute(n).substr(1),r=I(t,o);if(r&&r.getAttribute(n)&&D(t,r),i.forEach((function(t){r&&!e.hasAttribute(t)&&r.hasAttribute(t)&&e.setAttribute(t,r.getAttribute(t))})),!e.children.length){var a=r.cloneNode(!0);while(a.firstChild)e.appendChild(a.firstChild)}e.removeAttribute(n)}e.parseSVGDocument=function(t,i,o,r){if(t){M(t);var a,s,l=e.Object.__uid++,c=E(t),u=e.util.toArray(t.getElementsByTagName("*"));if(c.crossOrigin=r&&r.crossOrigin,c.svgUid=l,0===u.length&&e.isLikelyNode){u=t.selectNodes('//*[name(.)!="svg"]');var h=[];for(a=0,s=u.length;a<s;a++)h[a]=u[a];u=h}var d=u.filter((function(t){return E(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!A(t,e.svgInvalidAncestorsRegEx)}));if(!d||d&&!d.length)i&&i([],{});else{var g={};u.filter((function(t){return"clipPath"===t.nodeName.replace("svg:","")})).forEach((function(t){var i=t.getAttribute("id");g[i]=e.util.toArray(t.getElementsByTagName("*")).filter((function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))}))})),e.gradientDefs[l]=e.getGradientDefs(t),e.cssRules[l]=e.getCSSRules(t),e.clipPaths[l]=g,e.parseElements(d,(function(t,n){i&&(i(t,c,n,u),delete e.gradientDefs[l],delete e.cssRules[l],delete e.clipPaths[l])}),n(c),o,r)}}};var L=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+e.reNum+"))?\\s+(.*)");i(e,{parseFontDeclaration:function(t,e){var i=t.match(L);if(i){var n=i[1],o=i[3],a=i[4],s=i[5],l=i[6];n&&(e.fontStyle=n),o&&(e.fontWeight=isNaN(parseFloat(o))?o:parseFloat(o)),a&&(e.fontSize=r(a)),l&&(e.fontFamily=l),s&&(e.lineHeight="normal"===s?1:s)}},getGradientDefs:function(t){var e,i=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],n=x(t,i),o=0,r={};o=n.length;while(o--)e=n[o],e.getAttribute("xlink:href")&&D(t,e),r[e.getAttribute("id")]=e;return r},parseAttributes:function(t,n,o){if(t){var a,s,l,c={};"undefined"===typeof o&&(o=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(c=e.parseAttributes(t.parentNode,n,o));var u=n.reduce((function(e,i){return a=t.getAttribute(i),a&&(e[i]=a),e}),{}),h=i(w(t,o),e.parseStyleAttribute(t));u=i(u,h),h[p]&&t.setAttribute(p,h[p]),s=l=c.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,u[g]&&(u[g]=s=r(u[g],l));var d,v,x={};for(var y in u)d=f(y),v=m(d,u[y],c,s),x[d]=v;x&&x.font&&e.parseFontDeclaration(x.font,x);var _=i(c,x);return e.svgValidParentsRegEx.test(t.nodeName)?_:b(_)}},parseElements:function(t,i,n,o,r){new e.ElementsParser(t,i,n,o,r).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"===typeof i?y(i,e):_(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,i,n=[];for(e=0,i=t.length;e<i;e+=2)n.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return n},getCSSRules:function(t){var i,n,o,r=t.getElementsByTagName("style"),a={};for(i=0,n=r.length;i<n;i++){var s=r[i].textContent;s=s.replace(/\/\*[\s\S]*?\*\//g,""),""!==s.trim()&&(o=s.match(/[^{]*\{[\s\S]*?\}/g),o=o.map((function(t){return t.trim()})),o.forEach((function(t){var o=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),r={},s=o[2].trim(),l=s.replace(/;$/,"").split(/\s*;\s*/);for(i=0,n=l.length;i<n;i++){var c=l[i].split(/\s*:\s*/),u=c[0],h=c[1];r[u]=h}t=o[1],t.split(",").forEach((function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(a[t]?e.util.object.extend(a[t],r):a[t]=e.util.object.clone(r))}))})))}return a},loadSVGFromURL:function(t,i,n,o){function r(t){var r=t.responseXML;if(!r||!r.documentElement)return i&&i(null),!1;e.parseSVGDocument(r.documentElement,(function(t,e,n,o){i&&i(t,e,n,o)}),n,o)}t=t.replace(/^\n\s*/,"").trim(),new e.util.request(t,{method:"get",onComplete:r})},loadSVGFromString:function(t,i,n,o){var r=new e.window.DOMParser,a=r.parseFromString(t.trim(),"text/xml");e.parseSVGDocument(a.documentElement,(function(t,e,n,o){i(t,e,n,o)}),n,o)}})}(e),n.ElementsParser=function(t,e,i,n,o,r){this.elements=t,this.callback=e,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0,this.parsingOptions=o,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=r},function(t){t.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},t.createObjects=function(){var t=this;this.elements.forEach((function(e,i){e.setAttribute("svgUid",t.svgUid),t.createObject(e,i)}))},t.findTag=function(t){return n[n.util.string.capitalize(t.tagName.replace("svg:",""))]},t.createObject=function(t,e){var i=this.findTag(t);if(i&&i.fromElement)try{i.fromElement(t,this.createCallback(e,t),this.options)}catch(o){n.log(o)}else this.checkIfDone()},t.createCallback=function(t,e){var i=this;return function(o){var r;i.resolveGradient(o,e,"fill"),i.resolveGradient(o,e,"stroke"),o instanceof n.Image&&o._originalElement&&(r=o.parsePreserveAspectRatioAttribute(e)),o._removeTransformMatrix(r),i.resolveClipPath(o,e),i.reviver&&i.reviver(e,o),i.instances[t]=o,i.checkIfDone()}},t.extractPropertyDefinition=function(t,e,i){var o=t[e],r=this.regexUrl;if(r.test(o)){r.lastIndex=0;var a=r.exec(o)[1];return r.lastIndex=0,n[i][this.svgUid][a]}},t.resolveGradient=function(t,e,i){var o=this.extractPropertyDefinition(t,i,"gradientDefs");if(o){var r=e.getAttribute(i+"-opacity"),a=n.Gradient.fromElement(o,t,r,this.options);t.set(i,a)}},t.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},t.resolveClipPath=function(t,e){var i,o,r,a,s,l=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(l){a=[],r=n.util.invertTransform(t.calcTransformMatrix());var c=l[0].parentNode,u=e;while(u.parentNode&&u.getAttribute("clip-path")!==t.clipPath)u=u.parentNode;u.parentNode.appendChild(c);for(var h=0;h<l.length;h++)i=l[h],o=this.findTag(i),o.fromElement(i,this.createClipPathCallback(t,a),this.options);l=1===a.length?a[0]:new n.Group(a),s=n.util.multiplyTransformMatrices(r,l.calcTransformMatrix()),l.clipPath&&this.resolveClipPath(l,u);var d=n.util.qrDecompose(s);l.flipX=!1,l.flipY=!1,l.set("scaleX",d.scaleX),l.set("scaleY",d.scaleY),l.angle=d.angle,l.skewX=d.skewX,l.skewY=0,l.setPositionByOrigin({x:d.translateX,y:d.translateY},"center","center"),t.clipPath=l}else delete t.clipPath},t.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(t){return null!=t})),this.callback(this.instances,this.elements))}}(n.ElementsParser.prototype),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=i,i.prototype={type:"point",constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return"undefined"===typeof e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new i(this.x,this.y)}})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=i,e.Intersection.prototype={constructor:i,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,n,o,r){var a,s=(r.x-o.x)*(t.y-o.y)-(r.y-o.y)*(t.x-o.x),l=(n.x-t.x)*(t.y-o.y)-(n.y-t.y)*(t.x-o.x),c=(r.y-o.y)*(n.x-t.x)-(r.x-o.x)*(n.y-t.y);if(0!==c){var u=s/c,h=l/c;0<=u&&u<=1&&0<=h&&h<=1?(a=new i("Intersection"),a.appendPoint(new e.Point(t.x+u*(n.x-t.x),t.y+u*(n.y-t.y)))):a=new i}else a=new i(0===s||0===l?"Coincident":"Parallel");return a},e.Intersection.intersectLinePolygon=function(t,e,n){var o,r,a,s,l=new i,c=n.length;for(s=0;s<c;s++)o=n[s],r=n[(s+1)%c],a=i.intersectLineLine(t,e,o,r),l.appendPoints(a.points);return l.points.length>0&&(l.status="Intersection"),l},e.Intersection.intersectPolygonPolygon=function(t,e){var n,o=new i,r=t.length;for(n=0;n<r;n++){var a=t[n],s=t[(n+1)%r],l=i.intersectLinePolygon(a,s,e);o.appendPoints(l.points)}return o.points.length>0&&(o.status="Intersection"),o},e.Intersection.intersectPolygonRectangle=function(t,n,o){var r=n.min(o),a=n.max(o),s=new e.Point(a.x,r.y),l=new e.Point(r.x,a.y),c=i.intersectLinePolygon(r,s,t),u=i.intersectLinePolygon(s,a,t),h=i.intersectLinePolygon(a,l,t),d=i.intersectLinePolygon(l,r,t),g=new i;return g.appendPoints(c.points),g.appendPoints(u.points),g.appendPoints(h.points),g.appendPoints(d.points),g.points.length>0&&(g.status="Intersection"),g})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function n(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}e.Color?e.warn("fabric.Color is already defined."):(e.Color=i,e.Color.prototype={_tryParsingColor:function(t){var e;t in i.colorNameMap&&(t=i.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=i.sourceFromHex(t)),e||(e=i.sourceFromRgb(t)),e||(e=i.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,i,n){t/=255,i/=255,n/=255;var o,r,a,s=e.util.array.max([t,i,n]),l=e.util.array.min([t,i,n]);if(a=(s+l)/2,s===l)o=r=0;else{var c=s-l;switch(r=a>.5?c/(2-s-l):c/(s+l),s){case t:o=(i-n)/c+(i<n?6:0);break;case i:o=(n-t)/c+2;break;case n:o=(t-i)/c+4;break}o/=6}return[Math.round(360*o),Math.round(100*r),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,n=this.getSource();return t=n[0].toString(16),t=1===t.length?"0"+t:t,e=n[1].toString(16),e=1===e.length?"0"+e:e,i=n[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=Math.round(255*e[3]),t=t.toString(16),t=1===t.length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof i||(t=new i(t));var e,n=[],o=this.getAlpha(),r=.5,a=this.getSource(),s=t.getSource();for(e=0;e<3;e++)n.push(Math.round(a[e]*(1-r)+s[e]*r));return n[3]=o,this.setSource(n),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return i.fromSource(i.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(i.reRGBa);if(e){var n=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),o=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),r=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(n,10),parseInt(o,10),parseInt(r,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=i.fromRgb,e.Color.fromHsl=function(t){return i.fromSource(i.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(i.reHSLa);if(e){var o,r,a,s=(parseFloat(e[1])%360+360)%360/360,l=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===l)o=r=a=c;else{var u=c<=.5?c*(l+1):c+l-c*l,h=2*c-u;o=n(h,u,s+1/3),r=n(h,u,s),a=n(h,u,s-1/3)}return[Math.round(255*o),Math.round(255*r),Math.round(255*a),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=i.fromHsl,e.Color.fromHex=function(t){return i.fromSource(i.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(i.reHex)){var e=t.slice(t.indexOf("#")+1),n=3===e.length||4===e.length,o=8===e.length||4===e.length,r=n?e.charAt(0)+e.charAt(0):e.substring(0,2),a=n?e.charAt(1)+e.charAt(1):e.substring(2,4),s=n?e.charAt(2)+e.charAt(2):e.substring(4,6),l=o?n?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(r,16),parseInt(a,16),parseInt(s,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new i;return e.setSource(t),e})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=["e","se","s","sw","w","nw","n","ne","e"],n=["ns","nesw","ew","nwse"],o={},r="left",a="top",s="right",l="bottom",c="center",u={top:l,bottom:a,left:s,right:r,center:c},h=e.util.radiansToDegrees,d=Math.sign||function(t){return(t>0)-(t<0)||+t};function g(t,e){var i=t.angle+h(Math.atan2(e.y,e.x))+360;return Math.round(i%360/45)}function p(t,i){var n=i.transform.target,o=n.canvas,r=e.util.object.clone(i);r.target=n,o&&o.fire("object:"+t,r),n.fire(t,i)}function f(t,e){var i=e.canvas,n=i.uniScaleKey,o=t[n];return i.uniformScaling&&!o||!i.uniformScaling&&o}function m(t){return t.originX===c&&t.originY===c}function v(t,e,i){var n=t.lockScalingX,o=t.lockScalingY;return!(!n||!o)||(!(e||!n&&!o||!i)||(!(!n||"x"!==e)||!(!o||"y"!==e)))}function b(t,e,n){var o="not-allowed",r=f(t,n),a="";if(0!==e.x&&0===e.y?a="x":0===e.x&&0!==e.y&&(a="y"),v(n,a,r))return o;var s=g(n,e);return i[s]+"-resize"}function x(t,e,i){var o="not-allowed";if(0!==e.x&&i.lockSkewingY)return o;if(0!==e.y&&i.lockSkewingX)return o;var r=g(i,e)%4;return n[r]+"-resize"}function y(t,e,i){return t[i.canvas.altActionKey]?o.skewCursorStyleHandler(t,e,i):o.scaleCursorStyleHandler(t,e,i)}function _(t,e,i){var n=t[i.canvas.altActionKey];return 0===e.x?n?"skewX":"scaleY":0===e.y?n?"skewY":"scaleX":void 0}function w(t,e,i){return i.lockRotation?"not-allowed":e.cursorStyle}function k(t,e,i,n){return{e:t,transform:e,pointer:{x:i,y:n}}}function C(t){return function(e,i,n,o){var r=i.target,a=r.getCenterPoint(),s=r.translateToOriginPoint(a,i.originX,i.originY),l=t(e,i,n,o);return r.setPositionByOrigin(s,i.originX,i.originY),l}}function S(t,e){return function(i,n,o,r){var a=e(i,n,o,r);return a&&p(t,k(i,n,o,r)),a}}function I(t,i,n,o,r){var a=t.target,s=a.controls[t.corner],l=a.canvas.getZoom(),c=a.padding/l,u=a.toLocalPoint(new e.Point(o,r),i,n);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=s.offsetX,u.y-=s.offsetY,u}function M(t){return t.flipX!==t.flipY}function T(t,e,i,n,o){if(0!==t[e]){var r=t._getTransformedDimensions()[n],a=o/r*t[i];t.set(i,a)}}function E(t,e,i,n){var o,c=e.target,u=c._getTransformedDimensions(0,c.skewY),d=I(e,e.originX,e.originY,i,n),g=Math.abs(2*d.x)-u.x,p=c.skewX;g<2?o=0:(o=h(Math.atan2(g/c.scaleX,u.y/c.scaleY)),e.originX===r&&e.originY===l&&(o=-o),e.originX===s&&e.originY===a&&(o=-o),M(c)&&(o=-o));var f=p!==o;if(f){var m=c._getTransformedDimensions().y;c.set("skewX",o),T(c,"skewY","scaleY","y",m)}return f}function A(t,e,i,n){var o,c=e.target,u=c._getTransformedDimensions(c.skewX,0),d=I(e,e.originX,e.originY,i,n),g=Math.abs(2*d.y)-u.y,p=c.skewY;g<2?o=0:(o=h(Math.atan2(g/c.scaleY,u.x/c.scaleX)),e.originX===r&&e.originY===l&&(o=-o),e.originX===s&&e.originY===a&&(o=-o),M(c)&&(o=-o));var f=p!==o;if(f){var m=c._getTransformedDimensions().x;c.set("skewY",o),T(c,"skewX","scaleX","x",m)}return f}function D(t,e,i,n){var o,l=e.target,u=l.skewX,h=e.originY;if(l.lockSkewingX)return!1;if(0===u){var d=I(e,c,c,i,n);o=d.x>0?r:s}else u>0&&(o=h===a?r:s),u<0&&(o=h===a?s:r),M(l)&&(o=o===r?s:r);e.originX=o;var g=S("skewing",C(E));return g(t,e,i,n)}function L(t,e,i,n){var o,s=e.target,u=s.skewY,h=e.originX;if(s.lockSkewingY)return!1;if(0===u){var d=I(e,c,c,i,n);o=d.y>0?a:l}else u>0&&(o=h===r?a:l),u<0&&(o=h===r?l:a),M(s)&&(o=o===a?l:a);e.originY=o;var g=S("skewing",C(A));return g(t,e,i,n)}function O(t,e,i,n){var o=e,r=o.target,a=r.translateToOriginPoint(r.getCenterPoint(),o.originX,o.originY);if(r.lockRotation)return!1;var s=Math.atan2(o.ey-a.y,o.ex-a.x),l=Math.atan2(n-a.y,i-a.x),c=h(l-s+o.theta),u=!0;if(r.snapAngle>0){var d=r.snapAngle,g=r.snapThreshold||d,p=Math.ceil(c/d)*d,f=Math.floor(c/d)*d;Math.abs(c-f)<g?c=f:Math.abs(c-p)<g&&(c=p)}return c<0&&(c=360+c),c%=360,u=r.angle!==c,r.angle=c,u}function j(t,e,i,n,o){o=o||{};var r,a,s,l,c,h,g=e.target,p=g.lockScalingX,b=g.lockScalingY,x=o.by,y=f(t,g),_=v(g,x,y),w=e.gestureScale;if(_)return!1;if(w)a=e.scaleX*w,s=e.scaleY*w;else{if(r=I(e,e.originX,e.originY,i,n),c="y"!==x?d(r.x):1,h="x"!==x?d(r.y):1,e.signX||(e.signX=c),e.signY||(e.signY=h),g.lockScalingFlip&&(e.signX!==c||e.signY!==h))return!1;if(l=g._getTransformedDimensions(),y&&!x){var k=Math.abs(r.x)+Math.abs(r.y),C=e.original,S=Math.abs(l.x*C.scaleX/g.scaleX)+Math.abs(l.y*C.scaleY/g.scaleY),M=k/S;a=C.scaleX*M,s=C.scaleY*M}else a=Math.abs(r.x*g.scaleX/l.x),s=Math.abs(r.y*g.scaleY/l.y);m(e)&&(a*=2,s*=2),e.signX!==c&&"y"!==x&&(e.originX=u[e.originX],a*=-1,e.signX=c),e.signY!==h&&"x"!==x&&(e.originY=u[e.originY],s*=-1,e.signY=h)}var T=g.scaleX,E=g.scaleY;return x?("x"===x&&g.set("scaleX",a),"y"===x&&g.set("scaleY",s)):(!p&&g.set("scaleX",a),!b&&g.set("scaleY",s)),T!==g.scaleX||E!==g.scaleY}function P(t,e,i,n){return j(t,e,i,n)}function N(t,e,i,n){return j(t,e,i,n,{by:"x"})}function z(t,e,i,n){return j(t,e,i,n,{by:"y"})}function R(t,e,i,n){return t[e.target.canvas.altActionKey]?o.skewHandlerX(t,e,i,n):o.scalingY(t,e,i,n)}function B(t,e,i,n){return t[e.target.canvas.altActionKey]?o.skewHandlerY(t,e,i,n):o.scalingX(t,e,i,n)}function F(t,e,i,n){var o=e.target,r=I(e,e.originX,e.originY,i,n),a=o.strokeWidth/(o.strokeUniform?o.scaleX:1),s=m(e)?2:1,l=o.width,c=Math.abs(r.x*s/o.scaleX)-a;return o.set("width",Math.max(c,0)),l!==c}function U(t,e,i,n){var o=e.target,r=i-e.offsetX,a=n-e.offsetY,s=!o.get("lockMovementX")&&o.left!==r,l=!o.get("lockMovementY")&&o.top!==a;return s&&o.set("left",r),l&&o.set("top",a),(s||l)&&p("moving",k(t,e,i,n)),s||l}o.scaleCursorStyleHandler=b,o.skewCursorStyleHandler=x,o.scaleSkewCursorStyleHandler=y,o.rotationWithSnapping=S("rotating",C(O)),o.scalingEqually=S("scaling",C(P)),o.scalingX=S("scaling",C(N)),o.scalingY=S("scaling",C(z)),o.scalingYOrSkewingX=R,o.scalingXOrSkewingY=B,o.changeWidth=S("resizing",C(F)),o.skewHandlerX=D,o.skewHandlerY=L,o.dragHandler=U,o.scaleOrSkewActionName=_,o.rotationStyleHandler=w,o.fireEvent=p,o.wrapWithFixedAnchor=C,o.wrapWithFireEvent=S,o.getLocalPoint=I,e.controlsUtils=o}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.degreesToRadians,n=e.controlsUtils;function o(t,e,i,n,o){n=n||{};var r,a=this.sizeX||n.cornerSize||o.cornerSize,s=this.sizeY||n.cornerSize||o.cornerSize,l="undefined"!==typeof n.transparentCorners?n.transparentCorners:o.transparentCorners,c=l?"stroke":"fill",u=!l&&(n.cornerStrokeColor||o.cornerStrokeColor),h=e,d=i;t.save(),t.fillStyle=n.cornerColor||o.cornerColor,t.strokeStyle=n.cornerStrokeColor||o.cornerStrokeColor,a>s?(r=a,t.scale(1,s/a),d=i*a/s):s>a?(r=s,t.scale(a/s,1),h=e*s/a):r=a,t.lineWidth=1,t.beginPath(),t.arc(h,d,r/2,0,2*Math.PI,!1),t[c](),u&&t.stroke(),t.restore()}function r(t,e,n,o,r){o=o||{};var a=this.sizeX||o.cornerSize||r.cornerSize,s=this.sizeY||o.cornerSize||r.cornerSize,l="undefined"!==typeof o.transparentCorners?o.transparentCorners:r.transparentCorners,c=l?"stroke":"fill",u=!l&&(o.cornerStrokeColor||r.cornerStrokeColor),h=a/2,d=s/2;t.save(),t.fillStyle=o.cornerColor||r.cornerColor,t.strokeStyle=o.cornerStrokeColor||r.cornerStrokeColor,t.lineWidth=1,t.translate(e,n),t.rotate(i(r.angle)),t[c+"Rect"](-h,-d,a,s),u&&t.strokeRect(-h,-d,a,s),t.restore()}n.renderCircleControl=o,n.renderSquareControl=r}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){for(var e in t)this[e]=t[e]}e.Control=i,e.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){var i=t._controlsVisibility;return i&&"undefined"!==typeof i[e]?i[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,i){var n=e.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},i);return n},calcCornerCoords:function(t,i,n,o,r){var a,s,l,c,u=r?this.touchSizeX:this.sizeX,h=r?this.touchSizeY:this.sizeY;if(u&&h&&u!==h){var d=Math.atan2(h,u),g=Math.sqrt(u*u+h*h)/2,p=d-e.util.degreesToRadians(t),f=Math.PI/2-d-e.util.degreesToRadians(t);a=g*e.util.cos(p),s=g*e.util.sin(p),l=g*e.util.cos(f),c=g*e.util.sin(f)}else{var m=u&&h?u:i;g=.7071067812*m;p=e.util.degreesToRadians(45-t);a=l=g*e.util.cos(p),s=c=g*e.util.sin(p)}return{tl:{x:n-c,y:o-l},tr:{x:n+a,y:o-s},bl:{x:n-a,y:o+s},br:{x:n+c,y:o+l}}},render:function(t,i,n,o,r){switch(o=o||{},o.cornerStyle||r.cornerStyle){case"circle":e.controlsUtils.renderCircleControl.call(this,t,i,n,o,r);break;default:e.controlsUtils.renderSquareControl.call(this,t,i,n,o,r)}}}}(e),function(){function t(t,e){var i,o,r,a,s=t.getAttribute("style"),l=t.getAttribute("offset")||0;if(l=parseFloat(l)/(/%$/.test(l)?100:1),l=l<0?0:l>1?1:l,s){var c=s.split(/\s*;\s*/);for(""===c[c.length-1]&&c.pop(),a=c.length;a--;){var u=c[a].split(/\s*:\s*/),h=u[0].trim(),d=u[1].trim();"stop-color"===h?i=d:"stop-opacity"===h&&(r=d)}}return i||(i=t.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=t.getAttribute("stop-opacity")),i=new n.Color(i),o=i.getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=o*e,{offset:l,color:i.toRgb(),opacity:r}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}var o=n.util.object.clone;function r(t,e,i,n){var o,r;Object.keys(e).forEach((function(t){o=e[t],"Infinity"===o?r=1:"-Infinity"===o?r=0:(r=parseFloat(e[t],10),"string"===typeof o&&/^(\d+\.\d+)%|(\d+)%$/.test(o)&&(r*=.01,"pixels"===n&&("x1"!==t&&"x2"!==t&&"r2"!==t||(r*=i.viewBoxWidth||i.width),"y1"!==t&&"y2"!==t||(r*=i.viewBoxHeight||i.height)))),e[t]=r}))}n.Gradient=n.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,i=this;Object.keys(t).forEach((function(e){i[e]=t[e]})),this.id?this.id+="_"+n.Object.__uid++:this.id=n.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var i=new n.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return n.util.populateWithProperties(this,e,t),e},toSVG:function(t,e){var i,r,a,s,l=o(this.coords,!0),c=(e=e||{},o(this.colorStops,!0)),u=l.r1>l.r2,h=this.gradientTransform?this.gradientTransform.concat():n.iMatrix.concat(),d=-this.offsetX,g=-this.offsetY,p=!!e.additionalTransform,f="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(c.sort((function(t,e){return t.offset-e.offset})),"objectBoundingBox"===f?(d/=t.width,g/=t.height):(d+=t.width/2,g+=t.height/2),"path"===t.type&&"percentage"!==this.gradientUnits&&(d-=t.pathOffset.x,g-=t.pathOffset.y),h[4]-=d,h[5]-=g,s='id="SVGID_'+this.id+'" gradientUnits="'+f+'"',s+=' gradientTransform="'+(p?e.additionalTransform+" ":"")+n.util.matrixToSVG(h)+'" ',"linear"===this.type?a=["<linearGradient ",s,' x1="',l.x1,'" y1="',l.y1,'" x2="',l.x2,'" y2="',l.y2,'">\n']:"radial"===this.type&&(a=["<radialGradient ",s,' cx="',u?l.x1:l.x2,'" cy="',u?l.y1:l.y2,'" r="',u?l.r1:l.r2,'" fx="',u?l.x2:l.x1,'" fy="',u?l.y2:l.y1,'">\n']),"radial"===this.type){if(u)for(c=c.concat(),c.reverse(),i=0,r=c.length;i<r;i++)c[i].offset=1-c[i].offset;var m=Math.min(l.r1,l.r2);if(m>0){var v=Math.max(l.r1,l.r2),b=m/v;for(i=0,r=c.length;i<r;i++)c[i].offset+=b*(1-c[i].offset)}}for(i=0,r=c.length;i<r;i++){var x=c[i];a.push("<stop ",'offset="',100*x.offset+"%",'" style="stop-color:',x.color,"undefined"!==typeof x.opacity?";stop-opacity: "+x.opacity:";",'"/>\n')}return a.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),a.join("")},toLive:function(t){var e,i,o,r=n.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(e=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2)),i=0,o=this.colorStops.length;i<o;i++){var a=this.colorStops[i].color,s=this.colorStops[i].opacity,l=this.colorStops[i].offset;"undefined"!==typeof s&&(a=new n.Color(a).setAlpha(s).toRgba()),e.addColorStop(l,a)}return e}}}),n.util.object.extend(n.Gradient,{fromElement:function(o,a,s,l){var c=parseFloat(s)/(/%$/.test(s)?100:1);c=c<0?0:c>1?1:c,isNaN(c)&&(c=1);var u,h,d,g,p=o.getElementsByTagName("stop"),f="userSpaceOnUse"===o.getAttribute("gradientUnits")?"pixels":"percentage",m=o.getAttribute("gradientTransform")||"",v=[],b=0,x=0;for("linearGradient"===o.nodeName||"LINEARGRADIENT"===o.nodeName?(u="linear",h=e(o)):(u="radial",h=i(o)),d=p.length;d--;)v.push(t(p[d],c));g=n.parseTransformAttribute(m),r(a,h,l,f),"pixels"===f&&(b=-a.left,x=-a.top);var y=new n.Gradient({id:o.getAttribute("id"),type:u,coords:h,colorStops:v,gradientUnits:f,gradientTransform:g,offsetX:b,offsetY:x});return y}})}(),function(){"use strict";var t=n.util.toFixed;n.Pattern=n.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=n.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!==typeof t.source)e&&e(this);else{var i=this;this.source=n.util.createImage(),n.util.loadImage(t.source,(function(t,n){i.source=t,e&&e(i,n)}),null,this.crossOrigin)}},toObject:function(e){var i,o,r=n.Object.NUM_FRACTION_DIGITS;return"string"===typeof this.source.src?i=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(i=this.source.toDataURL()),o={type:"pattern",source:i,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,r),offsetY:t(this.offsetY,r),patternTransform:this.patternTransform?this.patternTransform.concat():null},n.util.populateWithProperties(this,o,e),o},toSVG:function(t){var e="function"===typeof this.source?this.source():this.source,i=e.width/t.width,n=e.height/t.height,o=this.offsetX/t.width,r=this.offsetY/t.height,a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,o&&(i+=Math.abs(o))),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+r+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return"";if("undefined"!==typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var i in"string"===typeof t&&(t=this._parseShadow(t)),t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),n=e.Shadow.reOffsetsAndBlur.exec(i)||[],o=i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:o.trim(),offsetX:parseFloat(n[1],10)||0,offsetY:parseFloat(n[2],10)||0,blur:parseFloat(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var n=40,o=40,r=e.Object.NUM_FRACTION_DIGITS,a=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),s=20,l=new e.Color(this.color);return t.width&&t.height&&(n=100*i((Math.abs(a.x)+this.blur)/t.width,r)+s,o=100*i((Math.abs(a.y)+this.blur)/t.height,r)+s),t.flipX&&(a.x*=-1),t.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,r)+'"></feGaussianBlur>\n\t<feOffset dx="'+i(a.x,r)+'" dy="'+i(a.y,r)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+l.toRgb()+'" flood-opacity="'+l.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},i=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(e){this[e]!==i[e]&&(t[e]=this[e])}),this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){"use strict";if(n.StaticCanvas)n.warn("fabric.StaticCanvas is already defined.");else{var t=n.util.object.extend,e=n.util.getElementOffset,i=n.util.removeFromArray,o=n.util.toFixed,r=n.util.transformPoint,a=n.util.invertTransform,s=n.util.getNodeCanvas,l=n.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");n.StaticCanvas=n.util.createClass(n.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:n.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1!==n.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?n.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=n.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,i){e.setAttribute("width",this.width*t),e.setAttribute("height",this.height*t),i.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},__setBgOverlayImage:function(t,e,i,o){return"string"===typeof e?n.util.loadImage(e,(function(e,r){if(e){var a=new n.Image(e,o);this[t]=a,a.canvas=this}i&&i(e,r)}),this,o&&o.crossOrigin):(o&&e.setOptions(o),this[t]=e,e&&(e.canvas=this),i&&i(e,!1)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(){var t=l();if(!t)throw c;if(t.style||(t.style={}),"undefined"===typeof t.getContext)throw c;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=n.util.getById(t)||this._createCanvasElement(),n.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;for(var n in e=e||{},t)i=t[n],e.cssOnly||(this._setBackstoreDimension(n,t[n]),i+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(n,i);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i,n,o=this._activeObject,r=this.backgroundImage,a=this.overlayImage;for(this.viewportTransform=t,i=0,n=this._objects.length;i<n;i++)e=this._objects[i],e.group||e.setCoords(!0);return o&&o.setCoords(),r&&r.setCoords(!0),a&&a.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var i=t,n=this.viewportTransform.slice(0);t=r(t,a(this.viewportTransform)),n[0]=e,n[3]=e;var o=r(t,n);return n[4]+=i.x-o.x,n[5]+=i.y-o.y,this.setViewportTransform(n)},setZoom:function(t){return this.zoomToPoint(new n.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new n.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=n.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,i=this.height,o=a(this.viewportTransform);return t.tl=r({x:0,y:0},o),t.br=r({x:e,y:i},o),t.tr=new n.Point(t.br.x,t.tl.y),t.bl=new n.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(n.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var i=this.viewportTransform,o=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),n.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),o&&(o.canvas=this,o.shouldCache(),o._transformDone=!0,o.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,i=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var i,n;for(i=0,n=e.length;i<n;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"],n=this[e+"Image"],o=this.viewportTransform,r=this[e+"Vpt"];if(i||n){if(i){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=i.toLive?i.toLive(t,this):i,r&&t.transform(o[0],o[1],o[2],o[3],o[4],o[5]),t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);var a=i.gradientTransform||i.patternTransform;a&&t.transform(a[0],a[1],a[2],a[3],a[4],a[5]),t.fill(),t.restore()}n&&(t.save(),r&&t.transform(o[0],o[1],o[2],o[3],o[4],o[5]),n.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return this._centerObject(t,new n.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new n.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new n.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new n.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new n.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=a(this.viewportTransform);return r({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var o=this.clipPath,r={version:n.version,objects:this._toObjects(e,i)};return o&&!o.excludeFromExport&&(r.clipPath=this._toObject(this.clipPath,e,i)),t(r,this.__serializeBgOverlay(e,i)),n.util.populateWithProperties(this,r,i),r},_toObjects:function(t,e){return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(i){return this._toObject(i,t,e)}),this)},_toObject:function(t,e,i){var n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);var o=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=n),o},__serializeBgOverlay:function(t,e){var i={},n=this.backgroundImage,o=this.overlayImage,r=this.backgroundColor,a=this.overlayColor;return r&&r.toObject?r.excludeFromExport||(i.background=r.toObject(e)):r&&(i.background=r),a&&a.toObject?a.excludeFromExport||(i.overlay=a.toObject(e)):a&&(i.overlay=a),n&&!n.excludeFromExport&&(i.backgroundImage=this._toObject(n,t,e)),o&&!o.excludeFromExport&&(i.overlayImage=this._toObject(o,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push("</g>\n"),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,r=e.width||this.width,a=e.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',l=n.Object.NUM_FRACTION_DIGITS;e.viewBox?s='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,s='viewBox="'+o(-i[4]/i[0],l)+" "+o(-i[5]/i[3],l)+" "+o(this.width/i[0],l)+" "+o(this.height/i[3],l)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',a,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",n.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+n.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var t=this,e=["background","overlay"].map((function(e){var i=t[e+"Color"];if(i&&i.toLive){var o=t[e+"Vpt"],r=t.viewportTransform,a={width:t.width/(o?r[0]:1),height:t.height/(o?r[3]:1)};return i.toSVG(a,{additionalTransform:o?n.util.matrixToSVG(r):""})}}));return e.join("")},createSVGFontFacesMarkup:function(){var t,e,i,o,r,a,s,l,c,u="",h={},d=n.fontPaths,g=[];for(this._objects.forEach((function t(e){g.push(e),e._objects&&e._objects.forEach(t)})),l=0,c=g.length;l<c;l++)if(t=g[l],e=t.fontFamily,-1!==t.type.indexOf("text")&&!h[e]&&d[e]&&(h[e]=!0,t.styles))for(r in i=t.styles,i)for(s in o=i[r],o)a=o[s],e=a.fontFamily,!h[e]&&d[e]&&(h[e]=!0);for(var p in h)u+=["\t\t@font-face {\n","\t\t\tfont-family: '",p,"';\n","\t\t\tsrc: url('",d[p],"');\n","\t\t}\n"].join("");return u&&(u=['\t<style type="text/css">',"<![CDATA[\n",u,"]]>","</style>\n"].join("")),u},_setSVGObjects:function(t,e){var i,n,o,r=this._objects;for(n=0,o=r.length;n<o;n++)i=r[n],i.excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i=this[e+"Color"],o=this.viewportTransform,r=this.width,a=this.height;if(i)if(i.toLive){var s=i.repeat,l=n.util.invertTransform(o),c=this[e+"Vpt"],u=c?n.util.matrixToSVG(l):"";t.push('<rect transform="'+u+" translate(",r/2,",",a/2,')"',' x="',i.offsetX-r/2,'" y="',i.offsetY-a/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?i.source.width:r,'" height="',"repeat-x"===s||"no-repeat"===s?i.source.height:a,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,n,o,r=this._activeObject;if(t===r&&"activeSelection"===t.type)for(o=r._objects,e=o.length;e--;)n=o[e],i(this._objects,n),this._objects.unshift(n);else i(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,n,o,r=this._activeObject;if(t===r&&"activeSelection"===t.type)for(o=r._objects,e=0;e<o.length;e++)n=o[e],i(this._objects,n),this._objects.push(n);else i(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var n,o,r,a,s,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(s=l._objects,n=0;n<s.length;n++)o=s[n],r=this._objects.indexOf(o),r>0+c&&(a=r-1,i(this._objects,o),this._objects.splice(a,0,o)),c++;else r=this._objects.indexOf(t),0!==r&&(a=this._findNewLowerIndex(t,r,e),i(this._objects,t),this._objects.splice(a,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,i){var n,o;if(i)for(n=e,o=e-1;o>=0;--o){var r=t.intersectsWithObject(this._objects[o])||t.isContainedWithinObject(this._objects[o])||this._objects[o].isContainedWithinObject(t);if(r){n=o;break}}else n=e-1;return n},bringForward:function(t,e){if(!t)return this;var n,o,r,a,s,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(s=l._objects,n=s.length;n--;)o=s[n],r=this._objects.indexOf(o),r<this._objects.length-1-c&&(a=r+1,i(this._objects,o),this._objects.splice(a,0,o)),c++;else r=this._objects.indexOf(t),r!==this._objects.length-1&&(a=this._findNewUpperIndex(t,r,e),i(this._objects,t),this._objects.splice(a,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,i){var n,o,r;if(i)for(n=e,o=e+1,r=this._objects.length;o<r;++o){var a=t.intersectsWithObject(this._objects[o])||t.isContainedWithinObject(this._objects[o])||this._objects[o].isContainedWithinObject(t);if(a){n=o;break}}else n=e+1;return n},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(n.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),n.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),t(n.StaticCanvas.prototype,n.Observable),t(n.StaticCanvas.prototype,n.Collection),t(n.StaticCanvas.prototype,n.DataURLExporter),t(n.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=l();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"setLineDash":return"undefined"!==typeof i.setLineDash;default:return null}}}),n.StaticCanvas.prototype.toJSON=n.StaticCanvas.prototype.toObject,n.isLikelyNode&&(n.StaticCanvas.prototype.createPNGStream=function(){var t=s(this.lowerCanvasEl);return t&&t.createPNGStream()},n.StaticCanvas.prototype.createJPEGStream=function(t){var e=s(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),n.BaseBrush=n.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,i=t.contextTop,o=t.getZoom();t&&t._isRetinaScaling()&&(o*=n.devicePixelRatio),i.shadowColor=e.color,i.shadowBlur=e.blur*o,i.shadowOffsetX=e.offsetX*o,i.shadowOffsetY=e.offsetY*o}},needsFullRender:function(){var t=new n.Color(this.color);return t.getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),function(){n.PencilBrush=n.util.createClass(n.BaseBrush,{decimate:.4,initialize:function(t){this.canvas=t,this._points=[]},_drawSegment:function(t,e,i){var n=e.midPointFrom(i);return t.quadraticCurveTo(e.x,e.y,n.x,n.y),n},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._captureDrawingPath(t)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var i=this._points,n=i.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(o,i[n-2],i[n-1],!0),o.stroke(),o.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new n.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this._points.push(t),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new n.Point(t.x,t.y);return this._addPoint(e)},_render:function(){var t,e,i=this.canvas.contextTop,o=this._points[0],r=this._points[1];if(this._saveAndTransform(i),i.beginPath(),2===this._points.length&&o.x===r.x&&o.y===r.y){var a=this.width/1e3;o=new n.Point(o.x,o.y),r=new n.Point(r.x,r.y),o.x-=a,r.x+=a}for(i.moveTo(o.x,o.y),t=1,e=this._points.length;t<e;t++)this._drawSegment(i,o,r),o=this._points[t],r=this._points[t+1];i.lineTo(o.x,o.y),i.stroke(),i.restore()},convertPointsToSVGPath:function(t){var e=this.width/1e3;return n.util.getSmoothPathFromPoints(t,e)},_isEmptySVGPath:function(t){var e=n.util.joinPath(t);return"M 0 0 Q 0 0 0 0 L 0 0"===e},createPath:function(t){var e=new n.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new n.Shadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var i,n,o=this.canvas.getZoom(),r=Math.pow(e/o,2),a=t.length-1,s=t[0],l=[s];for(i=1;i<a-1;i++)n=Math.pow(s.x-t[i].x,2)+Math.pow(s.y-t[i].y,2),n>=r&&(s=t[i],l.push(s));return l.push(t[a]),l},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(e))this.canvas.requestRenderAll();else{var i=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.requestRenderAll(),i.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:i})}}})}(),n.CircleBrush=n.util.createClass(n.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,e),i.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,i=this.canvas.contextTop,n=this.points;for(this._saveAndTransform(i),t=0,e=n.length;t<e;t++)this.dot(i,n[t]);i.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){var t,e,i=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var o=[];for(t=0,e=this.points.length;t<e;t++){var r=this.points[t],a=new n.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(a.shadow=new n.Shadow(this.shadow)),o.push(a)}var s=new n.Group(o);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=i,this.canvas.requestRenderAll()},addPoint:function(t){var e=new n.Point(t.x,t.y),i=n.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,o=new n.Color(this.color).setAlpha(n.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=o,this.points.push(e),e}}),n.SprayBrush=n.util.createClass(n.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,o=this.sprayChunks.length;i<o;i++)for(var r=this.sprayChunks[i],a=0,s=r.length;a<s;a++){var l=new n.Rect({width:r[a].width,height:r[a].width,left:r[a].x+1,top:r[a].y+1,originX:"center",originY:"center",fill:this.color});e.push(l)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var c=new n.Group(e);this.shadow&&c.set("shadow",new n.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,i,n,o={};for(i=0,n=t.length;i<n;i++)e=t[i].left+""+t[i].top,o[e]||(o[e]=t[i]);var r=[];for(e in o)r.push(o[e]);return r},render:function(t){var e,i,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),e=0,i=t.length;e<i;e++){var o=t[e];"undefined"!==typeof o.opacity&&(n.globalAlpha=o.opacity),n.fillRect(o.x,o.y,o.width,o.width)}n.restore()},_render:function(){var t,e,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);i.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,i,o,r,a=this.width/2;for(r=0;r<this.density;r++){e=n.util.getRandomInt(t.x-a,t.x+a),i=n.util.getRandomInt(t.y-a,t.y+a),o=this.dotWidthVariance?n.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new n.Point(e,i);s.width=o,this.randomOpacity&&(s.opacity=n.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),n.PatternBrush=n.util.createClass(n.PencilBrush,{getPatternSrc:function(){var t=20,e=5,i=n.util.createCanvasElement(),o=i.getContext("2d");return i.width=i.height=t+e,o.fillStyle=this.color,o.beginPath(),o.arc(t/2,t/2,t/2,0,2*Math.PI,!1),o.closePath(),o.fill(),i},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new n.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),e}}),function(){var t=n.util.getPointer,e=n.util.degreesToRadians,i=n.util.isTouchEvent;for(var o in n.Canvas=n.util.createClass(n.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=n.PencilBrush&&new n.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,i,n=this.getActiveObjects();if(n.length>0&&!this.preserveObjectStacking){e=[],i=[];for(var o=0,r=this._objects.length;o<r;o++)t=this._objects[o],-1===n.indexOf(t)?e.push(t):i.push(t);n.length>1&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),o=n.util.invertTransform(i),r=this.restorePointerVpt(e);return n.util.transformPoint(r,o)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var o=this._normalizePointer(t,{x:e,y:i}),r=Math.max(t.cacheTranslationX+o.x*t.zoomX,0),a=Math.max(t.cacheTranslationY+o.y*t.zoomY,0),s=n.util.isTransparent(t._cacheContext,Math.round(r),Math.round(a),this.targetFindTolerance);return s}var l=this.contextCache,c=t.selectionBackgroundColor,u=this.viewportTransform;t.selectionBackgroundColor="",this.clearContext(l),l.save(),l.transform(u[0],u[1],u[2],u[3],u[4],u[5]),t.render(l),l.restore(),t.selectionBackgroundColor=c;s=n.util.isTransparent(l,e,i,this.targetFindTolerance);return s},_isSelectionKeyPressed:function(t){var e=!1;return e="[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find((function(e){return!0===t[e]})):t[this.selectionKey],e},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),n=this._activeObject;return!e||e&&n&&i.length>1&&-1===i.indexOf(e)&&n!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&n&&n!==e},_shouldCenterTransform:function(t,e,i){var n;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?n=this.centeredScaling||t.centeredScaling:"rotate"===e&&(n=this.centeredRotation||t.centeredRotation),n?!i:i},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i,n){if(!e||!t)return"drag";var o=n.controls[e];return o.getActionName(i,o,n)},_setupCurrentTransform:function(t,i,o){if(i){var r=this.getPointer(t),a=i.__corner,s=i.controls[a],l=o&&a?s.getActionHandler(t,i,s):n.controlsUtils.dragHandler,c=this._getActionFromCorner(o,a,t,i),u=this._getOriginFromCorner(i,a),h=t[this.centeredKey],d={target:i,action:c,actionHandler:l,corner:a,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:r.x-i.left,offsetY:r.y-i.top,originX:u.x,originY:u.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:e(i.angle),width:i.width*i.scaleX,shiftKey:t.shiftKey,altKey:h,original:n.util.saveObjectTransform(i)};this._shouldCenterTransform(i,c,h)&&(d.originX="center",d.originY="center"),d.original.originX=u.x,d.original.originY=u.y,this._currentTransform=d,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new n.Point(e.ex,e.ey),o=n.util.transformPoint(i,this.viewportTransform),r=new n.Point(e.ex+e.left,e.ey+e.top),a=n.util.transformPoint(r,this.viewportTransform),s=Math.min(o.x,a.x),l=Math.min(o.y,a.y),c=Math.max(o.x,a.x),u=Math.max(o.y,a.y),h=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(s,l,c-s,u-l)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,s+=h,l+=h,c-=h,u-=h,n.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(s,l,c-s,u-l))},findTarget:function(t,e){if(!this.skipTargetFind){var n,o,r=!0,a=this.getPointer(t,r),s=this._activeObject,l=this.getActiveObjects(),c=i(t),u=l.length>1&&!e||1===l.length;if(this.targets=[],u&&s._findTargetCorner(a,c))return s;if(l.length>1&&!e&&s===this._searchPossibleTargets([s],a))return s;if(1===l.length&&s===this._searchPossibleTargets([s],a)){if(!this.preserveObjectStacking)return s;n=s,o=this.targets,this.targets=[]}var h=this._searchPossibleTargets(this._objects,a);return t[this.altSelectionKey]&&h&&n&&h!==n&&(h=n,this.targets=o),h}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var n=this.isTargetTransparent(e,i.x,i.y);if(!n)return!0}},_searchPossibleTargets:function(t,e){var i,o,r=t.length;while(r--){var a=t[r],s=a.group?this._normalizePointer(a.group,e):e;if(this._checkTarget(s,a,e)){i=t[r],i.subTargetCheck&&i instanceof n.Group&&(o=this._searchPossibleTargets(i._objects,e),o&&this.targets.push(o));break}}return i},restorePointerVpt:function(t){return n.util.transformPoint(t,n.util.invertTransform(this.viewportTransform))},getPointer:function(e,i){if(this._absolutePointer&&!i)return this._absolutePointer;if(this._pointer&&i)return this._pointer;var n,o=t(e),r=this.upperCanvasEl,a=r.getBoundingClientRect(),s=a.width||0,l=a.height||0;s&&l||("top"in a&&"bottom"in a&&(l=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(s=Math.abs(a.right-a.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,i||(o=this.restorePointerVpt(o));var c=this.getRetinaScaling();return 1!==c&&(o.x/=c,o.y/=c),n=0===s||0===l?{width:1,height:1}:{width:r.width/s,height:r.height/l},{x:o.x*n.width,y:o.y*n.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),n.util.addClass(i,"upper-canvas "+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=n.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),n.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),n.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;n.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,n.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var i=!1,n=this.getActiveObjects(),o=[],r=[];t.forEach((function(t){-1===n.indexOf(t)&&(i=!0,t.fire("deselected",{e:e,target:t}),r.push(t))})),n.forEach((function(n){-1===t.indexOf(n)&&(i=!0,n.fire("selected",{e:e,target:n}),o.push(n))})),t.length>0&&n.length>0?i&&this.fire("selection:updated",{e:e,selected:o,deselected:r,updated:o[0]||r[0],target:this._activeObject}):n.length>0?this.fire("selection:created",{e:e,selected:o,target:this._activeObject}):t.length>0&&this.fire("selection:cleared",{e:e,deselected:r})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){n.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,n.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(t),o=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,n),o},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],i={};return e.forEach((function(e){i[e]=t[e]})),n.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,n)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),n.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),n.StaticCanvas)"prototype"!==o&&(n.Canvas[o]=n.StaticCanvas[o])}(),function(){var t=n.util.addListener,e=n.util.removeListener,i=3,o=2,r=1,a={passive:!1};function s(t,e){return t.button&&t.button===e-1}n.util.object.extend(n.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,o=this._getEventPrefix();t(n.window,"resize",this._onResize),t(i,o+"down",this._onMouseDown),t(i,o+"move",this._onMouseMove,a),t(i,o+"out",this._onMouseOut),t(i,o+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,a),"undefined"!==typeof eventjs&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(e,"remove");var t=this._getEventPrefix();e(n.document,t+"up",this._onMouseUp),e(n.document,"touchend",this._onTouchEnd,a),e(n.document,t+"move",this._onMouseMove,a),e(n.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var i=this;this._hoveredTargets.forEach((function(n){i.fire("mouse:out",{target:e,e:t}),n&&e.fire("mouseout",{e:t})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(t){t.isEditing&&t.hiddenTextarea.focus()}))},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(i){i.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(i)),this.__onMouseDown(i),this._resetTransformEventData();var o=this.upperCanvasEl,r=this._getEventPrefix();t(n.document,"touchend",this._onTouchEnd,a),t(n.document,"touchmove",this._onMouseMove,a),e(o,r+"down",this._onMouseDown)},_onMouseDown:function(i){this.__onMouseDown(i),this._resetTransformEventData();var o=this.upperCanvasEl,r=this._getEventPrefix();e(o,r+"move",this._onMouseMove,a),t(n.document,r+"up",this._onMouseUp),t(n.document,r+"move",this._onMouseMove,a)},_onTouchEnd:function(i){if(!(i.touches.length>0)){this.__onMouseUp(i),this._resetTransformEventData(),this.mainTouchId=null;var o=this._getEventPrefix();e(n.document,"touchend",this._onTouchEnd,a),e(n.document,"touchmove",this._onMouseMove,a);var r=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){t(r.upperCanvasEl,o+"down",r._onMouseDown),r._willAddMouseDown=0}),400)}},_onMouseUp:function(i){this.__onMouseUp(i),this._resetTransformEventData();var o=this.upperCanvasEl,r=this._getEventPrefix();this._isMainEvent(i)&&(e(n.document,r+"up",this._onMouseUp),e(n.document,r+"move",this._onMouseMove,a),t(o,r+"move",this._onMouseMove,a))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!==!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,a=this._currentTransform,l=this._groupSelector,c=!1,u=!l||0===l.left&&0===l.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),s(t,i))this.fireRightClick&&this._handleEvent(t,"up",i,u);else{if(s(t,o))return this.fireMiddleClick&&this._handleEvent(t,"up",o,u),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(a&&(this._finalizeCurrentTransform(t),c=a.actionPerformed),!u){var h=e===this._activeObject;this._maybeGroupObjects(t),c||(c=this._shouldRender(e)||!h&&e===this._activeObject)}if(e){if(e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),c=!0;else{var d=e._findTargetCorner(this.getPointer(t,!0),n.util.isTouchEvent(t)),g=e.controls[d],p=g&&g.getMouseUpHandler(t,e,g);if(p){var f=this.getPointer(t);p(t,a,f.x,f.y)}}e.isMoving=!1}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",r,u),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),c?this.requestRenderAll():u||this.renderTop()}}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),n=this.targets,o={e:e,target:i,subTargets:n};if(this.fire(t,o),i&&i.fire(t,o),!n)return i;for(var r=0;r<n.length;r++)n[r].fire(t,o);return i},_handleEvent:function(t,e,i,n){var o=this._target,a=this.targets||[],s={e:t,target:o,subTargets:a,button:i||r,isClick:n||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(s.currentTarget=this.findTarget(t),s.currentSubTargets=this.targets),this.fire("mouse:"+e,s),o&&o.fire("mouse"+e,s);for(var l=0;l<a.length;l++)a[l].fire("mouse"+e,s)},_finalizeCurrentTransform:function(t){var e,i=this._currentTransform,n=i.target,o={e:t,target:n,transform:i,action:i.action};n._scaling&&(n._scaling=!1),n.setCoords(),(i.actionPerformed||this.stateful&&n.hasStateChanged())&&(i.actionPerformed&&(e=this._addEventOptions(o,i),this._fire(e,o)),this._fire("modified",o))},_addEventOptions:function(t,e){var i,n;switch(e.action){case"scaleX":i="scaled",n="x";break;case"scaleY":i="scaled",n="y";break;case"skewX":i="skewed",n="x";break;case"skewY":i="skewed",n="y";break;case"scale":i="scaled",n="equally";break;case"rotate":i="rotated";break;case"drag":i="moved";break}return t.by=n,i},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(s(t,i))this.fireRightClick&&this._handleEvent(t,"down",i);else if(s(t,o))this.fireMiddleClick&&this._handleEvent(t,"down",o);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var r=this._pointer;this._previousPointer=r;var a=this._shouldRender(e),l=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):l&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var c=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var u=e._findTargetCorner(this.getPointer(t,!0),n.util.isTouchEvent(t));if(e.__corner=u,e===this._activeObject&&(u||!l)){this._setupCurrentTransform(t,e,c);var h=e.controls[u],d=(r=this.getPointer(t),h&&h.getMouseDownHandler(t,e,h));d&&d(t,this._currentTransform,r.x,r.y)}}this._handleEvent(t,"down"),(a||l)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,i;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var n=this._groupSelector;n?(i=this._absolutePointer,n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,n=this._hoveredTargets,o=this.targets,r=Math.max(n.length,o.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var a=0;a<r;a++)this.fireSyntheticInOutEvents(o[a],e,{oldTarget:n[a],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,n=this._hoveredTargets,o=this.targets,r=Math.max(n.length,o.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var a=0;a<r;a++)this.fireSyntheticInOutEvents(o[a],e,{oldTarget:n[a],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var n,o,r,a,s=i.oldTarget,l=s!==t,c=i.canvasEvtIn,u=i.canvasEvtOut;l&&(n={e:e,target:t,previousTarget:s},o={e:e,target:s,nextTarget:t}),a=t&&l,r=s&&l,r&&(u&&this.fire(u,o),s.fire(i.evtOut,o)),a&&(c&&this.fire(c,n),t.fire(i.evtIn,n))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var n=i.x,o=i.y,r=e.action,a=!1,s=e.actionHandler;s&&(a=s(t,e,n,o)),"drag"===r&&a&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||a},_fire:n.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,n=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,o=(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));o?this.setCursor(this.getCornerCursor(o,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map((function(t){i=t.hoverCursor||i})),this.setCursor(i))},getCornerCursor:function(t,e,i){var n=e.controls[t];return n.cursorStyleHandler(i,n,e)}})}(),function(){var t=Math.min,e=Math.max;n.util.object.extend(n.Canvas.prototype,{_shouldGroup:function(t,e){var i=this._activeObject;return i&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(i!==e||"activeSelection"===i.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var i=this._activeObject;i.__corner||(e!==i||(e=this.findTarget(t,!0),e&&e.selectable))&&(i&&"activeSelection"===i.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var i=this._activeObject,n=i._objects.slice(0);i.contains(t)?(i.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===i.size()&&this._setActiveObject(i.item(0),e)):(i.addWithUpdate(t),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,e)},_createActiveSelection:function(t,e){var i=this.getActiveObjects(),n=this._createGroup(t);this._hoveredTarget=n,this._setActiveObject(n,e),this._fireSelectionEvents(i,e)},_createGroup:function(t){var e=this._objects,i=e.indexOf(this._activeObject)<e.indexOf(t),o=i?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new n.ActiveSelection(o,{canvas:this})},_groupSelectedObjects:function(t){var e,i=this._collectObjects(t);1===i.length?this.setActiveObject(i[0],t):i.length>1&&(e=new n.ActiveSelection(i.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(i){for(var o,r=[],a=this._groupSelector.ex,s=this._groupSelector.ey,l=a+this._groupSelector.left,c=s+this._groupSelector.top,u=new n.Point(t(a,l),t(s,c)),h=new n.Point(e(a,l),e(s,c)),d=!this.selectionFullyContained,g=a===l&&s===c,p=this._objects.length;p--;)if(o=this._objects[p],o&&o.selectable&&o.visible&&(d&&o.intersectsWithRect(u,h,!0)||o.isContainedWithinRect(u,h,!0)||d&&o.containsPoint(u,null,!0)||d&&o.containsPoint(h,null,!0))&&(r.push(o),g))break;return r.length>1&&(r=r.filter((function(t){return!t.onSelect({e:i})}))),r},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){n.util.object.extend(n.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,o=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(o,t);return n.util.toDataURL(r,e,i)},toCanvasElement:function(t,e){t=t||1,e=e||{};var i=(e.width||this.width)*t,o=(e.height||this.height)*t,r=this.getZoom(),a=this.width,s=this.height,l=r*t,c=this.viewportTransform,u=(c[4]-(e.left||0))*t,h=(c[5]-(e.top||0))*t,d=this.interactive,g=[l,0,0,l,u,h],p=this.enableRetinaScaling,f=n.util.createCanvasElement(),m=this.contextTop;return f.width=i,f.height=o,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=g,this.width=i,this.height=o,this.calcViewportBoundaries(),this.renderCanvas(f.getContext("2d"),this._objects),this.viewportTransform=c,this.width=a,this.height=s,this.calcViewportBoundaries(),this.interactive=d,this.enableRetinaScaling=p,this.contextTop=m,f}})}(),n.util.object.extend(n.StaticCanvas.prototype,{loadFromJSON:function(t,e,i){if(t){var o="string"===typeof t?JSON.parse(t):n.util.object.clone(t),r=this,a=o.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete o.clipPath,this._enlivenObjects(o.objects,(function(t){r.clear(),r._setBgOverlay(o,(function(){a?r._enlivenObjects([a],(function(i){r.clipPath=i[0],r.__setupCanvas.call(r,o,t,s,e)})):r.__setupCanvas.call(r,o,t,s,e)}))}),i),this}},__setupCanvas:function(t,e,i,n){var o=this;e.forEach((function(t,e){o.insertAt(t,e)})),this.renderOnAddRemove=i,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),n&&n()},_setBgOverlay:function(t,e){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var n=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,i,n),this.__setBgOverlay("overlayImage",t.overlayImage,i,n),this.__setBgOverlay("backgroundColor",t.background,i,n),this.__setBgOverlay("overlayColor",t.overlay,i,n)}else e&&e()},__setBgOverlay:function(t,e,i,o){var r=this;if(!e)return i[t]=!0,void(o&&o());"backgroundImage"===t||"overlayImage"===t?n.util.enlivenObjects([e],(function(e){r[t]=e[0],i[t]=!0,o&&o()})):this["set"+n.util.string.capitalize(t,!0)](e,(function(){i[t]=!0,o&&o()}))},_enlivenObjects:function(t,e,i){t&&0!==t.length?n.util.enlivenObjects(t,(function(t){e&&e(t)}),null,i):e&&e([])},_toDataURL:function(t,e){this.clone((function(i){e(i.toDataURL(t))}))},_toDataURLWithMultiplier:function(t,e,i){this.clone((function(n){i(n.toDataURLWithMultiplier(t,e))}))},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData((function(e){e.loadFromJSON(i,(function(){t&&t(e)}))}))},cloneWithoutData:function(t){var e=n.util.createCanvasElement();e.width=this.width,e.height=this.height;var i=new n.Canvas(e);this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,(function(){i.renderAll(),t&&t(i)})),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,o=e.util.toFixed,r=e.util.string.capitalize,a=e.util.degreesToRadians,s=!e.isLikelyNode,l=2;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var i=e.perfLimitSizeTotal,n=t.width,o=t.height,r=e.maxCacheSideLimit,a=e.minCacheSideLimit;if(n<=r&&o<=r&&n*o<=i)return n<a&&(t.width=a),o<a&&(t.height=a),t;var s=n/o,l=e.util.limitDimsByArea(s,i),c=e.util.capValue,u=c(a,l.x,r),h=c(a,l.y,r);return n>u&&(t.zoomX/=n/u,t.width=u,t.capped=!0),o>h&&(t.zoomY/=o/h,t.height=h,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),i=e.x*t.scaleX/this.scaleX,n=e.y*t.scaleY/this.scaleY;return{width:i+l,height:n+l,zoomX:t.scaleX,zoomY:t.scaleY,x:i,y:n}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var i=t._currentTransform.target,n=t._currentTransform.action;if(this===i&&n.slice&&"scale"===n.slice(0,5))return!1}var o,r,a=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),l=e.minCacheSideLimit,c=s.width,u=s.height,h=s.zoomX,d=s.zoomY,g=c!==this.cacheWidth||u!==this.cacheHeight,p=this.zoomX!==h||this.zoomY!==d,f=g||p,m=0,v=0,b=!1;if(g){var x=this._cacheCanvas.width,y=this._cacheCanvas.height,_=c>x||u>y,w=(c<.9*x||u<.9*y)&&x>l&&y>l;b=_||w,_&&!s.capped&&(c>l||u>l)&&(m=.1*c,v=.1*u)}return this instanceof e.Text&&this.path&&(f=!0,b=!0,m+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!f&&(b?(a.width=Math.ceil(c+m),a.height=Math.ceil(u+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,a.width,a.height)),o=s.x/2,r=s.y/2,this.cacheTranslationX=Math.round(a.width/2-o)+o,this.cacheTranslationY=Math.round(a.height/2-r)+r,this.cacheWidth=c,this.cacheHeight=u,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,d),this.zoomX=h,this.zoomY=d,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,n={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:o(this.left,i),top:o(this.top,i),width:o(this.width,i),height:o(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:o(this.strokeMiterLimit,i),scaleX:o(this.scaleX,i),scaleY:o(this.scaleY,i),angle:o(this.angle,i),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:o(this.skewX,i),skewY:o(this.skewY,i)};return this.clipPath&&!this.clipPath.excludeFromExport&&(n.clipPath=this.clipPath.toObject(t),n.clipPath.inverted=this.clipPath.inverted,n.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,n,t),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype,n=i.stateProperties;return n.forEach((function(e){if("left"!==e&&"top"!==e){t[e]===i[e]&&delete t[e];var n="[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(i[e]);n&&0===t[e].length&&0===i[e].length&&delete t[e]}})),t},toString:function(){return"#<fabric."+r(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,i=t.scaleY;if(this.canvas){var n=this.canvas.getZoom(),o=this.canvas.getRetinaScaling();e*=n*o,i*=n*o}return{scaleX:e,scaleY:i}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,i){var n="scaleX"===t||"scaleY"===t,o=this[t]!==i,r=!1;return n&&(i=this._constrainScale(i)),"scaleX"===t&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&i<0?(this.flipY=!this.flipY,i*=-1):"shadow"!==t||!i||i instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",i):i=new e.Shadow(i),this[t]=i,o&&(r=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,r&&this.group.set("dirty",!0)):r&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t){var i=this.clipPath;if(t.save(),i.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",i.absolutePositioned){var n=e.util.invertTransform(this.calcTransformMatrix());t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},drawObject:function(t,e){var i=this.fill,n=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t),this.fill=i,this.stroke=n},_drawClipPath:function(t){var e=this.clipPath;e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var i=e.fill;i&&(i.toLive?(t.fillStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=i)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),t.setLineDash(e))},_renderControls:function(t,i){var n,o,r,s=this.getViewportTransform(),l=this.calcTransformMatrix();i=i||{},o="undefined"!==typeof i.hasBorders?i.hasBorders:this.hasBorders,r="undefined"!==typeof i.hasControls?i.hasControls:this.hasControls,l=e.util.multiplyTransformMatrices(s,l),n=e.util.qrDecompose(l),t.save(),t.translate(n.translateX,n.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),t.rotate(a(n.angle)),i.forActiveSelection||this.group?o&&this.drawBordersInGroup(t,n,i):o&&this.drawBorders(t,i),r&&this.drawControls(t,i),t.restore()},_setShadow:function(t){if(this.shadow){var i,n=this.shadow,o=this.canvas,r=o&&o.viewportTransform[0]||1,a=o&&o.viewportTransform[3]||1;i=n.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),o&&o._isRetinaScaling()&&(r*=e.devicePixelRatio,a*=e.devicePixelRatio),t.shadowColor=n.color,t.shadowBlur=n.blur*e.browserShadowBlurConstant*(r+a)*(i.scaleX+i.scaleY)/4,t.shadowOffsetX=n.offsetX*r*i.scaleX,t.shadowOffsetY=n.offsetY*a*i.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var i=e.gradientTransform||e.patternTransform,n=-this.width/2+e.offsetX||0,o=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,n,o):t.transform(1,0,0,1,n,o),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:n,offsetY:o}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,i){var n,o=this._limitCacheSize(this._getCacheCanvasDimensions()),r=e.util.createCanvasElement(),a=this.canvas.getRetinaScaling(),s=o.x/this.scaleX/a,l=o.y/this.scaleY/a;r.width=s,r.height=l,n=r.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(s,0),n.lineTo(s,l),n.lineTo(0,l),n.closePath(),n.translate(s/2,l/2),n.scale(o.zoomX/this.scaleX/a,o.zoomY/this.scaleY/a),this._applyPatternGradientTransform(n,i),n.fillStyle=i.toLive(t),n.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(a*this.scaleX/o.zoomX,a*this.scaleY/o.zoomY),t.strokeStyle=n.createPattern(r,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var i=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),i=e.util.transformPoint(i,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,i.x+=t.offsetLeft,i.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(i,"center","center")},clone:function(t,i){var n=this.toObject(i);this.constructor.fromObject?this.constructor.fromObject(n,t):e.Object._fromObject("Object",n,t)},cloneAsImage:function(t,i){var n=this.toCanvasElement(i);return t&&t(new e.Image(n)),this},toCanvasElement:function(t){t||(t={});var i=e.util,n=i.saveObjectTransform(this),o=this.group,r=this.shadow,a=Math.abs,s=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&i.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var l,c,u,h,d=e.util.createCanvasElement(),g=this.getBoundingRect(!0,!0),p=this.shadow,f={x:0,y:0};p&&(c=p.blur,l=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),f.x=2*Math.round(a(p.offsetX)+c)*a(l.scaleX),f.y=2*Math.round(a(p.offsetY)+c)*a(l.scaleY)),u=g.width+f.x,h=g.height+f.y,d.width=Math.ceil(u),d.height=Math.ceil(h);var m=new e.StaticCanvas(d,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(m.width/2,m.height/2),"center","center");var v=this.canvas;m.add(this);var b=m.toCanvasElement(s||1,t);return this.shadow=r,this.set("canvas",v),o&&(this.group=o),this.set(n).setCoords(),m._objects=[],m.dispose(),m=null,b},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var n=new e.Point(i.x,i.y),o=this._getLeftTopCoords();return this.angle&&(n=e.util.rotatePoint(n,o,a(-this.angle))),{x:n.x-o.x,y:n.y-o.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,i,o,r){var a=e[t];i=n(i,!0),e.util.enlivenPatterns([i.fill,i.stroke],(function(t){"undefined"!==typeof t[0]&&(i.fill=t[0]),"undefined"!==typeof t[1]&&(i.stroke=t[1]),e.util.enlivenObjects([i.clipPath],(function(t){i.clipPath=t[0];var e=r?new a(i[r],i):new a(i);o&&o(e)}))}))},e.Object.__uid=0)}(e),function(){var t=n.util.degreesToRadians,e={left:-.5,center:0,right:.5},i={top:-.5,center:0,bottom:.5};n.util.object.extend(n.Object.prototype,{translateToGivenOrigin:function(t,o,r,a,s){var l,c,u,h=t.x,d=t.y;return"string"===typeof o?o=e[o]:o-=.5,"string"===typeof a?a=e[a]:a-=.5,l=a-o,"string"===typeof r?r=i[r]:r-=.5,"string"===typeof s?s=i[s]:s-=.5,c=s-r,(l||c)&&(u=this._getTransformedDimensions(),h=t.x+l*u.x,d=t.y+c*u.y),new n.Point(h,d)},translateToCenterPoint:function(e,i,o){var r=this.translateToGivenOrigin(e,i,o,"center","center");return this.angle?n.util.rotatePoint(r,e,t(this.angle)):r},translateToOriginPoint:function(e,i,o){var r=this.translateToGivenOrigin(e,"center","center",i,o);return this.angle?n.util.rotatePoint(r,e,t(this.angle)):r},getCenterPoint:function(){var t=new n.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,o){var r,a,s=this.getCenterPoint();return r="undefined"!==typeof i&&"undefined"!==typeof o?this.translateToGivenOrigin(s,"center","center",i,o):new n.Point(this.left,this.top),a=new n.Point(e.x,e.y),this.angle&&(a=n.util.rotatePoint(a,s,-t(this.angle))),a.subtractEquals(r)},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),o=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",o.x),this.set("top",o.y)},adjustPosition:function(i){var o,r,a=t(this.angle),s=this.getScaledWidth(),l=n.util.cos(a)*s,c=n.util.sin(a)*s;o="string"===typeof this.originX?e[this.originX]:this.originX-.5,r="string"===typeof i?e[i]:i-.5,this.left+=l*(r-o),this.top+=c*(r-o),this.setCoords(),this.originX=i},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function t(t){return[new n.Point(t.tl.x,t.tl.y),new n.Point(t.tr.x,t.tr.y),new n.Point(t.br.x,t.br.y),new n.Point(t.bl.x,t.bl.y)]}var e=n.util,i=e.degreesToRadians,o=e.multiplyTransformMatrices,r=e.transformPoint;e.object.extend(n.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(e,i){return t(this._getCoords(e,i))},intersectsWithRect:function(t,e,i,o){var r=this.getCoords(i,o),a=n.Intersection.intersectPolygonRectangle(r,t,e);return"Intersection"===a.status},intersectsWithObject:function(t,e,i){var o=n.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i));return"Intersection"===o.status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var n=this.getCoords(e,i),o=e?t.aCoords:t.lineCoords,r=0,a=t._getImageLines(o);r<4;r++)if(!t.containsPoint(n[r],a))return!1;return!0},isContainedWithinRect:function(t,e,i,n){var o=this.getBoundingRect(i,n);return o.left>=t.x&&o.left+o.width<=e.x&&o.top>=t.y&&o.top+o.height<=e.y},containsPoint:function(t,e,i,n){var o=this._getCoords(i,n),r=(e=e||this._getImageLines(o),this._findCrossPoints(t,e));return 0!==r&&r%2===1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br,n=this.getCoords(!0,t);return!!n.some((function(t){return t.x<=i.x&&t.x>=e.x&&t.y<=i.y&&t.y>=e.y}))||(!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t))},_containsCenterOfCanvas:function(t,e,i){var n={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(n,null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;if(this.intersectsWithRect(e,i,!0,t))return!0;var n=this.getCoords(!0,t).every((function(t){return(t.x>=i.x||t.x<=e.x)&&(t.y>=i.y||t.y<=e.y)}));return n&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){var e={topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}};return e},_findCrossPoints:function(t,e){var i,n,o,r,a,s,l=0;for(var c in e)if(s=e[c],!(s.o.y<t.y&&s.d.y<t.y)&&!(s.o.y>=t.y&&s.d.y>=t.y)&&(s.o.x===s.d.x&&s.o.x>=t.x?a=s.o.x:(i=0,n=(s.d.y-s.o.y)/(s.d.x-s.o.x),o=t.y-i*t.x,r=s.o.y-n*s.o.x,a=-(o-r)/(i-n)),a>=t.x&&(l+=1),2===l))break;return l},getBoundingRect:function(t,i){var n=this.getCoords(t,i);return e.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var i=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/i)},scaleToHeight:function(t,e){var i=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/i)},calcCoords:function(t){return t?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var t=this.getViewportTransform(),n=this.padding,o=i(this.angle),a=e.cos(o),s=e.sin(o),l=a*n,c=s*n,u=l+c,h=l-c,d=this.calcACoords(),g={tl:r(d.tl,t),tr:r(d.tr,t),bl:r(d.bl,t),br:r(d.br,t)};return n&&(g.tl.x-=h,g.tl.y-=u,g.tr.x+=u,g.tr.y-=h,g.bl.x-=u,g.bl.y+=h,g.br.x+=h,g.br.y+=u),g},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),n=o(i,e),r=o(n,t),a=(r=o(r,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),s={};return this.forEachControl((function(t,e,i){s[e]=t.positionHandler(a,r,i)})),s},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=o(e,t),n=this._getTransformedDimensions(),a=n.x/2,s=n.y/2;return{tl:r({x:-a,y:-s},i),tr:r({x:a,y:-s},i),bl:r({x:-a,y:s},i),br:r({x:a,y:s},i)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",i="";return!t&&this.group&&(i=this.group.transformMatrixKey(t)+e),i+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var i=this.transformMatrixKey(t),n=this.matrixCache||(this.matrixCache={});return n.key===i?n.value:(this.group&&(e=o(this.group.calcTransformMatrix(!1),e)),n.key=i,n.value=e,e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===t)return i.value;var n=this._calcTranslateMatrix(),o={angle:this.angle,translateX:n[4],translateY:n[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=t,i.value=e.composeMatrix(o),i.value},_calcDimensionsTransformMatrix:function(t,i,n){return e.calcDimensionsMatrix({skewX:t,skewY:i,scaleX:this.scaleX*(n&&this.flipX?-1:1),scaleY:this.scaleY*(n&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var t=this.strokeWidth,e=this.width+t,i=this.height+t;return{x:e,y:i}},_getTransformedDimensions:function(t,i){"undefined"===typeof t&&(t=this.skewX),"undefined"===typeof i&&(i=this.skewY);var n,o,r,a=0===t&&0===i;if(this.strokeUniform?(o=this.width,r=this.height):(n=this._getNonTransformedDimensions(),o=n.x,r=n.y),a)return this._finalizeDimensions(o*this.scaleX,r*this.scaleY);var s=e.sizeAfterTransform(o,r,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:i});return this._finalizeDimensions(s.x,s.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions(),i=r(e,t,!0);return i.scalarAdd(2*this.padding)}})}(),n.util.object.extend(n.Object.prototype,{sendToBack:function(){return this.group?n.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?n.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?n.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?n.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?n.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new n.Color(e),o=t+": "+i.toRgb()+"; ",r=i.getAlpha();return 1!==r&&(o+=t+"-opacity: "+r.toString()+"; "),o}return t+": none; "}var e=n.util.toFixed;n.util.object.extend(n.Object.prototype,{getSvgStyles:function(e){var i=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",r=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c="undefined"!==typeof this.opacity?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=t("fill",this.fill),g=t("stroke",this.stroke);return[g,"stroke-width: ",n,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",i,"; ","opacity: ",c,";",h,u].join("")},getSvgSpanStyles:function(e,i){var n="; ",o=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+n:"",r=e.strokeWidth?"stroke-width: "+e.strokeWidth+n:"",a=(o=o,e.fontSize?"font-size: "+e.fontSize+"px"+n:""),s=e.fontStyle?"font-style: "+e.fontStyle+n:"",l=e.fontWeight?"font-weight: "+e.fontWeight+n:"",c=e.fill?t("fill",e.fill):"",u=e.stroke?t("stroke",e.stroke):"",h=this.getSvgTextDecoration(e),d=e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"";return h&&(h="text-decoration: "+h+n),[u,r,o,a,s,l,h,c,d,i?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return["overline","underline","line-through"].filter((function(e){return t[e.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){var i=t?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'+n.util.matrixToSVG(i);return o+(e||"")+'" '},_setSVGBg:function(t){if(this.backgroundColor){var i=n.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',e(-this.width/2,i),'" y="',e(-this.height/2,i),'" width="',e(this.width,i),'" height="',e(this.height,i),'"></rect>\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){e=e||{};var i=e.reviver,n=e.additionalTransform||"",o=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),r=t.indexOf("COMMON_PARTS");return t[r]=o,i?i(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){e=e||{};var i,o,r=e.noStyle,a=e.reviver,s=r?"":'style="'+this.getSvgStyles()+'" ',l=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=c&&c.absolutePositioned,d=this.stroke,g=this.fill,p=this.shadow,f=[],m=t.indexOf("COMMON_PARTS"),v=e.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+n.Object.__uid++,o='<clipPath id="'+c.clipPathId+'" >\n'+c.toClipPathSVG(a)+"</clipPath>\n"),h&&f.push("<g ",l,this.getSvgCommons()," >\n"),f.push("<g ",this.getSvgTransform(!1),h?"":l+this.getSvgCommons()," >\n"),i=[s,u,r?"":this.addPaintOrder()," ",v?'transform="'+v+'" ':""].join(""),t[m]=i,g&&g.toLive&&f.push(g.toSVG(this)),d&&d.toLive&&f.push(d.toSVG(this)),p&&f.push(p.toSVG(this)),c&&f.push(o),f.push(t.join("")),f.push("</g>\n"),h&&f.push("</g>\n"),a?a(f.join("")):f.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=n.util.object.extend,e="stateProperties";function i(e,i,n){var o={},r=!0;n.forEach((function(t){o[t]=e[t]})),t(e[i],o,r)}function o(t,e,i){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(!o(t[n],e[n]))return!1;return!0}if(t&&"object"===typeof t){var a,s=Object.keys(t);if(!e||"object"!==typeof e||!i&&s.length!==Object.keys(e).length)return!1;for(n=0,r=s.length;n<r;n++)if(a=s[n],"canvas"!==a&&"group"!==a&&!o(t[a],e[a]))return!1;return!0}}n.util.object.extend(n.Object.prototype,{hasStateChanged:function(t){t=t||e;var i="_"+t;return Object.keys(this[i]).length<this[t].length||!o(this[i],this,!0)},saveState:function(t){var n=t&&t.propertySet||e,o="_"+n;return this[o]?(i(this,o,this[n]),t&&t.stateProperties&&i(this,o,t.stateProperties),this):this.setupState(t)},setupState:function(t){t=t||{};var i=t.propertySet||e;return t.propertySet=i,this["_"+i]={},this.saveState(t),this}})}(),function(){var t=n.util.degreesToRadians;n.util.object.extend(n.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var i,n,o,r=t.x,a=t.y,s=Object.keys(this.oCoords),l=s.length-1;for(this.__corner=0;l>=0;l--)if(o=s[l],this.isControlVisible(o)&&(n=this._getImageLines(e?this.oCoords[o].touchCorner:this.oCoords[o].corner),i=this._findCrossPoints({x:r,y:a},n),0!==i&&i%2===1))return this.__corner=o,o;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t=this.oCoords;for(var e in t){var i=this.controls[e];t[e].corner=i.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=i.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var i=this.getCenterPoint(),n=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/o[0],1/o[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var i=this._calculateCurrentDimensions(),n=this.borderScaleFactor,o=i.x+n,r=i.y+n,a="undefined"!==typeof e.hasControls?e.hasControls:this.hasControls,s=!1;return t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray),t.strokeRect(-o/2,-r/2,o,r),a&&(t.beginPath(),this.forEachControl((function(e,i,n){e.withConnection&&e.getVisibility(n,i)&&(s=!0,t.moveTo(e.x*o,e.y*r),t.lineTo(e.x*o+e.offsetX,e.y*r+e.offsetY))})),s&&t.stroke()),t.restore(),this},drawBordersInGroup:function(t,e,i){i=i||{};var o=n.util.sizeAfterTransform(this.width,this.height,e),r=this.strokeWidth,a=this.strokeUniform,s=this.borderScaleFactor,l=o.x+r*(a?this.canvas.getZoom():e.scaleX)+s,c=o.y+r*(a?this.canvas.getZoom():e.scaleY)+s;return t.save(),this._setLineDash(t,i.borderDashArray||this.borderDashArray),t.strokeStyle=i.borderColor||this.borderColor,t.strokeRect(-l/2,-c/2,l,c),t.restore(),this},drawControls:function(t,e){e=e||{},t.save();var i,o,r=this.canvas.getRetinaScaling();return t.setTransform(r,0,0,r,0,0),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl((function(r,a,s){o=s.oCoords[a],r.getVisibility(s,a)&&(i&&(o=n.util.transformPoint(o,i)),r.render(t,o.x,o.y,e,s))})),t.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),n.util.object.extend(n.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var i=function(){},o=e.onComplete||i,r=e.onChange||i,a=this;return n.util.animate({startValue:t.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),a.requestRenderAll(),r()},onComplete:function(){t.setCoords(),o()}}),this},fxCenterObjectV:function(t,e){e=e||{};var i=function(){},o=e.onComplete||i,r=e.onChange||i,a=this;return n.util.animate({startValue:t.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),a.requestRenderAll(),r()},onComplete:function(){t.setCoords(),o()}}),this},fxRemove:function(t,e){e=e||{};var i=function(){},o=e.onComplete||i,r=e.onChange||i,a=this;return n.util.animate({startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e),a.requestRenderAll(),r()},onComplete:function(){a.remove(t),o()}}),this}}),n.util.object.extend(n.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,o=i.length;n<o;n++)t=i[n],e=n!==o-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,o){var r,a=this;e=e.toString(),i=i?n.util.object.clone(i):{},~t.indexOf(".")&&(r=t.split("."));var s=a.colorProperties.indexOf(t)>-1||r&&a.colorProperties.indexOf(r[1])>-1,l=r?this.get(r[0])[r[1]]:this.get(t);"from"in i||(i.from=l),s||(e=~e.indexOf("=")?l+parseFloat(e.replace("=","")):parseFloat(e));var c={startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(t,e,n){return i.abort.call(a,t,e,n)},onChange:function(e,n,s){r?a[r[0]][r[1]]=e:a.set(t,e),o||i.onChange&&i.onChange(e,n,s)},onComplete:function(t,e,n){o||(a.setCoords(),i.onComplete&&i.onComplete(t,e,n))}};return s?n.util.animateColor(c.startValue,c.endValue,c.duration,c):n.util.animate(c)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,o={x1:1,x2:1,y1:1,y2:1};function r(t,e){var i=t.origin,n=t.axis1,o=t.axis2,r=t.dimension,a=e.nearest,s=e.center,l=e.farthest;return function(){switch(this.get(i)){case a:return Math.min(this.get(n),this.get(o));case s:return Math.min(this.get(n),this.get(o))+.5*this.get(r);case l:return Math.max(this.get(n),this.get(o))}}}e.Line?e.warn("fabric.Line is already defined"):(e.Line=e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!==typeof o[t]&&this._setWidthHeight(),this},_getLeftToOriginX:r({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:r({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){t.beginPath();var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;var i=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return i(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,n=e*this.height*.5,o=t*this.width*-.5,r=e*this.height*-.5;return{x1:i,x2:o,y1:n,y2:r}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,n,o){o=o||{};var r=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),a=[r.x1||0,r.y1||0,r.x2||0,r.y2||0];n(new e.Line(a,i(r,o)))},e.Line.fromObject=function(t,i){function o(t){delete t.points,i&&i(t)}var r=n(t,!0);r.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",r,o,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.PI;function n(t){return"radius"in t&&t.radius>=0}e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*i,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,n=0,o=0,r=(this.endAngle-this.startAngle)%(2*i);if(0===r)t=["<circle ","COMMON_PARTS",'cx="'+n+'" cy="'+o+'" ','r="',this.radius,'" />\n'];else{var a=e.util.cos(this.startAngle)*this.radius,s=e.util.sin(this.startAngle)*this.radius,l=e.util.cos(this.endAngle)*this.radius,c=e.util.sin(this.endAngle)*this.radius,u=r>i?"1":"0";t=['<path d="M '+a+" "+s," A "+this.radius+" "+this.radius," 0 ",+u+" 1"," "+l+" "+c,'" ',"COMMON_PARTS"," />\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,i){var o=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!n(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=(o.left||0)-o.radius,o.top=(o.top||0)-o.radius,i(new e.Circle(o))},e.Circle.fromObject=function(t,i){e.Object._fromObject("Circle",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,e=this.height/2,i=[-t+" "+e,"0 "+-e,t+" "+e].join(",");return["<polygon ","COMMON_PARTS",'points="',i,'" />']}}),e.Triangle.fromObject=function(t,i){return e.Object._fromObject("Triangle",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,i,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){var n=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,i(new e.Ellipse(n))},e.Ellipse.fromObject=function(t,i){e.Object._fromObject("Ellipse",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,o=this.height,r=-this.width/2,a=-this.height/2,s=0!==e||0!==i,l=.4477152502;t.beginPath(),t.moveTo(r+e,a),t.lineTo(r+n-e,a),s&&t.bezierCurveTo(r+n-l*e,a,r+n,a+l*i,r+n,a+i),t.lineTo(r+n,a+o-i),s&&t.bezierCurveTo(r+n,a+o-l*i,r+n-l*e,a+o,r+n-e,a+o),t.lineTo(r+e,a+o),s&&t.bezierCurveTo(r+l*e,a+o,r,a+o-l*i,r,a+o-i),t.lineTo(r,a+i),s&&t.bezierCurveTo(r,a+l*i,r+l*e,a,r+e,a),t.closePath(),this._renderPaintInOrder(t)},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){var t=-this.width/2,e=-this.height/2;return["<rect ","COMMON_PARTS",'x="',t,'" y="',e,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,n,o){if(!t)return n(null);o=o||{};var r=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0,r.height=r.height||0,r.width=r.width||0;var a=new e.Rect(i(o?e.util.object.clone(o):{},r));a.visible=a.visible&&a.width>0&&a.height>0,n(a)},e.Rect.fromObject=function(t,i){return e.Object._fromObject("Rect",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,o=e.util.array.max,r=e.util.toFixed;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_setPositionDimensions:function(t){var e,i=this._calcDimensions(t);this.width=i.width,this.height=i.height,t.fromSVG||(e=this.translateToGivenOrigin({x:i.left-this.strokeWidth/2,y:i.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),"undefined"===typeof t.left&&(this.left=t.fromSVG?i.left:e.x),"undefined"===typeof t.top&&(this.top=t.fromSVG?i.top:e.y),this.pathOffset={x:i.left+this.width/2,y:i.top+this.height/2}},_calcDimensions:function(){var t=this.points,e=n(t,"x")||0,i=n(t,"y")||0,r=o(t,"x")||0,a=o(t,"y")||0,s=r-e,l=a-i;return{left:e,top:i,width:s,height:l}},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],i=this.pathOffset.x,n=this.pathOffset.y,o=e.Object.NUM_FRACTION_DIGITS,a=0,s=this.points.length;a<s;a++)t.push(r(this.points[a].x-i,o),",",r(this.points[a].y-n,o)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,i=this.points.length,n=this.pathOffset.x,o=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-n,this.points[0].y-o);for(var r=0;r<i;r++)e=this.points[r],t.lineTo(e.x-n,e.y-o);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(n,o,r){if(!n)return o(null);r||(r={});var a=e.parsePointsAttribute(n.getAttribute("points")),s=e.parseAttributes(n,e[t].ATTRIBUTE_NAMES);s.fromSVG=!0,o(new e[t](a,i(s,r)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,i){return e.Object._fromObject("Polyline",t,i,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,i){e.Object._fromObject("Polygon",t,i,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max,o=e.util.object.extend,r=Object.prototype.toString,a=e.util.toFixed;e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,i){i=i||{},this.callSuper("initialize",i),t||(t=[]);var n="[object Array]"===r.call(t);this.path=e.util.makePathSimpler(n?t:e.util.parsePath(t)),this.path&&e.Polyline.prototype._setPositionDimensions.call(this,i)},_renderPathCommands:function(t){var e,i=0,n=0,o=0,r=0,a=0,s=0,l=-this.pathOffset.x,c=-this.pathOffset.y;t.beginPath();for(var u=0,h=this.path.length;u<h;++u)switch(e=this.path[u],e[0]){case"L":o=e[1],r=e[2],t.lineTo(o+l,r+c);break;case"M":o=e[1],r=e[2],i=o,n=r,t.moveTo(o+l,r+c);break;case"C":o=e[5],r=e[6],a=e[3],s=e[4],t.bezierCurveTo(e[1]+l,e[2]+c,a+l,s+c,o+l,r+c);break;case"Q":t.quadraticCurveTo(e[1]+l,e[2]+c,e[3]+l,e[4]+c),o=e[3],r=e[4],a=e[1],s=e[2];break;case"z":case"Z":o=i,r=n,t.closePath();break}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return o(this.callSuper("toObject",t),{path:this.path.map((function(t){return t.slice()}))})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){var t=e.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',t,'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,t)+", "+a(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,o,r=[],a=[],s=0,l=0,c=0,u=0,h=0,d=this.path.length;h<d;++h){switch(t=this.path[h],t[0]){case"L":c=t[1],u=t[2],o=[];break;case"M":c=t[1],u=t[2],s=c,l=u,o=[];break;case"C":o=e.util.getBoundsOfCurve(c,u,t[1],t[2],t[3],t[4],t[5],t[6]),c=t[5],u=t[6];break;case"Q":o=e.util.getBoundsOfCurve(c,u,t[1],t[2],t[1],t[2],t[3],t[4]),c=t[3],u=t[4];break;case"z":case"Z":c=s,u=l;break}o.forEach((function(t){r.push(t.x),a.push(t.y)})),r.push(c),a.push(u)}var g=i(r)||0,p=i(a)||0,f=n(r)||0,m=n(a)||0,v=f-g,b=m-p;return{left:g,top:p,width:v,height:b}}}),e.Path.fromObject=function(t,i){if("string"===typeof t.sourcePath){var n=t.sourcePath;e.loadSVGFromURL(n,(function(e){var n=e[0];n.setOptions(t),i&&i(n)}))}else e.Object._fromObject("Path",t,i,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,n){var r=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);r.fromSVG=!0,i(new e.Path(r.d,o(r,n)))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;if(i)this._updateObjectsACoords();else{var o=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),o||this._calcBounds(),this._updateObjectsCoords(o),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=!0,e=this._objects.length;e--;)this._objects[e].setCoords(t)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var i=t.left,n=t.top,o=!0;t.set({left:i-e.x,top:n-e.y}),t.group=this,t.setCoords(o)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var i=!!this.group;return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(i&&e.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,i?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,i){var n=this._objects.length;if(this.useSetOnGroup)while(n--)this._objects[n].setOnGroup(t,i);if("canvas"===t)while(n--)this._objects[n]._set(t,i);e.Object.prototype._set.call(this,t,i)},toObject:function(t){var i=this.includeDefaultValues,n=this._objects.filter((function(t){return!t.excludeFromExport})).map((function(e){var n=e.includeDefaultValues;e.includeDefaultValues=i;var o=e.toObject(t);return e.includeDefaultValues=n,o})),o=e.Object.prototype.toObject.call(this,t);return o.objects=n,o},toDatalessObject:function(t){var i,n=this.sourcePath;if(n)i=n;else{var o=this.includeDefaultValues;i=this._objects.map((function(e){var i=e.includeDefaultValues;e.includeDefaultValues=o;var n=e.toDatalessObject(t);return e.includeDefaultValues=i,n}))}var r=e.Object.prototype.toDatalessObject.call(this,t);return r.objects=i,r},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var i=0,n=this._objects.length;i<n;i++)if(this._objects[i].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,i=this._objects.length;t<i;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,o=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-o/2,n,o)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach((function(i){e.util.addTransformToObject(i,t),delete i.group,i.setCoords()})),this},realizeTransform:function(t,i){return e.util.addTransformToObject(t,i),t},destroy:function(){return this._objects.forEach((function(t){t.set("dirty",!0)})),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,i=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var o=new e.ActiveSelection([]);return o.set(n),o.type="activeSelection",i.remove(this),t.forEach((function(t){t.group=o,t.dirty=!0,i.add(t)})),o.canvas=i,o._objects=t,i._activeObject=o,o.setCoords(),o}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0;return this.forEachObject((function(e){e.setCoords(t)})),this},_calcBounds:function(t){for(var e,i,n,o,r=[],a=[],s=["tr","br","bl","tl"],l=0,c=this._objects.length,u=s.length;l<c;++l){for(e=this._objects[l],n=e.calcACoords(),o=0;o<u;o++)i=s[o],r.push(n[i].x),a.push(n[i].y);e.aCoords=n}this._getBounds(r,a,t)},_getBounds:function(t,o,r){var a=new e.Point(i(t),i(o)),s=new e.Point(n(t),n(o)),l=a.y||0,c=a.x||0,u=s.x-a.x||0,h=s.y-a.y||0;this.width=u,this.height=h,r||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],i=0,n=this._objects.length;i<n;i++)e.push("\t\t",this._objects[i].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t="undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,n=this._objects.length;i<n;i++)e.push("\t",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,i){var n=t.objects,o=e.util.object.clone(t,!0);delete o.objects,"string"!==typeof n?e.util.enlivenObjects(n,(function(n){e.util.enlivenObjects([t.clipPath],(function(o){var r=e.util.object.clone(t,!0);r.clipPath=o[0],delete r.objects,i&&i(new e.Group(n,r,!0))}))})):e.loadSVGFromURL(n,(function(r){var a=e.util.groupSVGElements(r,t,n);a.set(o),i&&i(a)}))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,i){i=i||{},this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;i.originX&&(this.originX=i.originX),i.originY&&(this.originY=i.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,i),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var i=e.Object.prototype.toObject.call(this),n=new e.Group([]);if(delete i.type,n.set(i),t.forEach((function(t){t.canvas.remove(t),t.group=n})),n._objects=t,!this.canvas)return n;var o=this.canvas;return o.add(n),o._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),i=i||{},"undefined"===typeof i.hasControls&&(i.hasControls=!1),i.forActiveSelection=!0;for(var n=0,o=this._objects.length;n<o;n++)this._objects[n]._renderControls(t,i);t.restore()}}),e.ActiveSelection.fromObject=function(t,i){e.util.enlivenObjects(t.objects,(function(n){delete t.objects,i&&i(new e.ActiveSelection(n,t,!0))}))})}(e),function(t){"use strict";var e=n.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?n.warn("fabric.Image is already defined."):(n.Image=n.util.createClass(n.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:n.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:n.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+n.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=n.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){n.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},toObject:function(t){var i=[];this.filters.forEach((function(t){t&&i.push(t.toObject())}));var n=e(this.callSuper("toObject",["cropX","cropY"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:i});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],i=[],o=this._element,r=-this.width/2,a=-this.height/2,s="",l="";if(!o)return[];if(this.hasCrop()){var c=n.Object.__uid++;e.push('<clipPath id="imageCrop_'+c+'">\n','\t<rect x="'+r+'" y="'+a+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),i.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',a-this.cropY,'" width="',o.width||o.naturalWidth,'" height="',o.height||o.height,l,'"',s,"></image>\n"),this.stroke||this.strokeDashArray){var u=this.fill;this.fill=null,t=["\t<rect ",'x="',r,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=u}return e="fill"!==this.paintFirst?e.concat(t,i):e.concat(i,t),e},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,i){return n.util.loadImage(t,(function(t,n){this.setElement(t,i),this._setWidthHeight(),e&&e(this,n)}),this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),o=i.scaleX,r=i.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||o>e&&r>e)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,void(this._lastScaleY=r);n.filterBackend||(n.filterBackend=n.initFilterBackend());var s=n.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,c=a.width,u=a.height;s.width=c,s.height=u,this._element=s,this._lastScaleX=t.scaleX=o,this._lastScaleY=t.scaleY=r,n.filterBackend.applyFilters([t],a,c,u,this._element,l),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(t){if(t=t||this.filters||[],t=t.filter((function(t){return t&&!t.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,i=e.naturalWidth||e.width,o=e.naturalHeight||e.height;if(this._element===this._originalElement){var r=n.util.createCanvasElement();r.width=i,r.height=o,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,o),this._lastScaleX=1,this._lastScaleY=1;return n.filterBackend||(n.filterBackend=n.initFilterBackend()),n.filterBackend.applyFilters(t,this._originalElement,i,o,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){n.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){n.util.setImageSmoothing(t,this.imageSmoothing),n.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element;if(e){var i=this._filterScalingX,n=this._filterScalingY,o=this.width,r=this.height,a=Math.min,s=Math.max,l=s(this.cropX,0),c=s(this.cropY,0),u=e.naturalWidth||e.width,h=e.naturalHeight||e.height,d=l*i,g=c*n,p=a(o*i,u-d),f=a(r*n,h-g),m=-o/2,v=-r/2,b=a(o,u/i-l),x=a(r,h/n-c);e&&t.drawImage(e,d,g,p,f,m,v,b,x)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(n.util.getById(t),e),n.util.addClass(this.getElement(),n.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?n.util.enlivenObjects(t,(function(t){e&&e(t)}),"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=n.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),i=this._element.width,o=this._element.height,r=1,a=1,s=0,l=0,c=0,u=0,h=this.width,d=this.height,g={width:h,height:d};return!e||"none"===e.alignX&&"none"===e.alignY?(r=h/i,a=d/o):("meet"===e.meetOrSlice&&(r=a=n.util.findScaleToFit(this._element,g),t=(h-i*r)/2,"Min"===e.alignX&&(s=-t),"Max"===e.alignX&&(s=t),t=(d-o*a)/2,"Min"===e.alignY&&(l=-t),"Max"===e.alignY&&(l=t)),"slice"===e.meetOrSlice&&(r=a=n.util.findScaleToCover(this._element,g),t=i-h/r,"Mid"===e.alignX&&(c=t/2),"Max"===e.alignX&&(c=t),t=o-d/a,"Mid"===e.alignY&&(u=t/2),"Max"===e.alignY&&(u=t),i=h/r,o=d/a)),{width:i,height:o,scaleX:r,scaleY:a,offsetLeft:s,offsetTop:l,cropX:c,cropY:u}}}),n.Image.CSS_CANVAS="canvas-img",n.Image.prototype.getSvgSrc=n.Image.prototype.getSrc,n.Image.fromObject=function(t,e){var i=n.util.object.clone(t);n.util.loadImage(i.src,(function(t,o){o?e&&e(null,!0):n.Image.prototype._initFilters.call(i,i.filters,(function(o){i.filters=o||[],n.Image.prototype._initFilters.call(i,[i.resizeFilter],(function(o){i.resizeFilter=o[0],n.util.enlivenObjects([i.clipPath],(function(o){i.clipPath=o[0];var r=new n.Image(t,i);e(r,!1)}))}))}))}),null,i.crossOrigin)},n.Image.fromURL=function(t,e,i){n.util.loadImage(t,(function(t,o){e&&e(new n.Image(t,i),o)}),null,i&&i.crossOrigin)},n.Image.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),n.Image.fromElement=function(t,i,o){var r=n.parseAttributes(t,n.Image.ATTRIBUTE_NAMES);n.Image.fromURL(r["xlink:href"],i,e(o?n.util.object.clone(o):{},r))})}(e),n.util.object.extend(n.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},i=t.onComplete||e,o=t.onChange||e,r=this;return n.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.rotate(t),o()},onComplete:function(){r.setCoords(),i()}}),this}}),n.util.object.extend(n.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function t(t,e){var i="precision "+e+" float;\nvoid main(){}",n=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,i),t.compileShader(n),!!t.getShaderParameter(n,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}n.isWebglSupported=function(e){if(n.isLikelyNode)return!1;e=e||n.WebglFilterBackend.prototype.tileSize;var i=document.createElement("canvas"),o=i.getContext("webgl")||i.getContext("experimental-webgl"),r=!1;if(o){n.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),r=n.maxTextureSize>=e;for(var a=["highp","mediump","lowp"],s=0;s<3;s++)if(t(o,a[s])){n.webGlPrecision=a[s];break}}return this.isSupported=r,r},n.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var i,o="undefined"!==typeof window.performance;try{new ImageData(1,1),i=!0}catch(f){i=!1}var r="undefined"!==typeof ArrayBuffer,a="undefined"!==typeof Uint8ClampedArray;if(o&&i&&r&&a){var c=n.util.createCanvasElement(),u=new ArrayBuffer(t*e*4);if(n.forceGLPutImageData)return this.imageBuffer=u,void(this.copyGLTo2D=l);var h,d,g,p={imageBuffer:u,destinationWidth:t,destinationHeight:e,targetCanvas:c};c.width=t,c.height=e,h=window.performance.now(),s.call(p,this.gl,p),d=window.performance.now()-h,h=window.performance.now(),l.call(p,this.gl,p),g=window.performance.now()-h,d>g?(this.imageBuffer=u,this.copyGLTo2D=l):this.copyGLTo2D=s}},createWebGLCanvas:function(t,e){var i=n.util.createCanvasElement();i.width=t,i.height=e;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=i.getContext("webgl",o);r||(r=i.getContext("experimental-webgl",o)),r&&(r.clearColor(0,0,0,0),this.canvas=i,this.gl=r)},applyFilters:function(t,e,i,n,o,r){var s,l=this.gl;r&&(s=this.getCachedTexture(r,e));var c={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:i,sourceHeight:n,destinationWidth:i,destinationHeight:n,context:l,sourceTexture:this.createTexture(l,i,n,!s&&e),targetTexture:this.createTexture(l,i,n),originalTexture:s||this.createTexture(l,i,n,!s&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},u=l.createFramebuffer();return l.bindFramebuffer(l.FRAMEBUFFER,u),t.forEach((function(t){t&&t.applyTo(c)})),a(c),this.copyGLTo2D(l,c),l.bindTexture(l.TEXTURE_2D,null),l.deleteTexture(c.sourceTexture),l.deleteTexture(c.targetTexture),l.deleteFramebuffer(u),o.getContext("2d").setTransform(1,0,0,1,0,0),c},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,i,n){var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),o},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var i=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=i,i},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:s,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var i=t.getExtension("WEBGL_debug_renderer_info");if(i){var n=t.getParameter(i.UNMASKED_RENDERER_WEBGL),o=t.getParameter(i.UNMASKED_VENDOR_WEBGL);n&&(e.renderer=n.toLowerCase()),o&&(e.vendor=o.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}n.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,i,n,o){var r=o.getContext("2d");r.drawImage(e,0,0,i,n);var a=r.getImageData(0,0,i,n),s=r.getImageData(0,0,i,n),l={sourceWidth:i,sourceHeight:n,imageData:a,originalEl:e,originalImageData:s,canvasEl:o,ctx:r,filterBackend:this};return t.forEach((function(t){t.applyTo(l)})),l.imageData.width===i&&l.imageData.height===n||(o.width=l.imageData.width,o.height=l.imageData.height),r.putImageData(l.imageData,0,0),l}}}(),n.Image=n.Image||{},n.Image.filters=n.Image.filters||{},n.Image.filters.BaseFilter=n.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,i){e=e||this.fragmentSource,i=i||this.vertexSource,"highp"!==n.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+n.webGlPrecision+" float"));var o=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(o,i),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(o));var r=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(r));var a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,r),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(a));var s=this.getAttributeLocations(t,a),l=this.getUniformLocations(t,a)||{};return l.uStepW=t.getUniformLocation(a,"uStepW"),l.uStepH=t.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:s,uniformLocations:l}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,i){var n=e.aPosition,o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,i,n=t.context;t.passes>1?(e=t.destinationWidth,i=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===i||(n.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(n,e,i)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=n.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var i=e[t].length;i--;)if(this[t][i]!==e[t][i])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,i=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),n.Image.filters.BaseFilter.fromObject=function(t,e){var i=new n.Image.filters[t.type](t);return e&&e(i),i},function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.ColorMatrix=n(i.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,i,n,o,r,a=t.imageData,s=a.data,l=s.length,c=this.matrix,u=this.colorsOnly;for(r=0;r<l;r+=4)e=s[r],i=s[r+1],n=s[r+2],u?(s[r]=e*c[0]+i*c[1]+n*c[2]+255*c[4],s[r+1]=e*c[5]+i*c[6]+n*c[7]+255*c[9],s[r+2]=e*c[10]+i*c[11]+n*c[12]+255*c[14]):(o=s[r+3],s[r]=e*c[0]+i*c[1]+n*c[2]+o*c[3]+255*c[4],s[r+1]=e*c[5]+i*c[6]+n*c[7]+o*c[8]+255*c[9],s[r+2]=e*c[10]+i*c[11]+n*c[12]+o*c[13]+255*c[14],s[r+3]=e*c[15]+i*c[16]+n*c[17]+o*c[18]+255*c[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,n=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],o=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,n),t.uniform4fv(e.uConstants,o)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Brightness=n(i.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,i=t.imageData,n=i.data,o=n.length,r=Math.round(255*this.brightness);for(e=0;e<o;e+=4)n[e]=n[e]+r,n[e+1]=n[e+1]+r,n[e+2]=n[e+2]+r}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Convolute=o(n.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),i=this.type+"_"+e+"_"+(this.opaque?1:0),n=this.fragmentSource[i];return t.programCache.hasOwnProperty(i)||(t.programCache[i]=this.createProgram(t.context,n)),t.programCache[i]},applyTo2d:function(t){var e,i,n,o,r,a,s,l,c,u,h,d,g,p=t.imageData,f=p.data,m=this.matrix,v=Math.round(Math.sqrt(m.length)),b=Math.floor(v/2),x=p.width,y=p.height,_=t.ctx.createImageData(x,y),w=_.data,k=this.opaque?1:0;for(h=0;h<y;h++)for(u=0;u<x;u++){for(r=4*(h*x+u),e=0,i=0,n=0,o=0,g=0;g<v;g++)for(d=0;d<v;d++)s=h+g-b,a=u+d-b,s<0||s>=y||a<0||a>=x||(l=4*(s*x+a),c=m[g*v+d],e+=f[l]*c,i+=f[l+1]*c,n+=f[l+2]*c,k||(o+=f[l+3]*c));w[r]=e,w[r+1]=i,w[r+2]=n,w[r+3]=k?f[r+3]:o}t.imageData=_},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Grayscale=n(i.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,i,n=t.imageData,o=n.data,r=o.length,a=this.mode;for(e=0;e<r;e+=4)"average"===a?i=(o[e]+o[e+1]+o[e+2])/3:"lightness"===a?i=(Math.min(o[e],o[e+1],o[e+2])+Math.max(o[e],o[e+1],o[e+2]))/2:"luminosity"===a&&(i=.21*o[e]+.72*o[e+1]+.07*o[e+2]),o[e]=i,o[e+1]=i,o[e+2]=i},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var i=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,i)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){var i=1;t.uniform1i(e.uMode,i)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Invert=n(i.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,i=t.imageData,n=i.data,o=n.length;for(e=0;e<o;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.Noise=o(n.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,i,n=t.imageData,o=n.data,r=o.length,a=this.noise;for(e=0,r=o.length;e<r;e+=4)i=(.5-Math.random())*a,o[e]+=i,o[e+1]+=i,o[e+2]+=i}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Pixelate=n(i.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,i,n,o,r,a,s,l,c,u,h,d=t.imageData,g=d.data,p=d.height,f=d.width;for(i=0;i<p;i+=this.blocksize)for(n=0;n<f;n+=this.blocksize)for(e=4*i*f+4*n,o=g[e],r=g[e+1],a=g[e+2],s=g[e+3],u=Math.min(i+this.blocksize,p),h=Math.min(n+this.blocksize,f),l=i;l<u;l++)for(c=n;c<h;c++)e=4*l*f+4*c,g[e]=o,g[e+1]=r,g[e+2]=a,g[e+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,o=e.util.createClass;n.RemoveColor=o(n.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var i,n,o,r,a=t.imageData,s=a.data,l=255*this.distance,c=new e.Color(this.color).getSource(),u=[c[0]-l,c[1]-l,c[2]-l],h=[c[0]+l,c[1]+l,c[2]+l];for(i=0;i<s.length;i+=4)n=s[i],o=s[i+1],r=s[i+2],n>u[0]&&o>u[1]&&r>u[2]&&n<h[0]&&o<h[1]&&r<h[2]&&(s[i+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,i){var n=new e.Color(this.color).getSource(),o=parseFloat(this.distance),r=[0+n[0]/255-o,0+n[1]/255-o,0+n[2]/255-o,1],a=[n[0]/255+o,n[1]/255+o,n[2]/255+o,1];t.uniform4fv(i.uLow,r),t.uniform4fv(i.uHigh,a)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var r in o)i[r]=n(i.ColorMatrix,{type:r,matrix:o[r],mainParameter:!1,colorsOnly:!0}),e.Image.filters[r].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,i=e.Image.filters,n=e.util.createClass;i.BlendColor=n(i.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){var i,n,o,r,a,s,l,c=t.imageData,u=c.data,h=u.length,d=1-this.alpha;l=new e.Color(this.color).getSource(),i=l[0]*this.alpha,n=l[1]*this.alpha,o=l[2]*this.alpha;for(var g=0;g<h;g+=4)switch(r=u[g],a=u[g+1],s=u[g+2],this.mode){case"multiply":u[g]=r*i/255,u[g+1]=a*n/255,u[g+2]=s*o/255;break;case"screen":u[g]=255-(255-r)*(255-i)/255,u[g+1]=255-(255-a)*(255-n)/255,u[g+2]=255-(255-s)*(255-o)/255;break;case"add":u[g]=r+i,u[g+1]=a+n,u[g+2]=s+o;break;case"diff":case"difference":u[g]=Math.abs(r-i),u[g+1]=Math.abs(a-n),u[g+2]=Math.abs(s-o);break;case"subtract":u[g]=r-i,u[g+1]=a-n,u[g+2]=s-o;break;case"darken":u[g]=Math.min(r,i),u[g+1]=Math.min(a,n),u[g+2]=Math.min(s,o);break;case"lighten":u[g]=Math.max(r,i),u[g+1]=Math.max(a,n),u[g+2]=Math.max(s,o);break;case"overlay":u[g]=i<128?2*r*i/255:255-2*(255-r)*(255-i)/255,u[g+1]=n<128?2*a*n/255:255-2*(255-a)*(255-n)/255,u[g+2]=o<128?2*s*o/255:255-2*(255-s)*(255-o)/255;break;case"exclusion":u[g]=i+r-2*i*r/255,u[g+1]=n+a-2*n*a/255,u[g+2]=o+s-2*o*s/255;break;case"tint":u[g]=i+r*d,u[g+1]=n+a*d,u[g+2]=o+s*d}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,i){var n=new e.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(i.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,i=e.Image.filters,n=e.util.createClass;i.BlendImage=n(i.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,i=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]},applyTo2d:function(t){var i,n,o,r,a,s,l,c,u,h,d,g=t.imageData,p=t.filterBackend.resources,f=g.data,m=f.length,v=g.width,b=g.height,x=this.image;p.blendImage||(p.blendImage=e.util.createCanvasElement()),u=p.blendImage,h=u.getContext("2d"),u.width!==v||u.height!==b?(u.width=v,u.height=b):h.clearRect(0,0,v,b),h.setTransform(x.scaleX,0,0,x.scaleY,x.left,x.top),h.drawImage(x._element,0,0,v,b),d=h.getImageData(0,0,v,b).data;for(var y=0;y<m;y+=4)switch(a=f[y],s=f[y+1],l=f[y+2],c=f[y+3],i=d[y],n=d[y+1],o=d[y+2],r=d[y+3],this.mode){case"multiply":f[y]=a*i/255,f[y+1]=s*n/255,f[y+2]=l*o/255,f[y+3]=c*r/255;break;case"mask":f[y+3]=r;break}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,i){e.Image.fromObject(t.image,(function(n){var o=e.util.object.clone(t);o.image=n,i(new e.Image.filters.BlendImage(o))}))}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,n=Math.floor,o=Math.sqrt,r=Math.abs,a=Math.round,s=Math.sin,l=Math.ceil,c=e.Image.filters,u=e.util.createClass;c.Resize=u(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),i=this.type+"_"+e;if(!t.programCache.hasOwnProperty(i)){var n=this.generateShader(e);t.programCache[i]=this.createProgram(t.context,n)}return t.programCache[i]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),n=new Array(i),o=1;o<=i;o++)n[o-1]=t(o*e);return n},generateShader:function(t){for(var e=new Array(t),i=this.fragmentSourceTOP,n=1;n<=t;n++)e[n-1]=n+".0 * uDelta";return i+="uniform float uTaps["+t+"];\n",i+="void main() {\n",i+="  vec4 color = texture2D(uTexture, vTexCoord);\n",i+="  float sum = 1.0;\n",e.forEach((function(t,e){i+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",i+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",i+="  sum += 2.0 * uTaps["+e+"];\n"})),i+="  gl_FragColor = color / sum;\n",i+="}",i},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;e*=Math.PI;var i=e/t;return s(e)/e*s(i)/i}},applyTo2d:function(t){var e=t.imageData,i=this.scaleX,n=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/n;var o,r=e.width,s=e.height,l=a(r*i),c=a(s*n);"sliceHack"===this.resizeType?o=this.sliceByTwo(t,r,s,l,c):"hermite"===this.resizeType?o=this.hermiteFastResize(t,r,s,l,c):"bilinear"===this.resizeType?o=this.bilinearFiltering(t,r,s,l,c):"lanczos"===this.resizeType&&(o=this.lanczosResize(t,r,s,l,c)),t.imageData=o},sliceByTwo:function(t,i,o,r,a){var s,l,c=t.imageData,u=.5,h=!1,d=!1,g=i*u,p=o*u,f=e.filterBackend.resources,m=0,v=0,b=i,x=0;f.sliceByTwo||(f.sliceByTwo=document.createElement("canvas")),s=f.sliceByTwo,(s.width<1.5*i||s.height<o)&&(s.width=1.5*i,s.height=o),l=s.getContext("2d"),l.clearRect(0,0,1.5*i,o),l.putImageData(c,0,0),r=n(r),a=n(a);while(!h||!d)i=g,o=p,r<n(g*u)?g=n(g*u):(g=r,h=!0),a<n(p*u)?p=n(p*u):(p=a,d=!0),l.drawImage(s,m,v,i,o,b,x,g,p),m=b,v=x,x+=p;return l.getImageData(m,v,r,a)},lanczosResize:function(t,e,a,s,c){function u(t){var l,C,S,I,M,T,E,A,D,L,O;for(w.x=(t+.5)*f,k.x=n(w.x),l=0;l<c;l++){for(w.y=(l+.5)*m,k.y=n(w.y),M=0,T=0,E=0,A=0,D=0,C=k.x-x;C<=k.x+x;C++)if(!(C<0||C>=e)){L=n(1e3*r(C-w.x)),_[L]||(_[L]={});for(var j=k.y-y;j<=k.y+y;j++)j<0||j>=a||(O=n(1e3*r(j-w.y)),_[L][O]||(_[L][O]=p(o(i(L*v,2)+i(O*b,2))/1e3)),S=_[L][O],S>0&&(I=4*(j*e+C),M+=S,T+=S*h[I],E+=S*h[I+1],A+=S*h[I+2],D+=S*h[I+3]))}I=4*(l*s+t),g[I]=T/M,g[I+1]=E/M,g[I+2]=A/M,g[I+3]=D/M}return++t<s?u(t):d}var h=t.imageData.data,d=t.ctx.createImageData(s,c),g=d.data,p=this.lanczosCreate(this.lanczosLobes),f=this.rcpScaleX,m=this.rcpScaleY,v=2/this.rcpScaleX,b=2/this.rcpScaleY,x=l(f*this.lanczosLobes/2),y=l(m*this.lanczosLobes/2),_={},w={},k={};return u(0)},bilinearFiltering:function(t,e,i,o,r){var a,s,l,c,u,h,d,g,p,f,m,v,b,x=0,y=this.rcpScaleX,_=this.rcpScaleY,w=4*(e-1),k=t.imageData,C=k.data,S=t.ctx.createImageData(o,r),I=S.data;for(d=0;d<r;d++)for(g=0;g<o;g++)for(u=n(y*g),h=n(_*d),p=y*g-u,f=_*d-h,b=4*(h*e+u),m=0;m<4;m++)a=C[b+m],s=C[b+4+m],l=C[b+w+m],c=C[b+w+4+m],v=a*(1-p)*(1-f)+s*p*(1-f)+l*f*(1-p)+c*p*f,I[x++]=v;return S},hermiteFastResize:function(t,e,i,a,s){for(var c=this.rcpScaleX,u=this.rcpScaleY,h=l(c/2),d=l(u/2),g=t.imageData,p=g.data,f=t.ctx.createImageData(a,s),m=f.data,v=0;v<s;v++)for(var b=0;b<a;b++){for(var x=4*(b+v*a),y=0,_=0,w=0,k=0,C=0,S=0,I=0,M=(v+.5)*u,T=n(v*u);T<(v+1)*u;T++)for(var E=r(M-(T+.5))/d,A=(b+.5)*c,D=E*E,L=n(b*c);L<(b+1)*c;L++){var O=r(A-(L+.5))/h,j=o(D+O*O);j>1&&j<-1||(y=2*j*j*j-3*j*j+1,y>0&&(O=4*(L+T*e),I+=y*p[O+3],w+=y,p[O+3]<255&&(y=y*p[O+3]/250),k+=y*p[O],C+=y*p[O+1],S+=y*p[O+2],_+=y))}m[x]=k/_,m[x+1]=C/_,m[x+2]=S/_,m[x+3]=I/w}return f},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Contrast=n(i.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,i=t.imageData,n=i.data,o=n.length,r=Math.floor(255*this.contrast),a=259*(r+255)/(255*(259-r));for(e=0;e<o;e+=4)n[e]=a*(n[e]-128)+128,n[e+1]=a*(n[e+1]-128)+128,n[e+2]=a*(n[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Saturation=n(i.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,i,n=t.imageData,o=n.data,r=o.length,a=-this.saturation;for(e=0;e<r;e+=4)i=Math.max(o[e],o[e+1],o[e+2]),o[e]+=i!==o[e]?(i-o[e])*a:0,o[e+1]+=i!==o[e+1]?(i-o[e+1])*a:0,o[e+2]+=i!==o[e+2]?(i-o[e+2])*a:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Vibrance=n(i.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance){var e,i,n,o,r=t.imageData,a=r.data,s=a.length,l=-this.vibrance;for(e=0;e<s;e+=4)i=Math.max(a[e],a[e+1],a[e+2]),n=(a[e]+a[e+1]+a[e+2])/3,o=2*Math.abs(i-n)/255*l,a[e]+=i!==a[e]?(i-a[e])*o:0,a[e+1]+=i!==a[e+1]?(i-a[e+1])*o:0,a[e+2]+=i!==a[e+2]?(i-a[e+2])*o:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),e.Image.filters.Vibrance.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Blur=n(i.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var i,n,o=t.filterBackend.resources,r=t.imageData.width,a=t.imageData.height;o.blurLayer1||(o.blurLayer1=e.util.createCanvasElement(),o.blurLayer2=e.util.createCanvasElement()),i=o.blurLayer1,n=o.blurLayer2,i.width===r&&i.height===a||(n.width=i.width=r,n.height=i.height=a);var s,l,c,u,h=i.getContext("2d"),d=n.getContext("2d"),g=15,p=.06*this.blur*.5;for(h.putImageData(t.imageData,0,0),d.clearRect(0,0,r,a),u=-g;u<=g;u++)s=(Math.random()-.5)/4,l=u/g,c=p*l*r+s,d.globalAlpha=1-Math.abs(l),d.drawImage(i,c,s),h.drawImage(n,0,0),d.globalAlpha=1,d.clearRect(0,0,n.width,n.height);for(u=-g;u<=g;u++)s=(Math.random()-.5)/4,l=u/g,c=p*l*a+s,d.globalAlpha=1-Math.abs(l),d.drawImage(i,s,c),h.drawImage(n,0,0),d.globalAlpha=1,d.clearRect(0,0,n.width,n.height);t.ctx.drawImage(i,0,0);var f=t.ctx.getImageData(0,0,i.width,i.height);return h.globalAlpha=1,h.clearRect(0,0,i.width,i.height),f},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t,e=1,i=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),i.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Gamma=n(i.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],i.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData,n=i.data,o=this.gamma,r=n.length,a=1/o[0],s=1/o[1],l=1/o[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,a),this.gVals[e]=255*Math.pow(e/255,s),this.bVals[e]=255*Math.pow(e/255,l);for(e=0,r=n.length;e<r;e+=4)n[e]=this.rVals[n[e]],n[e+1]=this.gVals[n[e+1]],n[e+2]=this.bVals[n[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Composed=n(i.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach((function(e){e.applyTo(t)}))},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(t){return t.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(t){return!t.isNeutralState()}))}}),e.Image.filters.Composed.fromObject=function(t,i){var n=t.subFilters||[],o=n.map((function(t){return new e.Image.filters[t.type](t)})),r=new e.Image.filters.Composed({subFilters:o});return i&&i(r),r}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.HueRotation=n(i.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,i=e.util.cos(t),n=e.util.sin(t),o=1/3,r=Math.sqrt(o)*n,a=1-i;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=i+a/3,this.matrix[1]=o*a-r,this.matrix[2]=o*a+r,this.matrix[5]=o*a+r,this.matrix[6]=i+o*a,this.matrix[7]=o*a-r,this.matrix[10]=o*a-r,this.matrix[11]=o*a+r,this.matrix[12]=i+o*a},isNeutralState:function(t){return this.calculateMatrix(),i.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),i.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.clone;if(e.Text)e.warn("fabric.Text is already defined");else{var n="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:e.Object.prototype.stateProperties.concat(n),cacheProperties:e.Object.prototype.cacheProperties.concat(n),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=e.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,i,n,o,r,a,s=0,l=this._textLines.length;s<l;s++)if(("justify"===this.textAlign||s!==l-1&&!this.isEndOfWrapping(s))&&(n=0,o=this._textLines[s],e=this.getLineWidth(s),e<this.width&&(a=this.textLines[s].match(this._reSpacesAndTabs)))){i=a.length,t=(this.width-e)/i;for(var c=0,u=o.length;c<=u;c++)r=this.__charBounds[s][c],this._reSpaceAndTab.test(o[c])?(r.width+=t,r.kernedWidth+=t,r.left+=n,n+=t):r.left+=n}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var n=this.getLineWidth(e);n>t&&(t=n)}return t},_renderTextLine:function(t,e,i,n,o,r){this._renderChars(t,e,i,n,o,r)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,n,o,r,a,s,l=t.fillStyle,c=this._getLeftOffset(),u=this._getTopOffset(),h=0,d=0,g=this.path,p=0,f=this._textLines.length;p<f;p++)if(e=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas("textBackgroundColor",p)){n=this._textLines[p],i=this._getLineLeftOffset(p),d=0,h=0,o=this.getValueOfPropertyAt(p,0,"textBackgroundColor");for(var m=0,v=n.length;m<v;m++)r=this.__charBounds[p][m],a=this.getValueOfPropertyAt(p,m,"textBackgroundColor"),g?(t.save(),t.translate(r.renderLeft,r.renderTop),t.rotate(r.angle),t.fillStyle=a,a&&t.fillRect(-r.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),r.width,e/this.lineHeight),t.restore()):a!==o?(s=c+i+h,"rtl"===this.direction&&(s=this.width-s-d),t.fillStyle=o,o&&t.fillRect(s,u,d,e/this.lineHeight),h=r.left,d=r.width,o=a):d+=r.kernedWidth;a&&!g&&(s=c+i+h,"rtl"===this.direction&&(s=this.width-s-d),t.fillStyle=a,t.fillRect(s,u,d,e/this.lineHeight)),u+=e}else u+=e;t.fillStyle=l,this._removeShadow(t)}},getFontCache:function(t){var i=t.fontFamily.toLowerCase();e.charWidthsCache[i]||(e.charWidthsCache[i]={});var n=e.charWidthsCache[i],o=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return n[o]||(n[o]={}),n[o]},_measureChar:function(t,e,i,n){var o,r,a,s,l=this.getFontCache(e),c=this._getFontDeclaration(e),u=this._getFontDeclaration(n),h=i+t,d=c===u,g=e.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==l[i]&&(a=l[i]),void 0!==l[t]&&(s=o=l[t]),d&&void 0!==l[h]&&(r=l[h],s=r-a),void 0===o||void 0===a||void 0===r){var p=this.getMeasuringContext();this._setTextStyles(p,e,!0)}return void 0===o&&(s=o=p.measureText(t).width,l[t]=o),void 0===a&&d&&i&&(a=p.measureText(i).width,l[i]=a),d&&void 0===r&&(r=p.measureText(h).width,l[h]=r,s=r-a),{width:o*g,kernedWidth:s*g}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var i,n,o,r,a,s,l=0,c=this._textLines[t],u=0,h=new Array(c.length),d=0,g=this.path,p="right"===this.pathSide;for(this.__charBounds[t]=h,i=0;i<c.length;i++)n=c[i],r=this._getGraphemeBox(n,t,i,o),h[i]=r,l+=r.kernedWidth,o=n;if(h[i]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize},g){switch(s=g.segmentsInfo[g.segmentsInfo.length-1].length,a=e.util.getPointOnPath(g.path,0,g.segmentsInfo),a.x+=g.pathOffset.x,a.y+=g.pathOffset.y,this.textAlign){case"left":d=p?s-l:0;break;case"center":d=(s-l)/2;break;case"right":d=p?0:s-l;break}for(d+=this.pathStartOffset*(p?-1:1),i=p?c.length-1:0;p?i>=0:i<c.length;p?i--:i++)r=h[i],d>s?d%=s:d<0&&(d+=s),this._setGraphemeOnPath(d,r,a),d+=r.kernedWidth}return{width:l,numOfSpaces:u}},_setGraphemeOnPath:function(t,i,n){var o=t+i.kernedWidth/2,r=this.path,a=e.util.getPointOnPath(r.path,o,r.segmentsInfo);i.renderLeft=a.x-n.x,i.renderTop=a.y-n.y,i.angle=a.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,i,n,o){var r,a=this.getCompleteStyleDeclaration(e,i),s=n?this.getCompleteStyleDeclaration(e,i-1):{},l=this._measureChar(t,a,n,s),c=l.kernedWidth,u=l.width;0!==this.charSpacing&&(r=this._getWidthOfCharSpacing(),u+=r,c+=r);var h={width:u,left:0,height:a.fontSize,kernedWidth:c,deltaY:a.deltaY};if(i>0&&!o){var d=this.__charBounds[e][i-1];h.left=d.left+d.width+l.kernedWidth-l.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),n=1,o=e.length;n<o;n++)i=Math.max(this.getHeightOfChar(t,n),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,n=this._textLines.length;i<n;i++)t=this.getHeightOfLine(i),e+=i===n-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,n=this._getLeftOffset(),o=this._getTopOffset(),r=0,a=this._textLines.length;r<a;r++){var s=this.getHeightOfLine(r),l=s/this.lineHeight,c=this._getLineLeftOffset(r);this._renderTextLine(e,t,this._textLines[r],n+c,o+i+l,r),i+=s}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,n,o,r){var a,s,l,c,u,h=this.getHeightOfLine(r),d=-1!==this.textAlign.indexOf("justify"),g="",p=0,f=this.path,m=!d&&0===this.charSpacing&&this.isEmptyStyles(r)&&!f,v="ltr"===this.direction,b="ltr"===this.direction?1:-1;if(e.save(),o-=h*this._fontSizeFraction/this.lineHeight,m)return e.canvas.setAttribute("dir",v?"ltr":"rtl"),e.direction=v?"ltr":"rtl",e.textAlign=v?"left":"right",this._renderChar(t,e,r,0,i.join(""),n,o,h),void e.restore();for(var x=0,y=i.length-1;x<=y;x++)c=x===y||this.charSpacing||f,g+=i[x],l=this.__charBounds[r][x],0===p?(n+=b*(l.kernedWidth-l.width),p+=l.width):p+=l.kernedWidth,d&&!c&&this._reSpaceAndTab.test(i[x])&&(c=!0),c||(a=a||this.getCompleteStyleDeclaration(r,x),s=this.getCompleteStyleDeclaration(r,x+1),c=this._hasStyleChanged(a,s)),c&&(f?(e.save(),e.translate(l.renderLeft,l.renderTop),e.rotate(l.angle),this._renderChar(t,e,r,x,g,-p/2,0,h),e.restore()):(u=n,e.canvas.setAttribute("dir",v?"ltr":"rtl"),e.direction=v?"ltr":"rtl",e.textAlign=v?"left":"right",this._renderChar(t,e,r,x,g,u,o,h)),g="",a=s,n+=b*p,p=0);e.restore()},_applyPatternGradientTransformText:function(t){var i,n=e.util.createCanvasElement(),o=this.width+this.strokeWidth,r=this.height+this.strokeWidth;return n.width=o,n.height=r,i=n.getContext("2d"),i.beginPath(),i.moveTo(0,0),i.lineTo(o,0),i.lineTo(o,r),i.lineTo(0,r),i.closePath(),i.translate(o/2,r/2),i.fillStyle=t.toLive(i),this._applyPatternGradientTransform(i,t),i.fill(),i.createPattern(n,"no-repeat")},handleFiller:function(t,e,i){var n,o;return i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(n=-this.width/2,o=-this.height/2,t.translate(n,o),t[e]=this._applyPatternGradientTransformText(i),{offsetX:n,offsetY:o}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,i,n,o,r,a){var s,l,c=this._getStyleDeclaration(i,n),u=this.getCompleteStyleDeclaration(i,n),h="fillText"===t&&u.fill,d="strokeText"===t&&u.stroke&&u.strokeWidth;(d||h)&&(e.save(),h&&(s=this._setFillStyles(e,u)),d&&(l=this._setStrokeStyles(e,u)),e.font=this._getFontDeclaration(u),c&&c.textBackgroundColor&&this._removeShadow(e),c&&c.deltaY&&(a+=c.deltaY),h&&e.fillText(o,r-s.offsetX,a-s.offsetY),d&&e.strokeText(o,r-l.offsetX,a-l.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var n=this.get2DCursorLocation(t,!0),o=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),r=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),a={fontSize:o*i.size,deltaY:r+o*i.baseline};return this.setSelectionStyles(a,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),i=this.width-e,n=this.textAlign,o=this.direction,r=0,a=this.isEndOfWrapping(t);return"justify"===n||"justify-center"===n&&!a||"justify-right"===n&&!a||"justify-left"===n&&!a?0:("center"===n&&(r=i/2),"right"===n&&(r=i),"justify-center"===n&&(r=i/2),"justify-right"===n&&(r=i),"rtl"===o&&(r-=i),r)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(this.__lineWidths[t])return this.__lineWidths[t];var e,i,n=this._textLines[t];return""===n?e=0:(i=this.measureLine(t),e=i.width),this.__lineWidths[t]=e,e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var n=this._getStyleDeclaration(t,e);return n&&"undefined"!==typeof n[i]?n[i]:this[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,n,o,r,a,s,l,c,u,h,d,g,p,f,m,v,b=this._getLeftOffset(),x=this._getTopOffset(),y=this.path,_=this._getWidthOfCharSpacing(),w=this.offsets[e],k=0,C=this._textLines.length;k<C;k++)if(i=this.getHeightOfLine(k),this[e]||this.styleHas(e,k)){l=this._textLines[k],f=i/this.lineHeight,r=this._getLineLeftOffset(k),h=0,d=0,c=this.getValueOfPropertyAt(k,0,e),v=this.getValueOfPropertyAt(k,0,"fill"),u=x+f*(1-this._fontSizeFraction),n=this.getHeightOfChar(k,0),a=this.getValueOfPropertyAt(k,0,"deltaY");for(var S=0,I=l.length;S<I;S++)if(g=this.__charBounds[k][S],p=this.getValueOfPropertyAt(k,S,e),m=this.getValueOfPropertyAt(k,S,"fill"),o=this.getHeightOfChar(k,S),s=this.getValueOfPropertyAt(k,S,"deltaY"),y&&p&&m)t.save(),t.fillStyle=v,t.translate(g.renderLeft,g.renderTop),t.rotate(g.angle),t.fillRect(-g.kernedWidth/2,w*o+s,g.kernedWidth,this.fontSize/15),t.restore();else if((p!==c||m!==v||o!==n||s!==a)&&d>0){var M=b+r+h;"rtl"===this.direction&&(M=this.width-M-d),c&&v&&(t.fillStyle=v,t.fillRect(M,u+w*n+a,d,this.fontSize/15)),h=g.left,d=g.width,c=p,v=m,n=o,a=s}else d+=g.kernedWidth;M=b+r+h;"rtl"===this.direction&&(M=this.width-M-d),t.fillStyle=m,p&&m&&t.fillRect(M,u+w*n+a,d-_,this.fontSize/15),x+=i}else x+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,i){var n=t||this,o=this.fontFamily,r=e.Text.genericFonts.indexOf(o.toLowerCase())>-1,a=void 0===o||o.indexOf("'")>-1||o.indexOf(",")>-1||o.indexOf('"')>-1||r?n.fontFamily:'"'+n.fontFamily+'"';return[e.isLikelyNode?n.fontWeight:n.fontStyle,e.isLikelyNode?n.fontStyle:n.fontWeight,i?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",a].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var i=t.split(this._reNewline),n=new Array(i.length),o=["\n"],r=[],a=0;a<i.length;a++)n[a]=e.util.string.graphemeSplit(i[a]),r=r.concat(n[a],o);return r.pop(),{_unwrappedLines:n,lines:i,graphemeText:r,graphemeLines:n}},toObject:function(t){var e=n.concat(t),o=this.callSuper("toObject",e);return o.styles=i(this.styles,!0),o.path&&(o.path=this.path.toObject()),o},set:function(t,e){this.callSuper("set",t,e);var i=!1,n=!1;if("object"===typeof t)for(var o in t)"path"===o&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(o),n=n||"path"===o;else i=-1!==this._dimensionAffectingProps.indexOf(t),n="path"===t;return n&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,n,o){if(!t)return n(null);var r=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),a=r.textAnchor||"left";if(o=e.util.object.extend(o?i(o):{},r),o.top=o.top||0,o.left=o.left||0,r.textDecoration){var s=r.textDecoration;-1!==s.indexOf("underline")&&(o.underline=!0),-1!==s.indexOf("overline")&&(o.overline=!0),-1!==s.indexOf("line-through")&&(o.linethrough=!0),delete o.textDecoration}"dx"in r&&(o.left+=r.dx),"dy"in r&&(o.top+=r.dy),"fontSize"in o||(o.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in t?l=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(l=t.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=o.strokeWidth;o.strokeWidth=0;var u=new e.Text(l,o),h=u.getScaledHeight()/u.height,d=(u.height+u.strokeWidth)*u.lineHeight-u.height,g=d*h,p=u.getScaledHeight()+g,f=0;"center"===a&&(f=u.getScaledWidth()/2),"right"===a&&(f=u.getScaledWidth()),u.set({left:u.left-f,top:u.top-(p-u.fontSize*(.07+u._fontSizeFraction))/u.lineHeight,strokeWidth:"undefined"!==typeof c?c:1}),n(u)},e.Text.fromObject=function(t,n){var o=i(t),r=t.path;return delete o.path,e.Object._fromObject("Text",o,(function(t){r?e.Object._fromObject("Path",r,(function(e){t.set("path",e),n(t)}),"path"):n(t)}),"text")},e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text)}}(e),function(){n.util.object.extend(n.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if("undefined"!==typeof t&&!this.styles[t])return!0;var e="undefined"===typeof t?this.styles:{line:this.styles[t]};for(var i in e)for(var n in e[i])for(var o in e[i][n])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if("undefined"!==typeof e&&!this.styles[e])return!1;var i="undefined"===typeof e?this.styles:{0:this.styles[e]};for(var n in i)for(var o in i[n])if("undefined"!==typeof i[n][o][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,i,n=this.styles,o=0,r=!0,a=0;for(var s in n){for(var l in e=0,n[s]){var c=n[s][l],u=c.hasOwnProperty(t);o++,u?(i?c[t]!==i&&(r=!1):i=c[t],c[t]===this[t]&&delete c[t]):r=!1,0!==Object.keys(c).length?e++:delete n[s][l]}0===e&&delete n[s]}for(var h=0;h<this._textLines.length;h++)a+=this._textLines[h].length;r&&o===a&&(this[t]=i,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,i,n,o=this.styles;for(i in o){for(n in e=o[i],e)delete e[n][t],0===Object.keys(e[n]).length&&delete e[n];0===Object.keys(e).length&&delete o[i]}}},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),n.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},get2DCursorLocation:function(t,e){"undefined"===typeof t&&(t=this.selectionStart);for(var i=e?this._unwrappedTextLines:this._textLines,n=i.length,o=0;o<n;o++){if(t<=i[o].length)return{lineIndex:o,charIndex:t};t-=i[o].length+this.missingNewlineOffset(o)}return{lineIndex:o-1,charIndex:i[o-1].length<t?i[o-1].length:t}},getSelectionStyles:function(t,e,i){"undefined"===typeof t&&(t=this.selectionStart||0),"undefined"===typeof e&&(e=this.selectionEnd||t);for(var n=[],o=t;o<e;o++)n.push(this.getStyleAtPosition(o,i));return n},getStyleAtPosition:function(t,e){var i=this.get2DCursorLocation(t),n=e?this.getCompleteStyleDeclaration(i.lineIndex,i.charIndex):this._getStyleDeclaration(i.lineIndex,i.charIndex);return n||{}},setSelectionStyles:function(t,e,i){"undefined"===typeof e&&(e=this.selectionStart||0),"undefined"===typeof i&&(i=this.selectionEnd||e);for(var n=e;n<i;n++)this._extendStyles(n,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var i=this.styles&&this.styles[t];return i?i[e]:null},getCompleteStyleDeclaration:function(t,e){for(var i,n=this._getStyleDeclaration(t,e)||{},o={},r=0;r<this._styleProperties.length;r++)i=this._styleProperties[r],o[i]="undefined"===typeof n[i]?this[i]:n[i];return o},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}})}(),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}n.IText=n.util.createClass(n.Text,n.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},_getCursorBoundaries:function(t){"undefined"===typeof t&&(t=this.selectionStart);var e=this._getLeftOffset(),i=this._getTopOffset(),n=this._getCursorBoundariesOffsets(t);return{left:e,top:i,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,i,n,o,r=0,a=0,s=this.get2DCursorLocation(t);n=s.charIndex,i=s.lineIndex;for(var l=0;l<i;l++)r+=this.getHeightOfLine(l);e=this._getLineLeftOffset(i);var c=this.__charBounds[i][n];return c&&(a=c.left),0!==this.charSpacing&&n===this._textLines[i].length&&(a-=this._getWidthOfCharSpacing()),o={top:r,left:e+(a>0?a:0)},"rtl"===this.direction&&(o.left*=-1),this.cursorOffsetCache=o,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),n=i.lineIndex,o=i.charIndex>0?i.charIndex-1:0,r=this.getValueOfPropertyAt(n,o,"fontSize"),a=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/a,l=t.topOffset,c=this.getValueOfPropertyAt(n,o,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-r*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,o,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-s/2,l+t.top+c,s,r)},renderSelection:function(t,e){for(var i=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=-1!==this.textAlign.indexOf("justify"),r=this.get2DCursorLocation(i),a=this.get2DCursorLocation(n),s=r.lineIndex,l=a.lineIndex,c=r.charIndex<0?0:r.charIndex,u=a.charIndex<0?0:a.charIndex,h=s;h<=l;h++){var d=this._getLineLeftOffset(h)||0,g=this.getHeightOfLine(h),p=0,f=0,m=0;if(h===s&&(f=this.__charBounds[s][c].left),h>=s&&h<l)m=o&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===l)if(0===u)m=this.__charBounds[l][u].left;else{var v=this._getWidthOfCharSpacing();m=this.__charBounds[l][u-1].left+this.__charBounds[l][u-1].width-v}p=g,(this.lineHeight<1||h===l&&this.lineHeight>1)&&(g/=this.lineHeight);var b=t.left+d+f,x=m-f,y=g,_=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",y=1,_=g):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(b=this.width-b-x),e.fillRect(b,t.top+t.topOffset+_,x,y),t.topOffset+=p}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),n.IText.fromObject=function(e,i){if(t(e),e.styles)for(var o in e.styles)for(var r in e.styles[o])t(e.styles[o][r]);n.Object._fromObject("IText",e,i,"text")}}(),function(){var t=n.util.object.clone;n.util.object.extend(n.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",(function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))}))},initRemovedHandler:function(){var t=this;this.on("removed",(function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],n.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))}))},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.__isMousedown=!1}))},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,n){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){o.isAborted||t[n]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){e._tick()}),i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this._text[i]))while(this._reSpace.test(this._text[i]))e++,i--;while(/\S/.test(this._text[i])&&i>-1)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this._text[i]))while(this._reSpace.test(this._text[i]))e++,i++;while(/\S/.test(this._text[i])&&i<this._text.length)e++,i++;return t+e},findLineBoundaryLeft:function(t){var e=0,i=t-1;while(!/\n/.test(this._text[i])&&i>-1)e++,i--;return t-e},findLineBoundaryRight:function(t){var e=0,i=t;while(!/\n/.test(this._text[i])&&i<this._text.length)e++,i++;return t+e},searchWordBoundary:function(t,e){var i=this._text,o=this._reSpace.test(i[t])?t-1:t,r=i[o],a=n.reNonWord;while(!a.test(r)&&o>0&&o<i.length)o+=e,r=i[o];return a.test(r)&&(o+=1===e?0:1),o},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.selected=!1,t.isEditing&&t.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),i=this.selectionStart,n=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&i!==n||i!==e&&n!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,i){var o=i.slice(0,t),r=n.util.string.graphemeSplit(o).length;if(t===e)return{selectionStart:r,selectionEnd:r};var a=i.slice(t,e),s=n.util.string.graphemeSplit(a).length;return{selectionStart:r,selectionEnd:r+s}},fromGraphemeToStringSelection:function(t,e,i){var n=i.slice(0,t),o=n.join("").length;if(t===e)return{selectionStart:o,selectionEnd:o};var r=i.slice(t,e),a=r.join("").length;return{selectionStart:o,selectionEnd:o+a}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),o=i.lineIndex,r=i.charIndex,a=this.getValueOfPropertyAt(o,r,"fontSize")*this.lineHeight,s=e.leftOffset,l=this.calcTransformMatrix(),c={x:e.left+s,y:e.top+e.topOffset+a},u=this.canvas.getRetinaScaling(),h=this.canvas.upperCanvasEl,d=h.width/u,g=h.height/u,p=d-a,f=g-a,m=h.clientWidth/d,v=h.clientHeight/g;return c=n.util.transformPoint(c,l),c=n.util.transformPoint(c,this.canvas.viewportTransform),c.x*=m,c.y*=v,c.x<0&&(c.x=0),c.x>p&&(c.x=p),c.y<0&&(c.y=0),c.y>f&&(c.y=f),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var i,n,o=this.get2DCursorLocation(t,!0),r=this.get2DCursorLocation(e,!0),a=o.lineIndex,s=o.charIndex,l=r.lineIndex,c=r.charIndex;if(a!==l){if(this.styles[a])for(i=s;i<this._unwrappedTextLines[a].length;i++)delete this.styles[a][i];if(this.styles[l])for(i=c;i<this._unwrappedTextLines[l].length;i++)n=this.styles[l][i],n&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+i-c]=n);for(i=a+1;i<=l;i++)delete this.styles[i];this.shiftLineStyles(l,a-l)}else if(this.styles[a]){n=this.styles[a];var u,h,d=c-s;for(i=s;i<c;i++)delete n[i];for(h in this.styles[a])u=parseInt(h,10),u>=c&&(n[u-d]=n[h],delete n[h])}},shiftLineStyles:function(e,i){var n=t(this.styles);for(var o in this.styles){var r=parseInt(o,10);r>e&&(this.styles[r+i]=n[r],n[r-i]||delete this.styles[r])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,i,n,o){var r,a={},s=!1,l=this._unwrappedTextLines[e].length===i;for(var c in n||(n=1),this.shiftLineStyles(e,n),this.styles[e]&&(r=this.styles[e][0===i?i:i-1]),this.styles[e]){var u=parseInt(c,10);u>=i&&(s=!0,a[u-i]=this.styles[e][c],l&&0===i||delete this.styles[e][c])}var h=!1;s&&!l&&(this.styles[e+n]=a,h=!0),h&&n--;while(n>0)o&&o[n-1]?this.styles[e+n]={0:t(o[n-1])}:r?this.styles[e+n]={0:t(r)}:delete this.styles[e+n],n--;this._forceClearCache=!0},insertCharStyleObject:function(e,i,n,o){this.styles||(this.styles={});var r=this.styles[e],a=r?t(r):{};for(var s in n||(n=1),a){var l=parseInt(s,10);l>=i&&(r[l+n]=a[l],a[l-n]||delete r[l])}if(this._forceClearCache=!0,o)while(n--)Object.keys(o[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][i+n]=t(o[n]));else if(r){var c=r[i?i-1:1];while(c&&n--)this.styles[e][i+n]=t(c)}},insertNewStyleBlock:function(t,e,i){for(var n=this.get2DCursorLocation(e,!0),o=[0],r=0,a=0;a<t.length;a++)"\n"===t[a]?(r++,o[r]=0):o[r]++;o[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,o[0],i),i=i&&i.slice(o[0]+1)),r&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+o[0],r);for(a=1;a<r;a++)o[a]>0?this.insertCharStyleObject(n.lineIndex+a,0,o[a],i):i&&(this.styles[n.lineIndex+a][0]=i[0]),i=i&&i.slice(o[a]+1);o[a]>0&&this.insertCharStyleObject(n.lineIndex+a,0,o[a],i)},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),n.util.object.extend(n.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,i,n=this.getLocalPointer(t),o=0,r=0,a=0,s=0,l=0,c=0,u=this._textLines.length;c<u;c++){if(!(a<=n.y))break;a+=this.getHeightOfLine(c)*this.scaleY,l=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1))}e=this._getLineLeftOffset(l),r=e*this.scaleX,i=this._textLines[l],"rtl"===this.direction&&(n.x=this.width*this.scaleX-n.x+r);for(var h=0,d=i.length;h<d;h++){if(o=r,r+=this.__charBounds[l][h].kernedWidth*this.scaleX,!(r<=n.x))break;s++}return this._getNewSelectionStartFromOffset(n,o,r,s,d)},_getNewSelectionStartFromOffset:function(t,e,i,n,o){var r=t.x-e,a=i-t.x,s=a>r||a<0?0:1,l=n+s;return this.flipX&&(l=o-l),l>this._text.length&&(l=this._text.length),l}}),n.util.object.extend(n.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=n.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+t.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):n.document.body.appendChild(this.hiddenTextarea),n.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),n.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),n.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),n.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),n.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),n.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),n.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),n.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),n.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(n.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var i,o,r,a,s,l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,u=l.length,h=u-c,d=this.selectionStart,g=this.selectionEnd,p=d!==g;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=d>f.selectionStart;p?(i=this._text.slice(d,g),h+=g-d):u<c&&(i=m?this._text.slice(g+h,g):this._text.slice(d,d-h)),o=l.slice(f.selectionEnd-h,f.selectionEnd),i&&i.length&&(o.length&&(r=this.getSelectionStyles(d,d+1,!1),r=o.map((function(){return r[0]}))),p?(a=d,s=g):m?(a=g-i.length,s=g):(a=g,s=g+i.length),this.removeStyleFromTo(a,s)),o.length&&(e&&o.join("")===n.copiedText&&!n.disableStyleCopyPaste&&(r=n.copiedTextStyle),this.insertNewStyleBlock(o,d,r)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(n.copiedText=this.getSelectedText(),n.disableStyleCopyPaste?n.copiedTextStyle=null:n.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||n.window.clipboardData},_getWidthBeforeCursor:function(t,e){var i,n=this._getLineLeftOffset(t);return e>0&&(i=this.__charBounds[t][e-1],n+=i.left+i.width),n},getDownCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),o=n.lineIndex;if(o===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-i;var r=n.charIndex,a=this._getWidthBeforeCursor(o,r),s=this._getIndexOnLine(o+1,a),l=this._textLines[o].slice(r);return l.length+s+1+this.missingNewlineOffset(o)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),o=n.lineIndex;if(0===o||t.metaKey||33===t.keyCode)return-i;var r=n.charIndex,a=this._getWidthBeforeCursor(o,r),s=this._getIndexOnLine(o-1,a),l=this._textLines[o].slice(0,r),c=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+s-l.length+(1-c)},_getIndexOnLine:function(t,e){for(var i,n,o=this._textLines[t],r=this._getLineLeftOffset(t),a=r,s=0,l=0,c=o.length;l<c;l++)if(i=this.__charBounds[t][l].width,a+=i,a>e){n=!0;var u=a-i,h=a,d=Math.abs(u-e),g=Math.abs(h-e);s=g<d?l:l-1;break}return n||(s=o.length-1),s},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var i="get"+t+"CursorOffset",n=this[i](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,i){var n;if(t.altKey)n=this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;n=this["findLineBoundary"+i](this[e])}if(void 0!==typeof n&&this[e]!==n)return this[e]=n,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var i="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?i+="Shift":i+="outShift",this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){"undefined"===typeof e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,i,o){"undefined"===typeof o&&(o=i),o>i&&this.removeStyleFromTo(i,o);var r=n.util.string.graphemeSplit(t);this.insertNewStyleBlock(r,i,e),this._text=[].concat(this._text.slice(0,i),r,this._text.slice(o)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var t=n.util.toFixed,e=/  +/g;n.util.object.extend(n.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=!0,i=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",i?'text-decoration="'+i+'" ':"",'style="',this.getSvgStyles(e),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var i,n=[],o=[],r=t;this._setSVGBg(o);for(var a=0,s=this._textLines.length;a<s;a++)i=this._getLineLeftOffset(a),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(o,a,e+i,r),this._setSVGTextLineText(n,a,e+i,r),r+=this.getHeightOfLine(a);return{textSpans:n,textBgRects:o}},_createTextCharSpan:function(i,o,r,a){var s=i!==i.trim()||i.match(e),l=this.getSvgSpanStyles(o,s),c=l?'style="'+l+'"':"",u=o.deltaY,h="",d=n.Object.NUM_FRACTION_DIGITS;return u&&(h=' dy="'+t(u,d)+'" '),['<tspan x="',t(r,d),'" y="',t(a,d),'" ',h,c,">",n.util.string.escapeXml(i),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,i,n){var o,r,a,s,l,c=this.getHeightOfLine(e),u=-1!==this.textAlign.indexOf("justify"),h="",d=0,g=this._textLines[e];n+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,f=g.length-1;p<=f;p++)l=p===f||this.charSpacing,h+=g[p],a=this.__charBounds[e][p],0===d?(i+=a.kernedWidth-a.width,d+=a.width):d+=a.kernedWidth,u&&!l&&this._reSpaceAndTab.test(g[p])&&(l=!0),l||(o=o||this.getCompleteStyleDeclaration(e,p),r=this.getCompleteStyleDeclaration(e,p+1),l=this._hasStyleChangedForSvg(o,r)),l&&(s=this._getStyleDeclaration(e,p)||{},t.push(this._createTextCharSpan(h,s,i,n)),h="",o=r,i+=d,d=0)},_pushTextBgRect:function(e,i,o,r,a,s){var l=n.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(i),' x="',t(o,l),'" y="',t(r,l),'" width="',t(a,l),'" height="',t(s,l),'"></rect>\n')},_setSVGTextLineBg:function(t,e,i,n){for(var o,r,a=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),h=0,d=a.length;h<d;h++)o=this.__charBounds[e][h],r=this.getValueOfPropertyAt(e,h,"textBackgroundColor"),r!==u?(u&&this._pushTextBgRect(t,u,i+c,n,l,s),c=o.left,l=o.width,u=r):l+=o.kernedWidth;r&&this._pushTextBgRect(t,r,i+c,n,l,s)},_getFillAttributes:function(t){var e=t&&"string"===typeof t?new n.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e=0,i=0,n=0;n<t;n++)e+=this.getHeightOfLine(n);return i=this.getHeightOfLine(n),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){var e=n.Object.prototype.getSvgStyles.call(this,t);return e+" white-space: pre;"}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,i=0,n=0,o={},r=0;r<t.graphemeLines.length;r++)"\n"===t.graphemeText[n]&&r>0?(i=0,n++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[n])&&r>0&&(i++,n++),o[r]={line:e,offset:i},n+=t.graphemeLines[r].length,i+=t.graphemeLines[r].length;return o},styleHas:function(t,i){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[i];n&&(i=n.line)}return e.Text.prototype.styleHas.call(this,t,i)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,i,n=0,o=t+1,r=!1,a=this._styleMap[t],s=this._styleMap[t+1];for(var l in a&&(t=a.line,n=a.offset),s&&(o=s.line,r=o===t,e=s.offset),i="undefined"===typeof t?this.styles:{line:this.styles[t]},i)for(var c in i[l])if(c>=n&&(!r||c<e))for(var u in i[l][c])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[t];if(!i)return null;t=i.line,e=i.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var i,n=[];for(this.isWrapping=!0,i=0;i<t.length;i++)n=n.concat(this._wrapLine(t[i],i,e));return this.isWrapping=!1,n},_measureWord:function(t,e,i){var n,o=0,r=!0;i=i||0;for(var a=0,s=t.length;a<s;a++){var l=this._getGraphemeBox(t[a],e,a+i,n,r);o+=l.kernedWidth,n=t[a]}return o},_wrapLine:function(t,i,n,o){var r=0,a=this.splitByGrapheme,s=[],l=[],c=a?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),u="",h=0,d=a?"":" ",g=0,p=0,f=0,m=!0,v=this._getWidthOfCharSpacing();o=o||0;0===c.length&&c.push([]),n-=o;for(var b=0;b<c.length;b++)u=a?c[b]:e.util.string.graphemeSplit(c[b]),g=this._measureWord(u,i,h),h+=u.length,r+=p+g-v,r>n&&!m?(s.push(l),l=[],r=g,m=!0):r+=v,m||a||l.push(d),l=l.concat(u),p=a?0:this._measureWord([d],i,h),h++,m=!1,g>f&&(f=g);return b&&s.push(l),f+o>this.dynamicMinWidth&&(this.dynamicMinWidth=f-v+o),s},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var i=e.Text.prototype._splitTextIntoLines.call(this,t),n=this._wrapText(i.lines,this.width),o=new Array(n.length),r=0;r<n.length;r++)o[r]=n[r].join("");return i.lines=o,i.graphemeLines=n,i},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),e.Textbox.fromObject=function(t,i){return e.Object._fromObject("Textbox",t,i,"text")}}(e),function(){var t=n.controlsUtils,e=t.scaleSkewCursorStyleHandler,i=t.scaleCursorStyleHandler,o=t.scalingEqually,r=t.scalingYOrSkewingX,a=t.scalingXOrSkewingY,s=t.scaleOrSkewActionName,l=n.Object.prototype.controls;if(l.ml=new n.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:a,getActionName:s}),l.mr=new n.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:a,getActionName:s}),l.mb=new n.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:r,getActionName:s}),l.mt=new n.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:r,getActionName:s}),l.tl=new n.Control({x:-.5,y:-.5,cursorStyleHandler:i,actionHandler:o}),l.tr=new n.Control({x:.5,y:-.5,cursorStyleHandler:i,actionHandler:o}),l.bl=new n.Control({x:-.5,y:.5,cursorStyleHandler:i,actionHandler:o}),l.br=new n.Control({x:.5,y:.5,cursorStyleHandler:i,actionHandler:o}),l.mtr=new n.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),n.Textbox){var c=n.Textbox.prototype.controls={};c.mtr=l.mtr,c.tr=l.tr,c.br=l.br,c.tl=l.tl,c.bl=l.bl,c.mt=l.mt,c.mb=l.mb,c.mr=new n.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"}),c.ml=new n.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"})}}()},3053:function(t,e,i){"use strict";var n=i(602);function o(t,e,i){var o,r;if(i=i||0,!n(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,i);for(r=e.length,o=i;i>=0&&o<r;o+=1)if(e[o]===t)return o;return-1}t.exports=o},8592:function(t,e,i){"use strict";var n=i(602),o=i(6092),r=i(5573);function a(t,e,i){n(t)?o(t,e,i):r(t,e,i)}t.exports=a},6092:function(t){"use strict";function e(t,e,i){var n=0,o=t.length;for(i=i||null;n<o;n+=1)if(!1===e.call(i,t[n],n,t))break}t.exports=e},5573:function(t){"use strict";function e(t,e,i){var n;for(n in i=i||null,t)if(t.hasOwnProperty(n)&&!1===e.call(i,t[n],n,t))break}t.exports=e},9052:function(t,e,i){"use strict";var n=i(961),o=i(9886),r=i(2560),a=i(5393),s=i(602),l=i(5183),c=i(8592),u=/\s+/g;function h(){this.events=null,this.contexts=null}h.mixin=function(t){n(t.prototype,h.prototype)},h.prototype._getHandlerItem=function(t,e){var i={handler:t};return e&&(i.context=e),i},h.prototype._safeEvent=function(t){var e,i=this.events;return i||(i=this.events={}),t&&(e=i[t],e||(e=[],i[t]=e),i=e),i},h.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},h.prototype._indexOfContext=function(t){var e=this._safeContext(),i=0;while(e[i]){if(t===e[i][0])return i;i+=1}return-1},h.prototype._memorizeContext=function(t){var e,i;o(t)&&(e=this._safeContext(),i=this._indexOfContext(t),i>-1?e[i][1]+=1:e.push([t,1]))},h.prototype._forgetContext=function(t){var e,i;o(t)&&(e=this._safeContext(),i=this._indexOfContext(t),i>-1&&(e[i][1]-=1,e[i][1]<=0&&e.splice(i,1)))},h.prototype._bindEvent=function(t,e,i){var n=this._safeEvent(t);this._memorizeContext(i),n.push(this._getHandlerItem(e,i))},h.prototype.on=function(t,e,i){var n=this;r(t)?(t=t.split(u),c(t,(function(t){n._bindEvent(t,e,i)}))):a(t)&&(i=e,c(t,(function(t,e){n.on(e,t,i)})))},h.prototype.once=function(t,e,i){var n=this;if(a(t))return i=e,void c(t,(function(t,e){n.once(e,t,i)}));function o(){e.apply(i,arguments),n.off(t,o,i)}this.on(t,o,i)},h.prototype._spliceMatches=function(t,e){var i,n=0;if(s(t))for(i=t.length;n<i;n+=1)!0===e(t[n])&&(t.splice(n,1),i-=1,n-=1)},h.prototype._matchHandler=function(t){var e=this;return function(i){var n=t===i.handler;return n&&e._forgetContext(i.context),n}},h.prototype._matchContext=function(t){var e=this;return function(i){var n=t===i.context;return n&&e._forgetContext(i.context),n}},h.prototype._matchHandlerAndContext=function(t,e){var i=this;return function(n){var o=t===n.handler,r=e===n.context,a=o&&r;return a&&i._forgetContext(n.context),a}},h.prototype._offByEventName=function(t,e){var i=this,n=l(e),o=i._matchHandler(e);t=t.split(u),c(t,(function(t){var e=i._safeEvent(t);n?i._spliceMatches(e,o):(c(e,(function(t){i._forgetContext(t.context)})),i.events[t]=[])}))},h.prototype._offByHandler=function(t){var e=this,i=this._matchHandler(t);c(this._safeEvent(),(function(t){e._spliceMatches(t,i)}))},h.prototype._offByObject=function(t,e){var i,n=this;this._indexOfContext(t)<0?c(t,(function(t,e){n.off(e,t)})):r(e)?(i=this._matchContext(t),n._spliceMatches(this._safeEvent(e),i)):l(e)?(i=this._matchHandlerAndContext(e,t),c(this._safeEvent(),(function(t){n._spliceMatches(t,i)}))):(i=this._matchContext(t),c(this._safeEvent(),(function(t){n._spliceMatches(t,i)})))},h.prototype.off=function(t,e){r(t)?this._offByEventName(t,e):arguments.length?l(t)?this._offByHandler(t):a(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},h.prototype.fire=function(t){this.invoke.apply(this,arguments)},h.prototype.invoke=function(t){var e,i,n,o;if(!this.hasListener(t))return!0;e=this._safeEvent(t),i=Array.prototype.slice.call(arguments,1),n=0;while(e[n]){if(o=e[n],!1===o.handler.apply(o.context,i))return!1;n+=1}return!0},h.prototype.hasListener=function(t){return this.getListenerLength(t)>0},h.prototype.getListenerLength=function(t){var e=this._safeEvent(t);return e.length},t.exports=h},961:function(t){"use strict";function e(t,e){var i,n,o,r,a=Object.prototype.hasOwnProperty;for(o=1,r=arguments.length;o<r;o+=1)for(n in i=arguments[o],i)a.call(i,n)&&(t[n]=i[n]);return t}t.exports=e},1610:function(t,e,i){"use strict";var n=i(5695),o=i(3778);function r(t,e){for(var i=arguments,r=i[0],a=1,s=i.length;a<s;a+=1){if(n(r)||o(r))return;r=r[i[a]]}return r}t.exports=r},4564:function(t,e,i){"use strict";var n=i(5573);function o(t,e){var i=document.createElement("img"),o="";return n(e,(function(t,e){o+="&"+e+"="+t})),o=o.substring(1),i.src=t+"?"+o,i.style.display="none",document.body.appendChild(i),document.body.removeChild(i),i}t.exports=o},4729:function(t,e,i){"use strict";var n=i(5695),o=i(4564),r=6048e5;function a(t){var e=(new Date).getTime();return e-t>r}function s(t,e){var i="https://www.google-analytics.com/collect",r=location.hostname,s="event",l="use",c="TOAST UI "+t+" for "+r+": Statistics",u=window.localStorage.getItem(c);(n(window.tui)||!1!==window.tui.usageStatistics)&&(u&&!a(u)||(window.localStorage.setItem(c,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||o(i,{v:1,t:s,tid:e,cid:r,dp:r,dh:t,el:t,ec:l})}),1e3)))}t.exports=s},602:function(t){"use strict";function e(t){return t instanceof Array}t.exports=e},9886:function(t,e,i){"use strict";var n=i(5695),o=i(3778);function r(t){return!n(t)&&!o(t)}t.exports=r},5183:function(t){"use strict";function e(t){return t instanceof Function}t.exports=e},3778:function(t){"use strict";function e(t){return null===t}t.exports=e},5393:function(t){"use strict";function e(t){return t===Object(t)}t.exports=e},2560:function(t){"use strict";function e(t){return"string"===typeof t||t instanceof String}t.exports=e},5695:function(t){"use strict";function e(t){return void 0===t}t.exports=e},4426:function(t,e,i){t.exports=i(4486)},9406:function(t,e,i){t.exports=i(4877)},789:function(t,e,i){t.exports=i(7178)},381:function(t,e,i){t.exports=i(5603)},7636:function(t,e,i){t.exports=i(1206)},1899:function(t,e,i){t.exports=i(6174)},899:function(t,e,i){t.exports=i(57)},8005:function(t,e,i){t.exports=i(4741)},6562:function(t,e,i){t.exports=i(8368)},9131:function(t,e,i){t.exports=i(3739)},4383:function(t,e,i){t.exports=i(172)},6065:function(t,e,i){t.exports=i(4963)},1734:function(t,e,i){t.exports=i(7820)},2461:function(t,e,i){t.exports=i(5636)},5214:function(t,e,i){t.exports=i(5059)},6397:function(t,e,i){t.exports=i(3969)},8189:function(t,e,i){t.exports=i(6618)},9146:function(t,e,i){t.exports=i(5279)},4496:function(t,e,i){t.exports=i(9562)},3972:function(t,e,i){t.exports=i(652)},7172:function(t,e,i){t.exports=i(2813)},1845:function(t,e,i){t.exports=i(8664)},662:function(t,e,i){t.exports=i(1457)},711:function(t,e,i){t.exports=i(2937)},6623:function(t,e,i){t.exports=i(9297)},7077:function(t,e,i){t.exports=i(8026)},9856:function(t,e,i){t.exports=i(2044)},4230:function(t,e,i){t.exports=i(2214)},184:function(t,e,i){t.exports=i(9256)},3742:function(t,e,i){t.exports=i(5659)},1801:function(t){var e={rect:1,circle:2,triangle:1},i={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function n(t){var e=t.originX,i=t.originY,n=e.substring(0,1)+i.substring(0,1);t.startPoint=t.origins[n]}function o(t,e,i){var n=t.x,o=t.y,r=e.x,a=e.y,s=i*Math.PI/180,l=(r-n)*Math.cos(s)-(a-o)*Math.sin(s)+n,c=(r-n)*Math.sin(s)+(a-o)*Math.cos(s)+o;return{originX:n>l?"right":"left",originY:o>c?"bottom":"top"}}function r(t){return"center"===t.originX&&"center"===t.originY}function a(t,e){var i=e.getPointByOrigin("center","center"),n=-e.angle,r=o(i,t,n),a=r.originX,s=r.originY,l=e.getPointByOrigin(a,s),c=e.left-(i.x-l.x),u=e.top-(i.y-l.y);e.set({originX:a,originY:s,left:c,top:u}),e.setCoords()}function s(t,e){var i=e.startPoint,n=-e.angle,r=o(i,t,n),a=r.originX,s=r.originY;e.setPositionByOrigin(i,a,s),e.setCoords()}function l(t){var e=t.type,n=t.scaleX,o=t.scaleY,r=i[e],a=t[r.w]*n,s=t[r.h]*o;if(t.isRegular){var l=Math.max(n,o);a=t[r.w]*l,s=t[r.h]*l}var c={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};c[r.w]=a,c[r.h]=s,t.set(c)}function c(t,n){var o=n.type,r=n.strokeWidth,a=n.startPoint,s=e[o],l=i[o],c=!("triangle"!==n.type),u={},h=Math.abs(a.x-t.x)/s,d=Math.abs(a.y-t.y)/s;h>r&&(h-=r/s),d>r&&(d-=r/s),n.isRegular&&(h=d=Math.max(h,d),c&&(d=Math.sqrt(3)/2*h)),u[l.w]=h,u[l.h]=d,n.set(u)}t.exports={setOrigins:function(t){var e=t.getPointByOrigin("left","top"),i=t.getPointByOrigin("right","top"),n=t.getPointByOrigin("right","bottom"),o=t.getPointByOrigin("left","bottom");t.origins={lt:e,rt:i,rb:n,lb:o}},resize:function(t,e,i){r(t)&&(a(e,t),n(t)),i?l(t,e):c(e,t),s(e,t)},adjustOriginToCenter:function(t){var e=t.getPointByOrigin("center","center"),i=t.originX,n=t.originY,o=t.getPointByOrigin(i,n),r=t.left+(e.x-o.x),a=t.top+(e.y-o.y);t.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:r,top:a}),t.setCoords()}}},2221:function(t,e,i){i(5454),i(9173);var n=i(7545);t.exports=n.Array.from},5078:function(t,e,i){i(8118);var n=i(7545);t.exports=n.Array.isArray},6135:function(t,e,i){i(9106);var n=i(5607);t.exports=n("Array").concat},9510:function(t,e,i){i(1710);var n=i(5607);t.exports=n("Array").fill},3971:function(t,e,i){i(3436);var n=i(5607);t.exports=n("Array").filter},98:function(t,e,i){i(9823);var n=i(5607);t.exports=n("Array").forEach},2089:function(t,e,i){i(2276);var n=i(5607);t.exports=n("Array").indexOf},6209:function(t,e,i){i(3838);var n=i(5607);t.exports=n("Array").map},2671:function(t,e,i){i(5818);var n=i(5607);t.exports=n("Array").slice},1375:function(t,e,i){i(2178);var n=i(5607);t.exports=n("Array").splice},3528:function(t,e,i){i(665);var n=i(5607);t.exports=n("Function").bind},5739:function(t,e,i){i(8939),i(5454);var n=i(8703);t.exports=n},278:function(t,e,i){var n=i(3528),o=Function.prototype;t.exports=function(t){var e=t.bind;return t===o||t instanceof Function&&e===o.bind?n:e}},1484:function(t,e,i){var n=i(6135),o=Array.prototype;t.exports=function(t){var e=t.concat;return t===o||t instanceof Array&&e===o.concat?n:e}},7731:function(t,e,i){var n=i(9510),o=Array.prototype;t.exports=function(t){var e=t.fill;return t===o||t instanceof Array&&e===o.fill?n:e}},3669:function(t,e,i){var n=i(3971),o=Array.prototype;t.exports=function(t){var e=t.filter;return t===o||t instanceof Array&&e===o.filter?n:e}},2604:function(t,e,i){var n=i(2089),o=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===o||t instanceof Array&&e===o.indexOf?n:e}},263:function(t,e,i){var n=i(6209),o=Array.prototype;t.exports=function(t){var e=t.map;return t===o||t instanceof Array&&e===o.map?n:e}},7663:function(t,e,i){var n=i(2671),o=Array.prototype;t.exports=function(t){var e=t.slice;return t===o||t instanceof Array&&e===o.slice?n:e}},5063:function(t,e,i){var n=i(1375),o=Array.prototype;t.exports=function(t){var e=t.splice;return t===o||t instanceof Array&&e===o.splice?n:e}},6813:function(t,e,i){var n=i(3842),o=String.prototype;t.exports=function(t){var e=t.trim;return"string"===typeof t||t===o||t instanceof String&&e===o.trim?n:e}},6285:function(t,e,i){i(2666);var n=i(7545);t.exports=n.Number.parseInt},3213:function(t,e,i){i(3113);var n=i(7545),o=n.Object;t.exports=function(t,e){return o.create(t,e)}},3512:function(t,e,i){i(297);var n=i(7545),o=n.Object,r=t.exports=function(t,e,i){return o.defineProperty(t,e,i)};o.defineProperty.sham&&(r.sham=!0)},8168:function(t,e,i){i(9234);var n=i(7545);t.exports=n.Object.getPrototypeOf},8651:function(t,e,i){i(2647);var n=i(7545);t.exports=n.Object.keys},3083:function(t,e,i){i(3222);var n=i(7545);t.exports=n.Object.setPrototypeOf},2987:function(t,e,i){i(4859);var n=i(7545);t.exports=n.parseFloat},2239:function(t,e,i){i(5706);var n=i(7545);t.exports=n.parseInt},3154:function(t,e,i){i(4242),i(8939),i(6663),i(9021),i(7884),i(8885),i(1868),i(5454);var n=i(7545);t.exports=n.Promise},6577:function(t,e,i){i(5397);var n=i(7545);t.exports=n.Reflect.construct},3842:function(t,e,i){i(957);var n=i(5607);t.exports=n("String").trim},5008:function(t,e,i){i(9106),i(6663),i(6187),i(9781),i(492),i(6681),i(9594),i(3665),i(9017),i(1250),i(9786),i(503),i(6565),i(9322),i(3610),i(6886),i(3514),i(8671),i(8556),i(1367);var n=i(7545);t.exports=n.Symbol},994:function(t,e,i){i(8939),i(6663),i(5454),i(3665);var n=i(9207);t.exports=n.f("iterator")},2813:function(t,e,i){var n=i(3822);t.exports=n},8664:function(t,e,i){var n=i(1434);t.exports=n},1457:function(t,e,i){var n=i(7710);t.exports=n},2937:function(t,e,i){var n=i(4741);t.exports=n},9297:function(t,e,i){var n=i(4963);t.exports=n},8026:function(t,e,i){var n=i(7820);t.exports=n},2044:function(t,e,i){var n=i(8980);t.exports=n},2214:function(t,e,i){var n=i(6672);t.exports=n},9256:function(t,e,i){var n=i(2285);i(177),i(9031),i(6658),i(1875),i(8658),i(4592),i(6680),t.exports=n},5659:function(t,e,i){var n=i(8535);t.exports=n},6235:function(t,e,i){var n=i(6447),o=i(9288);t.exports=function(t){if(n(t))return t;throw TypeError(o(t)+" is not a function")}},1404:function(t,e,i){var n=i(2091),o=i(9288);t.exports=function(t){if(n(t))return t;throw TypeError(o(t)+" is not a constructor")}},7757:function(t,e,i){var n=i(6447);t.exports=function(t){if("object"===typeof t||n(t))return t;throw TypeError("Can't set "+String(t)+" as a prototype")}},7423:function(t){t.exports=function(){}},6961:function(t){t.exports=function(t,e,i){if(t instanceof e)return t;throw TypeError("Incorrect "+(i?i+" ":"")+"invocation")}},1138:function(t,e,i){var n=i(5744);t.exports=function(t){if(n(t))return t;throw TypeError(String(t)+" is not an object")}},2724:function(t,e,i){"use strict";var n=i(1795),o=i(7739),r=i(4104);t.exports=function(t){var e=n(this),i=r(e),a=arguments.length,s=o(a>1?arguments[1]:void 0,i),l=a>2?arguments[2]:void 0,c=void 0===l?i:o(l,i);while(c>s)e[s++]=t;return e}},7397:function(t,e,i){"use strict";var n=i(454).forEach,o=i(424),r=o("forEach");t.exports=r?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},841:function(t,e,i){"use strict";var n=i(8043),o=i(1795),r=i(1635),a=i(6109),s=i(2091),l=i(4104),c=i(9361),u=i(1669),h=i(8703);t.exports=function(t){var e=o(t),i=s(this),d=arguments.length,g=d>1?arguments[1]:void 0,p=void 0!==g;p&&(g=n(g,d>2?arguments[2]:void 0,2));var f,m,v,b,x,y,_=h(e),w=0;if(!_||this==Array&&a(_))for(f=l(e),m=i?new this(f):Array(f);f>w;w++)y=p?g(e[w],w):e[w],c(m,w,y);else for(b=u(e,_),x=b.next,m=i?new this:[];!(v=x.call(b)).done;w++)y=p?r(b,g,[v.value,w],!0):v.value,c(m,w,y);return m.length=w,m}},8180:function(t,e,i){var n=i(101),o=i(7739),r=i(4104),a=function(t){return function(e,i,a){var s,l=n(e),c=r(l),u=o(a,c);if(t&&i!=i){while(c>u)if(s=l[u++],s!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},454:function(t,e,i){var n=i(8043),o=i(2202),r=i(1795),a=i(4104),s=i(1321),l=[].push,c=function(t){var e=1==t,i=2==t,c=3==t,u=4==t,h=6==t,d=7==t,g=5==t||h;return function(p,f,m,v){for(var b,x,y=r(p),_=o(y),w=n(f,m,3),k=a(_),C=0,S=v||s,I=e?S(p,k):i||d?S(p,0):void 0;k>C;C++)if((g||C in _)&&(b=_[C],x=w(b,C,y),t))if(e)I[C]=x;else if(x)switch(t){case 3:return!0;case 5:return b;case 6:return C;case 2:l.call(I,b)}else switch(t){case 4:return!1;case 7:l.call(I,b)}return h?-1:c||u?u:I}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},242:function(t,e,i){var n=i(6192),o=i(8182),r=i(4218),a=o("species");t.exports=function(t){return r>=51||!n((function(){var e=[],i=e.constructor={};return i[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},424:function(t,e,i){"use strict";var n=i(6192);t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}},3712:function(t,e,i){var n=i(4770),o=i(2091),r=i(5744),a=i(8182),s=a("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,o(e)&&(e===Array||n(e.prototype))?e=void 0:r(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}},1321:function(t,e,i){var n=i(3712);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},1635:function(t,e,i){var n=i(1138),o=i(6639);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(a){o(t,"throw",a)}}},9770:function(t,e,i){var n=i(8182),o=n("iterator"),r=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){r=!0}};s[o]=function(){return this},Array.from(s,(function(){throw 2}))}catch(l){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var n={};n[o]=function(){return{next:function(){return{done:i=!0}}}},t(n)}catch(l){}return i}},9272:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},4696:function(t,e,i){var n=i(3471),o=i(6447),r=i(9272),a=i(8182),s=a("toStringTag"),l="Arguments"==r(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(i){}};t.exports=n?r:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=c(e=Object(t),s))?i:l?r(e):"Object"==(n=r(e))&&o(e.callee)?"Arguments":n}},4635:function(t,e,i){var n=i(6192);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},5148:function(t,e,i){"use strict";var n=i(4413).IteratorPrototype,o=i(2853),r=i(774),a=i(1284),s=i(7771),l=function(){return this};t.exports=function(t,e,i){var c=e+" Iterator";return t.prototype=o(n,{next:r(1,i)}),a(t,c,!1,!0),s[c]=l,t}},8711:function(t,e,i){var n=i(69),o=i(2760),r=i(774);t.exports=n?function(t,e,i){return o.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},774:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9361:function(t,e,i){"use strict";var n=i(77),o=i(2760),r=i(774);t.exports=function(t,e,i){var a=n(e);a in t?o.f(t,a,r(0,i)):t[a]=i}},7218:function(t,e,i){"use strict";var n=i(3085),o=i(5546),r=i(2282),a=i(6447),s=i(5148),l=i(9341),c=i(4469),u=i(1284),h=i(8711),d=i(9482),g=i(8182),p=i(7771),f=i(4413),m=r.PROPER,v=r.CONFIGURABLE,b=f.IteratorPrototype,x=f.BUGGY_SAFARI_ITERATORS,y=g("iterator"),_="keys",w="values",k="entries",C=function(){return this};t.exports=function(t,e,i,r,g,f,S){s(i,e,r);var I,M,T,E=function(t){if(t===g&&j)return j;if(!x&&t in L)return L[t];switch(t){case _:return function(){return new i(this,t)};case w:return function(){return new i(this,t)};case k:return function(){return new i(this,t)}}return function(){return new i(this)}},A=e+" Iterator",D=!1,L=t.prototype,O=L[y]||L["@@iterator"]||g&&L[g],j=!x&&O||E(g),P="Array"==e&&L.entries||O;if(P&&(I=l(P.call(new t)),I!==Object.prototype&&I.next&&(o||l(I)===b||(c?c(I,b):a(I[y])||d(I,y,C)),u(I,A,!0,!0),o&&(p[A]=C))),m&&g==w&&O&&O.name!==w&&(!o&&v?h(L,"name",w):(D=!0,j=function(){return O.call(this)})),g)if(M={values:E(w),keys:f?j:E(_),entries:E(k)},S)for(T in M)(x||D||!(T in L))&&d(L,T,M[T]);else n({target:e,proto:!0,forced:x||D},M);return o&&!S||L[y]===j||d(L,y,j,{name:g}),p[e]=j,M}},1488:function(t,e,i){var n=i(7545),o=i(4500),r=i(9207),a=i(2760).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:r.f(t)})}},69:function(t,e,i){var n=i(6192);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},7449:function(t,e,i){var n=i(8576),o=i(5744),r=n.document,a=o(r)&&o(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},7365:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(t){t.exports="object"==typeof window},9347:function(t,e,i){var n=i(8989),o=i(8576);t.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==o.Pebble},9536:function(t,e,i){var n=i(8989);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},224:function(t,e,i){var n=i(9272),o=i(8576);t.exports="process"==n(o.process)},5914:function(t,e,i){var n=i(8989);t.exports=/web0s(?!.*chrome)/i.test(n)},8989:function(t,e,i){var n=i(150);t.exports=n("navigator","userAgent")||""},4218:function(t,e,i){var n,o,r=i(8576),a=i(8989),s=r.process,l=r.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u?(n=u.split("."),o=n[0]<4?1:n[0]+n[1]):a&&(n=a.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/),n&&(o=n[1]))),t.exports=o&&+o},5607:function(t,e,i){var n=i(7545);t.exports=function(t){return n[t+"Prototype"]}},2952:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(t,e,i){"use strict";var n=i(8576),o=i(6447),r=i(5141).f,a=i(9245),s=i(7545),l=i(8043),c=i(8711),u=i(4500),h=function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var i,d,g,p,f,m,v,b,x,y=t.target,_=t.global,w=t.stat,k=t.proto,C=_?n:w?n[y]:(n[y]||{}).prototype,S=_?s:s[y]||c(s,y,{})[y],I=S.prototype;for(p in e)i=a(_?p:y+(w?".":"#")+p,t.forced),d=!i&&C&&u(C,p),m=S[p],d&&(t.noTargetGet?(x=r(C,p),v=x&&x.value):v=C[p]),f=d&&v?v:e[p],d&&typeof m===typeof f||(b=t.bind&&d?l(f,n):t.wrap&&d?h(f):k&&o(f)?l(Function.call,f):f,(t.sham||f&&f.sham||m&&m.sham)&&c(b,"sham",!0),c(S,p,b),k&&(g=y+"Prototype",u(s,g)||c(s,g,{}),c(s[g],p,f),t.real&&I&&!I[p]&&c(I,p,f)))}},6192:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},8043:function(t,e,i){var n=i(6235);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}}},6782:function(t,e,i){"use strict";var n=i(6235),o=i(5744),r=[].slice,a={},s=function(t,e,i){if(!(e in a)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";a[e]=Function("C,a","return new C("+n.join(",")+")")}return a[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=r.call(arguments,1),a=function(){var n=i.concat(r.call(arguments));return this instanceof a?s(e,n.length,n):e.apply(t,n)};return o(e.prototype)&&(a.prototype=e.prototype),a}},2282:function(t,e,i){var n=i(69),o=i(4500),r=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(r,"name"),l=s&&"something"===function(){}.name,c=s&&(!n||n&&a(r,"name").configurable);t.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},150:function(t,e,i){var n=i(7545),o=i(8576),r=i(6447),a=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?a(n[t])||a(o[t]):n[t]&&n[t][e]||o[t]&&o[t][e]}},8703:function(t,e,i){var n=i(4696),o=i(5037),r=i(7771),a=i(8182),s=a("iterator");t.exports=function(t){if(void 0!=t)return o(t,s)||o(t,"@@iterator")||r[n(t)]}},1669:function(t,e,i){var n=i(6235),o=i(1138),r=i(8703);t.exports=function(t,e){var i=arguments.length<2?r(t):e;if(n(i))return o(i.call(t));throw TypeError(String(t)+" is not iterable")}},5037:function(t,e,i){var n=i(6235);t.exports=function(t,e){var i=t[e];return null==i?void 0:n(i)}},8576:function(t,e,i){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||function(){return this}()||Function("return this")()},4500:function(t,e,i){var n=i(1795),o={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return o.call(n(t),e)}},4535:function(t){t.exports={}},3681:function(t,e,i){var n=i(8576);t.exports=function(t,e){var i=n.console;i&&i.error&&(1===arguments.length?i.error(t):i.error(t,e))}},7403:function(t,e,i){var n=i(150);t.exports=n("document","documentElement")},188:function(t,e,i){var n=i(69),o=i(6192),r=i(7449);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},2202:function(t,e,i){var n=i(6192),o=i(9272),r="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?r.call(t,""):Object(t)}:Object},9516:function(t,e,i){var n=i(6447),o=i(6434),r=Function.toString;n(o.inspectSource)||(o.inspectSource=function(t){return r.call(t)}),t.exports=o.inspectSource},273:function(t,e,i){var n=i(5744),o=i(8711);t.exports=function(t,e){n(e)&&"cause"in e&&o(t,"cause",t.cause)}},3326:function(t,e,i){var n,o,r,a=i(8921),s=i(8576),l=i(5744),c=i(8711),u=i(4500),h=i(6434),d=i(9766),g=i(4535),p="Object already initialized",f=s.WeakMap,m=function(t){return r(t)?o(t):n(t,{})},v=function(t){return function(e){var i;if(!l(e)||(i=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}};if(a||h.state){var b=h.state||(h.state=new f),x=b.get,y=b.has,_=b.set;n=function(t,e){if(y.call(b,t))throw new TypeError(p);return e.facade=t,_.call(b,t,e),e},o=function(t){return x.call(b,t)||{}},r=function(t){return y.call(b,t)}}else{var w=d("state");g[w]=!0,n=function(t,e){if(u(t,w))throw new TypeError(p);return e.facade=t,c(t,w,e),e},o=function(t){return u(t,w)?t[w]:{}},r=function(t){return u(t,w)}}t.exports={set:n,get:o,has:r,enforce:m,getterFor:v}},6109:function(t,e,i){var n=i(8182),o=i(7771),r=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[r]===t)}},4770:function(t,e,i){var n=i(9272);t.exports=Array.isArray||function(t){return"Array"==n(t)}},6447:function(t){t.exports=function(t){return"function"===typeof t}},2091:function(t,e,i){var n=i(6192),o=i(6447),r=i(4696),a=i(150),s=i(9516),l=[],c=a("Reflect","construct"),u=/^\s*(?:class|function)\b/,h=u.exec,d=!u.exec((function(){})),g=function(t){if(!o(t))return!1;try{return c(Object,l,t),!0}catch(e){return!1}},p=function(t){if(!o(t))return!1;switch(r(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return d||!!h.call(u,s(t))};t.exports=!c||n((function(){var t;return g(g.call)||!g(Object)||!g((function(){t=!0}))||t}))?p:g},9245:function(t,e,i){var n=i(6192),o=i(6447),r=/#|\.prototype\./,a=function(t,e){var i=l[s(t)];return i==u||i!=c&&(o(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a},5744:function(t,e,i){var n=i(6447);t.exports=function(t){return"object"===typeof t?null!==t:n(t)}},5546:function(t){t.exports=!0},3236:function(t,e,i){var n=i(6447),o=i(150),r=i(615);t.exports=r?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return n(e)&&Object(t)instanceof e}},3442:function(t,e,i){var n=i(1138),o=i(6109),r=i(4104),a=i(8043),s=i(1669),l=i(8703),c=i(6639),u=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,i){var h,d,g,p,f,m,v,b=i&&i.that,x=!(!i||!i.AS_ENTRIES),y=!(!i||!i.IS_ITERATOR),_=!(!i||!i.INTERRUPTED),w=a(e,b,1+x+_),k=function(t){return h&&c(h,"normal",t),new u(!0,t)},C=function(t){return x?(n(t),_?w(t[0],t[1],k):w(t[0],t[1])):_?w(t,k):w(t)};if(y)h=t;else{if(d=l(t),!d)throw TypeError(String(t)+" is not iterable");if(o(d)){for(g=0,p=r(t);p>g;g++)if(f=C(t[g]),f&&f instanceof u)return f;return new u(!1)}h=s(t,d)}m=h.next;while(!(v=m.call(h)).done){try{f=C(v.value)}catch(S){c(h,"throw",S)}if("object"==typeof f&&f&&f instanceof u)return f}return new u(!1)}},6639:function(t,e,i){var n=i(1138),o=i(5037);t.exports=function(t,e,i){var r,a;n(t);try{if(r=o(t,"return"),!r){if("throw"===e)throw i;return i}r=r.call(t)}catch(s){a=!0,r=s}if("throw"===e)throw i;if(a)throw r;return n(r),i}},4413:function(t,e,i){"use strict";var n,o,r,a=i(6192),s=i(6447),l=i(2853),c=i(9341),u=i(9482),h=i(8182),d=i(5546),g=h("iterator"),p=!1;[].keys&&(r=[].keys(),"next"in r?(o=c(c(r)),o!==Object.prototype&&(n=o)):p=!0);var f=void 0==n||a((function(){var t={};return n[g].call(t)!==t}));f?n={}:d&&(n=l(n)),s(n[g])||u(n,g,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},7771:function(t){t.exports={}},4104:function(t,e,i){var n=i(8445);t.exports=function(t){return n(t.length)}},2950:function(t,e,i){var n,o,r,a,s,l,c,u,h=i(8576),d=i(5141).f,g=i(7160).set,p=i(9536),f=i(9347),m=i(5914),v=i(224),b=h.MutationObserver||h.WebKitMutationObserver,x=h.document,y=h.process,_=h.Promise,w=d(h,"queueMicrotask"),k=w&&w.value;k||(n=function(){var t,e;v&&(t=y.domain)&&t.exit();while(o){e=o.fn,o=o.next;try{e()}catch(i){throw o?a():r=void 0,i}}r=void 0,t&&t.enter()},p||v||m||!b||!x?!f&&_&&_.resolve?(c=_.resolve(void 0),c.constructor=_,u=c.then,a=function(){u.call(c,n)}):a=v?function(){y.nextTick(n)}:function(){g.call(h,n)}:(s=!0,l=x.createTextNode(""),new b(n).observe(l,{characterData:!0}),a=function(){l.data=s=!s})),t.exports=k||function(t){var e={fn:t,next:void 0};r&&(r.next=e),o||(o=e,a()),r=e}},4471:function(t,e,i){var n=i(8576);t.exports=n.Promise},3045:function(t,e,i){var n=i(4218),o=i(6192);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},4551:function(t,e,i){var n=i(6192),o=i(8182),r=i(5546),a=o("iterator");t.exports=!n((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,i="";return t.pathname="c%20d",e.forEach((function(t,n){e["delete"]("b"),i+=n+t})),r&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}))},8921:function(t,e,i){var n=i(8576),o=i(6447),r=i(9516),a=n.WeakMap;t.exports=o(a)&&/native code/.test(r(a))},9438:function(t,e,i){"use strict";var n=i(6235),o=function(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)};t.exports.f=function(t){return new o(t)}},15:function(t,e,i){var n=i(8576),o=i(6192),r=i(4845),a=i(4277).trim,s=i(1450),l=n.parseFloat,c=n.Symbol,u=c&&c.iterator,h=1/l(s+"-0")!==-1/0||u&&!o((function(){l(Object(u))}));t.exports=h?function(t){var e=a(r(t)),i=l(e);return 0===i&&"-"==e.charAt(0)?-0:i}:l},2558:function(t,e,i){var n=i(8576),o=i(6192),r=i(4845),a=i(4277).trim,s=i(1450),l=n.parseInt,c=n.Symbol,u=c&&c.iterator,h=/^[+-]?0[Xx]/,d=8!==l(s+"08")||22!==l(s+"0x16")||u&&!o((function(){l(Object(u))}));t.exports=d?function(t,e){var i=a(r(t));return l(i,e>>>0||(h.test(i)?16:10))}:l},2503:function(t,e,i){"use strict";var n=i(69),o=i(6192),r=i(7653),a=i(4750),s=i(6007),l=i(1795),c=i(2202),u=Object.assign,h=Object.defineProperty;t.exports=!u||o((function(){if(n&&1!==u({b:1},u(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol(),o="abcdefghijklmnopqrst";return t[i]=7,o.split("").forEach((function(t){e[t]=t})),7!=u({},t)[i]||r(u({},e)).join("")!=o}))?function(t,e){var i=l(t),o=arguments.length,u=1,h=a.f,d=s.f;while(o>u){var g,p=c(arguments[u++]),f=h?r(p).concat(h(p)):r(p),m=f.length,v=0;while(m>v)g=f[v++],n&&!d.call(p,g)||(i[g]=p[g])}return i}:u},2853:function(t,e,i){var n,o=i(1138),r=i(1187),a=i(2952),s=i(4535),l=i(7403),c=i(7449),u=i(9766),h=">",d="<",g="prototype",p="script",f=u("IE_PROTO"),m=function(){},v=function(t){return d+p+h+t+d+"/"+p+h},b=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},x=function(){var t,e=c("iframe"),i="java"+p+":";return e.style.display="none",l.appendChild(e),e.src=String(i),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},y=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}y="undefined"!=typeof document?document.domain&&n?b(n):x():b(n);var t=a.length;while(t--)delete y[g][a[t]];return y()};s[f]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(m[g]=o(t),i=new m,m[g]=null,i[f]=t):i=y(),void 0===e?i:r(i,e)}},1187:function(t,e,i){var n=i(69),o=i(2760),r=i(1138),a=i(7653);t.exports=n?Object.defineProperties:function(t,e){r(t);var i,n=a(e),s=n.length,l=0;while(s>l)o.f(t,i=n[l++],e[i]);return t}},2760:function(t,e,i){var n=i(69),o=i(188),r=i(1138),a=i(77),s=Object.defineProperty;e.f=n?s:function(t,e,i){if(r(t),e=a(e),r(i),o)try{return s(t,e,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},5141:function(t,e,i){var n=i(69),o=i(6007),r=i(774),a=i(101),s=i(77),l=i(4500),c=i(188),u=Object.getOwnPropertyDescriptor;e.f=n?u:function(t,e){if(t=a(t),e=s(e),c)try{return u(t,e)}catch(i){}if(l(t,e))return r(!o.f.call(t,e),t[e])}},4052:function(t,e,i){var n=i(101),o=i(2092).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?s(t):o(n(t))}},2092:function(t,e,i){var n=i(7934),o=i(2952),r=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},4750:function(t,e){e.f=Object.getOwnPropertySymbols},9341:function(t,e,i){var n=i(4500),o=i(6447),r=i(1795),a=i(9766),s=i(4635),l=a("IE_PROTO"),c=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){var e=r(t);if(n(e,l))return e[l];var i=e.constructor;return o(i)&&e instanceof i?i.prototype:e instanceof Object?c:null}},7934:function(t,e,i){var n=i(4500),o=i(101),r=i(8180).indexOf,a=i(4535);t.exports=function(t,e){var i,s=o(t),l=0,c=[];for(i in s)!n(a,i)&&n(s,i)&&c.push(i);while(e.length>l)n(s,i=e[l++])&&(~r(c,i)||c.push(i));return c}},7653:function(t,e,i){var n=i(7934),o=i(2952);t.exports=Object.keys||function(t){return n(t,o)}},6007:function(t,e){"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!i.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},4469:function(t,e,i){var n=i(1138),o=i(7757);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(i,[]),e=i instanceof Array}catch(r){}return function(i,r){return n(i),o(r),e?t.call(i,r):i.__proto__=r,i}}():void 0)},158:function(t,e,i){"use strict";var n=i(3471),o=i(4696);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},380:function(t,e,i){var n=i(6447),o=i(5744);t.exports=function(t,e){var i,r;if("string"===e&&n(i=t.toString)&&!o(r=i.call(t)))return r;if(n(i=t.valueOf)&&!o(r=i.call(t)))return r;if("string"!==e&&n(i=t.toString)&&!o(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},7545:function(t){t.exports={}},892:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},9126:function(t,e,i){var n=i(1138),o=i(5744),r=i(9438);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var i=r.f(t),a=i.resolve;return a(e),i.promise}},533:function(t,e,i){var n=i(9482);t.exports=function(t,e,i){for(var o in e)i&&i.unsafe&&t[o]?t[o]=e[o]:n(t,o,e[o],i);return t}},9482:function(t,e,i){var n=i(8711);t.exports=function(t,e,i,o){o&&o.enumerable?t[e]=i:n(t,e,i)}},3209:function(t){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},7613:function(t,e,i){var n=i(8576);t.exports=function(t,e){try{Object.defineProperty(n,t,{value:e,configurable:!0,writable:!0})}catch(i){n[t]=e}return e}},3656:function(t,e,i){"use strict";var n=i(150),o=i(2760),r=i(8182),a=i(69),s=r("species");t.exports=function(t){var e=n(t),i=o.f;a&&e&&!e[s]&&i(e,s,{configurable:!0,get:function(){return this}})}},1284:function(t,e,i){var n=i(3471),o=i(2760).f,r=i(8711),a=i(4500),s=i(158),l=i(8182),c=l("toStringTag");t.exports=function(t,e,i,l){if(t){var u=i?t:t.prototype;a(u,c)||o(u,c,{configurable:!0,value:e}),l&&!n&&r(u,"toString",s)}}},9766:function(t,e,i){var n=i(8717),o=i(2759),r=n("keys");t.exports=function(t){return r[t]||(r[t]=o(t))}},6434:function(t,e,i){var n=i(8576),o=i(7613),r="__core-js_shared__",a=n[r]||o(r,{});t.exports=a},8717:function(t,e,i){var n=i(5546),o=i(6434);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.18.2",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(t,e,i){var n=i(1138),o=i(1404),r=i(8182),a=r("species");t.exports=function(t,e){var i,r=n(t).constructor;return void 0===r||void 0==(i=n(r)[a])?e:o(i)}},863:function(t,e,i){var n=i(1941),o=i(4845),r=i(3209),a=function(t){return function(e,i){var a,s,l=o(r(e)),c=n(i),u=l.length;return c<0||c>=u?t?"":void 0:(a=l.charCodeAt(c),a<55296||a>56319||c+1===u||(s=l.charCodeAt(c+1))<56320||s>57343?t?l.charAt(c):a:t?l.slice(c,c+2):s-56320+(a-55296<<10)+65536)}};t.exports={codeAt:a(!1),charAt:a(!0)}},7977:function(t){"use strict";var e=2147483647,i=36,n=1,o=26,r=38,a=700,s=72,l=128,c="-",u=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",g=i-n,p=Math.floor,f=String.fromCharCode,m=function(t){var e=[],i=0,n=t.length;while(i<n){var o=t.charCodeAt(i++);if(o>=55296&&o<=56319&&i<n){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&o)<<10)+(1023&r)+65536):(e.push(o),i--)}else e.push(o)}return e},v=function(t){return t+22+75*(t<26)},b=function(t,e,n){var s=0;for(t=n?p(t/a):t>>1,t+=p(t/e);t>g*o>>1;s+=i)t=p(t/g);return p(s+(g+1)*t/(t+r))},x=function(t){var r=[];t=m(t);var a,u,h=t.length,g=l,x=0,y=s;for(a=0;a<t.length;a++)u=t[a],u<128&&r.push(f(u));var _=r.length,w=_;_&&r.push(c);while(w<h){var k=e;for(a=0;a<t.length;a++)u=t[a],u>=g&&u<k&&(k=u);var C=w+1;if(k-g>p((e-x)/C))throw RangeError(d);for(x+=(k-g)*C,g=k,a=0;a<t.length;a++){if(u=t[a],u<g&&++x>e)throw RangeError(d);if(u==g){for(var S=x,I=i;;I+=i){var M=I<=y?n:I>=y+o?o:I-y;if(S<M)break;var T=S-M,E=i-M;r.push(f(v(M+T%E))),S=p(T/E)}r.push(f(v(S))),y=b(x,C,w==_),x=0,++w}}++x,++g}return r.join("")};t.exports=function(t){var e,i,n=[],o=t.toLowerCase().replace(h,".").split(".");for(e=0;e<o.length;e++)i=o[e],n.push(u.test(i)?"xn--"+x(i):i);return n.join(".")}},6815:function(t,e,i){var n=i(2282).PROPER,o=i(6192),r=i(1450),a="​᠎";t.exports=function(t){return o((function(){return!!r[t]()||a[t]()!==a||n&&r[t].name!==t}))}},4277:function(t,e,i){var n=i(3209),o=i(4845),r=i(1450),a="["+r+"]",s=RegExp("^"+a+a+"*"),l=RegExp(a+a+"*$"),c=function(t){return function(e){var i=o(n(e));return 1&t&&(i=i.replace(s,"")),2&t&&(i=i.replace(l,"")),i}};t.exports={start:c(1),end:c(2),trim:c(3)}},7160:function(t,e,i){var n,o,r,a,s=i(8576),l=i(6447),c=i(6192),u=i(8043),h=i(7403),d=i(7449),g=i(9536),p=i(224),f=s.setImmediate,m=s.clearImmediate,v=s.process,b=s.MessageChannel,x=s.Dispatch,y=0,_={},w="onreadystatechange";try{n=s.location}catch(M){}var k=function(t){if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},C=function(t){return function(){k(t)}},S=function(t){k(t.data)},I=function(t){s.postMessage(String(t),n.protocol+"//"+n.host)};f&&m||(f=function(t){var e=[],i=arguments.length,n=1;while(i>n)e.push(arguments[n++]);return _[++y]=function(){(l(t)?t:Function(t)).apply(void 0,e)},o(y),y},m=function(t){delete _[t]},p?o=function(t){v.nextTick(C(t))}:x&&x.now?o=function(t){x.now(C(t))}:b&&!g?(r=new b,a=r.port2,r.port1.onmessage=S,o=u(a.postMessage,a,1)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&n&&"file:"!==n.protocol&&!c(I)?(o=I,s.addEventListener("message",S,!1)):o=w in d("script")?function(t){h.appendChild(d("script"))[w]=function(){h.removeChild(this),k(t)}}:function(t){setTimeout(C(t),0)}),t.exports={set:f,clear:m}},7739:function(t,e,i){var n=i(1941),o=Math.max,r=Math.min;t.exports=function(t,e){var i=n(t);return i<0?o(i+e,0):r(i,e)}},101:function(t,e,i){var n=i(2202),o=i(3209);t.exports=function(t){return n(o(t))}},1941:function(t){var e=Math.ceil,i=Math.floor;t.exports=function(t){var n=+t;return n!==n||0===n?0:(n>0?i:e)(n)}},8445:function(t,e,i){var n=i(1941),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},1795:function(t,e,i){var n=i(3209);t.exports=function(t){return Object(n(t))}},7888:function(t,e,i){var n=i(5744),o=i(3236),r=i(5037),a=i(380),s=i(8182),l=s("toPrimitive");t.exports=function(t,e){if(!n(t)||o(t))return t;var i,s=r(t,l);if(s){if(void 0===e&&(e="default"),i=s.call(t,e),!n(i)||o(i))return i;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},77:function(t,e,i){var n=i(7888),o=i(3236);t.exports=function(t){var e=n(t,"string");return o(e)?e:String(e)}},3471:function(t,e,i){var n=i(8182),o=n("toStringTag"),r={};r[o]="z",t.exports="[object z]"===String(r)},4845:function(t,e,i){var n=i(4696);t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)}},9288:function(t){t.exports=function(t){try{return String(t)}catch(e){return"Object"}}},2759:function(t){var e=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+i).toString(36)}},615:function(t,e,i){var n=i(3045);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},9207:function(t,e,i){var n=i(8182);e.f=n},8182:function(t,e,i){var n=i(8576),o=i(8717),r=i(4500),a=i(2759),s=i(3045),l=i(615),c=o("wks"),u=n.Symbol,h=l?u:u&&u.withoutSetter||a;t.exports=function(t){return r(c,t)&&(s||"string"==typeof c[t])||(s&&r(u,t)?c[t]=u[t]:c[t]=h("Symbol."+t)),c[t]}},1450:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},4242:function(t,e,i){"use strict";var n=i(3085),o=i(9341),r=i(4469),a=i(2853),s=i(8711),l=i(774),c=i(273),u=i(3442),h=i(4845),d=function(t,e){var i=this,n=arguments.length>2?arguments[2]:void 0;if(!(i instanceof d))return new d(t,e,n);r&&(i=r(new Error(void 0),o(i))),void 0!==e&&s(i,"message",h(e)),c(i,n);var a=[];return u(t,a.push,{that:a}),s(i,"errors",a),i};d.prototype=a(Error.prototype,{constructor:l(5,d),message:l(5,""),name:l(5,"AggregateError")}),n({global:!0},{AggregateError:d})},9106:function(t,e,i){"use strict";var n=i(3085),o=i(6192),r=i(4770),a=i(5744),s=i(1795),l=i(4104),c=i(9361),u=i(1321),h=i(242),d=i(8182),g=i(4218),p=d("isConcatSpreadable"),f=9007199254740991,m="Maximum allowed index exceeded",v=g>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=h("concat"),x=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:r(t)},y=!v||!b;n({target:"Array",proto:!0,forced:y},{concat:function(t){var e,i,n,o,r,a=s(this),h=u(a,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(r=-1===e?a:arguments[e],x(r)){if(o=l(r),d+o>f)throw TypeError(m);for(i=0;i<o;i++,d++)i in r&&c(h,d,r[i])}else{if(d>=f)throw TypeError(m);c(h,d++,r)}return h.length=d,h}})},1710:function(t,e,i){var n=i(3085),o=i(2724),r=i(7423);n({target:"Array",proto:!0},{fill:o}),r("fill")},3436:function(t,e,i){"use strict";var n=i(3085),o=i(454).filter,r=i(242),a=r("filter");n({target:"Array",proto:!0,forced:!a},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},9823:function(t,e,i){"use strict";var n=i(3085),o=i(7397);n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},9173:function(t,e,i){var n=i(3085),o=i(841),r=i(9770),a=!r((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:a},{from:o})},2276:function(t,e,i){"use strict";var n=i(3085),o=i(8180).indexOf,r=i(424),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,l=r("indexOf");n({target:"Array",proto:!0,forced:s||!l},{indexOf:function(t){return s?a.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})},8118:function(t,e,i){var n=i(3085),o=i(4770);n({target:"Array",stat:!0},{isArray:o})},8939:function(t,e,i){"use strict";var n=i(101),o=i(7423),r=i(7771),a=i(3326),s=i(7218),l="Array Iterator",c=a.set,u=a.getterFor(l);t.exports=s(Array,"Array",(function(t,e){c(this,{type:l,target:n(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},3838:function(t,e,i){"use strict";var n=i(3085),o=i(454).map,r=i(242),a=r("map");n({target:"Array",proto:!0,forced:!a},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},5818:function(t,e,i){"use strict";var n=i(3085),o=i(4770),r=i(2091),a=i(5744),s=i(7739),l=i(4104),c=i(101),u=i(9361),h=i(8182),d=i(242),g=d("slice"),p=h("species"),f=[].slice,m=Math.max;n({target:"Array",proto:!0,forced:!g},{slice:function(t,e){var i,n,h,d=c(this),g=l(d),v=s(t,g),b=s(void 0===e?g:e,g);if(o(d)&&(i=d.constructor,r(i)&&(i===Array||o(i.prototype))?i=void 0:a(i)&&(i=i[p],null===i&&(i=void 0)),i===Array||void 0===i))return f.call(d,v,b);for(n=new(void 0===i?Array:i)(m(b-v,0)),h=0;v<b;v++,h++)v in d&&u(n,h,d[v]);return n.length=h,n}})},2178:function(t,e,i){"use strict";var n=i(3085),o=i(7739),r=i(1941),a=i(4104),s=i(1795),l=i(1321),c=i(9361),u=i(242),h=u("splice"),d=Math.max,g=Math.min,p=9007199254740991,f="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!h},{splice:function(t,e){var i,n,u,h,m,v,b=s(this),x=a(b),y=o(t,x),_=arguments.length;if(0===_?i=n=0:1===_?(i=0,n=x-y):(i=_-2,n=g(d(r(e),0),x-y)),x+i-n>p)throw TypeError(f);for(u=l(b,n),h=0;h<n;h++)m=y+h,m in b&&c(u,h,b[m]);if(u.length=n,i<n){for(h=y;h<x-n;h++)m=h+n,v=h+i,m in b?b[v]=b[m]:delete b[v];for(h=x;h>x-n+i;h--)delete b[h-1]}else if(i>n)for(h=x-n;h>y;h--)m=h+n-1,v=h+i-1,m in b?b[v]=b[m]:delete b[v];for(h=0;h<i;h++)b[h+y]=arguments[h+2];return b.length=x-n+i,u}})},665:function(t,e,i){var n=i(3085),o=i(6782);n({target:"Function",proto:!0},{bind:o})},8671:function(t,e,i){var n=i(8576),o=i(1284);o(n.JSON,"JSON",!0)},8556:function(){},2666:function(t,e,i){var n=i(3085),o=i(2558);n({target:"Number",stat:!0,forced:Number.parseInt!=o},{parseInt:o})},3113:function(t,e,i){var n=i(3085),o=i(69),r=i(2853);n({target:"Object",stat:!0,sham:!o},{create:r})},297:function(t,e,i){var n=i(3085),o=i(69),r=i(2760);n({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:r.f})},9234:function(t,e,i){var n=i(3085),o=i(6192),r=i(1795),a=i(9341),s=i(4635),l=o((function(){a(1)}));n({target:"Object",stat:!0,forced:l,sham:!s},{getPrototypeOf:function(t){return a(r(t))}})},2647:function(t,e,i){var n=i(3085),o=i(1795),r=i(7653),a=i(6192),s=a((function(){r(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(t){return r(o(t))}})},3222:function(t,e,i){var n=i(3085),o=i(4469);n({target:"Object",stat:!0},{setPrototypeOf:o})},6663:function(){},4859:function(t,e,i){var n=i(3085),o=i(15);n({global:!0,forced:parseFloat!=o},{parseFloat:o})},5706:function(t,e,i){var n=i(3085),o=i(2558);n({global:!0,forced:parseInt!=o},{parseInt:o})},7884:function(t,e,i){"use strict";var n=i(3085),o=i(6235),r=i(9438),a=i(892),s=i(3442);n({target:"Promise",stat:!0},{allSettled:function(t){var e=this,i=r.f(e),n=i.resolve,l=i.reject,c=a((function(){var i=o(e.resolve),r=[],a=0,l=1;s(t,(function(t){var o=a++,s=!1;r.push(void 0),l++,i.call(e,t).then((function(t){s||(s=!0,r[o]={status:"fulfilled",value:t},--l||n(r))}),(function(t){s||(s=!0,r[o]={status:"rejected",reason:t},--l||n(r))}))})),--l||n(r)}));return c.error&&l(c.value),i.promise}})},8885:function(t,e,i){"use strict";var n=i(3085),o=i(6235),r=i(150),a=i(9438),s=i(892),l=i(3442),c="No one promise resolved";n({target:"Promise",stat:!0},{any:function(t){var e=this,i=a.f(e),n=i.resolve,u=i.reject,h=s((function(){var i=o(e.resolve),a=[],s=0,h=1,d=!1;l(t,(function(t){var o=s++,l=!1;a.push(void 0),h++,i.call(e,t).then((function(t){l||d||(d=!0,n(t))}),(function(t){l||d||(l=!0,a[o]=t,--h||u(new(r("AggregateError"))(a,c)))}))})),--h||u(new(r("AggregateError"))(a,c))}));return h.error&&u(h.value),i.promise}})},1868:function(t,e,i){"use strict";var n=i(3085),o=i(5546),r=i(4471),a=i(6192),s=i(150),l=i(6447),c=i(4743),u=i(9126),h=i(9482),d=!!r&&a((function(){r.prototype["finally"].call({then:function(){}},(function(){}))}));if(n({target:"Promise",proto:!0,real:!0,forced:d},{finally:function(t){var e=c(this,s("Promise")),i=l(t);return this.then(i?function(i){return u(e,t()).then((function(){return i}))}:t,i?function(i){return u(e,t()).then((function(){throw i}))}:t)}}),!o&&l(r)){var g=s("Promise").prototype["finally"];r.prototype["finally"]!==g&&h(r.prototype,"finally",g,{unsafe:!0})}},9021:function(t,e,i){"use strict";var n,o,r,a,s=i(3085),l=i(5546),c=i(8576),u=i(150),h=i(4471),d=i(9482),g=i(533),p=i(4469),f=i(1284),m=i(3656),v=i(6235),b=i(6447),x=i(5744),y=i(6961),_=i(9516),w=i(3442),k=i(9770),C=i(4743),S=i(7160).set,I=i(2950),M=i(9126),T=i(3681),E=i(9438),A=i(892),D=i(3326),L=i(9245),O=i(8182),j=i(2957),P=i(224),N=i(4218),z=O("species"),R="Promise",B=D.get,F=D.set,U=D.getterFor(R),H=h&&h.prototype,W=h,X=H,G=c.TypeError,Y=c.document,V=c.process,Z=E.f,Q=Z,J=!!(Y&&Y.createEvent&&c.dispatchEvent),q=b(c.PromiseRejectionEvent),$="unhandledrejection",K="rejectionhandled",tt=0,et=1,it=2,nt=1,ot=2,rt=!1,at=L(R,(function(){var t=_(W),e=t!==String(W);if(!e&&66===N)return!0;if(l&&!X["finally"])return!0;if(N>=51&&/native code/.test(t))return!1;var i=new W((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))},o=i.constructor={};return o[z]=n,rt=i.then((function(){}))instanceof n,!rt||!e&&j&&!q})),st=at||!k((function(t){W.all(t)["catch"]((function(){}))})),lt=function(t){var e;return!(!x(t)||!b(e=t.then))&&e},ct=function(t,e){if(!t.notified){t.notified=!0;var i=t.reactions;I((function(){var n=t.value,o=t.state==et,r=0;while(i.length>r){var a,s,l,c=i[r++],u=o?c.ok:c.fail,h=c.resolve,d=c.reject,g=c.domain;try{u?(o||(t.rejection===ot&&gt(t),t.rejection=nt),!0===u?a=n:(g&&g.enter(),a=u(n),g&&(g.exit(),l=!0)),a===c.promise?d(G("Promise-chain cycle")):(s=lt(a))?s.call(a,h,d):h(a)):d(n)}catch(p){g&&!l&&g.exit(),d(p)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&ht(t)}))}},ut=function(t,e,i){var n,o;J?(n=Y.createEvent("Event"),n.promise=e,n.reason=i,n.initEvent(t,!1,!0),c.dispatchEvent(n)):n={promise:e,reason:i},!q&&(o=c["on"+t])?o(n):t===$&&T("Unhandled promise rejection",i)},ht=function(t){S.call(c,(function(){var e,i=t.facade,n=t.value,o=dt(t);if(o&&(e=A((function(){P?V.emit("unhandledRejection",n,i):ut($,i,n)})),t.rejection=P||dt(t)?ot:nt,e.error))throw e.value}))},dt=function(t){return t.rejection!==nt&&!t.parent},gt=function(t){S.call(c,(function(){var e=t.facade;P?V.emit("rejectionHandled",e):ut(K,e,t.value)}))},pt=function(t,e,i){return function(n){t(e,n,i)}},ft=function(t,e,i){t.done||(t.done=!0,i&&(t=i),t.value=e,t.state=it,ct(t,!0))},mt=function(t,e,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===e)throw G("Promise can't be resolved itself");var n=lt(e);n?I((function(){var i={done:!1};try{n.call(e,pt(mt,i,t),pt(ft,i,t))}catch(o){ft(i,o,t)}})):(t.value=e,t.state=et,ct(t,!1))}catch(o){ft({done:!1},o,t)}}};if(at&&(W=function(t){y(this,W,R),v(t),n.call(this);var e=B(this);try{t(pt(mt,e),pt(ft,e))}catch(i){ft(e,i)}},X=W.prototype,n=function(t){F(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:tt,value:void 0})},n.prototype=g(X,{then:function(t,e){var i=U(this),n=Z(C(this,W));return n.ok=!b(t)||t,n.fail=b(e)&&e,n.domain=P?V.domain:void 0,i.parent=!0,i.reactions.push(n),i.state!=tt&&ct(i,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n,e=B(t);this.promise=t,this.resolve=pt(mt,e),this.reject=pt(ft,e)},E.f=Z=function(t){return t===W||t===r?new o(t):Q(t)},!l&&b(h)&&H!==Object.prototype)){a=H.then,rt||(d(H,"then",(function(t,e){var i=this;return new W((function(t,e){a.call(i,t,e)})).then(t,e)}),{unsafe:!0}),d(H,"catch",X["catch"],{unsafe:!0}));try{delete H.constructor}catch(vt){}p&&p(H,X)}s({global:!0,wrap:!0,forced:at},{Promise:W}),f(W,R,!1,!0),m(R),r=u(R),s({target:R,stat:!0,forced:at},{reject:function(t){var e=Z(this);return e.reject.call(void 0,t),e.promise}}),s({target:R,stat:!0,forced:l||at},{resolve:function(t){return M(l&&this===r?W:this,t)}}),s({target:R,stat:!0,forced:st},{all:function(t){var e=this,i=Z(e),n=i.resolve,o=i.reject,r=A((function(){var i=v(e.resolve),r=[],a=0,s=1;w(t,(function(t){var l=a++,c=!1;r.push(void 0),s++,i.call(e,t).then((function(t){c||(c=!0,r[l]=t,--s||n(r))}),o)})),--s||n(r)}));return r.error&&o(r.value),i.promise},race:function(t){var e=this,i=Z(e),n=i.reject,o=A((function(){var o=v(e.resolve);w(t,(function(t){o.call(e,t).then(i.resolve,n)}))}));return o.error&&n(o.value),i.promise}})},5397:function(t,e,i){var n=i(3085),o=i(150),r=i(1404),a=i(1138),s=i(5744),l=i(2853),c=i(6782),u=i(6192),h=o("Reflect","construct"),d=u((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),g=!u((function(){h((function(){}))})),p=d||g;n({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(t,e){r(t),a(e);var i=arguments.length<3?t:r(arguments[2]);if(g&&!d)return h(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var o=i.prototype,u=l(s(o)?o:Object.prototype),p=Function.apply.call(t,u,e);return s(p)?p:u}})},1367:function(){},5454:function(t,e,i){"use strict";var n=i(863).charAt,o=i(4845),r=i(3326),a=i(7218),s="String Iterator",l=r.set,c=r.getterFor(s);a(String,"String",(function(t){l(this,{type:s,string:o(t),index:0})}),(function(){var t,e=c(this),i=e.string,o=e.index;return o>=i.length?{value:void 0,done:!0}:(t=n(i,o),e.index+=t.length,{value:t,done:!1})}))},957:function(t,e,i){"use strict";var n=i(3085),o=i(4277).trim,r=i(6815);n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return o(this)}})},9781:function(t,e,i){var n=i(1488);n("asyncIterator")},492:function(){},6681:function(t,e,i){var n=i(1488);n("hasInstance")},9594:function(t,e,i){var n=i(1488);n("isConcatSpreadable")},3665:function(t,e,i){var n=i(1488);n("iterator")},6187:function(t,e,i){"use strict";var n=i(3085),o=i(8576),r=i(150),a=i(5546),s=i(69),l=i(3045),c=i(6192),u=i(4500),h=i(4770),d=i(6447),g=i(5744),p=i(3236),f=i(1138),m=i(1795),v=i(101),b=i(77),x=i(4845),y=i(774),_=i(2853),w=i(7653),k=i(2092),C=i(4052),S=i(4750),I=i(5141),M=i(2760),T=i(6007),E=i(9482),A=i(8717),D=i(9766),L=i(4535),O=i(2759),j=i(8182),P=i(9207),N=i(1488),z=i(1284),R=i(3326),B=i(454).forEach,F=D("hidden"),U="Symbol",H="prototype",W=j("toPrimitive"),X=R.set,G=R.getterFor(U),Y=Object[H],V=o.Symbol,Z=r("JSON","stringify"),Q=I.f,J=M.f,q=C.f,$=T.f,K=A("symbols"),tt=A("op-symbols"),et=A("string-to-symbol-registry"),it=A("symbol-to-string-registry"),nt=A("wks"),ot=o.QObject,rt=!ot||!ot[H]||!ot[H].findChild,at=s&&c((function(){return 7!=_(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=Q(Y,e);n&&delete Y[e],J(t,e,i),n&&t!==Y&&J(Y,e,n)}:J,st=function(t,e){var i=K[t]=_(V[H]);return X(i,{type:U,tag:t,description:e}),s||(i.description=e),i},lt=function(t,e,i){t===Y&&lt(tt,e,i),f(t);var n=b(e);return f(i),u(K,n)?(i.enumerable?(u(t,F)&&t[F][n]&&(t[F][n]=!1),i=_(i,{enumerable:y(0,!1)})):(u(t,F)||J(t,F,y(1,{})),t[F][n]=!0),at(t,n,i)):J(t,n,i)},ct=function(t,e){f(t);var i=v(e),n=w(i).concat(pt(i));return B(n,(function(e){s&&!ht.call(i,e)||lt(t,e,i[e])})),t},ut=function(t,e){return void 0===e?_(t):ct(_(t),e)},ht=function(t){var e=b(t),i=$.call(this,e);return!(this===Y&&u(K,e)&&!u(tt,e))&&(!(i||!u(this,e)||!u(K,e)||u(this,F)&&this[F][e])||i)},dt=function(t,e){var i=v(t),n=b(e);if(i!==Y||!u(K,n)||u(tt,n)){var o=Q(i,n);return!o||!u(K,n)||u(i,F)&&i[F][n]||(o.enumerable=!0),o}},gt=function(t){var e=q(v(t)),i=[];return B(e,(function(t){u(K,t)||u(L,t)||i.push(t)})),i},pt=function(t){var e=t===Y,i=q(e?tt:v(t)),n=[];return B(i,(function(t){!u(K,t)||e&&!u(Y,t)||n.push(K[t])})),n};if(l||(V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?x(arguments[0]):void 0,e=O(t),i=function(t){this===Y&&i.call(tt,t),u(this,F)&&u(this[F],e)&&(this[F][e]=!1),at(this,e,y(1,t))};return s&&rt&&at(Y,e,{configurable:!0,set:i}),st(e,t)},E(V[H],"toString",(function(){return G(this).tag})),E(V,"withoutSetter",(function(t){return st(O(t),t)})),T.f=ht,M.f=lt,I.f=dt,k.f=C.f=gt,S.f=pt,P.f=function(t){return st(j(t),t)},s&&(J(V[H],"description",{configurable:!0,get:function(){return G(this).description}}),a||E(Y,"propertyIsEnumerable",ht,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:V}),B(w(nt),(function(t){N(t)})),n({target:U,stat:!0,forced:!l},{for:function(t){var e=x(t);if(u(et,e))return et[e];var i=V(e);return et[e]=i,it[i]=e,i},keyFor:function(t){if(!p(t))throw TypeError(t+" is not a symbol");if(u(it,t))return it[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),n({target:"Object",stat:!0,forced:!l,sham:!s},{create:ut,defineProperty:lt,defineProperties:ct,getOwnPropertyDescriptor:dt}),n({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:gt,getOwnPropertySymbols:pt}),n({target:"Object",stat:!0,forced:c((function(){S.f(1)}))},{getOwnPropertySymbols:function(t){return S.f(m(t))}}),Z){var ft=!l||c((function(){var t=V();return"[null]"!=Z([t])||"{}"!=Z({a:t})||"{}"!=Z(Object(t))}));n({target:"JSON",stat:!0,forced:ft},{stringify:function(t,e,i){var n,o=[t],r=1;while(arguments.length>r)o.push(arguments[r++]);if(n=e,(g(e)||void 0!==t)&&!p(t))return h(e)||(e=function(t,e){if(d(n)&&(e=n.call(this,t,e)),!p(e))return e}),o[1]=e,Z.apply(null,o)}})}if(!V[H][W]){var mt=V[H].valueOf;E(V[H],W,(function(){return mt.apply(this,arguments)}))}z(V,U),L[F]=!0},1250:function(t,e,i){var n=i(1488);n("matchAll")},9017:function(t,e,i){var n=i(1488);n("match")},9786:function(t,e,i){var n=i(1488);n("replace")},503:function(t,e,i){var n=i(1488);n("search")},6565:function(t,e,i){var n=i(1488);n("species")},9322:function(t,e,i){var n=i(1488);n("split")},3610:function(t,e,i){var n=i(1488);n("toPrimitive")},6886:function(t,e,i){var n=i(1488);n("toStringTag")},3514:function(t,e,i){var n=i(1488);n("unscopables")},177:function(t,e,i){var n=i(1488);n("asyncDispose")},9031:function(t,e,i){var n=i(1488);n("dispose")},6658:function(t,e,i){var n=i(1488);n("matcher")},1875:function(t,e,i){var n=i(1488);n("metadata")},8658:function(t,e,i){var n=i(1488);n("observable")},4592:function(t,e,i){var n=i(1488);n("patternMatch")},6680:function(t,e,i){var n=i(1488);n("replaceAll")},162:function(t,e,i){i(8939);var n=i(7365),o=i(8576),r=i(4696),a=i(8711),s=i(7771),l=i(8182),c=l("toStringTag");for(var u in n){var h=o[u],d=h&&h.prototype;d&&r(d)!==c&&a(d,c,u),s[u]=s.Array}},2906:function(t,e,i){var n=i(3085),o=i(8576),r=i(6447),a=i(8989),s=[].slice,l=/MSIE .\./.test(a),c=function(t){return function(e,i){var n=arguments.length>2,o=n?s.call(arguments,2):void 0;return t(n?function(){(r(e)?e:Function(e)).apply(this,o)}:e,i)}};n({global:!0,bind:!0,forced:l},{setTimeout:c(o.setTimeout),setInterval:c(o.setInterval)})},9336:function(t,e,i){"use strict";i(8939);var n=i(3085),o=i(150),r=i(4551),a=i(9482),s=i(533),l=i(1284),c=i(5148),u=i(3326),h=i(6961),d=i(6447),g=i(4500),p=i(8043),f=i(4696),m=i(1138),v=i(5744),b=i(4845),x=i(2853),y=i(774),_=i(1669),w=i(8703),k=i(8182),C=o("fetch"),S=o("Request"),I=S&&S.prototype,M=o("Headers"),T=k("iterator"),E="URLSearchParams",A=E+"Iterator",D=u.set,L=u.getterFor(E),O=u.getterFor(A),j=/\+/g,P=Array(4),N=function(t){return P[t-1]||(P[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},z=function(t){try{return decodeURIComponent(t)}catch(e){return t}},R=function(t){var e=t.replace(j," "),i=4;try{return decodeURIComponent(e)}catch(n){while(i)e=e.replace(N(i--),z);return e}},B=/[!'()~]|%20/g,F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},U=function(t){return F[t]},H=function(t){return encodeURIComponent(t).replace(B,U)},W=function(t,e){if(e){var i,n,o=e.split("&"),r=0;while(r<o.length)i=o[r++],i.length&&(n=i.split("="),t.push({key:R(n.shift()),value:R(n.join("="))}))}},X=function(t){this.entries.length=0,W(this.entries,t)},G=function(t,e){if(t<e)throw TypeError("Not enough arguments")},Y=c((function(t,e){D(this,{type:A,iterator:_(L(t).entries),kind:e})}),"Iterator",(function(){var t=O(this),e=t.kind,i=t.iterator.next(),n=i.value;return i.done||(i.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),i})),V=function(){h(this,V,E);var t,e,i,n,o,r,a,s,l,c=arguments.length>0?arguments[0]:void 0,u=this,d=[];if(D(u,{type:E,entries:d,updateURL:function(){},updateSearchParams:X}),void 0!==c)if(v(c))if(t=w(c),t){e=_(c,t),i=e.next;while(!(n=i.call(e)).done){if(o=_(m(n.value)),r=o.next,(a=r.call(o)).done||(s=r.call(o)).done||!r.call(o).done)throw TypeError("Expected sequence with length 2");d.push({key:b(a.value),value:b(s.value)})}}else for(l in c)g(c,l)&&d.push({key:l,value:b(c[l])});else W(d,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:b(c))},Z=V.prototype;if(s(Z,{append:function(t,e){G(arguments.length,2);var i=L(this);i.entries.push({key:b(t),value:b(e)}),i.updateURL()},delete:function(t){G(arguments.length,1);var e=L(this),i=e.entries,n=b(t),o=0;while(o<i.length)i[o].key===n?i.splice(o,1):o++;e.updateURL()},get:function(t){G(arguments.length,1);for(var e=L(this).entries,i=b(t),n=0;n<e.length;n++)if(e[n].key===i)return e[n].value;return null},getAll:function(t){G(arguments.length,1);for(var e=L(this).entries,i=b(t),n=[],o=0;o<e.length;o++)e[o].key===i&&n.push(e[o].value);return n},has:function(t){G(arguments.length,1);var e=L(this).entries,i=b(t),n=0;while(n<e.length)if(e[n++].key===i)return!0;return!1},set:function(t,e){G(arguments.length,1);for(var i,n=L(this),o=n.entries,r=!1,a=b(t),s=b(e),l=0;l<o.length;l++)i=o[l],i.key===a&&(r?o.splice(l--,1):(r=!0,i.value=s));r||o.push({key:a,value:s}),n.updateURL()},sort:function(){var t,e,i,n=L(this),o=n.entries,r=o.slice();for(o.length=0,i=0;i<r.length;i++){for(t=r[i],e=0;e<i;e++)if(o[e].key>t.key){o.splice(e,0,t);break}e===i&&o.push(t)}n.updateURL()},forEach:function(t){var e,i=L(this).entries,n=p(t,arguments.length>1?arguments[1]:void 0,3),o=0;while(o<i.length)e=i[o++],n(e.value,e.key,this)},keys:function(){return new Y(this,"keys")},values:function(){return new Y(this,"values")},entries:function(){return new Y(this,"entries")}},{enumerable:!0}),a(Z,T,Z.entries,{name:"entries"}),a(Z,"toString",(function(){var t,e=L(this).entries,i=[],n=0;while(n<e.length)t=e[n++],i.push(H(t.key)+"="+H(t.value));return i.join("&")}),{enumerable:!0}),l(V,E),n({global:!0,forced:!r},{URLSearchParams:V}),!r&&d(M)){var Q=function(t){if(v(t)){var e,i=t.body;if(f(i)===E)return e=t.headers?new M(t.headers):new M,e.has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),x(t,{body:y(0,String(i)),headers:y(0,e)})}return t};if(d(C)&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return C(t,arguments.length>1?Q(arguments[1]):{})}}),d(S)){var J=function(t){return h(this,J,"Request"),new S(t,arguments.length>1?Q(arguments[1]):{})};I.constructor=J,J.prototype=I,n({global:!0,forced:!0},{Request:J})}}t.exports={URLSearchParams:V,getState:L}},4948:function(t,e,i){"use strict";i(5454);var n,o=i(3085),r=i(69),a=i(4551),s=i(8576),l=i(1187),c=i(9482),u=i(6961),h=i(4500),d=i(2503),g=i(841),p=i(863).codeAt,f=i(7977),m=i(4845),v=i(1284),b=i(9336),x=i(3326),y=s.URL,_=b.URLSearchParams,w=b.getState,k=x.set,C=x.getterFor("URL"),S=Math.floor,I=Math.pow,M="Invalid authority",T="Invalid scheme",E="Invalid host",A="Invalid port",D=/[A-Za-z]/,L=/[\d+-.A-Za-z]/,O=/\d/,j=/^0x/i,P=/^[0-7]+$/,N=/^\d+$/,z=/^[\dA-Fa-f]+$/,R=/[\0\t\n\r #%/:<>?@[\\\]^|]/,B=/[\0\t\n\r #/:<>?@[\\\]^|]/,F=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,U=/[\t\n\r]/g,H=function(t,e){var i,n,o;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return E;if(i=X(e.slice(1,-1)),!i)return E;t.host=i}else if(K(t)){if(e=f(e),R.test(e))return E;if(i=W(e),null===i)return E;t.host=i}else{if(B.test(e))return E;for(i="",n=g(e),o=0;o<n.length;o++)i+=q(n[o],V);t.host=i}},W=function(t){var e,i,n,o,r,a,s,l=t.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),e=l.length,e>4)return t;for(i=[],n=0;n<e;n++){if(o=l[n],""==o)return t;if(r=10,o.length>1&&"0"==o.charAt(0)&&(r=j.test(o)?16:8,o=o.slice(8==r?1:2)),""===o)a=0;else{if(!(10==r?N:8==r?P:z).test(o))return t;a=parseInt(o,r)}i.push(a)}for(n=0;n<e;n++)if(a=i[n],n==e-1){if(a>=I(256,5-e))return null}else if(a>255)return null;for(s=i.pop(),n=0;n<i.length;n++)s+=i[n]*I(256,3-n);return s},X=function(t){var e,i,n,o,r,a,s,l=[0,0,0,0,0,0,0,0],c=0,u=null,h=0,d=function(){return t.charAt(h)};if(":"==d()){if(":"!=t.charAt(1))return;h+=2,c++,u=c}while(d()){if(8==c)return;if(":"!=d()){e=i=0;while(i<4&&z.test(d()))e=16*e+parseInt(d(),16),h++,i++;if("."==d()){if(0==i)return;if(h-=i,c>6)return;n=0;while(d()){if(o=null,n>0){if(!("."==d()&&n<4))return;h++}if(!O.test(d()))return;while(O.test(d())){if(r=parseInt(d(),10),null===o)o=r;else{if(0==o)return;o=10*o+r}if(o>255)return;h++}l[c]=256*l[c]+o,n++,2!=n&&4!=n||c++}if(4!=n)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;l[c++]=e}else{if(null!==u)return;h++,c++,u=c}}if(null!==u){a=c-u,c=7;while(0!=c&&a>0)s=l[c],l[c--]=l[u+a-1],l[u+--a]=s}else if(8!=c)return;return l},G=function(t){for(var e=null,i=1,n=null,o=0,r=0;r<8;r++)0!==t[r]?(o>i&&(e=n,i=o),n=null,o=0):(null===n&&(n=r),++o);return o>i&&(e=n,i=o),e},Y=function(t){var e,i,n,o;if("number"==typeof t){for(e=[],i=0;i<4;i++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==typeof t){for(e="",n=G(t),i=0;i<8;i++)o&&0===t[i]||(o&&(o=!1),n===i?(e+=i?":":"::",o=!0):(e+=t[i].toString(16),i<7&&(e+=":")));return"["+e+"]"}return t},V={},Z=d({},V,{" ":1,'"':1,"<":1,">":1,"`":1}),Q=d({},Z,{"#":1,"?":1,"{":1,"}":1}),J=d({},Q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),q=function(t,e){var i=p(t,0);return i>32&&i<127&&!h(e,t)?t:encodeURIComponent(t)},$={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(t){return h($,t.scheme)},tt=function(t){return""!=t.username||""!=t.password},et=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},it=function(t,e){var i;return 2==t.length&&D.test(t.charAt(0))&&(":"==(i=t.charAt(1))||!e&&"|"==i)},nt=function(t){var e;return t.length>1&&it(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},ot=function(t){var e=t.path,i=e.length;!i||"file"==t.scheme&&1==i&&it(e[0],!0)||e.pop()},rt=function(t){return"."===t||"%2e"===t.toLowerCase()},at=function(t){return t=t.toLowerCase(),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},st={},lt={},ct={},ut={},ht={},dt={},gt={},pt={},ft={},mt={},vt={},bt={},xt={},yt={},_t={},wt={},kt={},Ct={},St={},It={},Mt={},Tt=function(t,e,i,o){var r,a,s,l,c=i||st,u=0,d="",p=!1,f=!1,m=!1;i||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(F,"")),e=e.replace(U,""),r=g(e);while(u<=r.length){switch(a=r[u],c){case st:if(!a||!D.test(a)){if(i)return T;c=ct;continue}d+=a.toLowerCase(),c=lt;break;case lt:if(a&&(L.test(a)||"+"==a||"-"==a||"."==a))d+=a.toLowerCase();else{if(":"!=a){if(i)return T;d="",c=ct,u=0;continue}if(i&&(K(t)!=h($,d)||"file"==d&&(tt(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,i)return void(K(t)&&$[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?c=yt:K(t)&&o&&o.scheme==t.scheme?c=ut:K(t)?c=pt:"/"==r[u+1]?(c=ht,u++):(t.cannotBeABaseURL=!0,t.path.push(""),c=St)}break;case ct:if(!o||o.cannotBeABaseURL&&"#"!=a)return T;if(o.cannotBeABaseURL&&"#"==a){t.scheme=o.scheme,t.path=o.path.slice(),t.query=o.query,t.fragment="",t.cannotBeABaseURL=!0,c=Mt;break}c="file"==o.scheme?yt:dt;continue;case ut:if("/"!=a||"/"!=r[u+1]){c=dt;continue}c=ft,u++;break;case ht:if("/"==a){c=mt;break}c=Ct;continue;case dt:if(t.scheme=o.scheme,a==n)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query;else if("/"==a||"\\"==a&&K(t))c=gt;else if("?"==a)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query="",c=It;else{if("#"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.path.pop(),c=Ct;continue}t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query,t.fragment="",c=Mt}break;case gt:if(!K(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,c=Ct;continue}c=mt}else c=ft;break;case pt:if(c=ft,"/"!=a||"/"!=d.charAt(u+1))continue;u++;break;case ft:if("/"!=a&&"\\"!=a){c=mt;continue}break;case mt:if("@"==a){p&&(d="%40"+d),p=!0,s=g(d);for(var v=0;v<s.length;v++){var b=s[v];if(":"!=b||m){var x=q(b,J);m?t.password+=x:t.username+=x}else m=!0}d=""}else if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)){if(p&&""==d)return M;u-=g(d).length+1,d="",c=vt}else d+=a;break;case vt:case bt:if(i&&"file"==t.scheme){c=wt;continue}if(":"!=a||f){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)){if(K(t)&&""==d)return E;if(i&&""==d&&(tt(t)||null!==t.port))return;if(l=H(t,d),l)return l;if(d="",c=kt,i)return;continue}"["==a?f=!0:"]"==a&&(f=!1),d+=a}else{if(""==d)return E;if(l=H(t,d),l)return l;if(d="",c=xt,i==bt)return}break;case xt:if(!O.test(a)){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)||i){if(""!=d){var y=parseInt(d,10);if(y>65535)return A;t.port=K(t)&&y===$[t.scheme]?null:y,d=""}if(i)return;c=kt;continue}return A}d+=a;break;case yt:if(t.scheme="file","/"==a||"\\"==a)c=_t;else{if(!o||"file"!=o.scheme){c=Ct;continue}if(a==n)t.host=o.host,t.path=o.path.slice(),t.query=o.query;else if("?"==a)t.host=o.host,t.path=o.path.slice(),t.query="",c=It;else{if("#"!=a){nt(r.slice(u).join(""))||(t.host=o.host,t.path=o.path.slice(),ot(t)),c=Ct;continue}t.host=o.host,t.path=o.path.slice(),t.query=o.query,t.fragment="",c=Mt}}break;case _t:if("/"==a||"\\"==a){c=wt;break}o&&"file"==o.scheme&&!nt(r.slice(u).join(""))&&(it(o.path[0],!0)?t.path.push(o.path[0]):t.host=o.host),c=Ct;continue;case wt:if(a==n||"/"==a||"\\"==a||"?"==a||"#"==a){if(!i&&it(d))c=Ct;else if(""==d){if(t.host="",i)return;c=kt}else{if(l=H(t,d),l)return l;if("localhost"==t.host&&(t.host=""),i)return;d="",c=kt}continue}d+=a;break;case kt:if(K(t)){if(c=Ct,"/"!=a&&"\\"!=a)continue}else if(i||"?"!=a)if(i||"#"!=a){if(a!=n&&(c=Ct,"/"!=a))continue}else t.fragment="",c=Mt;else t.query="",c=It;break;case Ct:if(a==n||"/"==a||"\\"==a&&K(t)||!i&&("?"==a||"#"==a)){if(at(d)?(ot(t),"/"==a||"\\"==a&&K(t)||t.path.push("")):rt(d)?"/"==a||"\\"==a&&K(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&it(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(a==n||"?"==a||"#"==a))while(t.path.length>1&&""===t.path[0])t.path.shift();"?"==a?(t.query="",c=It):"#"==a&&(t.fragment="",c=Mt)}else d+=q(a,Q);break;case St:"?"==a?(t.query="",c=It):"#"==a?(t.fragment="",c=Mt):a!=n&&(t.path[0]+=q(a,V));break;case It:i||"#"!=a?a!=n&&("'"==a&&K(t)?t.query+="%27":t.query+="#"==a?"%23":q(a,V)):(t.fragment="",c=Mt);break;case Mt:a!=n&&(t.fragment+=q(a,Z));break}u++}},Et=function(t){var e,i,n=u(this,Et,"URL"),o=arguments.length>1?arguments[1]:void 0,a=m(t),s=k(n,{type:"URL"});if(void 0!==o)if(o instanceof Et)e=C(o);else if(i=Tt(e={},m(o)),i)throw TypeError(i);if(i=Tt(s,a,null,e),i)throw TypeError(i);var l=s.searchParams=new _,c=w(l);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(l)||null},r||(n.href=Dt.call(n),n.origin=Lt.call(n),n.protocol=Ot.call(n),n.username=jt.call(n),n.password=Pt.call(n),n.host=Nt.call(n),n.hostname=zt.call(n),n.port=Rt.call(n),n.pathname=Bt.call(n),n.search=Ft.call(n),n.searchParams=Ut.call(n),n.hash=Ht.call(n))},At=Et.prototype,Dt=function(){var t=C(this),e=t.scheme,i=t.username,n=t.password,o=t.host,r=t.port,a=t.path,s=t.query,l=t.fragment,c=e+":";return null!==o?(c+="//",tt(t)&&(c+=i+(n?":"+n:"")+"@"),c+=Y(o),null!==r&&(c+=":"+r)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==l&&(c+="#"+l),c},Lt=function(){var t=C(this),e=t.scheme,i=t.port;if("blob"==e)try{return new Et(e.path[0]).origin}catch(n){return"null"}return"file"!=e&&K(t)?e+"://"+Y(t.host)+(null!==i?":"+i:""):"null"},Ot=function(){return C(this).scheme+":"},jt=function(){return C(this).username},Pt=function(){return C(this).password},Nt=function(){var t=C(this),e=t.host,i=t.port;return null===e?"":null===i?Y(e):Y(e)+":"+i},zt=function(){var t=C(this).host;return null===t?"":Y(t)},Rt=function(){var t=C(this).port;return null===t?"":String(t)},Bt=function(){var t=C(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ft=function(){var t=C(this).query;return t?"?"+t:""},Ut=function(){return C(this).searchParams},Ht=function(){var t=C(this).fragment;return t?"#"+t:""},Wt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(r&&l(At,{href:Wt(Dt,(function(t){var e=C(this),i=m(t),n=Tt(e,i);if(n)throw TypeError(n);w(e.searchParams).updateSearchParams(e.query)})),origin:Wt(Lt),protocol:Wt(Ot,(function(t){var e=C(this);Tt(e,m(t)+":",st)})),username:Wt(jt,(function(t){var e=C(this),i=g(m(t));if(!et(e)){e.username="";for(var n=0;n<i.length;n++)e.username+=q(i[n],J)}})),password:Wt(Pt,(function(t){var e=C(this),i=g(m(t));if(!et(e)){e.password="";for(var n=0;n<i.length;n++)e.password+=q(i[n],J)}})),host:Wt(Nt,(function(t){var e=C(this);e.cannotBeABaseURL||Tt(e,m(t),vt)})),hostname:Wt(zt,(function(t){var e=C(this);e.cannotBeABaseURL||Tt(e,m(t),bt)})),port:Wt(Rt,(function(t){var e=C(this);et(e)||(t=m(t),""==t?e.port=null:Tt(e,t,xt))})),pathname:Wt(Bt,(function(t){var e=C(this);e.cannotBeABaseURL||(e.path=[],Tt(e,m(t),kt))})),search:Wt(Ft,(function(t){var e=C(this);t=m(t),""==t?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Tt(e,t,It)),w(e.searchParams).updateSearchParams(e.query)})),searchParams:Wt(Ut),hash:Wt(Ht,(function(t){var e=C(this);t=m(t),""!=t?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Tt(e,t,Mt)):e.fragment=null}))}),c(At,"toJSON",(function(){return Dt.call(this)}),{enumerable:!0}),c(At,"toString",(function(){return Dt.call(this)}),{enumerable:!0}),y){var Xt=y.createObjectURL,Gt=y.revokeObjectURL;Xt&&c(Et,"createObjectURL",(function(t){return Xt.apply(y,arguments)})),Gt&&c(Et,"revokeObjectURL",(function(t){return Gt.apply(y,arguments)}))}v(Et,"URL"),o({global:!0,forced:!a,sham:!r},{URL:Et})},9801:function(){},3822:function(t,e,i){var n=i(2221);t.exports=n},1434:function(t,e,i){var n=i(5078);t.exports=n},6899:function(t,e,i){var n=i(98);t.exports=n},7710:function(t,e,i){var n=i(5739);i(162),t.exports=n},4486:function(t,e,i){var n=i(278);t.exports=n},4877:function(t,e,i){var n=i(1484);t.exports=n},7178:function(t,e,i){var n=i(7731);t.exports=n},5603:function(t,e,i){var n=i(3669);t.exports=n},1206:function(t,e,i){i(162);var n=i(6899),o=i(4696),r=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===r||t instanceof Array&&e===r.forEach||a.hasOwnProperty(o(t))?n:e}},6174:function(t,e,i){var n=i(2604);t.exports=n},57:function(t,e,i){var n=i(263);t.exports=n},4741:function(t,e,i){var n=i(7663);t.exports=n},8368:function(t,e,i){var n=i(5063);t.exports=n},3739:function(t,e,i){var n=i(6813);t.exports=n},172:function(t,e,i){var n=i(6285);t.exports=n},4963:function(t,e,i){var n=i(3213);t.exports=n},7820:function(t,e,i){var n=i(3512);t.exports=n},8980:function(t,e,i){var n=i(8168);t.exports=n},5636:function(t,e,i){var n=i(8651);t.exports=n},6672:function(t,e,i){var n=i(3083);t.exports=n},5059:function(t,e,i){var n=i(2987);t.exports=n},3969:function(t,e,i){var n=i(2239);t.exports=n},6618:function(t,e,i){var n=i(3154);i(162),t.exports=n},5279:function(t,e,i){var n=i(6577);t.exports=n},9562:function(t,e,i){i(2906);var n=i(7545);t.exports=n.setTimeout},2285:function(t,e,i){var n=i(5008);i(162),t.exports=n},8535:function(t,e,i){var n=i(994);i(162),t.exports=n},652:function(t,e,i){var n=i(5668);t.exports=n},5668:function(t,e,i){i(4948),i(9801),i(9336);var n=i(7545);t.exports=n.URL},2534:function(t){"use strict";t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},4858:function(e){"use strict";e.exports=t},4960:function(){},6759:function(){},6272:function(){}},i={};function n(t){var o=i[t];if(void 0!==o)return o.exports;var r=i[t]={exports:{}};return e[t](r,r.exports,n),r.exports}!function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}();var o={};return function(){"use strict";n.d(o,{default:function(){return Al}});var t=n(9131),e=n.n(t),i=n(1899),r=n.n(i),a=n(6562),s=n.n(a),l=n(1734),c=n.n(l),u=n(8005),h=n.n(u),d=n(6065),g=n.n(d),p=n(4496),f=n.n(p);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(Element.prototype.matches.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */,"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(t){if("Element"in t){var i="classList",n="prototype",o=t.Element[n],a=Object,l=e()(String[n])||function(){return this.replace(/^\s+|\s+$/g,"")},u=r()(Array[n])||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},h=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},d=function(t,e){if(""===e)throw new h("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new h("INVALID_CHARACTER_ERR","The token must not contain space characters.");return u.call(t,e)},g=function(t){for(var e=l.call(t.getAttribute("class")||""),i=e?e.split(/\s+/):[],n=0,o=i.length;n<o;n++)this.push(i[n]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},p=g[n]=[],f=function(){return new g(this)};if(h[n]=Error[n],p.item=function(t){return this[t]||null},p.contains=function(t){return~d(this,t+"")},p.add=function(){var t,e=arguments,i=0,n=e.length,o=!1;do{t=e[i]+"",~d(this,t)||(this.push(t),o=!0)}while(++i<n);o&&this._updateClassName()},p.remove=function(){var t,e,i=arguments,n=0,o=i.length,r=!1;do{t=i[n]+"",e=d(this,t);while(~e){var a;s()(a=this).call(a,e,1),r=!0,e=d(this,t)}}while(++n<o);r&&this._updateClassName()},p.toggle=function(t,e){var i=this.contains(t),n=i?!0!==e&&"remove":!1!==e&&"add";return n&&this[n](t),!0===e||!1===e?e:!i},p.replace=function(t,e){var i,n=d(t+"");~n&&(s()(i=this).call(i,n,1,e),this._updateClassName())},p.toString=function(){return this.join(" ")},c()){var m={get:f,enumerable:!0,configurable:!0};try{c()(o,i,m)}catch(v){void 0!==v.number&&-2146823252!==v.number||(m.enumerable=!1,c()(o,i,m))}}else a[n].__defineGetter__&&o.__defineGetter__(i,f)}}(self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var i,n=arguments.length;for(i=0;i<n;i++)t=arguments[i],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)===!e?e:i.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var i=this.toString().split(" "),n=r()(i).call(i,t+"");~n&&(i=h()(i).call(i,n),this.remove.apply(this,i),this.add(e),this.add.apply(this,h()(i).call(i,1)))}),t=null}())
/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.6
 */,function(){if("undefined"!==typeof window&&window.addEventListener){var t,e,i,n=g()(null),o=function(){clearTimeout(e),e=f()(t,100)},r=function(){},a=function(){var t;window.addEventListener("resize",o,!1),window.addEventListener("orientationchange",o,!1),window.MutationObserver?(t=new MutationObserver(o),t.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),r=function(){try{t.disconnect(),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)}catch(e){}}):(document.documentElement.addEventListener("DOMSubtreeModified",o,!1),r=function(){document.documentElement.removeEventListener("DOMSubtreeModified",o,!1),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)})},s=function(t){function e(t){var e;return void 0!==t.protocol?e=t:(e=document.createElement("a"),e.href=t),e.protocol.replace(/:/g,"")+e.host}var i,n,o;return window.XMLHttpRequest&&(i=new XMLHttpRequest,n=e(location),o=e(t),i=void 0===i.withCredentials&&""!==o&&o!==n?XDomainRequest||void 0:XMLHttpRequest),i},l="http://www.w3.org/1999/xlink";t=function(){var t,e,i,o,c,u,h,d,g,p,m="",v=0;function b(){v-=1,0===v&&(r(),a())}function x(t){return function(){!0!==n[t.base]&&(t.useEl.setAttributeNS(l,"xlink:href","#"+t.hash),t.useEl.hasAttribute("href")&&t.useEl.setAttribute("href","#"+t.hash))}}function y(t){return function(){var e,i=document.body,n=document.createElement("x");t.onload=null,n.innerHTML=t.responseText,e=n.getElementsByTagName("svg")[0],e&&(e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.width=0,e.style.height=0,e.style.overflow="hidden",i.insertBefore(e,i.firstChild)),b()}}function _(t){return function(){t.onerror=null,t.ontimeout=null,b()}}for(r(),g=document.getElementsByTagName("use"),c=0;c<g.length;c+=1){try{e=g[c].getBoundingClientRect()}catch(w){e=!1}o=g[c].getAttribute("href")||g[c].getAttributeNS(l,"href")||g[c].getAttribute("xlink:href"),d=o&&o.split?o.split("#"):["",""],t=d[0],i=d[1],u=e&&0===e.left&&0===e.right&&0===e.top&&0===e.bottom,e&&0===e.width&&0===e.height&&!u?(m&&!t.length&&i&&!document.getElementById(i)&&(t=m),g[c].hasAttribute("href")&&g[c].setAttributeNS(l,"xlink:href",o),t.length&&(p=n[t],!0!==p&&f()(x({useEl:g[c],base:t,hash:i}),0),void 0===p&&(h=s(t),void 0!==h&&(p=new h,n[t]=p,p.onload=y(p),p.onerror=_(p),p.ontimeout=_(p),p.open("GET",t),p.send(),v+=1)))):u?t.length&&n[t]&&f()(x({useEl:g[c],base:t,hash:i}),0):void 0===n[t]?n[t]=!0:n[t].onload&&(n[t].abort(),delete n[t].onload,n[t]=!0)}g="",v+=1,b()},i=function(){window.removeEventListener("load",i,!1),e=f()(t,0)},"complete"!==document.readyState?window.addEventListener("load",i,!1):i()}}();var m=n(1845);function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function b(t){if(m(t))return v(t)}var x=n(184),y=n(662),_=n(7172);function w(t){if("undefined"!==typeof x&&null!=y(t)||null!=t["@@iterator"])return _(t)}var k=n(711);function C(t,e){var i;if(t){if("string"===typeof t)return v(t,e);var n=k(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?_(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function S(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(t){return b(t)||w(t)||C(t)||S()}var M=n(7077);function T(t,e,i){return e in t?M(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),M(t,n.key,n)}}function D(t,e,i){return e&&A(t.prototype,e),i&&A(t,i),t}var L=n(4426),O=n.n(L),j=n(9406),P=n.n(j),N=n(8189),z=n.n(N),R=n(3972),B=n.n(R),F=n(2777),U=n(961),H=n.n(U),W=n(5695),X=n.n(W),G=n(8592),Y=n.n(G),V=n(9052),Z=n.n(V),Q=n(2560),J=n.n(Q),q=n(2461),$=n.n(q);function K(t){if(m(t))return t}function tt(t,e){var i=null==t?null:"undefined"!==typeof x&&y(t)||t["@@iterator"];if(null!=i){var n,o,r=[],a=!0,s=!1;try{for(i=i.call(t);!(a=(n=i.next()).done);a=!0)if(r.push(n.value),e&&r.length===e)break}catch(l){s=!0,o=l}finally{try{a||null==i["return"]||i["return"]()}finally{if(s)throw o}}return r}}function et(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function it(t,e){return K(t)||tt(t,e)||C(t,e)||et()}var nt,ot=n(6397),rt=n.n(ot),at=n(7636),st=n.n(at),lt=n(789),ct=n.n(lt),ut=n(4729),ht=n.n(ut),dt=n(1610),gt=n.n(dt),pt=n(3053),ft=n.n(pt),mt=["zoomIn","zoomOut","hand"],vt=["history","undo","redo","reset"],bt=["delete","deleteAll"],xt=P()(nt=[]).call(nt,mt,vt,bt),yt={FILTER:"filter",COLOR:"color"},_t=["rect","circle","triangle"],wt={CROPZONE:"cropzone"},kt={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},Ct=te("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),St={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},It={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},Mt={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},Tt={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_CREATED:"objectCreated",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur",IMAGE_RESIZED:"imageResized"},Et={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},At={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},Dt=te("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),Lt={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},Ot={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},jt={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32,DIGIT_0:48,DIGIT_9:57},Pt={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},Nt={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidDrawingMode:"This operation is not supported in the drawing mode.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noActiveObject:"There is no active object.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",rotation:"The current angle is same the old angle.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},zt={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},Rt={realTimeEvent:!0,min:-360,max:360,value:0},Bt={min:5,max:30,value:12},Ft={realTimeEvent:!0,min:2,max:300,value:3},Ut={realTimeEvent:!0,min:10,max:100,value:50},Ht={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},Wt={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},Xt={realTimeEvent:!0,min:32,max:4088,value:800},Gt=2,Yt="tui-image-editor-",Vt=Math.min,Zt=Math.max,Qt=!1,Jt=0;function qt(t){return t.__fe_id||(Jt+=1,t.__fe_id=Jt),t.__fe_id}function $t(t){return"function"===typeof t}function Kt(t,e,i){if(e>i){var n=[i,e];e=n[0],i=n[1]}return Zt(e,Vt(t,i))}function te(){for(var t={},e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return Y()(i,(function(e){t[e]=e})),t}function ee(t,e){var i,n={},o=e.length,r=0;for(r=0;r<o;r+=1)i=e[r],n[i]=t[i];return n}function ie(t){return rt()(t,10)}function ne(t){return t.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}))}function oe(){return!!(window.File&&window.FileList&&window.FileReader)}function re(t,e){var i,n,o,r;4===t.length&&(t=P()(r="".concat(t)).call(r,h()(t).call(t,1,4)));var a=rt()(h()(t).call(t,1,3),16),s=rt()(h()(t).call(t,3,5),16),l=rt()(h()(t).call(t,5,7),16),c=e||1;return P()(i=P()(n=P()(o="rgba(".concat(a,", ")).call(o,s,", ")).call(n,l,", ")).call(i,c,")")}function ae(){Qt||(Qt=!0,ht()("image-editor","UA-129999381-1"))}function se(t,e){var i=document.getElementsByTagName("head"),n=it(i,1),o=n[0],r=document.createElement("link"),a=encodeURIComponent(t);e&&(r.id=e),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href","data:text/css;charset=UTF-8,".concat(a)),o.appendChild(r)}function le(t){return function(e){return t.querySelector(e)}}function ce(t){var e,i,n,o=/data:(image\/.+);base64,/,r="";e=t.replace(o,(function(t,e){return r=e,""})),e=atob(e);var a=e.length;for(i=new Uint8Array(a),n=0;n<a;n+=1)i[n]=e.charCodeAt(n);return new Blob([i],{type:r})}function ue(t){return Number(t.toFixed(Gt))}function he(t){Y()(t,(function(e,i){t[i]=null}))}function de(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"."===i.charAt(0)?P()(e=".".concat(Yt).concat(n)).call(e,h()(i).call(i,1)):P()(t="".concat(Yt).concat(n)).call(t,i)}function ge(t,e){var i=e.originX,n=e.originY,o=t.getPointByOrigin(i,n),r=o.x,a=o.y;t.set({left:r,top:a,originX:i,originY:n}),t.setCoords()}function pe(t){var e,i={};return st()(e=$()(t)).call(e,(function(e){i[t[e]]=e})),i}function fe(t,e){t.customProps=t.customProps||{},H()(t.customProps,e)}function me(t,e){var i={};return J()(e)&&(e=[e]),Y()(e,(function(e){i[e]=t.customProps[e]})),i}function ve(t){return t.charAt(0).toUpperCase()+h()(t).call(t,1)}function be(t,e){return r()(t).call(t,e)>=0}function xe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gt()(t,"type")||yt.COLOR}function ye(t){var e=ct()(t),i=void 0===e?{}:e;return i.source?yt.FILTER:yt.COLOR}function _e(t){return ft()(t.get("type"),_t)>=0}function we(t){if(be(_t,t))return"Shape";switch(t){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return Me(t)}}function ke(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.useAlpha,o=void 0===n||n,r=i.mode,a=kt.VINTAGE,s=kt.REMOVE_COLOR,l=kt.BLEND_COLOR,c=kt.SEPIA2,u=kt.COLOR_FILTER,h=kt.REMOVE_WHITE,d=kt.BLEND;switch(t){case a:e=c;break;case s:e=o?u:h;break;case l:e="add"===r?d:r;break;default:e=t}return Me(e)}function Ce(t){var e=Mt.LOAD_IMAGE;return"string"===typeof t?e===t:e===t.name}function Se(t){var e,i,n,o=Mt.FLIP_IMAGE,r=Mt.ROTATE_IMAGE,a=Mt.ADD_TEXT,s=Mt.APPLY_FILTER,l=Mt.REMOVE_FILTER,c=Mt.CHANGE_SHAPE,u=Mt.CHANGE_ICON_COLOR,d=Mt.CHANGE_TEXT_STYLE,g=Mt.CLEAR_OBJECTS,p=Mt.ADD_IMAGE_OBJECT,f=Mt.REMOVE_OBJECT,m=Mt.RESIZE_IMAGE,v=t.name,b=t.args;switch(v){case o:n={name:v,detail:"reset"===b[1]?b[1]:h()(e=b[1]).call(e,4)};break;case r:n={name:v,detail:b[2]};break;case s:n={name:At.APPLY_FILTER,detail:ke(b[1],b[2])};break;case l:n={name:At.REMOVE_FILTER,detail:"Remove"};break;case c:n={name:At.CHANGE_SHAPE,detail:"Change"};break;case u:n={name:At.CHANGE_ICON_COLOR,detail:"Change"};break;case d:n={name:At.CHANGE_TEXT_STYLE,detail:"Change"};break;case f:n={name:At.REMOVE_OBJECT,detail:b[2]};break;case g:n={name:At.CLEAR_OBJECTS,detail:"All"};break;case p:n={name:At.ADD_IMAGE_OBJECT,detail:"Add"};break;case a:n={name:At.ADD_TEXT};break;case m:n={name:At.RESIZE,detail:P()(i="".concat(~~b[1].width,"x")).call(i,~~b[1].height)};break;default:n={name:v};break}return"mask"===b[1]&&(n={name:At.LOAD_MASK_IMAGE,detail:"Apply"}),n}function Ie(t){return"top"===t?"bottom":"left"===t?"right":"right"===t?"left":"top"}function Me(t){return t.replace(/[a-z]/,(function(t){return t.toUpperCase()}))}function Te(t){var e=t.left,i=t.top,n=t.width,o=t.height,r=Wt.LEFT,a=Wt.TOP,s=Wt.WIDTH,l=Wt.HEIGHT;return e===r&&i===a&&n===s&&o===l}var Ee=te("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),Ae={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},De={UN_IMPLEMENTATION:function(t){return Ae.UN_IMPLEMENTATION+t},NO_COMPONENT_NAME:function(){return Ae.NO_COMPONENT_NAME}},Le={types:H()({},Ee),create:function(t){t=t.toLowerCase();for(var e=De[t],i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return e.apply(void 0,n)}},Oe=Le.create,je=Le.types,Pe=function(){function t(e,i){E(this,t),this.name=e.name,this.args=i,this.execute=e.execute,this.undo=e.undo,this.executeCallback=e.executeCallback||null,this.undoCallback=e.undoCallback||null,this.undoData={}}return D(t,[{key:"execute",value:function(){throw new Error(Oe(je.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(Oe(je.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return $()(this.undoData).length>0}},{key:"setUndoData",value:function(t,e,i){return e&&(t=e),i?e||(e=t):(H()(this.undoData,t),e=null),e}},{key:"setExecuteCallback",value:function(t){return this.executeCallback=t,this}},{key:"setUndoCallback",value:function(t){return this.undoCallback=t,this}}]),t}(),Ne=Pe,ze={};function Re(t){var e=ze[t];if(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return new Ne(e,n)}return null}function Be(t){ze[t.name]=t}var Fe={create:Re,register:Be},Ue=function(){function t(){E(this,t),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return D(t,[{key:"_invokeExecution",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.lock();var n=t.args;return n||(n=[]),t.execute.apply(t,I(n)).then((function(n){return e._isSilent||(e.pushUndoStack(t),e.fire(i?Tt.AFTER_REDO:Tt.EXECUTE_COMMAND,t)),e.unlock(),$t(t.executeCallback)&&t.executeCallback(n),n}))["catch"]((function(t){return e.unlock(),z().reject(t)}))}},{key:"_invokeUndo",value:function(t){var e=this;this.lock();var i=t.args;return i||(i=[]),t.undo.apply(t,I(i)).then((function(i){return e.pushRedoStack(t),e.fire(Tt.AFTER_UNDO,t),e.unlock(),$t(t.undoCallback)&&t.undoCallback(i),i}))["catch"]((function(t){return e.unlock(),z().reject(t)}))}},{key:"_fireRedoStackChanged",value:function(){this.fire(Tt.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(Tt.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var t=this;this._isSilent=!0;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return this.execute.apply(this,P()(i).call(i,[this._isSilent])).then((function(){t._isSilent=!1}))}},{key:"execute",value:function(){var t=this;if(this._isLocked)return z().reject(Nt.isLock);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var o=i[0];return J()(o)&&(o=Fe.create.apply(Fe,i)),this._invokeExecution(o).then((function(e){return t.clearRedoStack(),e}))}},{key:"undo",value:function(){var t,e=this._undoStack.pop(),i="";if(e&&this._isLocked&&(this.pushUndoStack(e,!0),e=null),e)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),t=this._invokeUndo(e);else{var n;if(i=Nt.undo,this._isLocked)i=P()(n="".concat(i," Because ")).call(n,Nt.isLock);t=z().reject(i)}return t}},{key:"redo",value:function(){var t,e=this._redoStack.pop(),i="";if(e&&this._isLocked&&(this.pushRedoStack(e,!0),e=null),e)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),t=this._invokeExecution(e,!0);else{var n;if(i=Nt.redo,this._isLocked)i=P()(n="".concat(i," Because ")).call(n,Nt.isLock);t=z().reject(i)}return t}},{key:"pushUndoStack",value:function(t,e){this._undoStack.push(t),e||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(t,e){this._redoStack.push(t),e||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return 0===this._redoStack.length}},{key:"isEmptyUndoStack",value:function(){return 0===this._undoStack.length}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),t}();Z().mixin(Ue);var He=Ue,We=n(5214),Xe=n.n(We),Ge=function(t){var e,i,n,o,r,a,s,l=t.locale,c=t.biImage,u=t.commonStyle,h=t.headerStyle,d=t.loadButtonStyle,g=t.downloadButtonStyle,p=t.submenuStyle;return P()(e=P()(i=P()(n=P()(o=P()(r=P()(a=P()(s='\n    <div class="tui-image-editor-main-container" style="'.concat(u,'">\n        <div class="tui-image-editor-header" style="')).call(s,h,'">\n            <div class="tui-image-editor-header-logo">\n                <img src="')).call(a,c,'" />\n            </div>\n            <div class="tui-image-editor-header-buttons">\n                <div style="')).call(r,d,'">\n                    ')).call(o,l.localize("Load"),'\n                    <input type="file" class="tui-image-editor-load-btn" />\n                </div>\n                <button class="tui-image-editor-download-btn" style="')).call(n,g,'">\n                    ')).call(i,l.localize("Download"),'\n                </button>\n            </div>\n        </div>\n        <div class="tui-image-editor-main">\n            <div class="tui-image-editor-submenu">\n                <div class="tui-image-editor-submenu-style" style="')).call(e,p,'"></div>\n            </div>\n            <div class="tui-image-editor-wrap">\n                <div class="tui-image-editor-size-wrap">\n                    <div class="tui-image-editor-align-wrap">\n                        <div class="tui-image-editor"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n')},Ye=function(t){var e,i,n,o,r,a=t.locale,s=t.biImage,l=t.loadButtonStyle,c=t.downloadButtonStyle,u=t.menuBarPosition;return P()(e=P()(i=P()(n=P()(o=P()(r='\n    <ul class="tui-image-editor-help-menu '.concat(Ie(u),'"></ul>\n    <div class="tui-image-editor-controls">\n        <div class="tui-image-editor-controls-logo">\n            <img src="')).call(r,s,'" />\n        </div>\n        <ul class="tui-image-editor-menu"></ul>\n\n        <div class="tui-image-editor-controls-buttons">\n            <div style="')).call(o,l,'">\n                ')).call(n,a.localize("Load"),'\n                <input type="file" class="tui-image-editor-load-btn" />\n            </div>\n            <button class="tui-image-editor-download-btn" style="')).call(i,c,'">\n                ')).call(e,a.localize("Download"),"\n            </button>\n        </div>\n    </div>\n")},Ve=n(899),Ze=n.n(Ve),Qe=function(t){var e,i,n,o,r,a,s,l,c,u,h,d,g,p,f,m,v,b,x,y,_,w,k,C,S,I,M,T,E,A=t.subMenuLabelActive,D=t.subMenuLabelNormal,L=t.subMenuRangeTitle,O=t.submenuPartitionVertical,j=t.submenuPartitionHorizontal,N=t.submenuCheckbox,z=t.submenuRangePointer,R=t.submenuRangeValue,B=t.submenuColorpickerTitle,F=t.submenuColorpickerButton,U=t.submenuRangeBar,H=t.submenuRangeSubbar,W=t.submenuDisabledRangePointer,X=t.submenuDisabledRangeBar,G=t.submenuDisabledRangeSubbar,Y=t.submenuIconSize,V=t.menuIconSize,Z=t.biSize,Q=t.menuIconStyle,J=t.submenuIconStyle;return P()(e=P()(i=P()(n=P()(o=P()(r=P()(a=P()(s=P()(l=P()(c=P()(u=P()(h=P()(d=P()(g=P()(p=P()(f=P()(m=P()(v=P()(b=P()(x=P()(y=P()(_=P()(w=P()(k=P()(C=P()(S=P()(I=P()(M=P()(T=P()(E='\n    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,\n    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,\n    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,\n    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,\n    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,\n    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,\n    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,\n    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,\n    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,\n    .tie-draw-line-select-button.line .tui-image-editor-button.line label,\n    .tie-draw-line-select-button.free .tui-image-editor-button.free label,\n    .tie-flip-button.flipX .tui-image-editor-button.flipX label,\n    .tie-flip-button.flipY .tui-image-editor-button.flipY label,\n    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,\n    .tie-crop-button .tui-image-editor-button.apply.active label,\n    .tie-crop-preset-button .tui-image-editor-button.preset.active label,\n    .tie-resize-button .tui-image-editor-button.apply.active label,\n    .tie-resize-preset-button .tui-image-editor-button.preset.active label,\n    .tie-shape-button.rect .tui-image-editor-button.rect label,\n    .tie-shape-button.circle .tui-image-editor-button.circle label,\n    .tie-shape-button.triangle .tui-image-editor-button.triangle label,\n    .tie-text-effect-button .tui-image-editor-button.active label,\n    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,\n    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,\n    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,\n    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,\n    .tui-image-editor-container .tui-image-editor-checkbox label > span {\n        '.concat(A,"\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,\n    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,\n    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {\n        ")).call(E,D,"\n    }\n    .tui-image-editor-container .tui-image-editor-range-wrap label > span {\n        ")).call(T,L,"\n    }\n    .tui-image-editor-container .tui-image-editor-partition > div {\n        ")).call(M,O,"\n    }\n    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,\n    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {\n        ")).call(I,j,"\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {\n        ")).call(S,N,"\n    }\n    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {\n        border: 0;\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {\n        ")).call(C,z,"\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-bar {\n        ")).call(k,U,"\n    }\n    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {\n        ")).call(w,H,"\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {\n        ")).call(_,W,"\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {\n        ")).call(y,G,"\n    }\n    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {\n        ")).call(x,X,"\n    }\n    .tui-image-editor-container .tui-image-editor-range-value {\n        ")).call(b,R,"\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {\n        ")).call(v,B,"\n    }\n    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {\n        ")).call(m,F,"\n    }\n    .tui-image-editor-container .svg_ic-menu {\n        ")).call(f,V,"\n    }\n    .tui-image-editor-container .svg_ic-submenu {\n        ")).call(p,Y,"\n    }\n    .tui-image-editor-container .tui-image-editor-controls-logo > img,\n    .tui-image-editor-container .tui-image-editor-header-logo > img {\n        ")).call(g,Z,"\n    }\n    .tui-image-editor-menu use.normal.use-default,\n    .tui-image-editor-help-menu use.normal.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(d,Q.normal.color,";\n        stroke: ")).call(h,Q.normal.color,";\n    }\n    .tui-image-editor-menu use.active.use-default,\n    .tui-image-editor-help-menu use.active.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(u,Q.active.color,";\n        stroke: ")).call(c,Q.active.color,";\n    }\n    .tui-image-editor-menu use.hover.use-default,\n    .tui-image-editor-help-menu use.hover.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(l,Q.hover.color,";\n        stroke: ")).call(s,Q.hover.color,";\n    }\n    .tui-image-editor-menu use.disabled.use-default,\n    .tui-image-editor-help-menu use.disabled.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(a,Q.disabled.color,";\n        stroke: ")).call(r,Q.disabled.color,";\n    }\n    .tui-image-editor-submenu use.normal.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(o,J.normal.color,";\n        stroke: ")).call(n,J.normal.color,";\n    }\n    .tui-image-editor-submenu use.active.use-default {\n        fill-rule: evenodd;\n        fill: ")).call(i,J.active.color,";\n        stroke: ")).call(e,J.active.color,";\n    }\n")},Je={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},qe=n(2534),$e=function(){function t(e){E(this,t),this.styles=this._changeToObject(H()({},Je,e)),se(this._styleMaker()),this._loadDefaultSvgIcon()}return D(t,[{key:"getStyle",value:function(t){var e=null,i=t.replace(/\..+$/,""),n=this.styles[t];switch(t){case"common.bi":e=this.styles[t].image;break;case"menu.icon":e={active:this.styles["".concat(i,".activeIcon")],normal:this.styles["".concat(i,".normalIcon")],hover:this.styles["".concat(i,".hoverIcon")],disabled:this.styles["".concat(i,".disabledIcon")]};break;case"submenu.icon":e={active:this.styles["".concat(i,".activeIcon")],normal:this.styles["".concat(i,".normalIcon")]};break;case"submenu.label":e={active:this._makeCssText(this.styles["".concat(i,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(i,".normalLabel")])};break;case"submenu.partition":e={vertical:this._makeCssText(H()({},n,{borderLeft:"1px solid ".concat(n.color)})),horizontal:this._makeCssText(H()({},n,{borderBottom:"1px solid ".concat(n.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":n.backgroundColor=n.color,e=this._makeCssText(n);break;default:e=this._makeCssText(n);break}return e}},{key:"_styleMaker",value:function(){var t=this.getStyle("submenu.label"),e=this.getStyle("submenu.partition");return Qe({subMenuLabelActive:t.active,subMenuLabelNormal:t.normal,submenuPartitionVertical:e.vertical,submenuPartitionHorizontal:e.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(t){var e={};return Y()(t,(function(t,i){var n=i.match(/^(.+)\.([a-z]+)$/i),o=it(n,3),r=o[1],a=o[2];e[r]||(e[r]={}),e[r][a]=t})),e}},{key:"_makeCssText",value:function(t){var e=this,i=[];return Y()(t,(function(t,n){var o,a;r()(o=["backgroundImage"]).call(o,n)>-1&&"none"!==t&&(t="url(".concat(t,")")),i.push(P()(a="".concat(e._toUnderScore(n),": ")).call(a,t))})),i.join(";")}},{key:"_toUnderScore",value:function(t){return t.replace(/([A-Z])/g,(function(t,e){return"-".concat(e.toLowerCase())}))}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var t=new DOMParser,e=qe.replace(/data:image\/svg\+xml;base64,/,""),i=t.parseFromString(atob(e),"text/xml");document.body.appendChild(i.documentElement)}}},{key:"_makeIconClassName",value:function(t,e){var i=e?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),n=i[t],o=n.path,r=n.name;return o&&r?t:"".concat(t," use-default")}},{key:"_makeSvgIconPrefix",value:function(t,e){var i,n=e?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),o=n[t],r=o.path,a=o.name;return r&&a?P()(i="".concat(r,"#")).call(i,a,"-"):"#"}},{key:"_makeSvgItem",value:function(t,e,i){var n=this;return Ze()(t).call(t,(function(t){var o,r,a=n._makeSvgIconPrefix(t,i),s=n._toUnderScore(e),l=n._makeIconClassName(t,i);return P()(o=P()(r='<use xlink:href="'.concat(a,"ic-")).call(r,s,'" class="')).call(o,l,'"/>')})).join("")}},{key:"makeMenSvgIconSet",value:function(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return P()(i='<svg class="svg_ic-'.concat(n?"submenu":"menu",'">')).call(i,this._makeSvgItem(t,e,n),"</svg>")}}]),t}(),Ke=$e,ti=n(9146),ei=n.n(ti),ii=n(6623),ni=n(4230);function oi(t,e){return oi=ni||function(t,e){return t.__proto__=e,t},oi(t,e)}function ri(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=ii(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oi(t,e)}var ai=n(3742);function si(t){return si="function"===typeof x&&"symbol"===typeof ai?function(t){return typeof t}:function(t){return t&&"function"===typeof x&&t.constructor===x&&t!==x.prototype?"symbol":typeof t},si(t)}function li(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ci(t,e){if(e&&("object"===si(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return li(t)}var ui=n(9856);function hi(t){return hi=ni?ui:function(t){return t.__proto__||ui(t)},hi(t)}var di=n(6092),gi=n.n(di),pi=n(4858),fi=n.n(pi),mi=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],vi=function(){function t(e,i){var n=i.defaultColor,o=void 0===n?"#7e7e7e":n,r=i.toggleDirection,a=void 0===r?"up":r,s=i.usageStatistics;E(this,t),this.colorpickerElement=e,this.usageStatistics=s,this._show=!1,this._colorpickerElement=e,this._toggleDirection=a,this._makePickerButtonElement(o),this._makePickerLayerElement(e,e.getAttribute("title")),this._color=o,this.picker=fi().create({container:this.pickerElement,preset:mi,color:o,usageStatistics:this.usageStatistics}),this._addEvent()}return D(t,[{key:"destroy",value:function(){var t=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",Y()(this,(function(e,i){t[i]=null}))}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this._changeColorElement(t)}},{key:"_changeColorElement",value:function(t){t?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=t):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(t){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",t?this.colorElement.style.backgroundColor=t:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(t,e){var i=document.createElement("label"),n=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",i.innerHTML=e,n.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(n),t.appendChild(this.pickerControl),t.appendChild(this.colorElement),t.appendChild(i)}},{key:"_addEvent",value:function(){var t,e=this;this.picker.on("selectColor",(function(t){e._changeColorElement(t.color),e._color=t.color,e.fire("change",t.color)})),this.eventHandler={pickerToggle:O()(t=this._pickerToggleEventHandler).call(t,this),pickerHide:function(){return e.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(t){var e=t.target,i=e&&this._isElementInColorPickerControl(e);(!i||i&&this._isPaletteButton(e))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),t.stopPropagation()}},{key:"_isPaletteButton",value:function(t){return"tui-colorpicker-palette-button"===t.className}},{key:"_isElementInColorPickerControl",value:function(t){var e=t;while(e!==document.body){if(!e)break;if(e===this.pickerControl)return!0;e=e.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var t=this.pickerControl.style,e=this._colorpickerElement.clientWidth/2+2,i=this.pickerControl.offsetWidth/2-e,n=-1*(this.pickerControl.offsetHeight+10);"down"===this._toggleDirection&&(n=30),t.top="".concat(n,"px"),t.left="-".concat(i,"px")}}]),t}();Z().mixin(vi);var bi=vi,xi=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,yi=function(){function t(e){var i,n,o,r,a,s,l,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(this,t),this._value=c.value||0,this.rangeElement=e.slider,this.rangeInputElement=e.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=c.min||0,this._max=c.max||100,this._useDecimal=c.useDecimal,this._absMax=-1*this._min+this._max,this.realTimeEvent=c.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:O()(i=this._startChangingSlide).call(i,this),stopChangingSlide:O()(n=this._stopChangingSlide).call(n,this),changeSlide:O()(o=this._changeSlide).call(o,this),changeSlideFinally:O()(r=this._changeSlideFinally).call(r,this),changeInput:O()(a=this._changeInput).call(a,this),changeInputFinally:O()(s=this._changeValueWithInput).call(s,this,!0),changeInputWithArrow:O()(l=this._changeValueWithInputKeyEvent).call(l,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=c.value,this.trigger("change")}return D(t,[{key:"destroy",value:function(){var t=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",Y()(this,(function(e,i){t[i]=null}))}},{key:"max",get:function(){return this._max},set:function(t){this._max=t,this._absMax=-1*this._min+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(t){this._min=t,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(t){t=this._useDecimal?t:ie(t);var e=t-this._min,i=e*this.rangeWidth/this._absMax;this.rangeWidth<i&&(i=this.rangeWidth),this.pointer.style.left="".concat(i,"px"),this.subbar.style.right="".concat(this.rangeWidth-i,"px"),this._value=t,this.rangeInputElement&&(this.rangeInputElement.value=t)}},{key:"trigger",value:function(t){this.fire(t,this._value)}},{key:"_getRangeWidth",value:function(){var t=function(t){return ie(window.getComputedStyle(t,null).width)};return t(this.rangeElement)-t(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(t){var e,i=t.keyCode,n=t.target;if(!(r()(e=[jt.ARROW_UP,jt.ARROW_DOWN]).call(e,i)<0)){var o=Number(n.value);o=this._valueUpDownForKeyEvent(o,i);var a=o<this._min||o>this._max;if(!a){var s=Kt(o,this._min,this.max);this.value=s,this.fire("change",s,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(t,e){var i=this._useDecimal?.1:1;return e===jt.ARROW_UP?t+=i:e===jt.ARROW_DOWN&&(t-=i),t}},{key:"_changeInput",value:function(t){var e=this;clearTimeout(this._userInputTimer);var i=t.keyCode;i<jt.DIGIT_0||i>jt.DIGIT_9?t.preventDefault():this._userInputTimer=f()((function(){e._inputSetValue(t.target.value)}),350)}},{key:"_inputSetValue",value:function(t){var e=this._useDecimal?Number(t):ie(t);e=Kt(e,this._min,this.max),this.value=e,this.fire("change",e,!0)}},{key:"_changeValueWithInput",value:function(t,e){var i,n=e.keyCode,o=e.target;if(!(r()(i=[jt.ARROW_UP,jt.ARROW_DOWN]).call(i,n)>=0)){var a=this._filterForInputText(o.value),s=!a||isNaN(a);o.value=a,s||this._inputSetValue(a)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(t){var e=t.screenX,i=e-this.firstPosition,n=this.firstLeft+i;n=n>this.rangeWidth?this.rangeWidth:n,n=n<0?0:n,this.pointer.style.left="".concat(n,"px"),this.subbar.style.right="".concat(this.rangeWidth-n,"px");var o=n/this.rangeWidth,r=this._absMax*o+this._min,a=this._useDecimal?r:ie(r),s=this.value!==a;s&&(this.value=a,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(t){if(t.stopPropagation(),"tui-image-editor-range"===t.target.className){var e=t.offsetX,i=e/this.rangeWidth,n=this._absMax*i+this._min;this.pointer.style.left="".concat(i*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-i)*this.rangeWidth,"px"),this.value=n,this.fire("change",n,!0)}}},{key:"_startChangingSlide",value:function(t){this.firstPosition=t.screenX,this.firstLeft=ie(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(t){return t.replace(xi,"$1$2$3")}}]),t}();Z().mixin(yi);var _i=yi,wi=function(){function t(e,i){var n=i.locale,o=i.name,r=i.makeSvgIcon,a=i.menuBarPosition,s=i.templateHtml,l=i.usageStatistics;E(this,t),this.subMenuElement=e,this.menuBarPosition=a,this.toggleDirection="top"===a?"down":"up",this.colorPickerControls=[],this.usageStatistics=l,this.eventHandler={},this._makeSubMenuElement({locale:n,name:o,makeSvgIcon:r,templateHtml:s})}return D(t,[{key:"selector",value:function(t){return this.subMenuElement.querySelector(t)}},{key:"colorPickerChangeShow",value:function(t){var e;st()(e=this.colorPickerControls).call(e,(function(e){t!==e&&e.hide()}))}},{key:"getButtonType",value:function(t,e){return t.className.match(RegExp("(".concat(e.join("|"),")")))[0]}},{key:"changeClass",value:function(t,e,i){t.classList.remove(e),t.classList.add(i)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(t){var e=t.locale,i=t.name,n=t.iconStyle,o=t.makeSvgIcon,r=t.templateHtml,a=document.createElement("div");a.className="tui-image-editor-menu-".concat(i),a.innerHTML=r({locale:e,iconStyle:n,makeSvgIcon:o}),this.subMenuElement.appendChild(a)}},{key:"_onStartEditingInputBox",value:function(){this.fire(Tt.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(Tt.INPUT_BOX_EDITING_STOPPED)}}]),t}();Z().mixin(wi);var ki=wi,Ci=function(t){var e,i,n,o,r,a,s,l,c=t.locale,u=t.makeSvgIcon;return P()(e=P()(i=P()(n=P()(o=P()(r=P()(a=P()(s=P()(l='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-shape-button">\n            <div class="tui-image-editor-button rect">\n                <div>\n                    '.concat(u(["normal","active"],"shape-rectangle",!0),"\n                </div>\n                <label> ")).call(l,c.localize("Rectangle"),' </label>\n            </div>\n            <div class="tui-image-editor-button circle">\n                <div>\n                    ')).call(s,u(["normal","active"],"shape-circle",!0),"\n                </div>\n                <label> ")).call(a,c.localize("Circle"),' </label>\n            </div>\n            <div class="tui-image-editor-button triangle">\n                <div>\n                    ')).call(r,u(["normal","active"],"shape-triangle",!0),"\n                </div>\n                <label> ")).call(o,c.localize("Triangle"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tie-shape-color-button">\n            <div class="tie-color-fill" title="')).call(n,c.localize("Fill"),'"></div>\n            <div class="tie-color-stroke" title="')).call(i,c.localize("Stroke"),'"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(e,c.localize("Stroke"),'</label>\n            <div class="tie-stroke-range"></div>\n            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n')};function Si(t){var e=Ii();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Ii(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Mi={stroke:"#ffbb3b",fill:"",strokeWidth:3},Ti=function(t){ri(i,t);var e=Si(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon,s=n.menuBarPosition,l=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"shape",makeSvgIcon:a,menuBarPosition:s,templateHtml:Ci,usageStatistics:l}),o.type=null,o.options=Mi,o._els={shapeSelectButton:o.selector(".tie-shape-button"),shapeColorButton:o.selector(".tie-shape-color-button"),strokeRange:new _i({slider:o.selector(".tie-stroke-range"),input:o.selector(".tie-stroke-range-value")},Ft),fillColorpicker:new bi(o.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:o.toggleDirection,usageStatistics:o.usageStatistics}),strokeColorpicker:new bi(o.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:o.toggleDirection,usageStatistics:o.usageStatistics})},o.colorPickerControls.push(o._els.fillColorpicker),o.colorPickerControls.push(o._els.strokeColorpicker),o.colorPickerInputBoxes=[],o.colorPickerInputBoxes.push(o._els.fillColorpicker.colorpickerElement.querySelector(Et.COLOR_PICKER_INPUT_BOX)),o.colorPickerInputBoxes.push(o._els.strokeColorpicker.colorpickerElement.querySelector(Et.COLOR_PICKER_INPUT_BOX)),o}return D(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),he(this)}},{key:"addEvent",value:function(t){var e,i,n,o,r,a,s=this;this.eventHandler.shapeTypeSelected=O()(e=this._changeShapeHandler).call(e,this),this.actions=t,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",O()(i=this._changeStrokeRangeHandler).call(i,this)),this._els.fillColorpicker.on("change",O()(n=this._changeFillColorHandler).call(n,this)),this._els.strokeColorpicker.on("change",O()(o=this._changeStrokeColorHandler).call(o,this)),this._els.fillColorpicker.on("changeShow",O()(r=this.colorPickerChangeShow).call(r,this)),this._els.strokeColorpicker.on("changeShow",O()(a=this.colorPickerChangeShow).call(a,this)),gi()(this.colorPickerInputBoxes,(function(t){var e,i;t.addEventListener(Tt.FOCUS,O()(e=s._onStartEditingInputBox).call(e,s)),t.addEventListener(Tt.BLUR,O()(i=s._onStopEditingInputBox).call(i,s))}),this)}},{key:"_removeEvent",value:function(){var t=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),gi()(this.colorPickerInputBoxes,(function(e){var i,n;e.removeEventListener(Tt.FOCUS,O()(i=t._onStartEditingInputBox).call(i,t)),e.removeEventListener(Tt.BLUR,O()(n=t._onStopEditingInputBox).call(n,t))}),this)}},{key:"setShapeStatus",value:function(t){var e=t.strokeWidth,i=t.strokeColor,n=t.fillColor;this._els.strokeRange.value=e,this._els.strokeColorpicker.color=i,this._els.fillColorpicker.color=n,this.options.stroke=i,this.options.fill=n,this.options.strokeWidth=e,this.actions.setDrawingShape(this.type,{strokeWidth:e})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(t){var e=t;e<=0&&(e=Ft.max),this._els.strokeRange.max=e}},{key:"setStrokeValue",value:function(t){this._els.strokeRange.value=t,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){this.actions.stopDrawingMode(),this.actions.discardSelection();var i=this.getButtonType(e,["circle","triangle","rect"]);if(this.type===i)return void this.changeStandbyMode();this.changeStandbyMode(),this.type=i,t.currentTarget.classList.add(i),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(t,e){this.options.strokeWidth=ie(t),this.actions.changeShape({strokeWidth:t},!e),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(t){t=t||"transparent",this.options.fill=t,this.actions.changeShape({fill:t})}},{key:"_changeStrokeColorHandler",value:function(t){t=t||"transparent",this.options.stroke=t,this.actions.changeShape({stroke:t})}}]),i}(ki),Ei=Ti,Ai=function(t){var e,i,n,o,r,a,s,l,c,u,h,d,g,p,f,m,v,b=t.locale,x=t.makeSvgIcon;return P()(e=P()(i=P()(n=P()(o=P()(r=P()(a=P()(s=P()(l=P()(c=P()(u=P()(h=P()(d=P()(g=P()(p=P()(f=P()(m=P()(v='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-crop-preset-button">\n            <div class="tui-image-editor-button preset preset-none active">\n                <div>\n                    '.concat(x(["normal","active"],"shape-rectangle",!0),"\n                </div>\n                <label> ")).call(v,b.localize("Custom"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-square">\n                <div>\n                    ')).call(m,x(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(f,b.localize("Square"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-3-2">\n                <div>\n                    ')).call(p,x(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(g,b.localize("3:2"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-4-3">\n                <div>\n                    ')).call(d,x(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(h,b.localize("4:3"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-5-4">\n                <div>\n                    ')).call(u,x(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(c,b.localize("5:4"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-7-5">\n                <div>\n                    ')).call(l,x(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(s,b.localize("7:5"),' </label>\n            </div>\n            <div class="tui-image-editor-button preset preset-16-9">\n                <div>\n                    ')).call(a,x(["normal","active"],"crop",!0),"\n                </div>\n                <label> ")).call(r,b.localize("16:9"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline">\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tie-crop-button action">\n            <div class="tui-image-editor-button apply">\n                ')).call(o,x(["normal","active"],"apply"),"\n                <label>\n                    ")).call(n,b.localize("Apply"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button cancel">\n                ')).call(i,x(["normal","active"],"cancel"),"\n                <label>\n                    ")).call(e,b.localize("Cancel"),"\n                </label>\n            </div>\n        </li>\n    </ul>\n")};function Di(t){var e=Li();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Li(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Oi=function(t){ri(i,t);var e=Di(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon,s=n.menuBarPosition,l=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"crop",makeSvgIcon:a,menuBarPosition:s,templateHtml:Ai,usageStatistics:l}),o.status="active",o._els={apply:o.selector(".tie-crop-button .apply"),cancel:o.selector(".tie-crop-button .cancel"),preset:o.selector(".tie-crop-preset-button")},o.defaultPresetButton=o._els.preset.querySelector(".preset-none"),o}return D(i,[{key:"destroy",value:function(){this._removeEvent(),he(this)}},{key:"addEvent",value:function(t){var e,i,n,o=O()(e=this._applyEventHandler).call(e,this),r=O()(i=this._cancelEventHandler).call(i,this),a=O()(n=this._cropzonePresetEventHandler).call(n,this);this.eventHandler={apply:o,cancel:r,cropzonePreset:a},this.actions=t,this._els.apply.addEventListener("click",o),this._els.cancel.addEventListener("click",r),this._els.preset.addEventListener("click",a)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button.preset");if(e){var i=e.className.match(/preset-[^\s]+/),n=it(i,1),o=n[0];this._setPresetButtonActive(e),this.actions.preset(o)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(t){t?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultPresetButton;Y()(this._els.preset.querySelectorAll(".preset"),(function(t){t.classList.remove("active")})),t&&t.classList.add("active")}}]),i}(ki),ji=Oi,Pi=function(t){var e,i,n,o,r,a,s=t.locale,l=t.makeSvgIcon;return P()(e=P()(i=P()(n=P()(o=P()(r=P()(a='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-range-wrap tui-image-editor-newline">\n                <label class="range">'.concat(s.localize("Width"),'&nbsp;</label>\n                <div class="tie-width-range"></div>\n                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>\n                <div class="tui-image-editor-partition tui-image-editor-newline"></div>\n                <label class="range">')).call(a,s.localize("Height"),'</label>\n                <div class="tie-height-range"></div>\n                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline"></li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-wrap">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-lock-aspect-ratio">\n                        <span>')).call(r,s.localize("Lock Aspect Ratio"),'</span>\n                    </label>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline"></li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-partition tui-image-editor-newline"></li>\n        <li class="tie-resize-button action">\n            <div class="tui-image-editor-button apply">\n                ')).call(o,l(["normal","active"],"apply"),"\n                <label>\n                    ")).call(n,s.localize("Apply"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button cancel">\n                ')).call(i,l(["normal","active"],"cancel"),"\n                <label>\n                    ")).call(e,s.localize("Cancel"),"\n                </label>\n            </div>\n        </li>\n    </ul>\n")};function Ni(t){var e=zi();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function zi(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Ri=function(t){ri(i,t);var e=Ni(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon,s=n.menuBarPosition,l=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"resize",makeSvgIcon:a,menuBarPosition:s,templateHtml:Pi,usageStatistics:l}),o.status="active",o._lockState=!1,o._originalDimensions=null,o._els={widthRange:new _i({slider:o.selector(".tie-width-range"),input:o.selector(".tie-width-range-value")},Xt),heightRange:new _i({slider:o.selector(".tie-height-range"),input:o.selector(".tie-height-range-value")},Xt),lockAspectRatio:o.selector(".tie-lock-aspect-ratio"),apply:o.selector(".tie-resize-button .apply"),cancel:o.selector(".tie-resize-button .cancel")},o}return D(i,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var t=this.actions.getCurrentDimensions();this._originalDimensions=t,this.setWidthValue(t.width),this.setHeightValue(t.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(t){this._els.widthRange.min=this.calcMinValue(t.minWidth),this._els.heightRange.min=this.calcMinValue(t.minHeight),this._els.widthRange.max=this.calcMaxValue(t.maxWidth),this._els.heightRange.max=this.calcMaxValue(t.maxHeight)}},{key:"calcMaxValue",value:function(t){return t<=0&&(t=Xt.max),t}},{key:"calcMinValue",value:function(t){return t<=0&&(t=Xt.min),t}},{key:"setWidthValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._els.widthRange.value=t,e&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._els.heightRange.value=t,e&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),he(this)}},{key:"addEvent",value:function(t){var e,i,n,o,r;this._els.widthRange.on("change",O()(e=this._changeWidthRangeHandler).call(e,this)),this._els.heightRange.on("change",O()(i=this._changeHeightRangeHandler).call(i,this)),this._els.lockAspectRatio.addEventListener("change",O()(n=this._changeLockAspectRatio).call(n,this));var a=O()(o=this._applyEventHandler).call(o,this),s=O()(r=this._cancelEventHandler).call(r,this);this.eventHandler={apply:a,cancel:s},this.actions=t,this._els.apply.addEventListener("click",a),this._els.cancel.addEventListener("click",s)}},{key:"_changeWidthRangeHandler",value:function(t){this.actions.preview("width",ie(t),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(t){this.actions.preview("height",ie(t),this._lockState)}},{key:"_changeLockAspectRatio",value:function(t){this._lockState=t.target.checked,this.actions.lockAspectRatio(this._lockState,Xt.min,Xt.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(t){t?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),i}(ki),Bi=Ri,Fi=function(t){var e,i,n,o,r,a=t.locale,s=t.makeSvgIcon;return P()(e=P()(i=P()(n=P()(o=P()(r='\n    <ul class="tie-flip-button tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button flipX">\n                <div>\n                    '.concat(s(["normal","active"],"flip-x",!0),"\n                </div>\n                <label>\n                    ")).call(r,a.localize("Flip X"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button flipY">\n                <div>\n                    ')).call(o,s(["normal","active"],"flip-y",!0),"\n                </div>\n                <label>\n                    ")).call(n,a.localize("Flip Y"),'\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tui-image-editor-button resetFlip">\n                <div>\n                    ')).call(i,s(["normal","active"],"flip-reset",!0),"\n                </div>\n                <label>\n                    ")).call(e,a.localize("Reset"),"\n                </label>\n            </div>\n        </li>\n    </ul>\n")};function Ui(t){var e=Hi();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Hi(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Wi=function(t){ri(i,t);var e=Ui(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon,s=n.menuBarPosition,l=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"flip",makeSvgIcon:a,menuBarPosition:s,templateHtml:Fi,usageStatistics:l}),o.flipStatus=!1,o._els={flipButton:o.selector(".tie-flip-button")},o}return D(i,[{key:"destroy",value:function(){this._removeEvent(),he(this)}},{key:"addEvent",value:function(t){var e;this.eventHandler.changeFlip=O()(e=this._changeFlip).call(e,this),this._actions=t,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(t){var e=this,i=t.target.closest(".tui-image-editor-button");if(i){var n=this.getButtonType(i,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&"resetFlip"===n)return;this._actions.flip(n).then((function(t){var i=e._els.flipButton.classList;e.flipStatus=!1,i.remove("resetFlip"),Y()(["flipX","flipY"],(function(n){i.remove(n),t[n]&&(i.add(n),i.add("resetFlip"),e.flipStatus=!0)}))}))}}}]),i}(ki),Xi=Wi,Gi=function(t){var e,i,n=t.locale,o=t.makeSvgIcon;return P()(e=P()(i='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-rotate-button">\n            <div class="tui-image-editor-button clockwise">\n                <div>\n                    '.concat(o(["normal","active"],"rotate-clockwise",!0),'\n                </div>\n                <label> 30 </label>\n            </div>\n            <div class="tui-image-editor-button counterclockwise">\n                <div>\n                    ')).call(i,o(["normal","active"],"rotate-counterclockwise",!0),'\n                </div>\n                <label> -30 </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(e,n.localize("Range"),'</label>\n            <div class="tie-rotate-range"></div>\n            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n')};function Yi(t){var e=Vi();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Vi(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Zi=30,Qi=-30,Ji=function(t){ri(i,t);var e=Yi(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon,s=n.menuBarPosition,l=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"rotate",makeSvgIcon:a,menuBarPosition:s,templateHtml:Gi,usageStatistics:l}),o._value=0,o._els={rotateButton:o.selector(".tie-rotate-button"),rotateRange:new _i({slider:o.selector(".tie-rotate-range"),input:o.selector(".tie-rotate-range-value")},Rt)},o}return D(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),he(this)}},{key:"setRangeBarAngle",value:function(t,e){var i=e;"rotate"===t&&(i=rt()(this._els.rotateRange.value,10)+e),this._setRangeBarRatio(i)}},{key:"_setRangeBarRatio",value:function(t){this._els.rotateRange.value=t}},{key:"addEvent",value:function(t){var e,i;this.eventHandler.rotationAngleChanged=O()(e=this._changeRotateForButton).call(e,this),this.actions=t,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",O()(i=this._changeRotateForRange).call(i,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(t,e){var i=ie(t);this.actions.setAngle(i,!e),this._value=i}},{key:"_changeRotateForButton",value:function(t){var e=t.target.closest(".tui-image-editor-button"),i=this._els.rotateRange.value;if(e){var n=this.getButtonType(e,["counterclockwise","clockwise"]),o={clockwise:Zi,counterclockwise:Qi}[n],r=rt()(i,10)+o,a=r>=-360&&r<=360;a&&this.actions.rotate(o)}}}]),i}(ki),qi=Ji,$i=function(t){var e,i,n,o,r,a,s,l,c,u,h,d,g,p=t.locale,f=t.makeSvgIcon;return P()(e=P()(i=P()(n=P()(o=P()(r=P()(a=P()(s=P()(l=P()(c=P()(u=P()(h=P()(d=P()(g='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-text-effect-button">\n            <div class="tui-image-editor-button bold">\n                <div>\n                    '.concat(f(["normal","active"],"text-bold",!0),"\n                </div>\n                <label> ")).call(g,p.localize("Bold"),' </label>\n            </div>\n            <div class="tui-image-editor-button italic">\n                <div>\n                    ')).call(d,f(["normal","active"],"text-italic",!0),"\n                </div>\n                <label> ")).call(h,p.localize("Italic"),' </label>\n            </div>\n            <div class="tui-image-editor-button underline">\n                <div>\n                    ')).call(u,f(["normal","active"],"text-underline",!0),"\n                </div>\n                <label> ")).call(c,p.localize("Underline"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tie-text-align-button">\n            <div class="tui-image-editor-button left">\n                <div>\n                    ')).call(l,f(["normal","active"],"text-align-left",!0),"\n                </div>\n                <label> ")).call(s,p.localize("Left"),' </label>\n            </div>\n            <div class="tui-image-editor-button center">\n                <div>\n                    ')).call(a,f(["normal","active"],"text-align-center",!0),"\n                </div>\n                <label> ")).call(r,p.localize("Center"),' </label>\n            </div>\n            <div class="tui-image-editor-button right">\n                <div>\n                    ')).call(o,f(["normal","active"],"text-align-right",!0),"\n                </div>\n                <label> ")).call(n,p.localize("Right"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tie-text-color" title="')).call(i,p.localize("Color"),'"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(e,p.localize("Text size"),'</label>\n            <div class="tie-text-range"></div>\n            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n')};function Ki(t){var e=tn();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function tn(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var en=function(t){ri(i,t);var e=Ki(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon,s=n.menuBarPosition,l=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"text",makeSvgIcon:a,menuBarPosition:s,templateHtml:$i,usageStatistics:l}),o.effect={bold:!1,italic:!1,underline:!1},o.align="tie-text-align-left",o._els={textEffectButton:o.selector(".tie-text-effect-button"),textAlignButton:o.selector(".tie-text-align-button"),textColorpicker:new bi(o.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:o.toggleDirection,usageStatistics:o.usageStatistics}),textRange:new _i({slider:o.selector(".tie-text-range"),input:o.selector(".tie-text-range-value")},Ut)},o.colorPickerInputBox=o._els.textColorpicker.colorpickerElement.querySelector(Et.COLOR_PICKER_INPUT_BOX),o}return D(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),he(this)}},{key:"addEvent",value:function(t){var e,i,n,o,r,a,s=O()(e=this._setTextEffectHandler).call(e,this),l=O()(i=this._setTextAlignHandler).call(i,this);this.eventHandler={setTextEffect:s,setTextAlign:l},this.actions=t,this._els.textEffectButton.addEventListener("click",s),this._els.textAlignButton.addEventListener("click",l),this._els.textRange.on("change",O()(n=this._changeTextRnageHandler).call(n,this)),this._els.textColorpicker.on("change",O()(o=this._changeColorHandler).call(o,this)),this.colorPickerInputBox.addEventListener(Tt.FOCUS,O()(r=this._onStartEditingInputBox).call(r,this)),this.colorPickerInputBox.addEventListener(Tt.BLUR,O()(a=this._onStopEditingInputBox).call(a,this))}},{key:"_removeEvent",value:function(){var t,e,i=this.eventHandler,n=i.setTextEffect,o=i.setTextAlign;this._els.textEffectButton.removeEventListener("click",n),this._els.textAlignButton.removeEventListener("click",o),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(Tt.FOCUS,O()(t=this._onStartEditingInputBox).call(t,this)),this.colorPickerInputBox.removeEventListener(Tt.BLUR,O()(e=this._onStopEditingInputBox).call(e,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(t){this._els.textColorpicker.color=t}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(t){this._els.textRange.value=t}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=ct()(t),i=t.fontSize,n=t.fontStyle,o=t.fontWeight,r=t.textDecoration,a=t.textAlign;this.textColor=e,this.fontSize=i,this.setEffectState("italic",n),this.setEffectState("bold",o),this.setEffectState("underline",r),this.setAlignState("tie-text-align-".concat(a))}},{key:"setEffectState",value:function(t,e){var i="italic"===e||"bold"===e||"underline"===e,n=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(t));this.effect[t]=i,n.classList[i?"add":"remove"]("active")}},{key:"setAlignState",value:function(t){var e=this._els.textAlignButton;e.classList.remove(this.align),e.classList.add(t),this.align=t}},{key:"_setTextEffectHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){var i=e.className.match(/(bold|italic|underline)/),n=it(i,1),o=n[0],r={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[o];this.effect[o]=!this.effect[o],e.classList.toggle("active"),this.actions.changeTextStyle(r)}}},{key:"_setTextAlignHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){var i=this.getButtonType(e,["left","center","right"]),n="tie-text-align-".concat(i);t.currentTarget.classList.remove(this.align),this.align!==n&&t.currentTarget.classList.add(n),this.actions.changeTextStyle({textAlign:i}),this.align=n}}},{key:"_changeTextRnageHandler",value:function(t,e){this.actions.changeTextStyle({fontSize:t},!e)}},{key:"_changeColorHandler",value:function(t){t=t||"transparent",this.actions.changeTextStyle({fill:t})}}]),i}(ki),nn=en,on=function(t){var e,i,n,o=t.locale,r=t.makeSvgIcon;return P()(e=P()(i=P()(n='\n    <ul class="tui-image-editor-submenu-item">\n        <li>\n            <div class="tui-image-editor-button">\n                <div>\n                    <input type="file" accept="image/*" class="tie-mask-image-file">\n                    '.concat(r(["normal","active"],"mask-load",!0),"\n                </div>\n                <label> ")).call(n,o.localize("Load Mask Image"),' </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">\n            <div class="tui-image-editor-button apply">\n                ')).call(i,r(["normal","active"],"apply"),"\n                <label>\n                    ")).call(e,o.localize("Apply"),"\n                </label>\n            </div>\n        </li>\n    </ul>\n")};function rn(t){var e=an();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function an(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var sn=function(t){ri(i,t);var e=rn(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon,s=n.menuBarPosition,l=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"mask",makeSvgIcon:a,menuBarPosition:s,templateHtml:on,usageStatistics:l}),o._els={applyButton:o.selector(".tie-mask-apply"),maskImageButton:o.selector(".tie-mask-image-file")},o}return D(i,[{key:"destroy",value:function(){this._removeEvent(),he(this)}},{key:"addEvent",value:function(t){var e,i,n=O()(e=this._loadMaskFile).call(e,this),o=O()(i=this._applyMask).call(i,this);this.eventHandler={loadMaskFile:n,applyMask:o},this.actions=t,this._els.maskImageButton.addEventListener("change",n),this._els.applyButton.addEventListener("click",o)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(t){var e;oe()||alert("This browser does not support file-api");var i=it(t.target.files,1),n=i[0];n&&(e=B().createObjectURL(n),this.actions.loadImageFromURL(e,n),this._els.applyButton.classList.add("active"))}}]),i}(ki),ln=sn,cn=function(t){var e,i,n,o,r,a,s,l,c,u,h,d,g,p,f,m,v,b,x,y,_=t.locale,w=t.makeSvgIcon;return P()(e=P()(i=P()(n=P()(o=P()(r=P()(a=P()(s=P()(l=P()(c=P()(u=P()(h=P()(d=P()(g=P()(p=P()(f=P()(m=P()(v=P()(b=P()(x=P()(y='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-icon-add-button">\n            <div class="tui-image-editor-button" data-icontype="icon-arrow">\n                <div>\n                    '.concat(w(["normal","active"],"icon-arrow",!0),"\n                </div>\n                <label>\n                    ")).call(y,_.localize("Arrow"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">\n                <div>\n                    ')).call(x,w(["normal","active"],"icon-arrow-2",!0),"\n                </div>\n                <label>\n                    ")).call(b,_.localize("Arrow-2"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">\n                <div>\n                    ')).call(v,w(["normal","active"],"icon-arrow-3",!0),"\n                </div>\n                <label>\n                    ")).call(m,_.localize("Arrow-3"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star">\n                <div>\n                    ')).call(f,w(["normal","active"],"icon-star",!0),"\n                </div>\n                <label>\n                    ")).call(p,_.localize("Star-1"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button" data-icontype="icon-star-2">\n                <div>\n                    ')).call(g,w(["normal","active"],"icon-star-2",!0),"\n                </div>\n                <label>\n                    ")).call(d,_.localize("Star-2"),'\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-polygon">\n                <div>\n                    ')).call(h,w(["normal","active"],"icon-polygon",!0),"\n                </div>\n                <label>\n                    ")).call(u,_.localize("Polygon"),'\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-location">\n                <div>\n                    ')).call(c,w(["normal","active"],"icon-location",!0),"\n                </div>\n                <label>\n                    ")).call(l,_.localize("Location"),'\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-heart">\n                <div>\n                    ')).call(s,w(["normal","active"],"icon-heart",!0),"\n                </div>\n                <label>\n                    ")).call(a,_.localize("Heart"),'\n                </label>\n            </div>\n\n            <div class="tui-image-editor-button" data-icontype="icon-bubble">\n                <div>\n                    ')).call(r,w(["normal","active"],"icon-bubble",!0),"\n                </div>\n                <label>\n                    ")).call(o,_.localize("Bubble"),'\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tie-icon-add-button">\n            <div class="tui-image-editor-button" style="margin:0">\n                <div>\n                    <input type="file" accept="image/*" class="tie-icon-image-file">\n                    ')).call(n,w(["normal","active"],"icon-load",!0),"\n                </div>\n                <label>\n                    ")).call(i,_.localize("Custom icon"),'\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tie-icon-color" title="')).call(e,_.localize("Color"),'"></div>\n        </li>\n    </ul>\n')};function un(t){var e=hn();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function hn(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var dn=function(t){ri(i,t);var e=un(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon,s=n.menuBarPosition,l=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"icon",makeSvgIcon:a,menuBarPosition:s,templateHtml:cn,usageStatistics:l}),o.iconType=null,o._iconMap={},o._els={registerIconButton:o.selector(".tie-icon-image-file"),addIconButton:o.selector(".tie-icon-add-button"),iconColorpicker:new bi(o.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:o.toggleDirection,usageStatistics:o.usageStatistics})},o.colorPickerInputBox=o._els.iconColorpicker.colorpickerElement.querySelector(Et.COLOR_PICKER_INPUT_BOX),o}return D(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),he(this)}},{key:"addEvent",value:function(t){var e,i,n,o,r,a=O()(e=this._registerIconHandler).call(e,this),s=O()(i=this._addIconHandler).call(i,this);this.eventHandler={registerIcon:a,addIcon:s},this.actions=t,this._els.iconColorpicker.on("change",O()(n=this._changeColorHandler).call(n,this)),this._els.registerIconButton.addEventListener("change",a),this._els.addIconButton.addEventListener("click",s),this.colorPickerInputBox.addEventListener(Tt.FOCUS,O()(o=this._onStartEditingInputBox).call(o,this)),this.colorPickerInputBox.addEventListener(Tt.BLUR,O()(r=this._onStopEditingInputBox).call(r,this))}},{key:"_removeEvent",value:function(){var t,e;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(Tt.FOCUS,O()(t=this._onStartEditingInputBox).call(t,this)),this.colorPickerInputBox.removeEventListener(Tt.BLUR,O()(e=this._onStopEditingInputBox).call(e,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var t=this;Y()(zt,(function(e,i){t.actions.registerDefaultIcons(i,e)}))}},{key:"setIconPickerColor",value:function(t){this._els.iconColorpicker.color=t}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(t){t=t||"transparent",this.actions.changeColor(t)}},{key:"_addIconHandler",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){var i=e.getAttribute("data-icontype"),n=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(i),this.iconType===i?this.changeStandbyMode():(this.actions.addIcon(i,n),this.iconType=i)}}},{key:"_registerIconHandler",value:function(t){var e;oe||alert("This browser does not support file-api");var i=it(t.target.files,1),n=i[0];n&&(e=B().createObjectURL(n),this.actions.registerCustomIcon(e,n))}}]),i}(ki),gn=dn,pn=function(t){var e,i,n,o,r,a=t.locale,s=t.makeSvgIcon;return P()(e=P()(i=P()(n=P()(o=P()(r='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tie-draw-line-select-button">\n            <div class="tui-image-editor-button free">\n                <div>\n                    '.concat(s(["normal","active"],"draw-free",!0),"\n                </div>\n                <label>\n                    ")).call(r,a.localize("Free"),'\n                </label>\n            </div>\n            <div class="tui-image-editor-button line">\n                <div>\n                    ')).call(o,s(["normal","active"],"draw-line",!0),"\n                </div>\n                <label>\n                    ")).call(n,a.localize("Straight"),'\n                </label>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="tie-draw-color" title="')).call(i,a.localize("Color"),'"></div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-newline tui-image-editor-range-wrap">\n            <label class="range">')).call(e,a.localize("Range"),'</label>\n            <div class="tie-draw-range"></div>\n            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />\n        </li>\n    </ul>\n')};function fn(t){var e=mn();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function mn(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var vn=.7,bn=function(t){ri(i,t);var e=fn(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon,s=n.menuBarPosition,l=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"draw",makeSvgIcon:a,menuBarPosition:s,templateHtml:pn,usageStatistics:l}),o._els={lineSelectButton:o.selector(".tie-draw-line-select-button"),drawColorPicker:new bi(o.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:o.toggleDirection,usageStatistics:o.usageStatistics}),drawRange:new _i({slider:o.selector(".tie-draw-range"),input:o.selector(".tie-draw-range-value")},Bt)},o.type=null,o.color=o._els.drawColorPicker.color,o.width=o._els.drawRange.value,o.colorPickerInputBox=o._els.drawColorPicker.colorpickerElement.querySelector(Et.COLOR_PICKER_INPUT_BOX),o}return D(i,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),he(this)}},{key:"addEvent",value:function(t){var e,i,n,o,r;this.eventHandler.changeDrawType=O()(e=this._changeDrawType).call(e,this),this.actions=t,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",O()(i=this._changeDrawColor).call(i,this)),this._els.drawRange.on("change",O()(n=this._changeDrawRange).call(n,this)),this.colorPickerInputBox.addEventListener(Tt.FOCUS,O()(o=this._onStartEditingInputBox).call(o,this)),this.colorPickerInputBox.addEventListener(Tt.BLUR,O()(r=this._onStopEditingInputBox).call(r,this))}},{key:"_removeEvent",value:function(){var t,e;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(Tt.FOCUS,O()(t=this._onStartEditingInputBox).call(t,this)),this.colorPickerInputBox.removeEventListener(Tt.BLUR,O()(e=this._onStopEditingInputBox).call(e,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:re(this.color,vn)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(t){var e=t.target.closest(".tui-image-editor-button");if(e){var i=this.getButtonType(e,["free","line"]);if(this.actions.discardSelection(),this.type===i)return void this.changeStandbyMode();this.changeStandbyMode(),this.type=i,this._els.lineSelectButton.classList.add(i),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(t){this.color=t||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(t){this.width=t,this.type?this.setDrawMode():this.changeStartMode()}}]),i}(ki),xn=bn,yn=n(9886),_n=n.n(yn),wn=function(t){var e,i,n,o,r,a,s,l,c,u,h,d,g,p,f,m,v=t.locale;return P()(e=P()(i=P()(n=P()(o=P()(r=P()(a=P()(s=P()(l=P()(c=P()(u=P()(h=P()(d=P()(g=P()(p=P()(f=P()(m='\n    <ul class="tui-image-editor-submenu-item">\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-wrap fixed-width">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-grayscale">\n                        <span>'.concat(v.localize("Grayscale"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-invert">\n                        <span>')).call(m,v.localize("Invert"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-sepia">\n                        <span>')).call(f,v.localize("Sepia"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-vintage">\n                        <span>')).call(p,v.localize("Sepia2"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-blur">\n                        <span>')).call(g,v.localize("Blur"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-sharpen">\n                        <span>')).call(d,v.localize("Sharpen"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-emboss">\n                        <span>')).call(h,v.localize("Emboss"),'</span>\n                    </label>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">\n                <div class="tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <label>\n                            <input type="checkbox" class="tie-remove-white">\n                            <span>')).call(u,v.localize("Remove White"),'</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>')).call(c,v.localize("Distance"),'</label>\n                    <div class="tie-removewhite-distance-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-brightness">\n                        <span>')).call(l,v.localize("Brightness"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div class="tie-brightness-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-noise">\n                        <span>')).call(s,v.localize("Noise"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div class="tie-noise-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition only-left-right">\n            <div></div>\n        </li>\n        <li class="tui-image-editor-submenu-align">\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-pixelate">\n                        <span>')).call(a,v.localize("Pixelate"),'</span>\n                    </label>\n                </div>\n                <div class="tui-image-editor-range-wrap short">\n                    <div class="tie-pixelate-range"></div>\n                </div>\n            </div>\n            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">\n                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">\n                    <div class="tui-image-editor-checkbox">\n                        <label>\n                            <input type="checkbox" class="tie-color-filter">\n                            <span>')).call(r,v.localize("Color Filter"),'</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">\n                    <label>')).call(o,v.localize("Threshold"),'</label>\n                    <div class="tie-colorfilter-threshold-range"></div>\n                </div>\n            </div>\n        </li>\n        <li class="tui-image-editor-partition">\n            <div></div>\n        </li>\n        <li>\n            <div class="filter-color-item">\n                <div class="tie-filter-tint-color" title="')).call(n,v.localize("Tint"),'"></div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-tint">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div class="tie-filter-multiply-color" title="')).call(i,v.localize("Multiply"),'"></div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-multiply">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n            <div class="filter-color-item">\n                <div class="tie-filter-blend-color" title="')).call(e,v.localize("Blend"),'"></div>\n                <div class="tui-image-editor-checkbox">\n                    <label>\n                        <input type="checkbox" class="tie-blend">\n                        <span></span>\n                    </label>\n                </div>\n            </div>\n        </li>\n    </ul>\n')};function kn(t){var e=Cn();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Cn(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Sn="130px",In=["add","diff","subtract","multiply","screen","lighten","darken"],Mn=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],Tn={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},En=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],An=["filterBlendColor","filterMultiplyColor","filterTintColor"],Dn=function(t){ri(i,t);var e=kn(i);function i(t,n){var o,r=n.locale,a=n.menuBarPosition,s=n.usageStatistics;return E(this,i),o=e.call(this,t,{locale:r,name:"filter",menuBarPosition:a,templateHtml:wn,usageStatistics:s}),o.selectBoxShow=!1,o.checkedMap={},o._makeControlElement(),o}return D(i,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),he(this)}},{key:"_removeEvent",value:function(){var t,e=this;Y()(Mn,(function(t){var i=e.selector(".tie-".concat(t)),n=ne(t);i.removeEventListener("change",e.eventHandler[n])})),Y()(P()(t=[]).call(t,En,An),(function(t){e._els[t].off()})),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),gi()(this.colorPickerInputBoxes,(function(t){var i,n;t.removeEventListener(Tt.FOCUS,O()(i=e._onStartEditingInputBox).call(i,e)),t.removeEventListener(Tt.BLUR,O()(n=e._onStopEditingInputBox).call(n,e))}),this)}},{key:"_destroyToolInstance",value:function(){var t,e=this;Y()(P()(t=[]).call(t,En,An),(function(t){e._els[t].destroy()}))}},{key:"addEvent",value:function(t){var e,i,n,o=this,r=t.applyFilter,a=function(t){var e;return O()(e=o._changeFilterState).call(e,o,r,t)},s=function(t){return function(e,i){return o._changeFilterState(r,t,i)}};this.eventHandler={changeBlendFilter:a("blend"),blandTypeClick:function(t){return t.stopPropagation()}},Y()(Mn,(function(t){var e=o.selector(".tie-".concat(t)),i=ne(t);o.checkedMap[i]=e,o.eventHandler[i]=a(i),e.addEventListener("change",o.eventHandler[i])})),this._els.removewhiteDistanceRange.on("change",s("removeWhite")),this._els.colorfilterThresholdRange.on("change",s("colorFilter")),this._els.pixelateRange.on("change",s("pixelate")),this._els.noiseRange.on("change",s("noise")),this._els.brightnessRange.on("change",s("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",a("multiply")),this._els.filterTintColor.on("change",a("tint")),this._els.tintOpacity.on("change",s("tint")),this._els.filterMultiplyColor.on("changeShow",O()(e=this.colorPickerChangeShow).call(e,this)),this._els.filterTintColor.on("changeShow",O()(i=this.colorPickerChangeShow).call(i,this)),this._els.filterBlendColor.on("changeShow",O()(n=this.colorPickerChangeShow).call(n,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),gi()(this.colorPickerInputBoxes,(function(t){var e,i;t.addEventListener(Tt.FOCUS,O()(e=o._onStartEditingInputBox).call(e,o)),t.addEventListener(Tt.BLUR,O()(i=o._onStopEditingInputBox).call(i,o))}),this)}},{key:"setFilterState",value:function(t){var e=t.type,i=t.options,n=t.action,o=this._getFilterNameFromOptions(e,i),r="remove"===n;r||this._setFilterState(o,i),this.checkedMap[o].checked=!r}},{key:"initFilterCheckBoxState",value:function(){Y()(this.checkedMap,(function(t){t.checked=!1}),this)}},{key:"_setFilterState",value:function(t,e){"colorFilter"===t?this._els.colorfilterThresholdRange.value=e.distance:"removeWhite"===t?this._els.removewhiteDistanceRange.value=e.distance:"pixelate"===t?this._els.pixelateRange.value=e.blocksize:"brightness"===t?this._els.brightnessRange.value=e.brightness:"noise"===t?this._els.noiseRange.value=e.noise:"tint"===t?(this._els.tintOpacity.value=e.alpha,this._els.filterTintColor.color=e.color):"blend"===t?this._els.filterBlendColor.color=e.color:"multiply"===t&&(this._els.filterMultiplyColor.color=e.color)}},{key:"_getFilterNameFromOptions",value:function(t,e){var i=t;return"removeColor"===t?i=_n()(e.useAlpha)?"removeWhite":"colorFilter":"blendColor"===t&&(i={add:"blend",multiply:"multiply",tint:"tint"}[e.mode]),i}},{key:"_changeFilterState",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.checkedMap[e].checked,o=Tn[e],r=this.checkedMap[e].closest(".tui-image-editor-checkbox-group");r&&(n?r.classList.remove("tui-image-editor-disabled"):r.classList.add("tui-image-editor-disabled")),t(n,o,this._getFilterOption(e),!i)}},{key:"_getFilterOption",value:function(t){var e={};switch(t){case"removeWhite":e.color="#FFFFFF",e.useAlpha=!1,e.distance=Xe()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":e.color="#FFFFFF",e.distance=Xe()(this._els.colorfilterThresholdRange.value);break;case"pixelate":e.blocksize=ie(this._els.pixelateRange.value);break;case"noise":e.noise=ie(this._els.noiseRange.value);break;case"brightness":e.brightness=Xe()(this._els.brightnessRange.value);break;case"blend":e.mode="add",e.color=this._els.filterBlendColor.color,e.mode=this._els.blendType.value;break;case"multiply":e.mode="multiply",e.color=this._els.filterMultiplyColor.color;break;case"tint":e.mode="tint",e.color=this._els.filterTintColor.color,e.alpha=this._els.tintOpacity.value;break;case"blur":e.blur=this._els.blurRange.value;break;default:break}return e}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new _i({slider:this.selector(".tie-removewhite-distance-range")},Ht.removewhiteDistanceRange),brightnessRange:new _i({slider:this.selector(".tie-brightness-range")},Ht.brightnessRange),noiseRange:new _i({slider:this.selector(".tie-noise-range")},Ht.noiseRange),pixelateRange:new _i({slider:this.selector(".tie-pixelate-range")},Ht.pixelateRange),colorfilterThresholdRange:new _i({slider:this.selector(".tie-colorfilter-threshold-range")},Ht.colorfilterThresholdRange),filterTintColor:new bi(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new bi(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new bi(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:Ht.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(Et.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(Et.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(Et.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(t){var e=document.createElement("div"),i=document.createElement("label"),n=document.createElement("div");return n.id="tie-filter-tint-opacity",i.innerHTML="Opacity",e.appendChild(i),e.appendChild(n),t.appendChild(e),t.style.height=Sn,new _i({slider:n},Ht.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(t){var e=document.createElement("div"),i=document.createElement("select"),n=document.createElement("ul");return e.className="tui-image-editor-selectlist-wrap",n.className="tui-image-editor-selectlist",e.appendChild(i),e.appendChild(n),this._makeSelectOptionList(i),t.appendChild(e),t.style.height=Sn,this._drawSelectOptionList(i,n),this._pickerWithSelectboxForAddEvent(i,n),i}},{key:"_drawSelectOptionList",value:function(t,e){var i=t.querySelectorAll("option");Y()(i,(function(t){var i=document.createElement("li");i.innerHTML=t.innerHTML,i.setAttribute("data-item",t.value),e.appendChild(i)}))}},{key:"_pickerWithSelectboxForAddEvent",value:function(t,e){var i=this;e.addEventListener("click",(function(n){var o=n.target.getAttribute("data-item"),r=document.createEvent("HTMLEvents");t.querySelector('[value="'.concat(o,'"]')).selected=!0,r.initEvent("change",!0,!0),t.dispatchEvent(r),i.selectBoxShow=!1,e.style.display="none"})),t.addEventListener("mousedown",(function(n){n.preventDefault(),i.selectBoxShow=!i.selectBoxShow,e.style.display=i.selectBoxShow?"block":"none",e.setAttribute("data-selectitem",t.value),e.querySelector("[data-item='".concat(t.value,"']")).classList.add("active")}))}},{key:"_makeSelectOptionList",value:function(t){Y()(In,(function(e){var i=document.createElement("option");i.setAttribute("value",e),i.innerHTML=e.replace(/^[a-z]/,(function(t){return t.toUpperCase()})),t.appendChild(i)}))}}]),i}(ki),Ln=Dn,On=n(4383),jn=n.n(On),Pn=function(){function t(e,i){var n=i.name;E(this,t),this.name=n,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),e.appendChild(this.panelElement)}return D(t,[{key:"_makePanelElement",value:function(){var t=document.createElement("div");return t.className="tie-panel-".concat(this.name),t}},{key:"_makeListElement",value:function(){var t=document.createElement("ol");return t.className="".concat(this.name,"-list"),t}},{key:"makeListItemElement",value:function(t){var e=document.createElement("li");return e.innerHTML=t,e.className="".concat(this.name,"-item"),e.setAttribute("data-index",this.items.length),e}},{key:"pushListItemElement",value:function(t){this.listElement.appendChild(t),this.listElement.scrollTop+=t.offsetHeight,this.items.push(t)}},{key:"deleteListItemElement",value:function(t,e){for(var i=this.items,n=t;n<e;n+=1)this.listElement.removeChild(i[n]);s()(i).call(i,t,e-t+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(t,e){this.items[t]&&this.items[t].classList.add(e)}},{key:"removeClass",value:function(t,e){this.items[t]&&this.items[t].classList.remove(e)}},{key:"toggleClass",value:function(t,e){this.items[t]&&this.items[t].classList.toggle(e)}}]),t}(),Nn=Pn,zn=function(t){var e,i,n,o=t.locale,r=t.makeSvgIcon,a=t.name,s=t.detail;return P()(e=P()(i=P()(n='\n    <div class="tui-image-editor-history-item history">\n        <div class="history-item-icon">\n            '.concat(r(["normal","active"],"history-".concat(a.toLowerCase()),!0),"\n        </div>\n        <span>\n            ")).call(n,o.localize(a),"\n            ")).call(i,s?"(".concat(o.localize(s),")"):"",'\n        </span>\n        <div class="history-item-checkbox">\n            ')).call(e,r(["normal"],"history-check",!0),"\n        </div>\n    </div>\n")};function Rn(t){var e=Bn();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Bn(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Fn="history-item",Un="selected-item",Hn="disabled-item",Wn=function(t){ri(i,t);var e=Rn(i);function i(t,n){var o,r=n.locale,a=n.makeSvgIcon;return E(this,i),o=e.call(this,t,{name:"history"}),t.classList.add("enabled"),o.locale=r,o.makeSvgIcon=a,o._eventHandler={},o._historyIndex=o.getListLength(),o}return D(i,[{key:"add",value:function(t){var e=t.name,i=t.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var n=zn({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:e,detail:i}),o=this.makeListItemElement(n);this.pushListItemElement(o),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var t=this;this._eventHandler.history=function(e){return t._clickHistoryItem(e)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(t){var e=t.target,i=e.closest(".".concat(Fn));if(i){var n=jn()(i.getAttribute("data-index"),10);if(n!==this._historyIndex){var o=Math.abs(n-this._historyIndex);n<this._historyIndex?this._actions.undo(o):this._actions.redo(o)}}}},{key:"_selectItem",value:function(t){for(var e=0;e<this.getListLength();e+=1)this.removeClass(e,Un),this.removeClass(e,Hn),e>t&&this.addClass(e,Hn);this.addClass(t,Un)}},{key:"destroy",value:function(){this.removeEvent(),he(this)}},{key:"addEvent",value:function(t){this._actions=t,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),i}(Nn),Xn=Wn,Gn=function(){function t(e){E(this,t),this._locale=e}return D(t,[{key:"localize",value:function(t){return this._locale[t]||t}}]),t}(),Yn=Gn,Vn={Shape:Ei,Crop:ji,Resize:Bi,Flip:Xi,Rotate:qi,Text:nn,Mask:ln,Icon:gn,Draw:xn,Filter:Ln},Zn="1300",Qn="history",Jn="tie-panel-history",qn="on",$n={ZOOM_IN:"zoomIn",HAND:"hand"},Kn=function(){function t(e,i,n){E(this,t),this.options=this._initializeOption(i),this._actions=n,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new Yn(this.options.locale),this.theme=new Ke(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(e),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return D(t,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",he(this)}},{key:"setUiDefaultSelectionStyle",value:function(t){return H()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},t)}},{key:"resizeEditor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uiSize,i=t.imageSize,n=void 0===i?this.imageSize:i;n!==this.imageSize&&(this.imageSize=n),e&&this._setUiSize(e);var o=this._getCanvasMaxDimension(),r=o.width,a=o.height,s=this._editorElement.style,l=this.options.menuBarPosition;s.height="".concat(a,"px"),s.width="".concat(r,"px"),this._setEditorPosition(l),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var c=this._selectedElement.classList;"top"===l&&this._selectedElement.offsetWidth<Zn?c.add("tui-image-editor-top-optimization"):c.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(t){var e=this._buttonElements[t].classList;e.toggle(qn),t===$n.ZOOM_IN?this._buttonElements[$n.HAND].classList.remove(qn):this._buttonElements[$n.ZOOM_IN].classList.remove(qn)}},{key:"offZoomInButtonStatus",value:function(){var t=this._buttonElements[$n.ZOOM_IN].classList;t.remove(qn)}},{key:"changeHandButtonStatus",value:function(t){var e=this._buttonElements[$n.HAND].classList;e[t?"add":"remove"](qn)}},{key:"changeHelpButtonEnabled",value:function(t,e){var i=this._buttonElements[t].classList;i[e?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(t){return H()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},t)}},{key:"_setUiSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.uiSize,e=this._selectedElement.style;e.width=t.width,e.height=t.height}},{key:"_makeSubMenu",value:function(){var t=this;Y()(this.options.menu,(function(e){var i,n=Vn[e.replace(/^[a-z]/,(function(t){return t.toUpperCase()}))];t._makeMenuElement(e),t._buttonElements[e]=t._menuBarElement.querySelector(".tie-btn-".concat(e)),t[e]=new n(t._subMenuElement,{locale:t._locale,makeSvgIcon:O()(i=t.theme.makeMenSvgIconSet).call(i,t.theme),menuBarPosition:t.options.menuBarPosition,usageStatistics:t.options.usageStatistics})}))}},{key:"_attachHistoryEvent",value:function(){var t,e,i;this.on(Tt.EXECUTE_COMMAND,O()(t=this._addHistory).call(t,this)),this.on(Tt.AFTER_UNDO,O()(e=this._selectPrevHistory).call(e,this)),this.on(Tt.AFTER_REDO,O()(i=this._selectNextHistory).call(i,this))}},{key:"_attachZoomEvent",value:function(){var t=this;this.on(Tt.HAND_STARTED,(function(){t.offZoomInButtonStatus(),t.changeHandButtonStatus(!0)})),this.on(Tt.HAND_STOPPED,(function(){return t.changeHandButtonStatus(!1)}))}},{key:"_makeUiElement",value:function(t){var e,i;i=t.nodeType?t:document.querySelector(t);var n=le(i);i.classList.add("tui-image-editor-container"),i.innerHTML=Ye({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+Ge({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=i,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=n(".tui-image-editor-main"),this._editorElementWrap=n(".tui-image-editor-wrap"),this._editorElement=n(".tui-image-editor"),this._helpMenuBarElement=n(".tui-image-editor-help-menu"),this._menuBarElement=n(".tui-image-editor-menu"),this._subMenuElement=n(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new Xn(this._buttonElements[Qn],{locale:this._locale,makeSvgIcon:O()(e=this.theme.makeMenSvgIconSet).call(e,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var t=this;Y()(mt,(function(e){t.changeHelpButtonEnabled(e,!0)}))}},{key:"_makeHelpMenuWithPartition",value:function(){var t;return P()(t=[]).call(t,I(mt),[""],I(vt),[""],I(bt))}},{key:"_addHelpMenus",value:function(){var t=this,e=this._makeHelpMenuWithPartition();Y()(e,(function(e){e?(t._makeMenuElement(e,["normal","disabled","hover"],"help"),t._buttonElements[e]=t._helpMenuBarElement.querySelector(".tie-btn-".concat(e))):t._makeMenuPartitionElement()}))}},{key:"_makeMenuPartitionElement",value:function(){var t=document.createElement("li"),e=document.createElement("div");t.className=de("item"),e.className=de("icpartition"),t.appendChild(e),this._helpMenuBarElement.appendChild(t)}},{key:"_makeMenuElement",value:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["normal","active","hover"],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",r=document.createElement("li"),a=this.theme.makeMenSvgIconSet(n,t);this._addTooltipAttribute(r,t),r.className=P()(e=P()(i="tie-btn-".concat(t," ")).call(i,de("item")," ")).call(e,o),r.innerHTML=a,"normal"===o?this._menuBarElement.appendChild(r):this._helpMenuBarElement.appendChild(r)}},{key:"_addHelpActionEvent",value:function(){var t=this;Y()(xt,(function(e){t.eventHandler[e]=function(i){return t._actions.main[e](i)},t._buttonElements[e].addEventListener("click",t.eventHandler[e])}))}},{key:"_removeHelpActionEvent",value:function(){var t=this;Y()(xt,(function(e){t._buttonElements[e].removeEventListener("click",t.eventHandler[e])}))}},{key:"_addHistory",value:function(t){if(!Ce(t)){var e="string"===typeof t?{name:t}:Se(t);this._historyMenu.add(e)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(t){var e=t.target,i=e.closest(".".concat(Jn));if(!i){var n=this._buttonElements[Qn].classList;n.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(t,e){t.setAttribute("tooltip-content",this._locale.localize(e.replace(/^[a-z]/g,(function(t){return t.toUpperCase()}))))}},{key:"_addDownloadEvent",value:function(){var t=this;this.eventHandler.download=function(){return t._actions.main.download()},Y()(this._buttonElements.download,(function(e){e.addEventListener("click",t.eventHandler.download)}))}},{key:"_removeDownloadEvent",value:function(){var t=this;Y()(this._buttonElements.download,(function(e){e.removeEventListener("click",t.eventHandler.download)}))}},{key:"_addLoadEvent",value:function(){var t=this;this.eventHandler.loadImage=function(e){return t._actions.main.load(e.target.files[0])},Y()(this._buttonElements.load,(function(e){e.addEventListener("change",t.eventHandler.loadImage)}))}},{key:"_removeLoadEvent",value:function(){var t=this;Y()(this._buttonElements.load,(function(e){e.removeEventListener("change",t.eventHandler.loadImage)}))}},{key:"_addMainMenuEvent",value:function(t){var e=this;this.eventHandler[t]=function(){return e.changeMenu(t)},this._buttonElements[t].addEventListener("click",this.eventHandler[t])}},{key:"_addSubMenuEvent",value:function(t){var e=this;this[t].addEvent(this._actions[t]),this[t].on(Tt.INPUT_BOX_EDITING_STARTED,(function(){return e.fire(Tt.INPUT_BOX_EDITING_STARTED)})),this[t].on(Tt.INPUT_BOX_EDITING_STOPPED,(function(){return e.fire(Tt.INPUT_BOX_EDITING_STOPPED)}))}},{key:"_addMenuEvent",value:function(){var t=this;Y()(this.options.menu,(function(e){t._addMainMenuEvent(e),t._addSubMenuEvent(e)}))}},{key:"_removeMainMenuEvent",value:function(){var t=this;Y()(this.options.menu,(function(e){t._buttonElements[e].removeEventListener("click",t.eventHandler[e]),t[e].off(Tt.INPUT_BOX_EDITING_STARTED),t[e].off(Tt.INPUT_BOX_EDITING_STOPPED)}))}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var t=this;Y()(this.options.menu,(function(e){t[e].destroy()})),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var t=this,e=this._getLoadImage();e.path&&this._actions.main.initLoadImage(e.path,e.name).then((function(){t.activeMenuEvent()})),this._addLoadEvent();var i=document.createElement("div");i.className=de("grid-visual");var n='<table>\n           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>\n           <tr><td></td><td></td><td></td></tr>\n           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>\n         </table>';i.innerHTML=n,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(i)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(t,e,i),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(t,e,i){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),i&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===t&&e?this.submenu=null:(this._buttonElements[t].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(t)),this.submenu=t,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(t)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var t=this._editorContainerElement.style,e=t.maxWidth,i=t.maxHeight,n=Xe()(e),o=Xe()(i);return{width:n,height:o}}},{key:"_setEditorPosition",value:function(t){var e=this._getCanvasMaxDimension(),i=e.width,n=e.height,o=this._editorElement.style,r=0,a=0;this.submenu&&("bottom"===t?r=n>this._editorElementWrap.scrollHeight-150?(n-this._editorElementWrap.scrollHeight)/2:-75:"top"===t?r=n>this._editorElementWrap.offsetHeight-150?75-(n-(this._editorElementWrap.offsetHeight-150))/2:75:"left"===t?a=i>this._editorElementWrap.offsetWidth-248?124-(i-(this._editorElementWrap.offsetWidth-248))/2:124:"right"===t&&(a=i>this._editorElementWrap.scrollWidth-248?(i-this._editorElementWrap.scrollWidth)/2:-124)),o.top="".concat(r,"px"),o.left="".concat(a,"px")}}]),t}();Z().mixin(Kn);var to=Kn,eo=n(381),io=n.n(eo),no=function(){function t(){E(this,t),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return D(t,[{key:"imageToSVG",value:function(t,e,i){var n=this;i=this.checkoptions(i),this.loadImage(t,(function(t){e(n.imagedataToSVG(n.getImgdata(t),i))}),i)}},{key:"imagedataToSVG",value:function(t,e){e=this.checkoptions(e);var i=this.imagedataToTracedata(t,e);return this.getsvgstring(i,e)}},{key:"imageToTracedata",value:function(t,e,i){var n=this;i=this.checkoptions(i),this.loadImage(t,(function(t){e(n.imagedataToTracedata(n.getImgdata(t),i))}),i)}},{key:"imagedataToTracedata",value:function(t,e){e=this.checkoptions(e);var i,n=this.colorquantization(t,e);if(0===e.layering){i={layers:[],palette:n.palette,width:n.array[0].length-2,height:n.array.length-2};for(var o=0;o<n.palette.length;o+=1){var r=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(n,o),e.pathomit),e),e.ltres,e.qtres);i.layers.push(r)}}else{var a=this.layering(n);e.layercontainerid&&this.drawLayers(a,this.specpalette,e.scale,e.layercontainerid);var s=this.batchpathscan(a,e.pathomit),l=this.batchinternodes(s,e);i={layers:this.batchtracelayers(l,e.ltres,e.qtres),palette:n.palette,width:t.width,height:t.height}}return i}},{key:"checkoptions",value:function(t){t=t||{},"string"===typeof t&&(t=t.toLowerCase(),t=this.optionpresets[t]?this.optionpresets[t]:{});for(var e=$()(this.optionpresets["default"]),i=0;i<e.length;i+=1)t.hasOwnProperty(e[i])||(t[e[i]]=this.optionpresets["default"][e[i]]);return t}},{key:"colorquantization",value:function(t,e){var i,n,o,r,a,s,l,c,u=[],h=0,d=[],g=t.width*t.height;for(a=0;a<t.height+2;a+=1)for(u[a]=[],r=0;r<t.width+2;r+=1)u[a][r]=-1;for(c=e.pal?e.pal:0===e.colorsampling?this.generatepalette(e.numberofcolors):1===e.colorsampling?this.samplepalette(e.numberofcolors,t):this.samplepalette2(e.numberofcolors,t),e.blurradius>0&&(t=this.blur(t,e.blurradius,e.blurdelta)),l=0;l<e.colorquantcycles;l+=1){if(l>0)for(s=0;s<c.length;s+=1)d[s].n>0&&(c[s]={r:Math.floor(d[s].r/d[s].n),g:Math.floor(d[s].g/d[s].n),b:Math.floor(d[s].b/d[s].n),a:Math.floor(d[s].a/d[s].n)}),d[s].n/g<e.mincolorratio&&l<e.colorquantcycles-1&&(c[s]={r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:Math.floor(255*Math.random())});for(r=0;r<c.length;r+=1)d[r]={r:0,g:0,b:0,a:0,n:0};for(a=0;a<t.height;a+=1)for(r=0;r<t.width;r+=1){for(h=4*(a*t.width+r),o=0,n=1024,s=0;s<c.length;s+=1)i=Math.abs(c[s].r-t.data[h])+Math.abs(c[s].g-t.data[h+1])+Math.abs(c[s].b-t.data[h+2])+Math.abs(c[s].a-t.data[h+3]),i<n&&(n=i,o=s);d[o].r+=t.data[h],d[o].g+=t.data[h+1],d[o].b+=t.data[h+2],d[o].a+=t.data[h+3],d[o].n+=1,u[a+1][r+1]=o}}return{array:u,palette:c}}},{key:"samplepalette",value:function(t,e){for(var i,n=[],o=0;o<t;o+=1)i=4*Math.floor(Math.random()*e.data.length/4),n.push({r:e.data[i],g:e.data[i+1],b:e.data[i+2],a:e.data[i+3]});return n}},{key:"samplepalette2",value:function(t,e){for(var i,n=[],o=Math.ceil(Math.sqrt(t)),r=Math.ceil(t/o),a=e.width/(o+1),s=e.height/(r+1),l=0;l<r;l+=1)for(var c=0;c<o;c+=1){if(n.length===t)break;i=4*Math.floor((l+1)*s*e.width+(c+1)*a),n.push({r:e.data[i],g:e.data[i+1],b:e.data[i+2],a:e.data[i+3]})}return n}},{key:"generatepalette",value:function(t){var e,i,n,o=[];if(t<8)for(var r=Math.floor(255/(t-1)),a=0;a<t;a+=1)o.push({r:a*r,g:a*r,b:a*r,a:255});else{var s=Math.floor(Math.pow(t,1/3)),l=Math.floor(255/(s-1)),c=t-s*s*s;for(e=0;e<s;e+=1)for(i=0;i<s;i+=1)for(n=0;n<s;n+=1)o.push({r:e*l,g:i*l,b:n*l,a:255});for(e=0;e<c;e+=1)o.push({r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:Math.floor(255*Math.random())})}return o}},{key:"layering",value:function(t){var e,i,n,o,r,a,s,l,c,u,h,d=[],g=0,p=t.array.length,f=t.array[0].length;for(h=0;h<t.palette.length;h+=1)for(d[h]=[],u=0;u<p;u+=1)for(d[h][u]=[],c=0;c<f;c+=1)d[h][u][c]=0;for(u=1;u<p-1;u+=1)for(c=1;c<f-1;c+=1)g=t.array[u][c],e=t.array[u-1][c-1]===g?1:0,i=t.array[u-1][c]===g?1:0,n=t.array[u-1][c+1]===g?1:0,o=t.array[u][c-1]===g?1:0,r=t.array[u][c+1]===g?1:0,a=t.array[u+1][c-1]===g?1:0,s=t.array[u+1][c]===g?1:0,l=t.array[u+1][c+1]===g?1:0,d[g][u+1][c+1]=1+2*r+4*l+8*s,o||(d[g][u+1][c]=2+4*s+8*a),i||(d[g][u][c+1]=0+2*n+4*r+8),e||(d[g][u][c]=0+2*i+4+8*o);return d}},{key:"layeringstep",value:function(t,e){var i,n,o=[],r=t.array.length,a=t.array[0].length;for(n=0;n<r;n+=1)for(o[n]=[],i=0;i<a;i+=1)o[n][i]=0;for(n=1;n<r;n+=1)for(i=1;i<a;i+=1)o[n][i]=(t.array[n-1][i-1]===e?1:0)+(t.array[n-1][i]===e?2:0)+(t.array[n][i-1]===e?8:0)+(t.array[n][i]===e?4:0);return o}},{key:"pathscan",value:function(t,e){for(var i,n=[],o=0,r=0,a=0,s=0,l=t[0].length,c=t.length,u=0,h=!0,d=!1,g=0;g<c;g+=1)for(var p=0;p<l;p+=1)if(4===t[g][p]||11===t[g][p]){a=p,s=g,n[o]={},n[o].points=[],n[o].boundingbox=[a,s,a,s],n[o].holechildren=[],h=!1,r=0,d=11===t[g][p],u=1;while(!h){if(n[o].points[r]={},n[o].points[r].x=a-1,n[o].points[r].y=s-1,n[o].points[r].t=t[s][a],a-1<n[o].boundingbox[0]&&(n[o].boundingbox[0]=a-1),a-1>n[o].boundingbox[2]&&(n[o].boundingbox[2]=a-1),s-1<n[o].boundingbox[1]&&(n[o].boundingbox[1]=s-1),s-1>n[o].boundingbox[3]&&(n[o].boundingbox[3]=s-1),i=this.pathscan_combined_lookup[t[s][a]][u],t[s][a]=i[0],u=i[1],a+=i[2],s+=i[3],a-1===n[o].points[0].x&&s-1===n[o].points[0].y)if(h=!0,n[o].points.length<e)n.pop();else{if(n[o].isholepath=!!d,d){for(var f=0,m=[-1,-1,l+1,c+1],v=0;v<o;v++)!n[v].isholepath&&this.boundingboxincludes(n[v].boundingbox,n[o].boundingbox)&&this.boundingboxincludes(m,n[v].boundingbox)&&(f=v,m=n[v].boundingbox);n[f].holechildren.push(o)}o+=1}r+=1}}return n}},{key:"boundingboxincludes",value:function(t,e){return t[0]<e[0]&&t[1]<e[1]&&t[2]>e[2]&&t[3]>e[3]}},{key:"batchpathscan",value:function(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&(i[n]=this.pathscan(t[n],e));return i}},{key:"internodes",value:function(t,e){var i,n,o=[],r=0,a=0,s=0,l=0,c=0;for(i=0;i<t.length;i+=1)for(o[i]={},o[i].points=[],o[i].boundingbox=t[i].boundingbox,o[i].holechildren=t[i].holechildren,o[i].isholepath=t[i].isholepath,r=t[i].points.length,n=0;n<r;n+=1)a=(n+1)%r,s=(n+2)%r,l=(n-1+r)%r,c=(n-2+r)%r,e.rightangleenhance&&this.testrightangle(t[i],c,l,n,a,s)&&(o[i].points.length>0&&(o[i].points[o[i].points.length-1].linesegment=this.getdirection(o[i].points[o[i].points.length-1].x,o[i].points[o[i].points.length-1].y,t[i].points[n].x,t[i].points[n].y)),o[i].points.push({x:t[i].points[n].x,y:t[i].points[n].y,linesegment:this.getdirection(t[i].points[n].x,t[i].points[n].y,(t[i].points[n].x+t[i].points[a].x)/2,(t[i].points[n].y+t[i].points[a].y)/2)})),o[i].points.push({x:(t[i].points[n].x+t[i].points[a].x)/2,y:(t[i].points[n].y+t[i].points[a].y)/2,linesegment:this.getdirection((t[i].points[n].x+t[i].points[a].x)/2,(t[i].points[n].y+t[i].points[a].y)/2,(t[i].points[a].x+t[i].points[s].x)/2,(t[i].points[a].y+t[i].points[s].y)/2)});return o}},{key:"testrightangle",value:function(t,e,i,n,o,r){return t.points[n].x===t.points[e].x&&t.points[n].x===t.points[i].x&&t.points[n].y===t.points[o].y&&t.points[n].y===t.points[r].y||t.points[n].y===t.points[e].y&&t.points[n].y===t.points[i].y&&t.points[n].x===t.points[o].x&&t.points[n].x===t.points[r].x}},{key:"getdirection",value:function(t,e,i,n){var o=8;return o=t<i?e<n?1:e>n?7:0:t>i?e<n?3:e>n?5:4:e<n?2:e>n?6:8,o}},{key:"batchinternodes",value:function(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&(i[n]=this.internodes(t[n],e));return i}},{key:"tracepath",value:function(t,e,i){var n,o,r,a=0,s={segments:[]};s.boundingbox=t.boundingbox,s.holechildren=t.holechildren,s.isholepath=t.isholepath;while(a<t.points.length){var l;n=t.points[a].linesegment,o=-1,r=a+1;while((t.points[r].linesegment===n||t.points[r].linesegment===o||-1===o)&&r<t.points.length-1)t.points[r].linesegment!==n&&-1===o&&(o=t.points[r].linesegment),r+=1;r===t.points.length-1&&(r=0),s.segments=P()(l=s.segments).call(l,this.fitseq(t,e,i,a,r)),a=r>0?r:t.points.length}return s}},{key:"fitseq",value:function(t,e,i,n,o){var r;if(o>t.points.length||o<0)return[];var a,s,l,c=n,u=0,h=!0,d=o-n;d<0&&(d+=t.points.length);var g,p=(t.points[o].x-t.points[n].x)/d,f=(t.points[o].y-t.points[n].y)/d,m=(n+1)%t.points.length;while(m!=o)g=m-n,g<0&&(g+=t.points.length),a=t.points[n].x+p*g,s=t.points[n].y+f*g,l=(t.points[m].x-a)*(t.points[m].x-a)+(t.points[m].y-s)*(t.points[m].y-s),l>e&&(h=!1),l>u&&(c=m,u=l),m=(m+1)%t.points.length;if(h)return[{type:"L",x1:t.points[n].x,y1:t.points[n].y,x2:t.points[o].x,y2:t.points[o].y}];var v=c;h=!0,u=0;var b=(v-n)/d,x=(1-b)*(1-b),y=2*(1-b)*b,_=b*b,w=(x*t.points[n].x+_*t.points[o].x-t.points[v].x)/-y,k=(x*t.points[n].y+_*t.points[o].y-t.points[v].y)/-y;m=n+1;while(m!=o)b=(m-n)/d,x=(1-b)*(1-b),y=2*(1-b)*b,_=b*b,a=x*t.points[n].x+y*w+_*t.points[o].x,s=x*t.points[n].y+y*k+_*t.points[o].y,l=(t.points[m].x-a)*(t.points[m].x-a)+(t.points[m].y-s)*(t.points[m].y-s),l>i&&(h=!1),l>u&&(c=m,u=l),m=(m+1)%t.points.length;if(h)return[{type:"Q",x1:t.points[n].x,y1:t.points[n].y,x2:w,y2:k,x3:t.points[o].x,y3:t.points[o].y}];var C=v;return P()(r=this.fitseq(t,e,i,n,C)).call(r,this.fitseq(t,e,i,C,o))}},{key:"batchtracepaths",value:function(t,e,i){var n=[];for(var o in t)t.hasOwnProperty(o)&&n.push(this.tracepath(t[o],e,i));return n}},{key:"batchtracelayers",value:function(t,e,i){var n=[];for(var o in t)t.hasOwnProperty(o)&&(n[o]=this.batchtracepaths(t[o],e,i));return n}},{key:"roundtodec",value:function(t,e){return Number(t.toFixed(e))}},{key:"svgpathstring",value:function(t,e,i,n){var o,r,a,s=t.layers[e],l=s[i],c="";if(n.linefilter&&l.segments.length<3)return c;if(c=P()(o="<path ".concat(n.desc?P()(r='desc="l '.concat(e," p ")).call(r,i,'" '):"")).call(o,this.tosvgcolorstr(t.palette[e],n),'d="'),-1===n.roundcoords){var u;for(c+=P()(u="M ".concat(l.segments[0].x1*n.scale," ")).call(u,l.segments[0].y1*n.scale," "),a=0;a<l.segments.length;a++){var h,d,g;if(c+=P()(h=P()(d="".concat(l.segments[a].type," ")).call(d,l.segments[a].x2*n.scale," ")).call(h,l.segments[a].y2*n.scale," "),l.segments[a].hasOwnProperty("x3"))c+=P()(g="".concat(l.segments[a].x3*n.scale," ")).call(g,l.segments[a].y3*n.scale," ")}c+="Z "}else{var p;for(c+=P()(p="M ".concat(this.roundtodec(l.segments[0].x1*n.scale,n.roundcoords)," ")).call(p,this.roundtodec(l.segments[0].y1*n.scale,n.roundcoords)," "),a=0;a<l.segments.length;a++){var f,m,v;if(c+=P()(f=P()(m="".concat(l.segments[a].type," ")).call(m,this.roundtodec(l.segments[a].x2*n.scale,n.roundcoords)," ")).call(f,this.roundtodec(l.segments[a].y2*n.scale,n.roundcoords)," "),l.segments[a].hasOwnProperty("x3"))c+=P()(v="".concat(this.roundtodec(l.segments[a].x3*n.scale,n.roundcoords)," ")).call(v,this.roundtodec(l.segments[a].y3*n.scale,n.roundcoords)," ")}c+="Z "}for(var b=0;b<l.holechildren.length;b++){var x=s[l.holechildren[b]];if(-1===n.roundcoords){var y,_;if(x.segments[x.segments.length-1].hasOwnProperty("x3"))c+=P()(y="M ".concat(x.segments[x.segments.length-1].x3*n.scale," ")).call(y,x.segments[x.segments.length-1].y3*n.scale," ");else c+=P()(_="M ".concat(x.segments[x.segments.length-1].x2*n.scale," ")).call(_,x.segments[x.segments.length-1].y2*n.scale," ");for(a=x.segments.length-1;a>=0;a--){var w,k;if(c+="".concat(x.segments[a].type," "),x.segments[a].hasOwnProperty("x3"))c+=P()(k="".concat(x.segments[a].x2*n.scale," ")).call(k,x.segments[a].y2*n.scale," ");c+=P()(w="".concat(x.segments[a].x1*n.scale," ")).call(w,x.segments[a].y1*n.scale," ")}}else{var C,S;if(x.segments[x.segments.length-1].hasOwnProperty("x3"))c+=P()(C="M ".concat(this.roundtodec(x.segments[x.segments.length-1].x3*n.scale)," ")).call(C,this.roundtodec(x.segments[x.segments.length-1].y3*n.scale)," ");else c+=P()(S="M ".concat(this.roundtodec(x.segments[x.segments.length-1].x2*n.scale)," ")).call(S,this.roundtodec(x.segments[x.segments.length-1].y2*n.scale)," ");for(a=x.segments.length-1;a>=0;a--){var I,M;if(c+="".concat(x.segments[a].type," "),x.segments[a].hasOwnProperty("x3"))c+=P()(M="".concat(this.roundtodec(x.segments[a].x2*n.scale)," ")).call(M,this.roundtodec(x.segments[a].y2*n.scale)," ");c+=P()(I="".concat(this.roundtodec(x.segments[a].x1*n.scale)," ")).call(I,this.roundtodec(x.segments[a].y1*n.scale)," ")}}c+="Z "}if(c+='" />',n.lcpr||n.qcpr){for(a=0;a<l.segments.length;a++){var T,E,A,D,L,O,j,N,z,R,B,F,U,H,W,X,G;if(l.segments[a].hasOwnProperty("x3")&&n.qcpr)c+=P()(T=P()(E=P()(A='<circle cx="'.concat(l.segments[a].x2*n.scale,'" cy="')).call(A,l.segments[a].y2*n.scale,'" r="')).call(E,n.qcpr,'" fill="cyan" stroke-width="')).call(T,.2*n.qcpr,'" stroke="black" />'),c+=P()(D=P()(L=P()(O='<circle cx="'.concat(l.segments[a].x3*n.scale,'" cy="')).call(O,l.segments[a].y3*n.scale,'" r="')).call(L,n.qcpr,'" fill="white" stroke-width="')).call(D,.2*n.qcpr,'" stroke="black" />'),c+=P()(j=P()(N=P()(z=P()(R='<line x1="'.concat(l.segments[a].x1*n.scale,'" y1="')).call(R,l.segments[a].y1*n.scale,'" x2="')).call(z,l.segments[a].x2*n.scale,'" y2="')).call(N,l.segments[a].y2*n.scale,'" stroke-width="')).call(j,.2*n.qcpr,'" stroke="cyan" />'),c+=P()(B=P()(F=P()(U=P()(H='<line x1="'.concat(l.segments[a].x2*n.scale,'" y1="')).call(H,l.segments[a].y2*n.scale,'" x2="')).call(U,l.segments[a].x3*n.scale,'" y2="')).call(F,l.segments[a].y3*n.scale,'" stroke-width="')).call(B,.2*n.qcpr,'" stroke="cyan" />');if(!l.segments[a].hasOwnProperty("x3")&&n.lcpr)c+=P()(W=P()(X=P()(G='<circle cx="'.concat(l.segments[a].x2*n.scale,'" cy="')).call(G,l.segments[a].y2*n.scale,'" r="')).call(X,n.lcpr,'" fill="white" stroke-width="')).call(W,.2*n.lcpr,'" stroke="black" />')}for(b=0;b<l.holechildren.length;b++){x=s[l.holechildren[b]];for(a=0;a<x.segments.length;a++){var Y,V,Z,Q,J,q,$,K,tt,et,it,nt,ot,rt,at,st,lt;if(x.segments[a].hasOwnProperty("x3")&&n.qcpr)c+=P()(Y=P()(V=P()(Z='<circle cx="'.concat(x.segments[a].x2*n.scale,'" cy="')).call(Z,x.segments[a].y2*n.scale,'" r="')).call(V,n.qcpr,'" fill="cyan" stroke-width="')).call(Y,.2*n.qcpr,'" stroke="black" />'),c+=P()(Q=P()(J=P()(q='<circle cx="'.concat(x.segments[a].x3*n.scale,'" cy="')).call(q,x.segments[a].y3*n.scale,'" r="')).call(J,n.qcpr,'" fill="white" stroke-width="')).call(Q,.2*n.qcpr,'" stroke="black" />'),c+=P()($=P()(K=P()(tt=P()(et='<line x1="'.concat(x.segments[a].x1*n.scale,'" y1="')).call(et,x.segments[a].y1*n.scale,'" x2="')).call(tt,x.segments[a].x2*n.scale,'" y2="')).call(K,x.segments[a].y2*n.scale,'" stroke-width="')).call($,.2*n.qcpr,'" stroke="cyan" />'),c+=P()(it=P()(nt=P()(ot=P()(rt='<line x1="'.concat(x.segments[a].x2*n.scale,'" y1="')).call(rt,x.segments[a].y2*n.scale,'" x2="')).call(ot,x.segments[a].x3*n.scale,'" y2="')).call(nt,x.segments[a].y3*n.scale,'" stroke-width="')).call(it,.2*n.qcpr,'" stroke="cyan" />');if(!x.segments[a].hasOwnProperty("x3")&&n.lcpr)c+=P()(at=P()(st=P()(lt='<circle cx="'.concat(x.segments[a].x2*n.scale,'" cy="')).call(lt,x.segments[a].y2*n.scale,'" r="')).call(st,n.lcpr,'" fill="white" stroke-width="')).call(at,.2*n.lcpr,'" stroke="black" />')}}}return c}},{key:"getsvgstring",value:function(t,e){var i,n,o;e=this.checkoptions(e);for(var r=t.width*e.scale,a=t.height*e.scale,s=P()(i="<svg ".concat(e.viewbox?P()(n='viewBox="0 0 '.concat(r," ")).call(n,a,'" '):P()(o='width="'.concat(r,'" height="')).call(o,a,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(i,this.versionnumber,'" >'),l=0;l<t.layers.length;l+=1)for(var c=0;c<t.layers[l].length;c+=1)t.layers[l][c].isholepath||(s+=this.svgpathstring(t,l,c,e));return s+="</svg>",s}},{key:"compareNumbers",value:function(t,e){return t-e}},{key:"torgbastr",value:function(t){var e,i,n;return P()(e=P()(i=P()(n="rgba(".concat(t.r,",")).call(n,t.g,",")).call(i,t.b,",")).call(e,t.a,")")}},{key:"tosvgcolorstr",value:function(t,e){var i,n,o,r,a,s,l;return P()(i=P()(n=P()(o=P()(r=P()(a=P()(s=P()(l='fill="rgb('.concat(t.r,",")).call(l,t.g,",")).call(s,t.b,')" stroke="rgb(')).call(a,t.r,",")).call(r,t.g,",")).call(o,t.b,')" stroke-width="')).call(n,e.strokewidth,'" opacity="')).call(i,t.a/255,'" ')}},{key:"appendSVGString",value:function(t,e){var i;e?(i=document.getElementById(e),i||(i=document.createElement("div"),i.id=e,document.body.appendChild(i))):(i=document.createElement("div"),document.body.appendChild(i)),i.innerHTML+=t}},{key:"blur",value:function(t,e,i){var n,o,r,a,s,l,c,u,h,d,g={width:t.width,height:t.height,data:[]};if(e=Math.floor(e),e<1)return t;e>5&&(e=5),i=Math.abs(i),i>1024&&(i=1024);var p=this.gks[e-1];for(o=0;o<t.height;o++)for(n=0;n<t.width;n++){for(l=0,c=0,u=0,h=0,d=0,r=-e;r<e+1;r++)n+r>0&&n+r<t.width&&(s=4*(o*t.width+n+r),l+=t.data[s]*p[r+e],c+=t.data[s+1]*p[r+e],u+=t.data[s+2]*p[r+e],h+=t.data[s+3]*p[r+e],d+=p[r+e]);s=4*(o*t.width+n),g.data[s]=Math.floor(l/d),g.data[s+1]=Math.floor(c/d),g.data[s+2]=Math.floor(u/d),g.data[s+3]=Math.floor(h/d)}var f=new Uint8ClampedArray(g.data);for(o=0;o<t.height;o++)for(n=0;n<t.width;n++){for(l=0,c=0,u=0,h=0,d=0,r=-e;r<e+1;r++)o+r>0&&o+r<t.height&&(s=4*((o+r)*t.width+n),l+=f[s]*p[r+e],c+=f[s+1]*p[r+e],u+=f[s+2]*p[r+e],h+=f[s+3]*p[r+e],d+=p[r+e]);s=4*(o*t.width+n),g.data[s]=Math.floor(l/d),g.data[s+1]=Math.floor(c/d),g.data[s+2]=Math.floor(u/d),g.data[s+3]=Math.floor(h/d)}for(o=0;o<t.height;o++)for(n=0;n<t.width;n++)s=4*(o*t.width+n),a=Math.abs(g.data[s]-t.data[s])+Math.abs(g.data[s+1]-t.data[s+1])+Math.abs(g.data[s+2]-t.data[s+2])+Math.abs(g.data[s+3]-t.data[s+3]),a>i&&(g.data[s]=t.data[s],g.data[s+1]=t.data[s+1],g.data[s+2]=t.data[s+2],g.data[s+3]=t.data[s+3]);return g}},{key:"loadImage",value:function(t,e,i){var n=new Image;i&&i.corsenabled&&(n.crossOrigin="Anonymous"),n.src=t,n.onload=function(){var t=document.createElement("canvas");t.width=n.width,t.height=n.height;var i=t.getContext("2d");i.drawImage(n,0,0),e(t)}}},{key:"getImgdata",value:function(t){var e=t.getContext("2d");return e.getImageData(0,0,t.width,t.height)}},{key:"drawLayers",value:function(t,e,i,n){var o,r,a,s,l,c;for(l in i=i||1,n?(c=document.getElementById(n),c||(c=document.createElement("div"),c.id=n,document.body.appendChild(c))):(c=document.createElement("div"),document.body.appendChild(c)),t)if(t.hasOwnProperty(l)){o=t[l][0].length,r=t[l].length;var u=document.createElement("canvas");u.width=o*i,u.height=r*i;var h=u.getContext("2d");for(s=0;s<r;s+=1)for(a=0;a<o;a+=1)h.fillStyle=this.torgbastr(e[t[l][s][a]%e.length]),h.fillRect(a*i,s*i,i,i);c.appendChild(u)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),t}(),oo={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var t=this,e=function(){"crop"===t.ui.submenu&&(t.stopDrawingMode(),t.ui.changeMenu("crop"))},i=function(e){"rotate"===t.ui.submenu&&t.ui.rotate.setRangeBarAngle("setAngle",e)},n=function(e){"filter"===t.ui.submenu&&io()(t.ui).setFilterState(e)},o=function(t){return i(t),n(t),t},r=function(){var e=t._graphics.getZoomMode();t.stopDrawingMode(),e!==Ot.ZOOM?(t.startDrawingMode(Dt.ZOOM),t._graphics.startZoomInMode()):t._graphics.endZoomInMode()},a=function(){var e=t._graphics.getZoomMode();t.stopDrawingMode(),e!==Ot.HAND?(t.startDrawingMode(Dt.ZOOM),t._graphics.startHandMode()):t._graphics.endHandMode()},s=function(){io()(t.ui)&&io()(t.ui).initFilterCheckBoxState()};return H()({initLoadImage:function(i,n){return t.loadImageFromURL(i,n).then((function(n){e(),t.ui.initializeImgUrl=i,t.ui.resizeEditor({imageSize:n}),t.clearUndoStack(),t._invoker.fire(Tt.EXECUTE_COMMAND,At.LOAD_IMAGE)}))},undo:function(){t.isEmptyUndoStack()||(e(),t.deactivateAll(),t.undo().then(o))},redo:function(){t.isEmptyRedoStack()||(e(),t.deactivateAll(),t.redo().then(o))},reset:function(){e(),t.loadImageFromURL(t.ui.initializeImgUrl,"resetImage").then((function(i){e(),s(),t.ui.resizeEditor({imageSize:i}),t.clearUndoStack(),t._initHistory()}))},delete:function(){t.ui.changeHelpButtonEnabled("delete",!1),e(),t.removeActiveObject(),t.activeObjectId=null},deleteAll:function(){e(),t.clearObjects(),t.ui.changeHelpButtonEnabled("delete",!1),t.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(i){oe()||alert("This browser does not support file-api"),t.ui.initializeImgUrl=B().createObjectURL(i),t.loadImageFromFile(i).then((function(i){e(),s(),t.clearUndoStack(),t.ui.activeMenuEvent(),t.ui.resizeEditor({imageSize:i}),t._clearHistory(),t._invoker.fire(Tt.EXECUTE_COMMAND,At.LOAD_IMAGE)}))["catch"]((function(t){return z().reject(t)}))},download:function(){var e,i,n,o=t.toDataURL(),r=t.getImageName();oe()&&window.saveAs?(e=ce(o),i=e.type.split("/")[1],r.split(".").pop()!==i&&(r+=".".concat(i)),saveAs(e,r)):(n=window.open(),n.document.body.innerHTML="<img src='".concat(o,"'>"))},history:function(e){t.ui.toggleHistoryMenu(e)},zoomIn:function(){t.ui.toggleZoomButtonStatus("zoomIn"),t.deactivateAll(),r()},zoomOut:function(){t._graphics.zoomOut()},hand:function(){t.ui.offZoomInButtonStatus(),t.ui.toggleZoomButtonStatus("hand"),t.deactivateAll(),a()}},this._commonAction())},_iconAction:function(){var t=this;return H()({changeColor:function(e){t.activeObjectId&&t.changeIconColor(t.activeObjectId,e)},addIcon:function(e,i){t.startDrawingMode("ICON"),t.setDrawingIcon(e,i)},cancelAddIcon:function(){t.ui.icon.clearIconType(),t.changeSelectableAll(!0),t.changeCursor("default"),t.stopDrawingMode()},registerDefaultIcons:function(e,i){var n={};n[e]=i,t.registerIcons(n)},registerCustomIcon:function(e,i){var n=new no;n.imageToSVG(e,(function(e){var n=e.match(/path[^>]*d="([^"]*)"/),o=it(n,2),r=o[1],a={};a[i.name]=r,t.registerIcons(a),t.addIcon(i.name,{left:100,top:100})}),no.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var t=this;return H()({setDrawMode:function(e,i){t.stopDrawingMode(),"free"===e?t.startDrawingMode("FREE_DRAWING",i):t.startDrawingMode("LINE_DRAWING",i)},setColor:function(e){t.setBrush({color:e})}},this._commonAction())},_maskAction:function(){var t=this;return H()({loadImageFromURL:function(e,i){return t.loadImageFromURL(t.toDataURL(),"FilterImage").then((function(){t.addImageObject(e).then((function(){B().revokeObjectURL(i)})),t._invoker.fire(Tt.EXECUTE_COMMAND,At.LOAD_MASK_IMAGE)}))},applyFilter:function(){t.applyFilter("mask",{maskObjId:t.activeObjectId})}},this._commonAction())},_textAction:function(){var t=this;return H()({changeTextStyle:function(e,i){t.activeObjectId&&t.changeTextStyle(t.activeObjectId,e,i)}},this._commonAction())},_rotateAction:function(){var t=this;return H()({rotate:function(e,i){t.rotate(e,i),t.ui.resizeEditor(),t.ui.rotate.setRangeBarAngle("rotate",e)},setAngle:function(e,i){t.setAngle(e,i),t.ui.resizeEditor(),t.ui.rotate.setRangeBarAngle("setAngle",e)}},this._commonAction())},_shapeAction:function(){var t=this;return H()({changeShape:function(e,i){t.activeObjectId&&t.changeShape(t.activeObjectId,e,i)},setDrawingShape:function(e){t.setDrawingShape(e)}},this._commonAction())},_cropAction:function(){var t=this;return H()({crop:function(){var e=t.getCropzoneRect();e&&!Te(e)&&t.crop(e).then((function(){t.stopDrawingMode(),t.ui.resizeEditor(),t.ui.changeMenu("crop"),t._invoker.fire(Tt.EXECUTE_COMMAND,At.CROP)}))["catch"]((function(t){return z().reject(t)}))},cancel:function(){t.stopDrawingMode(),t.ui.changeMenu("crop")},preset:function(e){switch(e){case"preset-square":t.setCropzoneRect(1);break;case"preset-3-2":t.setCropzoneRect(1.5);break;case"preset-4-3":t.setCropzoneRect(4/3);break;case"preset-5-4":t.setCropzoneRect(5/4);break;case"preset-7-5":t.setCropzoneRect(1.4);break;case"preset-16-9":t.setCropzoneRect(16/9);break;default:t.setCropzoneRect(),t.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var t=this;return H()({getCurrentDimensions:function(){return t._graphics.getCurrentDimensions()},preview:function(e,i,n){var o=t._graphics.getCurrentDimensions(),r=function(){return o.width/o.height},a={};switch(e){case"width":a.width=i,a.height=n?i/r():o.height;break;case"height":a.height=i,a.width=n?i*r():o.width;break;default:a=o}t._graphics.resize(a).then((function(){t.ui.resizeEditor()})),n&&(t.ui.resize.setWidthValue(a.width),t.ui.resize.setHeightValue(a.height))},lockAspectRatio:function(e,i,n){var o=t._graphics.getCurrentDimensions(),r=o.width,a=o.height,s=r/a;if(e)if(r>a){var l=n/s,c=i*s;t.ui.resize.setLimit({minWidth:c>i?c:i,minHeight:i,maxWidth:n,maxHeight:l<n?l:n})}else{var u=n*s,h=i/s;t.ui.resize.setLimit({minWidth:i,minHeight:h>i?h:i,maxWidth:u<n?u:n,maxHeight:n})}else t.ui.resize.setLimit({minWidth:i,minHeight:i,maxWidth:n,maxHeight:n})},resize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=t._graphics.getCurrentDimensions()),t.resize(e).then((function(){t._graphics.setOriginalDimensions(e),t.stopDrawingMode(),t.ui.resizeEditor(),t.ui.changeMenu("resize")}))["catch"]((function(t){return z().reject(t)}))},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=t._graphics.getOriginalDimensions();t.ui.resize.setWidthValue(i.width,!0),t.ui.resize.setHeightValue(i.height,!0),t._graphics.resize(i).then((function(){e||(t.stopDrawingMode(),t.ui.resizeEditor(),t.ui.changeMenu("resize"))}))}},this._commonAction())},_flipAction:function(){var t=this;return H()({flip:function(e){return t[e]()}},this._commonAction())},_filterAction:function(){var t=this;return H()({applyFilter:function(e,i,n,o){e?t.applyFilter(i,n,o):t.hasFilter(i)&&t.removeFilter(i)}},this._commonAction())},setReAction:function(){var t=this;this.on({undoStackChanged:function(e){e?(t.ui.changeHelpButtonEnabled("undo",!0),t.ui.changeHelpButtonEnabled("reset",!0)):(t.ui.changeHelpButtonEnabled("undo",!1),t.ui.changeHelpButtonEnabled("reset",!1)),t.ui.resizeEditor()},redoStackChanged:function(e){e?t.ui.changeHelpButtonEnabled("redo",!0):t.ui.changeHelpButtonEnabled("redo",!1),t.ui.resizeEditor()},objectActivated:function(e){var i,n;t.activeObjectId=e.id,t.ui.changeHelpButtonEnabled("delete",!0),t.ui.changeHelpButtonEnabled("deleteAll",!0),"cropzone"===e.type?t.ui.crop.changeApplyButtonStatus(!0):r()(i=["rect","circle","triangle"]).call(i,e.type)>-1?(t.stopDrawingMode(),"shape"!==t.ui.submenu&&t.ui.changeMenu("shape",!1,!1),t.ui.shape.setShapeStatus({strokeColor:e.stroke,strokeWidth:e.strokeWidth,fillColor:ct()(e)}),t.ui.shape.setMaxStrokeValue(Math.min(e.width,e.height))):"path"===e.type||"line"===e.type?"draw"!==t.ui.submenu&&(t.ui.changeMenu("draw",!1,!1),t.ui.draw.changeStandbyMode()):r()(n=["i-text","text"]).call(n,e.type)>-1?("text"!==t.ui.submenu&&t.ui.changeMenu("text",!1,!1),t.ui.text.setTextStyleStateOnAction(e)):"icon"===e.type&&(t.stopDrawingMode(),"icon"!==t.ui.submenu&&t.ui.changeMenu("icon",!1,!1),t.ui.icon.setIconPickerColor(ct()(e)))},addText:function(e){var i=t.ui.text,n=i.textColor,o=i.fontSize,r=i.fontStyle,a=i.fontWeight,s=i.underline,l="Noto Sans";t.addText("Double Click",{position:e.originPosition,styles:{fill:n,fontSize:o,fontFamily:l,fontStyle:r,fontWeight:a,underline:s}}).then((function(){t.changeCursor("default")}))},addObjectAfter:function(e){var i;"icon"===e.type?t.ui.icon.changeStandbyMode():r()(i=["rect","circle","triangle"]).call(i,e.type)>-1&&(t.ui.shape.setMaxStrokeValue(Math.min(e.width,e.height)),t.ui.shape.changeStandbyMode())},objectScaled:function(e){var i,n;if(r()(i=["i-text","text"]).call(i,e.type)>-1)t.ui.text.fontSize=ie(e.fontSize);else if(r()(n=["rect","circle","triangle"]).call(n,e.type)>=0){var o=e.width,a=e.height,s=t.ui.shape.getStrokeValue();o<s&&t.ui.shape.setStrokeValue(o),a<s&&t.ui.shape.setStrokeValue(a)}},selectionCleared:function(){t.activeObjectId=null,"text"===t.ui.submenu?t.changeCursor("text"):be(["draw","crop","resize"],t.ui.submenu)||t.stopDrawingMode()}})},_historyAction:function(){var t=this;return{undo:function(e){return t.undo(e)},redo:function(e){return t.redo(e)}}},_commonAction:function(){var t,e,i,n,o=this,r=Dt.TEXT,a=Dt.CROPPER,s=Dt.SHAPE,l=Dt.ZOOM,c=Dt.RESIZE;return{modeChange:function(t){switch(t){case Lt.TEXT:o._changeActivateMode(r);break;case Lt.CROP:o.startDrawingMode(a);break;case Lt.SHAPE:o._changeActivateMode(s),o.setDrawingShape(o.ui.shape.type,o.ui.shape.options);break;case Lt.ZOOM:o.startDrawingMode(l);break;case Lt.RESIZE:o.startDrawingMode(c);break;default:break}},deactivateAll:O()(t=this.deactivateAll).call(t,this),changeSelectableAll:O()(e=this.changeSelectableAll).call(e,this),discardSelection:O()(i=this.discardSelection).call(i,this),stopDrawingMode:O()(n=this.stopDrawingMode).call(n,this)}},mixin:function(t){H()(t.prototype,this)}},ro=n(602),ao=n.n(ro),so=n(5573),lo=n.n(so),co=function(){function t(e,i){E(this,t),this.name=e,this.graphics=i}return D(t,[{key:"fire",value:function(){for(var t=this.graphics,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return this.graphics.fire.apply(t,i)}},{key:"setCanvasImage",value:function(t,e){this.graphics.setCanvasImage(t,e)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(t,e){this.graphics.setImageProperties(t,e)}},{key:"setCanvasCssDimension",value:function(t){this.graphics.setCanvasCssDimension(t)}},{key:"setCanvasBackstoreDimension",value:function(t){this.graphics.setCanvasBackstoreDimension(t)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),t}(),uo=co;function ho(t){var e=go();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function go(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var po={padding:0,crossOrigin:"Anonymous"},fo=function(t){ri(i,t);var e=ho(i);function i(t){return E(this,i),e.call(this,Ct.IMAGE_LOADER,t)}return D(i,[{key:"load",value:function(t,e){var i,n=this;if(t||e)i=this._setBackgroundImage(e).then((function(e){return n.setCanvasImage(t,e),n.adjustCanvasDimension(),e}));else{var o=this.getCanvas();o.backgroundImage=null,o.renderAll(),i=new(z())((function(t){n.setCanvasImage("",null),t()}))}return i}},{key:"_setBackgroundImage",value:function(t){var e=this;return t?new(z())((function(i,n){var o=e.getCanvas();o.setBackgroundImage(t,(function(){var t=o.backgroundImage;t&&t.getElement()?i(t):n(Nt.loadingImageFailed)}),po)})):z().reject(Nt.loadImage)}}]),i}(uo),mo=fo,vo="tl",bo="tr",xo="mt",yo="ml",_o="mr",wo="mb",ko="bl",Co="br",So=[vo,bo,xo,yo,_o,wo,ko,Co],Io=function(){};function Mo(t){return r()(So).call(So,t)>=0}function To(t,e){return t>e?"width":"height"}var Eo=F.fabric.util.createClass(F.fabric.Rect,{initialize:function(t,e,i){e=H()(e,i),e.type="cropzone",this.callSuper("initialize",e),this._addEventHandler(),this.canvas=t,this.options=e},canvasEventDelegation:function(t){var e,i="unregistered",n=this.canvasEventTrigger[t]!==Io;return n?i="registered":r()(e=[Tt.OBJECT_MOVED,Tt.OBJECT_SCALED]).call(e,t)<0&&(i="none"),i},canvasEventRegister:function(t,e){this.canvasEventTrigger[t]=e},_addEventHandler:function(){var t,e,i,n,o;this.canvasEventTrigger=(t={},T(t,Tt.OBJECT_MOVED,Io),T(t,Tt.OBJECT_SCALED,Io),t),this.on({moving:O()(e=this._onMoving).call(e,this),scaling:O()(i=this._onScaling).call(i,this)}),F.fabric.util.addListener(document,"keydown",O()(n=this._onKeyDown).call(n,this)),F.fabric.util.addListener(document,"keyup",O()(o=this._onKeyUp).call(o,this))},_renderCropzone:function(t){var e=7,i=7,n=this.flipX?-1:1,o=this.flipY?-1:1,r=n/this.scaleX,a=o/this.scaleY;t.scale(r,a),this._fillOuterRect(t,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(t),this._strokeBorder(t,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(t,"rgb(0, 0, 0)",{lineDashWidth:e}),this._strokeBorder(t,"rgb(255, 255, 255)",{lineDashWidth:e,lineDashOffset:i})),t.scale(1/r,1/a)},_render:function(t){this.callSuper("_render",t),this._renderCropzone(t)},_fillOuterRect:function(t,e){var i=this._getCoordinates(),n=i.x,o=i.y;t.save(),t.fillStyle=e,t.beginPath(),t.moveTo(n[0]-1,o[0]-1),t.lineTo(n[3]+1,o[0]-1),t.lineTo(n[3]+1,o[3]+1),t.lineTo(n[0]-1,o[3]+1),t.lineTo(n[0]-1,o[0]-1),t.closePath(),t.moveTo(n[1],o[1]),t.lineTo(n[1],o[2]),t.lineTo(n[2],o[2]),t.lineTo(n[2],o[1]),t.lineTo(n[1],o[1]),t.closePath(),ct()(t).call(t),t.restore()},_fillInnerRect:function(t){var e=this._getCoordinates(),i=e.x,n=e.y,o=this._caculateInnerPosition(i,(i[2]-i[1])/3),r=this._caculateInnerPosition(n,(n[2]-n[1])/3);t.save(),t.strokeStyle="rgba(255, 255, 255, 0.7)",t.lineWidth=this.options.lineWidth,t.beginPath(),t.moveTo(o[0],r[1]),t.lineTo(o[3],r[1]),t.moveTo(o[0],r[2]),t.lineTo(o[3],r[2]),t.moveTo(o[1],r[0]),t.lineTo(o[1],r[3]),t.moveTo(o[2],r[0]),t.lineTo(o[2],r[3]),t.stroke(),t.closePath(),t.restore()},_caculateInnerPosition:function(t,e){var i=[];return i[0]=t[1],i[1]=t[1]+e,i[2]=t[1]+2*e,i[3]=t[2],i},_getCoordinates:function(){var t,e,i=this.canvas,n=this.width,o=this.height,r=this.left,a=this.top,s=n/2,l=o/2,c=i.getHeight(),u=i.getWidth();return{x:Ze()(t=[-(s+r),-s,s,s+(u-r-n)]).call(t,Math.ceil),y:Ze()(e=[-(l+a),-l,l,l+(c-a-o)]).call(e,Math.ceil)}},_strokeBorder:function(t,e,i){var n=i.lineDashWidth,o=i.lineDashOffset,r=i.lineWidth,a=this.width/2,s=this.height/2;t.save(),t.strokeStyle=e,t.setLineDash&&t.setLineDash([n,n]),o&&(t.lineDashOffset=o),r&&(t.lineWidth=r),t.beginPath(),t.moveTo(-a,-s),t.lineTo(a,-s),t.lineTo(a,s),t.lineTo(-a,s),t.lineTo(-a,-s),t.stroke(),t.restore()},_onMoving:function(){var t=this.height,e=this.width,i=this.left,n=this.top,o=this.canvas.getWidth()-e,r=this.canvas.getHeight()-t;this.left=Kt(i,0,o),this.top=Kt(n,0,r),this.canvasEventTrigger[Tt.OBJECT_MOVED](this)},_onScaling:function(t){var e=t.transform.corner,i=this.canvas.getPointer(t.e),n=this._calcScalingSizeFromPointer(i,e);this.scale(1).set(n),this.canvasEventTrigger[Tt.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(t,e){var i=Mo(e);return i&&this._resizeCropZone(t,e)},adjustRatioCropzoneSize:function(t){var e=t.width,i=t.height,n=t.leftMaker,o=t.topMaker,r=t.maxWidth,a=t.maxHeight,s=t.scaleTo;if(e=r?Kt(e,1,r):e,i=a?Kt(i,1,a):i,!this.presetRatio)return this._withShiftKey&&(e>i?i=e:i>e&&(e=i)),{width:e,height:i,left:n(e),top:o(i)};"width"===s?i=e/this.presetRatio:e=i*this.presetRatio;var l=Math.min(r/e,a/i);if(l<=1){var c,u=Ze()(c=[e,i]).call(c,(function(t){return t*l})),h=it(u,2);e=h[0],i=h[1]}return{width:e,height:i,left:n(e),top:o(i)}},_getCropzoneRectInfo:function(){var t=this.canvas,e=t.width,i=t.height,n=this.getBoundingRect(!1,!0),o=n.top,r=n.left,a=n.width,s=n.height;return{rectTop:o,rectLeft:r,rectWidth:a,rectHeight:s,rectRight:r+a,rectBottom:o+s,canvasWidth:e,canvasHeight:i}},_resizeCropZone:function(t,e){var i=t.x,n=t.y,o=this._getCropzoneRectInfo(),r=o.rectWidth,a=o.rectHeight,s=o.rectTop,l=o.rectLeft,c=o.rectBottom,u=o.rectRight,h=o.canvasWidth,d=o.canvasHeight,g={tl:{width:u-i,height:c-n,leftMaker:function(t){return u-t},topMaker:function(t){return c-t},maxWidth:u,maxHeight:c,scaleTo:To(l-i,s-n)},tr:{width:i-l,height:c-n,leftMaker:function(){return l},topMaker:function(t){return c-t},maxWidth:h-l,maxHeight:c,scaleTo:To(i-u,s-n)},mt:{width:r,height:c-n,leftMaker:function(){return l},topMaker:function(t){return c-t},maxWidth:h-l,maxHeight:c,scaleTo:"height"},ml:{width:u-i,height:a,leftMaker:function(t){return u-t},topMaker:function(){return s},maxWidth:u,maxHeight:d-s,scaleTo:"width"},mr:{width:i-l,height:a,leftMaker:function(){return l},topMaker:function(){return s},maxWidth:h-l,maxHeight:d-s,scaleTo:"width"},mb:{width:r,height:n-s,leftMaker:function(){return l},topMaker:function(){return s},maxWidth:h-l,maxHeight:d-s,scaleTo:"height"},bl:{width:u-i,height:n-s,leftMaker:function(t){return u-t},topMaker:function(){return s},maxWidth:u,maxHeight:d-s,scaleTo:To(l-i,n-c)},br:{width:i-l,height:n-s,leftMaker:function(){return l},topMaker:function(){return s},maxWidth:h-l,maxHeight:d-s,scaleTo:To(i-u,n-c)}};return this.adjustRatioCropzoneSize(g[e])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(t){var e=t.keyCode;e===jt.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(t){var e=t.keyCode;e===jt.SHIFT&&(this._withShiftKey=!1)}}),Ao=Eo;function Do(t){var e=Lo();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Lo(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Oo=10,jo={presetRatio:null,top:-10,left:-10,height:1,width:1},Po=function(t){ri(i,t);var e=Do(i);function i(t){var n,o,r,a,s,l;return E(this,i),l=e.call(this,Ct.CROPPER,t),l._cropzone=null,l._startX=null,l._startY=null,l._withShiftKey=!1,l._listeners={keydown:O()(n=l._onKeyDown).call(n,li(l)),keyup:O()(o=l._onKeyUp).call(o,li(l)),mousedown:O()(r=l._onFabricMouseDown).call(r,li(l)),mousemove:O()(a=l._onFabricMouseMove).call(a,li(l)),mouseup:O()(s=l._onFabricMouseUp).call(s,li(l))},l}return D(i,[{key:"start",value:function(){if(!this._cropzone){var t=this.getCanvas();t.forEachObject((function(t){t.evented=!1})),this._cropzone=new Ao(t,H()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},It,this.graphics.cropSelectionStyle)),t.discardActiveObject(),t.add(this._cropzone),t.on("mouse:down",this._listeners.mousedown),t.selection=!1,t.defaultCursor="crosshair",F.fabric.util.addListener(document,"keydown",this._listeners.keydown),F.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var t=this.getCanvas(),e=this._cropzone;e&&(t.remove(e),t.selection=!0,t.defaultCursor="default",t.off("mouse:down",this._listeners.mousedown),t.forEachObject((function(t){t.evented=!0})),this._cropzone=null,F.fabric.util.removeListener(document,"keydown",this._listeners.keydown),F.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(t){this._cropzone&&this._cropzone.set({visible:t})}},{key:"_onFabricMouseDown",value:function(t){var e=this.getCanvas();if(!t.target){e.selection=!1;var i=e.getPointer(t.e);this._startX=i.x,this._startY=i.y,e.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(t){var e=this.getCanvas(),i=e.getPointer(t.e),n=i.x,o=i.y,r=this._cropzone;Math.abs(n-this._startX)+Math.abs(o-this._startY)>Oo&&(e.remove(r),r.set(this._calcRectDimensionFromPoint(n,o,r.presetRatio)),e.add(r),e.setActiveObject(r))}},{key:"_calcRectDimensionFromPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.getCanvas(),o=n.getWidth(),r=n.getHeight(),a=this._startX,s=this._startY,l=Kt(t,0,a),c=Kt(e,0,s),u=Kt(t,a,o)-l,h=Kt(e,s,r)-c;return this._withShiftKey&&!i?(u>h?h=u:h>u&&(u=h),a>=t&&(l=a-u),s>=e&&(c=s-h)):i&&(h=u/i,a>=t&&(l=Kt(a-u,0,o)),s>=e&&(c=Kt(s-h,0,r)),c+h>r&&(h=r-c,u=h*i,a>=t&&(l=Kt(a-u,0,o)),s>=e&&(c=Kt(s-h,0,r)))),{left:l,top:c,width:u,height:h}}},{key:"_onFabricMouseUp",value:function(){var t=this._cropzone,e=this._listeners,i=this.getCanvas();i.setActiveObject(t),i.off({"mouse:move":e.mousemove,"mouse:up":e.mouseup})}},{key:"getCroppedImageData",value:function(t){var e=this.getCanvas(),i=e.contains(this._cropzone);if(!t)return null;i&&e.remove(this._cropzone);var n={imageName:this.getImageName(),url:e.toDataURL(t)};return i&&e.add(this._cropzone),n}},{key:"getCropzoneRect",value:function(){var t=this._cropzone;return t.isValid()?{left:t.left,top:t.top,width:t.width,height:t.height}:null}},{key:"setCropzoneRect",value:function(t){var e=this.getCanvas(),i=this._cropzone;e.discardActiveObject(),e.selection=!1,e.remove(i),i.set(t?this._getPresetPropertiesForCropSize(t):jo),e.add(i),e.selection=!0,t&&e.setActiveObject(i)}},{key:"_getPresetPropertiesForCropSize",value:function(t){var e,i,n=this.getCanvas(),o=n.getWidth(),r=n.getHeight(),a=o>=r?o:r,s=function(t,e){return t>e?e/t:1},l=a*t,c=a,u=s(l,o),h=Ze()(e=[l,c]).call(e,(function(t){return t*u})),d=it(h,2);l=d[0],c=d[1];var g=s(c,r),p=Ze()(i=[l,c]).call(i,(function(t){return ue(t*g)})),f=it(p,2);return l=f[0],c=f[1],{presetRatio:t,top:(r-c)/2,left:(o-l)/2,width:l,height:c}}},{key:"_onKeyDown",value:function(t){t.keyCode===jt.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(t){t.keyCode===jt.SHIFT&&(this._withShiftKey=!1)}}]),i}(uo),No=Po;function zo(t){var e=Ro();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Ro(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Bo=function(t){ri(i,t);var e=zo(i);function i(t){return E(this,i),e.call(this,Ct.FLIP,t)}return D(i,[{key:"getCurrentSetting",value:function(){var t=this.getCanvasImage();return{flipX:t.flipX,flipY:t.flipY}}},{key:"set",value:function(t){var e=this.getCurrentSetting(),i=e.flipX!==t.flipX,n=e.flipY!==t.flipY;return i||n?(H()(e,t),this.setImageProperties(e,!0),this._invertAngle(i,n),this._flipObjects(i,n),z().resolve({flipX:e.flipX,flipY:e.flipY,angle:this.getCanvasImage().angle})):z().reject(Nt.flip)}},{key:"_invertAngle",value:function(t,e){var i=this.getCanvasImage(),n=i.angle;t&&(n*=-1),e&&(n*=-1),i.rotate(Xe()(n)).setCoords()}},{key:"_flipObjects",value:function(t,e){var i=this.getCanvas();t&&i.forEachObject((function(t){t.set({angle:Xe()(-1*t.angle),flipX:!t.flipX,left:i.width-t.left}).setCoords()})),e&&i.forEachObject((function(t){t.set({angle:Xe()(-1*t.angle),flipY:!t.flipY,top:i.height-t.top}).setCoords()})),i.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var t=this.getCurrentSetting();return this.set({flipX:!t.flipX,flipY:t.flipY})}},{key:"flipY",value:function(){var t=this.getCurrentSetting();return this.set({flipX:t.flipX,flipY:!t.flipY})}}]),i}(uo),Fo=Bo;function Uo(t){var e=Ho();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Ho(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Wo=function(t){ri(i,t);var e=Uo(i);function i(t){return E(this,i),e.call(this,Ct.ROTATION,t)}return D(i,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(t){var e=this.getCurrentAngle()%360;t%=360;var i=this.getCanvasImage(),n=i.getCenterPoint();i.set({angle:t}).setCoords(),this.adjustCanvasDimension();var o=i.getCenterPoint();return this._rotateForEachObject(n,o,t-e),z().resolve(t)}},{key:"_rotateForEachObject",value:function(t,e,i){var n=this.getCanvas(),o={x:t.x-e.x,y:t.y-e.y};n.forEachObject((function(e){var n=e.getCenterPoint(),r=F.fabric.util.degreesToRadians(i),a=F.fabric.util.rotatePoint(n,t,r);e.set({left:a.x-o.x,top:a.y-o.y,angle:(e.angle+i)%360}),e.setCoords()})),n.renderAll()}},{key:"rotate",value:function(t){var e=this.getCurrentAngle();return this.setAngle(e+t)}}]),i}(uo),Xo=Wo;function Go(t){var e=Yo();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Yo(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Vo=function(t){ri(i,t);var e=Go(i);function i(t){var n;return E(this,i),n=e.call(this,Ct.FREE_DRAWING,t),n.width=12,n.oColor=new F.fabric.Color("rgba(0, 0, 0, 0.5)"),n}return D(i,[{key:"start",value:function(t){var e=this.getCanvas();e.isDrawingMode=!0,this.setBrush(t)}},{key:"setBrush",value:function(t){var e=this.getCanvas().freeDrawingBrush;t=t||{},this.width=t.width||this.width,t.color&&(this.oColor=new F.fabric.Color(t.color)),e.width=this.width,e.color=this.oColor.toRgba()}},{key:"end",value:function(){var t=this.getCanvas();t.isDrawingMode=!1}}]),i}(uo),Zo=Vo,Qo=30,Jo=2.7,qo=1.7,$o=180,Ko=F.fabric.util.createClass(F.fabric.Line,{type:"line",initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.callSuper("initialize",t,e),this.arrowType=e.arrowType},_render:function(t){var e=this.calcLinePoints(),i=e.x1,n=e.y1,o=e.x2,r=e.y2,a={fromX:i,fromY:n,toX:o,toY:r};this.ctx=t,t.lineWidth=this.strokeWidth,this._renderBasicLinePath(a),this._drawDecoratorPath(a),this._renderStroke(t)},_renderBasicLinePath:function(t){var e=t.fromX,i=t.fromY,n=t.toX,o=t.toY;this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(n,o)},_drawDecoratorPath:function(t){this._drawDecoratorPathType("head",t),this._drawDecoratorPathType("tail",t)},_drawDecoratorPathType:function(t,e){switch(this.arrowType[t]){case"triangle":this._drawTrianglePath(t,e);break;case"chevron":this._drawChevronPath(t,e);break;default:break}},_drawTrianglePath:function(t,e){var i=this.ctx.lineWidth*qo;this._drawChevronPath(t,e,i),this.ctx.closePath()},_drawChevronPath:function(t,e,i){var n=this,o=e.fromX,r=e.fromY,a=e.toX,s=e.toY,l=this.ctx;i||(i=this.ctx.lineWidth*Jo);var c="head"===t?[o,r]:[a,s],u=it(c,2),h=u[0],d=u[1],g="head"===t?[a,s]:[o,r],p=it(g,2),f=p[0],m=p[1],v=Math.atan2(m-d,f-h)*$o/Math.PI,b=function(t){return n.getRotatePosition(i,t,{x:h,y:d})};l.moveTo.apply(l,I(b(v+Qo))),l.lineTo(h,d),l.lineTo.apply(l,I(b(v-Qo)))},getRotatePosition:function(t,e,i){var n=e*Math.PI/$o,o=i.x,r=i.y;return[t*Math.cos(n)+o,t*Math.sin(n)+r]}}),tr=Ko;function er(t){var e=ir();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function ir(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var nr=function(t){ri(i,t);var e=er(i);function i(t){var n,o,r,a;return E(this,i),a=e.call(this,Ct.LINE,t),a._width=12,a._oColor=new F.fabric.Color("rgba(0, 0, 0, 0.5)"),a._listeners={mousedown:O()(n=a._onFabricMouseDown).call(n,li(a)),mousemove:O()(o=a._onFabricMouseMove).call(o,li(a)),mouseup:O()(r=a._onFabricMouseUp).call(r,li(a))},a}return D(i,[{key:"setHeadOption",value:function(t){var e=t.arrowType,i=void 0===e?{head:null,tail:null}:e;this._arrowType=i}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getCanvas();e.defaultCursor="crosshair",e.selection=!1,this.setHeadOption(t),this.setBrush(t),e.forEachObject((function(t){t.set({evented:!1})})),e.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(t){var e=this.getCanvas().freeDrawingBrush;t=t||{},this._width=t.width||this._width,t.color&&(this._oColor=new F.fabric.Color(t.color)),e.width=this._width,e.color=this._oColor.toRgba()}},{key:"end",value:function(){var t=this.getCanvas();t.defaultCursor="default",t.selection=!0,t.forEachObject((function(t){t.set({evented:!0})})),t.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(t){var e=this.getCanvas(),i=e.getPointer(t.e),n=i.x,o=i.y,r=[n,o,n,o];this._line=new tr(r,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(Pt.SELECTION_STYLE),e.add(this._line),e.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(Tt.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(t){var e=this.getCanvas(),i=e.getPointer(t.e);this._line.set({x2:i.x,y2:i.y}),this._line.setCoords(),e.renderAll()}},{key:"_onFabricMouseUp",value:function(){var t=this.getCanvas();this.fire(Tt.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,t.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var t=this.graphics.createObjectProperties(this._line),e=this._line,i=e.x1,n=e.x2,o=e.y1,r=e.y2;return H()({},t,{startPosition:{x:i,y:o},endPosition:{x:n,y:r}})}}]),i}(uo),or=nr;function rr(t){var e=ar();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function ar(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var sr={fill:"#000000",left:0,top:0},lr={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},cr=500,ur=function(t){ri(i,t);var e=rr(i);function i(t){var n,o,r,a,s,l;return E(this,i),l=e.call(this,Ct.TEXT,t),l._defaultStyles=sr,l._isSelected=!1,l._selectedObj={},l._editingObj={},l._listeners={mousedown:O()(n=l._onFabricMouseDown).call(n,li(l)),select:O()(o=l._onFabricSelect).call(o,li(l)),selectClear:O()(r=l._onFabricSelectClear).call(r,li(l)),scaling:O()(a=l._onFabricScaling).call(a,li(l)),textChanged:O()(s=l._onFabricTextChanged).call(s,li(l))},l._textarea=null,l._ratio=1,l._lastClickTime=(new Date).getTime(),l._editingObjInfos={},l.isPrevEditing=!1,l}return D(i,[{key:"start",value:function(){var t=this,e=this.getCanvas();e.selection=!1,e.defaultCursor="text",e.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),e.forEachObject((function(e){"i-text"===e.type&&t.adjustOriginPosition(e,"start")})),this.setCanvasRatio()}},{key:"end",value:function(){var t=this,e=this.getCanvas();e.selection=!0,e.defaultCursor="default",e.forEachObject((function(i){"i-text"===i.type&&(""===i.text?e.remove(i):t.adjustOriginPosition(i,"end"))})),e.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(t,e){var i="center",n="center";"start"===e&&(i="left",n="top");var o=t.getPointByOrigin(i,n),r=o.x,a=o.y;t.set({left:r,top:a,originX:i,originY:n}),t.setCoords()}},{key:"add",value:function(t,e){var i=this;return new(z())((function(n){var o,r=i.getCanvas(),a=null,s=Pt.SELECTION_STYLE,l=i._defaultStyles;i._setInitPos(e.position),e.styles&&(l=H()(l,e.styles)),_n()(e.autofocus)||(e.autofocus=!0),a=new F.fabric.IText(t,l),s=H()({},s,{originX:"left",originY:"top"}),a.set(s),a.on({mouseup:O()(o=i._onFabricMouseUp).call(o,i)}),r.add(a),e.autofocus&&(a.enterEditing(),a.selectAll()),r.getActiveObject()||r.setActiveObject(a),i.isPrevEditing=!0,n(i.graphics.createObjectProperties(a))}))}},{key:"change",value:function(t,e){var i=this;return new(z())((function(n){t.set("text",e),i.getCanvas().renderAll(),n()}))}},{key:"setStyle",value:function(t,e){var i=this;return new(z())((function(n){Y()(e,(function(i,n){t[n]===i&&"fontSize"!==n&&(e[n]=lr[n]||"")}),i),"textDecoration"in e&&H()(e,i._getTextDecorationAdaptObject(e.textDecoration)),t.set(e),i.getCanvas().renderAll(),n()}))}},{key:"getText",value:function(t){return t.text}},{key:"setSelectedInfo",value:function(t,e){this._selectedObj=t,this._isSelected=e}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var t=this.getCanvasElement(),e=rt()(t.style.maxWidth,10),i=t.width;this._ratio=i/e}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(t){return{underline:"underline"===t,linethrough:"line-through"===t,overline:"overline"===t}}},{key:"_setInitPos",value:function(t){t=t||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=t.x,this._defaultStyles.top=t.y}},{key:"_onInput",value:function(){var t=this.getCanvasRatio(),e=this._editingObj,i=this._textarea.style;i.width="".concat(Math.ceil(e.width/t),"px"),i.height="".concat(Math.ceil(e.height/t),"px")}},{key:"_onKeyDown",value:function(){var t=this,e=this.getCanvasRatio(),i=this._editingObj,n=this._textarea.style;f()((function(){i.text(t._textarea.value),n.width="".concat(Math.ceil(i.width/e),"px"),n.height="".concat(Math.ceil(i.height/e),"px")}),0)}},{key:"_onBlur",value:function(){var t=this.getCanvasRatio(),e=this._editingObj,i=this._editingObjInfos,n=this._textarea.value,o=e.width/t-i.width/t,r=e.height/t-i.height/t;if(1===t&&(o/=2,r/=2),this._textarea.style.display="none",e.set({left:i.left+o,top:i.top+r}),n.length){this.getCanvas().add(e);var a={id:qt(e),type:e.type,text:n};this.fire(Tt.TEXT_CHANGED,a)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(t){var e=t.target;e.fontSize=e.fontSize*e.scaleY,e.scaleX=1,e.scaleY=1}},{key:"_onFabricTextChanged",value:function(t){this.fire(Tt.TEXT_CHANGED,t.target)}},{key:"_onFabricSelectClear",value:function(t){var e=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(t.target,!1),e&&""===e.text&&this.getCanvas().remove(e)}},{key:"_onFabricSelect",value:function(t){this.isPrevEditing=!0,this.setSelectedInfo(t.target,!0)}},{key:"_onFabricMouseDown",value:function(t){var e=t.target;e&&!e.isType("text")||(this.isPrevEditing?this.isPrevEditing=!1:this._fireAddText(t))}},{key:"_fireAddText",value:function(t){var e=t.target,i=t.e||{},n=this.getCanvas().getPointer(i);e||this.fire(Tt.ADD_TEXT,{originPosition:{x:n.x,y:n.y},clientPosition:{x:i.clientX||0,y:i.clientY||0}})}},{key:"_onFabricMouseUp",value:function(t){var e=t.target,i=(new Date).getTime();this._isDoubleClick(i)&&!e.isEditing&&e.enterEditing(),e.isEditing&&this.fire(Tt.TEXT_EDITING),this._lastClickTime=i}},{key:"_isDoubleClick",value:function(t){return t-this._lastClickTime<cr}}]),i}(uo),hr=ur;function dr(t){var e=gr();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function gr(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var pr={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},fr=function(t){ri(i,t);var e=dr(i);function i(t){var n,o,r,a;return E(this,i),a=e.call(this,Ct.ICON,t),a._oColor="#000000",a._pathMap=pr,a._type=null,a._iconColor=null,a._handlers={mousedown:O()(n=a._onFabricMouseDown).call(n,li(a)),mousemove:O()(o=a._onFabricMouseMove).call(o,li(a)),mouseup:O()(r=a._onFabricMouseUp).call(r,li(a))},a}return D(i,[{key:"setStates",value:function(t,e){this._type=t,this._iconColor=e}},{key:"start",value:function(){var t=this.getCanvas();t.selection=!1,t.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var t=this.getCanvas();t.selection=!0,t.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(t,e){var i=this;return new(z())((function(n,o){var r=i.getCanvas(),a=i._pathMap[t],s=Pt.SELECTION_STYLE,l=a?i._createIcon(a):null;i._icon=l,l||o(Nt.invalidParameters),l.set(H()({type:"icon",fill:i._oColor},s,e,i.graphics.controlStyle)),r.add(l).setActiveObject(l),n(i.graphics.createObjectProperties(l))}))}},{key:"registerPaths",value:function(t){var e=this;Y()(t,(function(t,i){e._pathMap[i]=t}),this)}},{key:"setColor",value:function(t,e){this._oColor=t,e&&"icon"===e.get("type")&&(e.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(t){return ct()(t)}},{key:"_createIcon",value:function(t){return new F.fabric.Path(t)}},{key:"_onFabricMouseDown",value:function(t){var e=this,i=this.getCanvas();this._startPoint=i.getPointer(t.e);var n=this._startPoint,o=n.x,r=n.y;this.add(this._type,{left:o,top:r,fill:this._iconColor}).then((function(){e.fire(Tt.ADD_OBJECT,e.graphics.createObjectProperties(e._icon)),i.on("mouse:move",e._handlers.mousemove),i.on("mouse:up",e._handlers.mouseup)}))}},{key:"_onFabricMouseMove",value:function(t){var e=this.getCanvas();if(this._icon){var i=e.getPointer(t.e),n=(i.x-this._startPoint.x)/this._icon.width,o=(i.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(2*n),scaleY:Math.abs(2*o)}),this._icon.setCoords(),e.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var t=this.getCanvas();this.fire(Tt.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,t.off("mouse:down",this._handlers.mousedown),t.off("mouse:move",this._handlers.mousemove),t.off("mouse:up",this._handlers.mouseup)}}]),i}(uo),mr=fr,vr=F.fabric.util.createClass(F.fabric.Image.filters.BlendImage,{applyTo:function(t){if(this.mask){var e=t.canvasEl,i=e.width,n=e.height,o=this._createCanvasOfMask(i,n),r=e.getContext("2d"),a=o.getContext("2d"),s=r.getImageData(0,0,i,n);this._drawMask(a,e,r),this._mapData(a,s,i,n),t.imageData=s}},_createCanvasOfMask:function(t,e){var i=F.fabric.util.createCanvasElement();return i.width=t,i.height=e,i},_drawMask:function(t){var e=this.mask,i=e.getElement(),n=e.angle,o=e.left,r=e.scaleX,a=e.scaleY,s=e.top;t.save(),t.translate(o,s),t.rotate(n*Math.PI/180),t.scale(r,a),t.drawImage(i,-i.width/2,-i.height/2),t.restore()},_mapData:function(t,e,i,n){for(var o=e.data,r=e.height,a=e.width,s=o,l=a*r*4,c=t.getImageData(0,0,i,n).data,u=0;u<l;u+=4)s[u+3]=c[u]}}),br=vr,xr=F.fabric.util.createClass(F.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),yr=xr,_r=F.fabric.util.createClass(F.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),wr=_r,kr=F.fabric.util.createClass(F.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(t){t||(t={}),this.color=t.color||"#FFFFFF",this.threshold=t.threshold||45,this.x=t.x||null,this.y=t.y||null},applyTo:function(t){var e,i,n=t.canvasEl,o=n.getContext("2d"),r=o.getImageData(0,0,n.width,n.height),a=r.data,s=this.threshold,l=F.fabric.Color.sourceFromHex(this.color);for(this.x&&this.y&&(l=this._getColor(r,this.x,this.y)),e=0,i=a.length;e<i;e+=4)this._isOutsideThreshold(a[e],l[0],s)||this._isOutsideThreshold(a[e+1],l[1],s)||this._isOutsideThreshold(a[e+2],l[2],s)||(a[e]=a[e+1]=a[e+2]=a[e+3]=0);o.putImageData(r,0,0)},_isOutsideThreshold:function(t,e,i){var n=t-e;return Math.abs(n)>i},_getColor:function(t,e,i){var n=[0,0,0,0],o=t.data,r=t.width,a=4,s=(r*i+e)*a;return n[0]=o[s],n[1]=o[s+1],n[2]=o[s+2],n[3]=o[s+3],n}}),Cr=kr;function Sr(t){var e=Ir();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Ir(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Mr=F.fabric.Image.filters;Mr.Mask=br,Mr.Sharpen=yr,Mr.Emboss=wr,Mr.ColorFilter=Cr;var Tr=function(t){ri(i,t);var e=Sr(i);function i(t){return E(this,i),e.call(this,Ct.FILTER,t)}return D(i,[{key:"add",value:function(t,e){var i=this;return new(z())((function(n,o){var r=i._getSourceImage(),a=i.getCanvas(),s=i._getFilter(r,t);s||(s=i._createFilter(r,t,e)),s||o(Nt.invalidParameters),i._changeFilterValues(s,e),i._apply(r,(function(){a.renderAll(),n({type:t,action:"add",options:e})}))}))}},{key:"remove",value:function(t){var e=this;return new(z())((function(i,n){var o=e._getSourceImage(),r=e.getCanvas(),a=e.getOptions(t);o.filters.length||n(Nt.unsupportedOperation),e._removeFilter(o,t),e._apply(o,(function(){r.renderAll(),i({type:t,action:"remove",options:a})}))}))}},{key:"hasFilter",value:function(t){return!!this._getFilter(this._getSourceImage(),t)}},{key:"getOptions",value:function(t){var e=this._getSourceImage(),i=this._getFilter(e,t);return i?H()({},i.options):null}},{key:"_changeFilterValues",value:function(t,e){Y()(e,(function(e,i){X()(t[i])||(t[i]=e)})),Y()(t.options,(function(i,n){X()(e[n])||(t.options[n]=e[n])}))}},{key:"_apply",value:function(t,e){t.filters.push();var i=t.applyFilters();i&&e()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(t,e,i){var n,o=this._getFabricFilterType(e),r=F.fabric.Image.filters[o];return r&&(n=new r(i),n.options=i,t.filters.push(n)),n}},{key:"_getFilter",value:function(t,e){var i=null;if(t){var n,o,r=this._getFabricFilterType(e),a=t.filters.length;for(o=0;o<a;o+=1)if(n=t.filters[o],n.type===r){i=n;break}}return i}},{key:"_removeFilter",value:function(t,e){var i,n=this._getFabricFilterType(e);t.filters=io()(i=t.filters).call(i,(function(t){return t.type!==n}))}},{key:"_getFabricFilterType",value:function(t){return t.charAt(0).toUpperCase()+h()(t).call(t,1)}}]),i}(uo),Er=Tr,Ar=n(1801),Dr=n.n(Ar),Lr={pixelate:"blocksize",blur:"blur"},Or={x:"width",y:"height"},jr=pe(Lr),Pr=null;function Nr(t){var e=me(t,"patternSourceCanvas"),i=e.patternSourceCanvas,n=i.getObjects(),o=it(n,1),r=o[0];return r}function zr(t){var e=t.angle,i=t.flipX,n=t.flipY,o=Nr(t),r=Kr(t),a=r.right,s=r.bottom,l=r.width,c=r.height,u=(l-t.width)/2,h=(c-t.height)/2,d=t.left-t.width/2-u,g=t.top-t.height/2-h,p=l/2-u,f=c/2-h,m=Math.max(l,c)+Math.max(u,h),v=Br({shapeObj:t,left:p,top:f,width:l,height:c,cropX:d,cropY:g,flipX:i,flipY:n,right:a,bottom:s}),b=it(v,4);p=b[0],f=b[1],l=b[2],c=b[3],o.set({angle:i===n?-e:e,left:p,top:f,width:l,height:c,cropX:d,cropY:g,flipX:i,flipY:n}),fe(o,{fillImageMaxSize:m})}function Rr(t){var e;return Ze()(e=t.filters).call(e,(function(t){var e=$()(t),i=it(e,1),n=i[0];return T({},jr[n],t[n])}))}function Br(t){var e=t.shapeObj,i=t.left,n=t.top,o=t.width,r=t.height,a=t.cropX,s=t.cropY,l=t.flipX,c=t.flipY,u=t.right,h=t.bottom,d=function(t,i,n,o){return Yr({type:t,outDistance:i,shapeObj:e,flipX:l,flipY:c,left:n,top:o})},g=o,p=r,f=Ur(d,{left:i,top:n,width:o,height:r,cropX:a,cropY:s}),m=it(f,4);i=m[0],n=m[1],o=m[2],r=m[3];var v=Fr(d,{left:i,top:n,insideCanvasRealImageWidth:o,insideCanvasRealImageHeight:r,right:u,bottom:h,cropX:a,cropY:s,originalWidth:g,originalHeight:p}),b=it(v,4);return i=b[0],n=b[1],o=b[2],r=b[3],[i,n,o,r]}function Fr(t,e){var i=e.left,n=e.top,o=e.insideCanvasRealImageWidth,r=e.insideCanvasRealImageHeight,a=e.right,s=e.bottom,l=e.cropX,c=e.cropY,u=e.originalWidth,h=e.originalHeight,d=o,g=r,p=Pr,f=p.width,m=p.height;a>f&&l>0&&(d=u-Math.abs(a-f)),s>m&&c>0&&(g=h-Math.abs(s-m));var v={x:(o-d)/2,y:(r-g)/2};return Y()(["x","y"],(function(e){var o=v[e];if(o>0){var r=t(e,o,i,n),a=it(r,2);i=a[0],n=a[1]}})),[i,n,d,g]}function Ur(t,e){var i=e.left,n=e.top,o=e.width,r=e.height,a=e.cropX,s=e.cropY,l={width:o,height:r};return Y()(["x","y"],(function(e){var o="x"===e?a:s,r=l[Or[e]],c=Pr[Or[e]];if(r>c){var u=(r-c)/2;l[Or[e]]=c;var h=t(e,u,i,n),d=it(h,2);i=d[0],n=d[1]}if(o<0){var g=t(e,o,i,n),p=it(g,2);i=p[0],n=p[1]}})),[i,n,l.width,l.height]}function Hr(t,e,i){var n=Gr(t),o=ta(n,t.angle,e);i.add(o);var r={fill:new F.fabric.Pattern({source:i.getElement(),repeat:"no-repeat"})};return fe(r,{patternSourceCanvas:i}),r}function Wr(t){var e=t.getObjects(),i=it(e,1),n=i[0],o=me(n,"fillImageMaxSize"),r=o.fillImageMaxSize;r=Math.max(1,r),t.setDimensions({width:r,height:r}),t.renderAll()}function Xr(t,e){var i=me(t,"patternSourceCanvas"),n=i.patternSourceCanvas,o=n.getObjects(),r=it(o,1),a=r[0],s=Rr(a);n.remove(a);var l=Gr(e,!0),c=ta(l,e.angle,s);n.add(c)}function Gr(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Pr&&!e||(Pr=t.toCanvasElement()),Pr}function Yr(t){var e=t.type,i=t.shapeObj,n=t.outDistance,o=t.left,r=t.top,a=t.flipX,s=t.flipY,l=$r(i),c=[[1,2],[0,3],[0,3],[1,2]],u=Zr(e,l,c),h=Qr(e,l,u),d=u.startPointIndex,g=Vr({outDistance:n,startPointIndex:d,flipX:a,flipY:s,reatAngles:h});return[o+g.left,r+g.top]}function Vr(t){var e=t.outDistance,i=t.startPointIndex,n=t.flipX,o=t.flipY,r=t.reatAngles,a=e*Math.cos(r[0]*Math.PI/180),s=e*Math.cos(r[1]*Math.PI/180),l=2===i||3===i,c={top:l?a:s,left:l?s:a};return Jr(i,n,o)&&(c.left=-1*c.left),qr(i,n,o)&&(c.top=-1*c.top),c}function Zr(t,e,i){var n=0,o=0;Y()(e,(function(e,i){e[t]<n&&(n=e[t],o=i)}));var r=it(i[o],2),a=r[0],s=r[1];return{startPointIndex:o,endPointIndex1:a,endPointIndex2:s}}function Qr(t,e,i){var n,o=i.startPointIndex,r=i.endPointIndex1,a=i.endPointIndex2,s="x"===t?180:270;return Ze()(n=[r,a]).call(n,(function(t){var i=e[o],n=e[t],r=i.y-n.y,a=i.x-n.x;return 180*Math.atan2(r,a)/Math.PI-s}))}function Jr(t,e,i){return(!e&&i||!e&&!i)&&0===t||(e&&i||e&&!i)&&1===t||(!e&&!i||!e&&i)&&2===t||(e&&!i||e&&i)&&3===t}function qr(t,e,i){return(e&&!i||!e&&!i)&&0===t||(!e&&!i||e&&!i)&&1===t||(e&&i||!e&&i)&&2===t||(!e&&i||e&&i)&&3===t}function $r(t){return[t.getPointByOrigin("left","top"),t.getPointByOrigin("right","top"),t.getPointByOrigin("left","bottom"),t.getPointByOrigin("right","bottom")]}function Kr(t){var e=$r(t),i=it(e,4),n=i[0],o=n.x,r=n.y,a=i[1],s=a.x,l=a.y,c=i[2],u=c.x,h=c.y,d=i[3],g=d.x,p=d.y,f=Math.min(o,s,u,g),m=Math.min(r,l,h,p),v=Math.max(o,s,u,g),b=Math.max(r,l,h,p);return{left:f,top:m,right:v,bottom:b,width:v-f,height:b-m}}function ta(t,e,i){var n,o=new F.fabric.Image(t);return Y()(H().apply(void 0,P()(n=[{}]).call(n,I(i))),(function(t,e){var i=ve(e),n=new F.fabric.Image.filters[i](T({},Lr[e],t));o.filters.push(n)})),o.applyFilters(),fe(o,{originalAngle:e,fillImageMaxSize:Math.max(o.width,o.height)}),Dr().adjustOriginToCenter(o),o}function ea(t){var e=ia();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function ia(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var na=H()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},St),oa="rect",ra=20,aa=20;function sa(t,e,i){var n=ct()(t),o=xe(ct()(t)),r=n;n.color&&(r=n.color);var a=null;if("filter"===o){var s=i();a=Hr(e,io()(n),s)}else a={fill:r};return H()({},t,a)}var la=function(t){ri(i,t);var e=ea(i);function i(t){var n,o,r,a,s,l;return E(this,i),l=e.call(this,Ct.SHAPE,t),l._shapeObj=null,l._type=oa,l._options=H()({},na),l._isSelected=!1,l._startPoint={},l._withShiftKey=!1,l._handlers={mousedown:O()(n=l._onFabricMouseDown).call(n,li(l)),mousemove:O()(o=l._onFabricMouseMove).call(o,li(l)),mouseup:O()(r=l._onFabricMouseUp).call(r,li(l)),keydown:O()(a=l._onKeyDown).call(a,li(l)),keyup:O()(s=l._onKeyUp).call(s,li(l))},l}return D(i,[{key:"start",value:function(){var t=this.getCanvas();this._isSelected=!1,t.defaultCursor="crosshair",t.selection=!1,t.uniformScaling=!0,t.on({"mouse:down":this._handlers.mousedown}),F.fabric.util.addListener(document,"keydown",this._handlers.keydown),F.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var t=this.getCanvas();this._isSelected=!1,t.defaultCursor="default",t.selection=!0,t.uniformScaling=!1,t.off({"mouse:down":this._handlers.mousedown}),F.fabric.util.removeListener(document,"keydown",this._handlers.keydown),F.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(t,e){this._type=t,e&&(this._options=H()(this._options,e))}},{key:"add",value:function(t,e){var i=this;return new(z())((function(n){var o=i.getCanvas(),r=i._extendOptions(e),a=i._createInstance(t,r),s=i.graphics.createObjectProperties(a);i._bindEventOnShape(a),o.add(a).setActiveObject(a),i._resetPositionFillFilter(a),n(s)}))}},{key:"change",value:function(t,e){var i=this;return new(z())((function(n,o){_e(t)||o(Nt.unsupportedType);var r="filter"===xe(ct()(e)),a=i.graphics,s=a.canvasImage,l=a.createStaticCanvas;t.set(r?sa(e,s,l):e),r&&i._resetPositionFillFilter(t),i.getCanvas().renderAll(),n()}))}},{key:"makeFillPropertyForUserEvent",value:function(t){var e=ye(t),i={};if(e===yt.FILTER){var n=Nr(t),o=Rr(n);i.type=e,i.filter=o}else i.type=yt.COLOR,i.color=ct()(t)||"transparent";return i}},{key:"processForCopiedObject",value:function(t,e){if(this._bindEventOnShape(t),"filter"===ye(t)){var i=Nr(e),n=Rr(i),o=this.graphics.createStaticCanvas();t.set(Hr(this.graphics.canvasImage,n,o)),this._resetPositionFillFilter(t)}}},{key:"_createInstance",value:function(t,e){var i;switch(t){case"rect":i=new F.fabric.Rect(e);break;case"circle":i=new F.fabric.Ellipse(H()({type:"circle"},e));break;case"triangle":i=new F.fabric.Triangle(e);break;default:i={}}return i}},{key:"_extendOptions",value:function(t){var e=Pt.SELECTION_STYLE,i=this.graphics,n=i.canvasImage,o=i.createStaticCanvas;return t=H()({},na,this._options,e,t),sa(t,n,o)}},{key:"_bindEventOnShape",value:function(t){var e=this,i=this.getCanvas();t.on({added:function(){e._shapeObj=this,Dr().setOrigins(e._shapeObj)},selected:function(){e._isSelected=!0,e._shapeObj=this,i.uniformScaling=!0,i.defaultCursor="default",Dr().setOrigins(e._shapeObj)},deselected:function(){e._isSelected=!1,e._shapeObj=null,i.defaultCursor="crosshair",i.uniformScaling=!1},modified:function(){var t=e._shapeObj;Dr().adjustOriginToCenter(t),Dr().setOrigins(t)},modifiedInGroup:function(i){e._fillFilterRePositionInGroupSelection(t,i)},moving:function(){e._resetPositionFillFilter(this)},rotating:function(){e._resetPositionFillFilter(this)},scaling:function(t){var n=i.getPointer(t.e),o=e._shapeObj;i.setCursor("crosshair"),Dr().resize(o,n,!0),e._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(t){if(t.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var e=this.getCanvas();this._startPoint=e.getPointer(t.e),e.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(t){var e=this,i=this.getCanvas(),n=i.getPointer(t.e),o=this._startPoint.x,r=this._startPoint.y,a=o-n.x,s=r-n.y,l=this._shapeObj;l?(this._shapeObj.set({isRegular:this._withShiftKey}),Dr().resize(l,n),i.renderAll(),this._resetPositionFillFilter(l)):this.add(this._type,{left:o,top:r,width:a,height:s}).then((function(t){e.fire(Tt.ADD_OBJECT,t)}))}},{key:"_onFabricMouseUp",value:function(){var t=this,e=this.getCanvas(),i=this._startPoint.x,n=this._startPoint.y,o=this._shapeObj;o?o&&(Dr().adjustOriginToCenter(o),this.fire(Tt.OBJECT_ADDED,this.graphics.createObjectProperties(o))):this.add(this._type,{left:i,top:n,width:ra,height:aa}).then((function(e){t.fire(Tt.ADD_OBJECT,e)})),e.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(t){t.keyCode===jt.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(t){t.keyCode===jt.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(t){if("filter"===ye(t)){var e=me(t,"patternSourceCanvas"),i=e.patternSourceCanvas,n=Nr(t),o=me(n,"originalAngle"),r=o.originalAngle;this.graphics.canvasImage.angle!==r&&Xr(t,this.graphics.canvasImage);var a=t.originX,s=t.originY;Dr().adjustOriginToCenter(t),t.width*=t.scaleX,t.height*=t.scaleY,t.rx*=t.scaleX,t.ry*=t.scaleY,t.scaleX=1,t.scaleY=1,zr(t),ge(t,{originX:a,originY:s}),Wr(i)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(t,e){1===e.scaleX&&1===e.scaleY||e.addWithUpdate();var i=t.angle,n=t.left,o=t.top;F.fabric.util.addTransformToObject(t,e.calcTransformMatrix()),this._resetPositionFillFilter(t),t.set({angle:i,left:n,top:o})}}]),i}(uo);function ca(t){var e=ua();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function ua(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ha=10,da={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},ga={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},pa={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},fa=1,ma=Tt.ZOOM_CHANGED,va=Tt.ADD_TEXT,ba=Tt.TEXT_EDITING,xa=Tt.OBJECT_MODIFIED,ya=Tt.KEY_DOWN,_a=Tt.KEY_UP,wa=Tt.HAND_STARTED,ka=Tt.HAND_STOPPED,Ca=function(t){ri(i,t);var e=ca(i);function i(t){var n,o,r,a,s,l,c,u,h,d,g,p,f;E(this,i),f=e.call(this,Ct.ZOOM,t),f.zoomArea=null,f._startPoint=null,f._centerPoints=[],f.zoomLevel=fa,f.zoomMode=Ot.DEFAULT,f._listeners={startZoom:O()(n=f._onMouseDownWithZoomMode).call(n,li(f)),moveZoom:O()(o=f._onMouseMoveWithZoomMode).call(o,li(f)),stopZoom:O()(r=f._onMouseUpWithZoomMode).call(r,li(f)),startHand:O()(a=f._onMouseDownWithHandMode).call(a,li(f)),moveHand:O()(s=f._onMouseMoveWithHandMode).call(s,li(f)),stopHand:O()(l=f._onMouseUpWithHandMode).call(l,li(f)),zoomChanged:O()(c=f._changeScrollState).call(c,li(f)),keydown:O()(u=f._startHandModeWithSpaceBar).call(u,li(f)),keyup:O()(h=f._endHandModeWithSpaceBar).call(h,li(f))};var m=f.getCanvas();return f.aspectRatio=m.width/m.height,f._verticalScroll=new F.fabric.Rect(da),f._horizontalScroll=new F.fabric.Rect(da),m.on(ma,f._listeners.zoomChanged),f.graphics.on(va,O()(d=f._startTextEditingHandler).call(d,li(f))),f.graphics.on(ba,O()(g=f._startTextEditingHandler).call(g,li(f))),f.graphics.on(xa,O()(p=f._stopTextEditingHandler).call(p,li(f))),f}return D(i,[{key:"attachKeyboardZoomEvents",value:function(){F.fabric.util.addListener(document,ya,this._listeners.keydown),F.fabric.util.addListener(document,_a,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){F.fabric.util.removeListener(document,ya,this._listeners.keydown),F.fabric.util.removeListener(document,_a,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(t){this.withSpace||this.isTextEditing||t.keyCode===jt.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(t){t.keyCode===jt.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=Ot.ZOOM;var t=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new F.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),t.discardActiveObject(),t.add(this.zoomArea),t.on("mouse:down",this._listeners.startZoom),t.selection=!1,t.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=Ot.DEFAULT;var t=this.getCanvas(),e=this._listeners,i=e.startZoom,n=e.moveZoom,o=e.stopZoom;t.selection=!0,t.defaultCursor="auto",t.off({"mouse:down":i,"mouse:move":n,"mouse:up":o}),this._changeObjectsEventedState(!0),t.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=Ot.HAND;var t=this.getCanvas();this._changeObjectsEventedState(!1),t.discardActiveObject(),t.off("mouse:down",this._listeners.startHand),t.on("mouse:down",this._listeners.startHand),t.selection=!1,t.defaultCursor="grab",t.fire(wa)}},{key:"endHandMode",value:function(){this.zoomMode=Ot.DEFAULT;var t=this.getCanvas();this._changeObjectsEventedState(!0),t.off("mouse:down",this._listeners.startHand),t.selection=!0,t.defaultCursor="auto",this._startHandPoint=null,t.fire(ka)}},{key:"_onMouseDownWithZoomMode",value:function(t){var e=t.target,i=t.e;if(!e){var n=this.getCanvas();n.selection=!1,this._startPoint=n.getPointer(i),this.zoomArea.set({width:0,height:0});var o=this._listeners,r=o.moveZoom,a=o.stopZoom;n.on({"mouse:move":r,"mouse:up":a})}}},{key:"_onMouseMoveWithZoomMode",value:function(t){var e=t.e,i=this.getCanvas(),n=i.getPointer(e),o=n.x,r=n.y,a=this.zoomArea,s=this._startPoint,l=Math.abs(o-s.x),c=Math.abs(r-s.y);l+c>ha&&(i.remove(a),a.set(this._calcRectDimensionFromPoint(o,r)),i.add(a))}},{key:"_calcRectDimensionFromPoint",value:function(t,e){var i=this.getCanvas(),n=i.getWidth(),o=i.getHeight(),r=this._startPoint,a=r.x,s=r.y,l=Math.min,c=l(a,t),u=l(s,e),h=Kt(t,a,n)-c,d=Kt(e,s,o)-u;return{left:c,top:u,width:h,height:d}}},{key:"_onMouseUpWithZoomMode",value:function(){var t=this.zoomLevel,e=this.zoomArea,i=this._listeners,n=i.moveZoom,o=i.stopZoom,r=this.getCanvas(),a=this._getCenterPoint(),s=a.x,l=a.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:s,y:l,prevZoomLevel:t,zoomLevel:t+1}),t+=1,r.zoomToPoint({x:s,y:l},t),this._fireZoomChanged(r,t),this.zoomLevel=t),r.off({"mouse:move":n,"mouse:up":o}),r.remove(e),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var t=this.zoomArea,e=t.left,i=t.top,n=t.width,o=t.height,r=this._startPoint,a=r.x,s=r.y,l=this.aspectRatio;return n<ha&&o<ha?{x:a,y:s}:n>o?{x:e+l*o/2,y:i+o/2}:{x:e+n/2,y:i+n/l/2}}},{key:"zoom",value:function(t){for(var e=t.x,i=t.y,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoomLevel,o=this.getCanvas(),r=this._centerPoints,a=r.length-1;a>=0;a-=1){if(r[a].zoomLevel<n)break;var s=r.pop(),l=s.x,c=s.y,u=s.prevZoomLevel;o.zoomToPoint({x:l,y:c},u),this.zoomLevel=u}o.zoomToPoint({x:e,y:i},n),this._isDefaultZoomLevel(n)||this._centerPoints.push({x:e,y:i,zoomLevel:n,prevZoomLevel:this.zoomLevel}),this.zoomLevel=n,this._fireZoomChanged(o,n)}},{key:"zoomOut",value:function(){var t=this._centerPoints;if(t.length){var e=this.getCanvas(),i=t.pop(),n=i.x,o=i.y,r=i.prevZoomLevel;this._isDefaultZoomLevel(r)?e.setViewportTransform([1,0,0,1,0,0]):e.zoomToPoint({x:n,y:o},r),this.zoomLevel=r,this._fireZoomChanged(e,this.zoomLevel)}}},{key:"resetZoom",value:function(){var t=this.getCanvas();t.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=fa,this._centerPoints=[],this._fireZoomChanged(t,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(t){var e=t.x,i=t.y,n=this._centerPoints;if(n.length){var o=this.getCanvas(),r=this.zoomLevel,a=n.pop(),s=a.x,l=a.y,c=a.prevZoomLevel,u=s-e,h=l-i;o.zoomToPoint({x:s,y:l},c),o.zoomToPoint({x:u,y:h},r),n.push({x:u,y:h,prevZoomLevel:c,zoomLevel:r}),this._fireZoomChanged(o,r)}}},{key:"_onMouseDownWithHandMode",value:function(t){var e=t.target,i=t.e;if(!e){var n=this.getCanvas();if(!(this.zoomLevel<=fa)){n.selection=!1,this._startHandPoint=n.getPointer(i);var o=this._listeners,r=o.moveHand,a=o.stopHand;n.on({"mouse:move":r,"mouse:up":a})}}}},{key:"_onMouseMoveWithHandMode",value:function(t){var e=t.e,i=this.getCanvas(),n=i.getPointer(e),o=n.x,r=n.y,a=o-this._startHandPoint.x,s=r-this._startHandPoint.y;this._movePointOfZoom({x:a,y:s})}},{key:"_onMouseUpWithHandMode",value:function(){var t=this.getCanvas(),e=this._listeners,i=e.moveHand,n=e.stopHand;t.off({"mouse:move":i,"mouse:up":n}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(t){var e=t.viewport,i=t.zoomLevel,n=this.getCanvas();if(n.remove(this._verticalScroll),n.remove(this._horizontalScroll),!this._isDefaultZoomLevel(i)){var o=n.width,r=n.height,a=e.tl,s=e.tr,l=e.bl,c=s.x-a.x,u=l.y-a.y,h=c*c/o,d=u*pa.SIZE,g=Kt(a.x+a.x/o*c,a.x,s.x-h),p=u*pa.MARGIN,f=u*pa.BORDER_RADIUS;this._horizontalScroll.set({left:g,top:l.y-d-p,width:h,height:d,rx:f,ry:f});var m=c*ga.SIZE,v=u*u/r,b=Kt(a.y+a.y/r*u,s.y,l.y-v),x=c*ga.MARGIN,y=c*ga.BORDER_RADIUS;this._verticalScroll.set({left:s.x-m-x,top:b,width:m,height:v,rx:y,ry:y}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.getCanvas();e.forEachObject((function(e){e.evented=t}))}},{key:"_addScrollBar",value:function(){var t=this,e=this.getCanvas();e.add(this._horizontalScroll),e.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=f()((function(){e.remove(t._horizontalScroll),e.remove(t._verticalScroll)}),3e3)}},{key:"_isDefaultZoomLevel",value:function(t){return t===fa}},{key:"_fireZoomChanged",value:function(t,e){t.fire(ma,{viewport:t.calcViewportBoundaries(),zoomLevel:e})}},{key:"mode",get:function(){return this.zoomMode}}]),i}(uo),Sa=Ca,Ia=Le.create,Ma=Le.types,Ta=function(){function t(e){E(this,t),this.name=e}return D(t,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(Ia(Ma.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(Ia(Ma.UN_IMPLEMENTATION,"stop"))}}]),t}(),Ea=Ta;function Aa(t){var e=Da();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Da(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var La=function(t){ri(i,t);var e=Aa(i);function i(){return E(this,i),e.call(this,Dt.CROPPER)}return D(i,[{key:"start",value:function(t){var e=t.getComponent(Ct.CROPPER);e.start()}},{key:"end",value:function(t){var e=t.getComponent(Ct.CROPPER);e.end()}}]),i}(Ea),Oa=La;function ja(t){var e=Pa();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Pa(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Na=function(t){ri(i,t);var e=ja(i);function i(){return E(this,i),e.call(this,Dt.FREE_DRAWING)}return D(i,[{key:"start",value:function(t,e){var i=t.getComponent(Ct.FREE_DRAWING);i.start(e)}},{key:"end",value:function(t){var e=t.getComponent(Ct.FREE_DRAWING);e.end()}}]),i}(Ea),za=Na;function Ra(t){var e=Ba();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Ba(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Fa=function(t){ri(i,t);var e=Ra(i);function i(){return E(this,i),e.call(this,Dt.LINE_DRAWING)}return D(i,[{key:"start",value:function(t,e){var i=t.getComponent(Ct.LINE);i.start(e)}},{key:"end",value:function(t){var e=t.getComponent(Ct.LINE);e.end()}}]),i}(Ea),Ua=Fa;function Ha(t){var e=Wa();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Wa(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Xa=function(t){ri(i,t);var e=Ha(i);function i(){return E(this,i),e.call(this,Dt.SHAPE)}return D(i,[{key:"start",value:function(t){var e=t.getComponent(Ct.SHAPE);e.start()}},{key:"end",value:function(t){var e=t.getComponent(Ct.SHAPE);e.end()}}]),i}(Ea),Ga=Xa;function Ya(t){var e=Va();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function Va(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Za=function(t){ri(i,t);var e=Ya(i);function i(){return E(this,i),e.call(this,Dt.TEXT)}return D(i,[{key:"start",value:function(t){var e=t.getComponent(Ct.TEXT);e.start()}},{key:"end",value:function(t){var e=t.getComponent(Ct.TEXT);e.end()}}]),i}(Ea),Qa=Za;function Ja(t){var e=qa();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function qa(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var $a=function(t){ri(i,t);var e=Ja(i);function i(){return E(this,i),e.call(this,Dt.ICON)}return D(i,[{key:"start",value:function(t){var e=t.getComponent(Ct.ICON);e.start()}},{key:"end",value:function(t){var e=t.getComponent(Ct.ICON);e.end()}}]),i}(Ea),Ka=$a;function ts(t){var e=es();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function es(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var is=function(t){ri(i,t);var e=ts(i);function i(){return E(this,i),e.call(this,Dt.ZOOM)}return D(i,[{key:"start",value:function(t){var e=t.getComponent(Ct.ZOOM);e.start()}},{key:"end",value:function(t){var e=t.getComponent(Ct.ZOOM);e.end()}}]),i}(Ea),ns=is,os=null;function rs(t){os=t}function as(){return os}function ss(t,e){var i,n;"activeSelection"===t.type?i=Ze()(n=t.getObjects()).call(n,(function(i){var n=i.angle,o=i.left,r=i.top,a=i.scaleX,s=i.scaleY,l=i.width,c=i.height;F.fabric.util.addTransformToObject(i,t.calcTransformMatrix());var u=e(i);return i.set({angle:n,left:o,top:r,width:l,height:c,scaleX:a,scaleY:s}),u})):i=[e(t)];return i}function ls(t,e,i){return i?{id:t,width:e.width,height:e.height,top:e.top,left:e.left,angle:e.angle,scaleX:e.scaleX,scaleY:e.scaleY}:H()({id:t},e)}function cs(t){var e=us();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function us(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var hs=function(t){ri(i,t);var e=cs(i);function i(t){var n;return E(this,i),n=e.call(this,Ct.RESIZE,t),n._dimensions=null,n._originalDimensions=null,n}return D(i,[{key:"getCurrentDimensions",value:function(){var t=this.getCanvasImage();if(!this._dimensions&&t){var e=t.width,i=t.height;this._dimensions={width:e,height:i}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(t){this._originalDimensions=t}},{key:"resize",value:function(t){var e=this.getCanvasImage(),i=e.width,n=e.height,o=e.scaleX,r=e.scaleY,a=t.width,s=t.height,l={scaleX:a?a/i:o,scaleY:s?s/n:r};return o===l.scaleX&&r===l.scaleY||(e.set(l).setCoords(),this._dimensions={width:e.width*e.scaleX,height:e.height*e.scaleY}),this.adjustCanvasDimensionBase(),z().resolve()}},{key:"start",value:function(){var t=this.getCurrentDimensions();this.setOriginalDimensions(t)}},{key:"end",value:function(){}}]),i}(uo),ds=hs;function gs(t){var e=ps();return function(){var i,n=hi(t);if(e){var o=hi(this).constructor;i=ei()(n,arguments,o)}else i=n.apply(this,arguments);return ci(this,i)}}function ps(){if("undefined"===typeof Reflect||!ei())return!1;if(ei().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ei()(Boolean,[],(function(){}))),!0}catch(t){return!1}}var fs=function(t){ri(i,t);var e=gs(i);function i(){return E(this,i),e.call(this,Dt.RESIZE)}return D(i,[{key:"start",value:function(t){var e=t.getComponent(Ct.RESIZE);e.start()}},{key:"end",value:function(t){var e=t.getComponent(Ct.RESIZE);e.end()}}]),i}(Ea),ms=fs,vs=1e3,bs=800,xs=10,ys={cssOnly:!0},_s={backstoreOnly:!0},ws=function(){function t(e){var i,n,o,r,a,s,l,c,u,h,d,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=g.cssMaxWidth,f=g.cssMaxHeight;E(this,t),this.canvasImage=null,this.cssMaxWidth=p||vs,this.cssMaxHeight=f||bs,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=Dt.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:O()(i=this._onMouseDown).call(i,this),onObjectAdded:O()(n=this._onObjectAdded).call(n,this),onObjectRemoved:O()(o=this._onObjectRemoved).call(o,this),onObjectMoved:O()(r=this._onObjectMoved).call(r,this),onObjectScaled:O()(a=this._onObjectScaled).call(a,this),onObjectModified:O()(s=this._onObjectModified).call(s,this),onObjectRotated:O()(l=this._onObjectRotated).call(l,this),onObjectSelected:O()(c=this._onObjectSelected).call(c,this),onPathCreated:O()(u=this._onPathCreated).call(u,this),onSelectionCleared:O()(h=this._onSelectionCleared).call(h,this),onSelectionCreated:O()(d=this._onSelectionCreated).call(d,this)},this._setObjectCachingToFalse(),this._setCanvasElement(e),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return D(t,[{key:"destroy",value:function(){var t=this._canvas.wrapperEl;this._canvas.clear(),t.parentNode.removeChild(t),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var t=this.getComponent(Ct.ZOOM);t.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var t=this.getComponent(Ct.ZOOM);t.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(t){var e,i=[];ao()(t)?i=t:i.push(t),(e=this._canvas).add.apply(e,I(i))}},{key:"contains",value:function(t){return this._canvas.contains(t)}},{key:"getObjects",value:function(){var t;return h()(t=this._canvas.getObjects()).call(t)}},{key:"getObject",value:function(t){return this._objects[t]}},{key:"remove",value:function(t){this._canvas.remove(t)}},{key:"removeAll",value:function(t){var e,i=this._canvas,n=h()(e=i.getObjects()).call(e);return i.remove.apply(i,I(this._canvas.getObjects())),t&&i.clear(),n}},{key:"removeObjectById",value:function(t){var e=[],i=this._canvas,n=this.getObject(t),o=n&&n.isType("group")&&!n.isEmpty();return o?(i.discardActiveObject(),n.forEachObject((function(t){e.push(t),i.remove(t)}))):i.contains(n)&&(e.push(n),i.remove(n)),e}},{key:"getObjectId",value:function(t){var e=null;for(e in this._objects)if(this._objects.hasOwnProperty(e)&&t===this._objects[e])return e;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var t=this.getActiveObject(),e=t.type,i=t.left,n=t.top,o="activeSelection"===e;if(o){var r=new F.fabric.Group(I(t.getObjects()),{left:i,top:n});return this._addFabricObject(r)}return this.getObjectId(t)}},{key:"isReadyRemoveObject",value:function(){var t=this.getActiveObject();return t&&!t.isEditing}},{key:"getActiveObjects",value:function(){var t=this._canvas._activeObject;return t&&"activeSelection"===t.type?t:null}},{key:"getActiveSelectionFromObjects",value:function(t){var e=this.getCanvas();return new F.fabric.ActiveSelection(t,{canvas:e})}},{key:"setActiveObject",value:function(t){this._canvas.setActiveObject(t)}},{key:"setCropSelectionStyle",value:function(t){this.cropSelectionStyle=t}},{key:"getComponent",value:function(t){return this._componentMap[t]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(t,e){if(this._isSameDrawingMode(t))return!0;this.stopDrawingMode();var i=this._getDrawingModeInstance(t);return i&&i.start&&(i.start(this,e),this._drawingMode=t),!!i}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(Dt.NORMAL)){var t=this._getDrawingModeInstance(this.getDrawingMode());t&&t.end&&t.end(this),this._drawingMode=Dt.NORMAL}}},{key:"zoom",value:function(t,e){var i=t.x,n=t.y,o=this.getComponent(Ct.ZOOM);o.zoom({x:i,y:n},e)}},{key:"getZoomMode",value:function(){var t=this.getComponent(Ct.ZOOM);return t.mode}},{key:"startZoomInMode",value:function(){var t=this.getComponent(Ct.ZOOM);t.startZoomInMode()}},{key:"endZoomInMode",value:function(){var t=this.getComponent(Ct.ZOOM);t.endZoomInMode()}},{key:"zoomOut",value:function(){var t=this.getComponent(Ct.ZOOM);t.zoomOut()}},{key:"startHandMode",value:function(){var t=this.getComponent(Ct.ZOOM);t.startHandMode()}},{key:"endHandMode",value:function(){var t=this.getComponent(Ct.ZOOM);t.endHandMode()}},{key:"resetZoom",value:function(){var t=this.getComponent(Ct.ZOOM);t.resetZoom()}},{key:"toDataURL",value:function(t){var e=this.getComponent(Ct.CROPPER);e.changeVisibility(!1);var i=this._canvas&&this._canvas.toDataURL(t);return e.changeVisibility(!0),i}},{key:"setCanvasImage",value:function(t,e){e&&qt(e),this.imageName=t,this.canvasImage=e}},{key:"setCssMaxDimension",value:function(t){this.cssMaxWidth=t.width||this.cssMaxWidth,this.cssMaxHeight=t.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=this.canvasImage);var e=t.getBoundingRect(),i=e.width,n=e.height,o=this._calcMaxDimension(i,n);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(o.width,"px"),"max-height":"".concat(o.height,"px")}),this.setCanvasBackstoreDimension({width:i,height:n}),this._canvas.centerObject(t)}},{key:"setCanvasCssDimension",value:function(t){this._canvas.setDimensions(t,ys)}},{key:"setCanvasBackstoreDimension",value:function(t){this._canvas.setDimensions(t,_s)}},{key:"setImageProperties",value:function(t,e){var i=this.canvasImage;i&&(i.set(t).setCoords(),e&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(t){var e,i=this,n=O()(e=this._callbackAfterLoadingImageObject).call(e,this);return new(z())((function(e){F.fabric.Image.fromURL(t,(function(t){n(t),e(i.createObjectProperties(t))}),{crossOrigin:"Anonymous"})}))}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(Ct.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(t){this.getComponent(Ct.CROPPER).setCropzoneRect(t)}},{key:"getCroppedImageData",value:function(t){return this.getComponent(Ct.CROPPER).getCroppedImageData(t)}},{key:"setBrush",value:function(t){var e=this._drawingMode,i=Ct.FREE_DRAWING;e===Dt.LINE_DRAWING&&(i=Ct.LINE),this.getComponent(i).setBrush(t)}},{key:"setDrawingShape",value:function(t,e){this.getComponent(Ct.SHAPE).setStates(t,e)}},{key:"setIconStyle",value:function(t,e){this.getComponent(Ct.ICON).setStates(t,e)}},{key:"registerPaths",value:function(t){this.getComponent(Ct.ICON).registerPaths(t)}},{key:"changeCursor",value:function(t){var e=this.getCanvas();e.defaultCursor=t,e.renderAll()}},{key:"hasFilter",value:function(t){return this.getComponent(Ct.FILTER).hasFilter(t)}},{key:"setSelectionStyle",value:function(t){H()(Pt.SELECTION_STYLE,t)}},{key:"setObjectProperties",value:function(t,e){var i=this.getObject(t),n=H()({},e);return i.set(n),i.setCoords(),this.getCanvas().renderAll(),n}},{key:"getObjectProperties",value:function(t,e){var i=this.getObject(t),n={};return J()(e)?n[e]=i[e]:ao()(e)?gi()(e,(function(t){n[t]=i[t]})):lo()(e,(function(t,e){n[e]=i[e]})),n}},{key:"getObjectPosition",value:function(t,e,i){var n=this.getObject(t);return n?n.getPointByOrigin(e,i):null}},{key:"setObjectPosition",value:function(t,e){var i=this.getObject(t),n=e.x,o=e.y,r=e.originX,a=e.originY;if(!i)return!1;var s=i.getPointByOrigin(r,a),l=i.getPointByOrigin("center","center"),c=l.x-s.x,u=l.y-s.y;return i.set({left:n+c,top:o+u}),i.setCoords(),!0}},{key:"getCanvasSize",value:function(){var t=this.getCanvasImage();return{width:t?t.width:0,height:t?t.height:0}}},{key:"createStaticCanvas",value:function(){var t=new F.fabric.StaticCanvas;return t.set({enableRetinaScaling:!1}),t}},{key:"_getDrawingModeInstance",value:function(t){return this._drawingModeMap[t]}},{key:"_setObjectCachingToFalse",value:function(){F.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(t){var e,i;e=t.nodeType?t:document.querySelector(t),"CANVAS"!==e.nodeName.toUpperCase()&&(i=document.createElement("canvas"),e.appendChild(i)),this._canvas=new F.fabric.Canvas(i,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new Oa),this._register(this._drawingModeMap,new za),this._register(this._drawingModeMap,new Ua),this._register(this._drawingModeMap,new Ga),this._register(this._drawingModeMap,new Qa),this._register(this._drawingModeMap,new Ka),this._register(this._drawingModeMap,new ns),this._register(this._drawingModeMap,new ms)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new mo(this)),this._register(this._componentMap,new No(this)),this._register(this._componentMap,new Fo(this)),this._register(this._componentMap,new Xo(this)),this._register(this._componentMap,new Zo(this)),this._register(this._componentMap,new or(this)),this._register(this._componentMap,new hr(this)),this._register(this._componentMap,new mr(this)),this._register(this._componentMap,new Er(this)),this._register(this._componentMap,new la(this)),this._register(this._componentMap,new Sa(this)),this._register(this._componentMap,new ds(this))}},{key:"_register",value:function(t,e){t[e.getName()]=e}},{key:"_isSameDrawingMode",value:function(t){return this.getDrawingMode()===t}},{key:"_calcMaxDimension",value:function(t,e){var i=this.cssMaxWidth/t,n=this.cssMaxHeight/e,o=Math.min(t,this.cssMaxWidth),r=Math.min(e,this.cssMaxHeight);return i<1&&i<n?(o=t*i,r=e*i):n<1&&n<i&&(o=t*n,r=e*n),{width:Math.floor(o),height:Math.floor(r)}}},{key:"_callbackAfterLoadingImageObject",value:function(t){var e=this.getCanvasImage().getCenterPoint();t.set(Pt.SELECTION_STYLE),t.set({left:e.x,top:e.y,crossOrigin:"Anonymous"}),this.getCanvas().add(t).setActiveObject(t)}},{key:"_attachCanvasEvents",value:function(){var t=this._canvas,e=this._handler;t.on({"mouse:down":e.onMouseDown,"object:added":e.onObjectAdded,"object:removed":e.onObjectRemoved,"object:moving":e.onObjectMoved,"object:scaling":e.onObjectScaled,"object:modified":e.onObjectModified,"object:rotating":e.onObjectRotated,"path:created":e.onPathCreated,"selection:cleared":e.onSelectionCleared,"selection:created":e.onSelectionCreated,"selection:updated":e.onObjectSelected})}},{key:"_onMouseDown",value:function(t){var e=this,i=t.e,n=t.target,o=this._canvas.getPointer(i);if(n){var r=n.type,a=ss(n,(function(t){return ls(e.getObjectId(t),t,"activeSelection"===r)}));rs(a)}this.fire(Tt.MOUSE_DOWN,i,o)}},{key:"_onObjectAdded",value:function(t){var e=t.target;e.isType("cropzone")||this._addFabricObject(e)}},{key:"_onObjectRemoved",value:function(t){var e=t.target;this._removeFabricObject(qt(e))}},{key:"_onObjectMoved",value:function(t){var e=this;this._lazyFire(Tt.OBJECT_MOVED,(function(t){return e.createObjectProperties(t)}),t.target)}},{key:"_onObjectScaled",value:function(t){var e=this;this._lazyFire(Tt.OBJECT_SCALED,(function(t){return e.createObjectProperties(t)}),t.target)}},{key:"_onObjectModified",value:function(t){var e=t.target;if("activeSelection"===e.type){var i=e.getObjects();st()(i).call(i,(function(t){return t.fire("modifiedInGroup",e)}))}this.fire(Tt.OBJECT_MODIFIED,e,this.getObjectId(e))}},{key:"_onObjectRotated",value:function(t){var e=this;this._lazyFire(Tt.OBJECT_ROTATED,(function(t){return e.createObjectProperties(t)}),t.target)}},{key:"_lazyFire",value:function(t,e,i){var n=this,o=i&&i.canvasEventDelegation,r=o?i.canvasEventDelegation(t):"none";"unregistered"===r&&i.canvasEventRegister(t,(function(i){n.fire(t,e(i))})),"none"===r&&this.fire(t,e(i))}},{key:"_onObjectSelected",value:function(t){var e=t.target,i=this.createObjectProperties(e);this.fire(Tt.OBJECT_ACTIVATED,i)}},{key:"_onPathCreated",value:function(t){var e=t.path.getCenterPoint(),i=e.x,n=e.y;t.path.set(H()({left:i,top:n},Pt.SELECTION_STYLE));var o=this.createObjectProperties(t.path);this.fire(Tt.ADD_OBJECT,o)}},{key:"_onSelectionCleared",value:function(){this.fire(Tt.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(t){var e=t.target,i=this.createObjectProperties(e);this.fire(Tt.OBJECT_ACTIVATED,i),this.fire(Tt.SELECTION_CREATED,t.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(t){this._canvas.forEachObject((function(e){e.selectable=t,e.hoverCursor=t?"move":"crosshair"}))}},{key:"createObjectProperties",value:function(t){var e=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],i={id:qt(t),type:t.type};if(H()(i,ee(t,e)),be(["i-text","text"],t.type))H()(i,this._createTextProperties(t,i));else if(be(["rect","triangle","circle"],t.type)){var n=this.getComponent(Ct.SHAPE);H()(i,{fill:n.makeFillPropertyForUserEvent(t)})}return i}},{key:"_createTextProperties",value:function(t){var e=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],i={};return H()(i,ee(t,e)),i}},{key:"_addFabricObject",value:function(t){var e=qt(t);return this._objects[e]=t,e}},{key:"_removeFabricObject",value:function(t){delete this._objects[t]}},{key:"resetTargetObjectForCopyPaste",value:function(){var t=this.getActiveObject();t&&(this.targetObjectForCopyPaste=t)}},{key:"pasteObject",value:function(){var t=this;if(!this.targetObjectForCopyPaste)return z().resolve([]);var e=this.targetObjectForCopyPaste,i="activeSelection"===e.type,n=i?e.getObjects():[e],o=null;return this.discardSelection(),this._cloneObject(n).then((function(e){if(e.length>1)o=t.getActiveSelectionFromObjects(e);else{var i=it(e,1);o=i[0]}t.targetObjectForCopyPaste=o,t.setActiveObject(o)}))}},{key:"_cloneObject",value:function(t){var e=this,i=Ze()(t).call(t,(function(t){return e._cloneObjectItem(t)}));return z().all(i)}},{key:"_cloneObjectItem",value:function(t){var e=this;return this._copyFabricObjectForPaste(t).then((function(t){var i=e.createObjectProperties(t);return e.add(t),e.fire(Tt.ADD_OBJECT,i),t}))}},{key:"_copyFabricObjectForPaste",value:function(t){var e=this,i=function(t,e){return e?t-xs:t+xs};return this._copyFabricObject(t).then((function(t){var n=t.left,o=t.top,r=t.width,a=t.height,s=e.getCanvasSize(),l=s.width,c=s.height,u=n+r/2,h=o+a/2;return t.set(H()({left:i(n,u+xs>l),top:i(o,h+xs>c)},Pt.SELECTION_STYLE)),t}))}},{key:"_copyFabricObject",value:function(t){var e=this;return new(z())((function(i){t.clone((function(n){var o=e.getComponent(Ct.SHAPE);_e(n)&&o.processForCopiedObject(n,t),i(n)}))}))}},{key:"getCurrentDimensions",value:function(){var t=this.getComponent(Ct.RESIZE);return t.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var t=this.getComponent(Ct.RESIZE);return t.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(t){var e=this.getComponent(Ct.RESIZE);e.setOriginalDimensions(t)}},{key:"resize",value:function(t){var e=this.getComponent(Ct.RESIZE);return e.resize(t)}}]),t}();Z().mixin(ws);var ks=ws,Cs=Tt.MOUSE_DOWN,Ss=Tt.OBJECT_MOVED,Is=Tt.OBJECT_SCALED,Ms=Tt.OBJECT_ACTIVATED,Ts=Tt.OBJECT_ROTATED,Es=Tt.OBJECT_ADDED,As=Tt.OBJECT_MODIFIED,Ds=Tt.ADD_TEXT,Ls=Tt.ADD_OBJECT,Os=Tt.TEXT_EDITING,js=Tt.TEXT_CHANGED,Ps=Tt.ICON_CREATE_RESIZE,Ns=Tt.ICON_CREATE_END,zs=Tt.SELECTION_CLEARED,Rs=Tt.SELECTION_CREATED,Bs=Tt.ADD_OBJECT_AFTER,Fs=function(){function t(e,i){var n,o,r,a,s,l,c,u,h,d,g,p,f,m,v,b;if(E(this,t),i=H()({includeUI:!1,usageStatistics:!0},i),this.mode=null,this.activeObjectId=null,i.includeUI){var x=i.includeUI;x.usageStatistics=i.usageStatistics,this.ui=new to(e,x,this.getActions()),i=this.ui.setUiDefaultSelectionStyle(i)}this._invoker=new He,this._graphics=new ks(this.ui?this.ui.getEditorArea():e,{cssMaxWidth:i.cssMaxWidth,cssMaxHeight:i.cssMaxHeight}),this._handlers={keydown:O()(n=this._onKeyDown).call(n,this),mousedown:O()(o=this._onMouseDown).call(o,this),objectActivated:O()(r=this._onObjectActivated).call(r,this),objectMoved:O()(a=this._onObjectMoved).call(a,this),objectScaled:O()(s=this._onObjectScaled).call(s,this),objectRotated:O()(l=this._onObjectRotated).call(l,this),objectAdded:O()(c=this._onObjectAdded).call(c,this),objectModified:O()(u=this._onObjectModified).call(u,this),createdPath:this._onCreatedPath,addText:O()(h=this._onAddText).call(h,this),addObject:O()(d=this._onAddObject).call(d,this),textEditing:O()(g=this._onTextEditing).call(g,this),textChanged:O()(p=this._onTextChanged).call(p,this),iconCreateResize:O()(f=this._onIconCreateResize).call(f,this),iconCreateEnd:O()(m=this._onIconCreateEnd).call(m,this),selectionCleared:O()(v=this._selectionCleared).call(v,this),selectionCreated:O()(b=this._selectionCreated).call(b,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(i.selectionStyle,{applyCropSelectionStyle:i.applyCropSelectionStyle,applyGroupSelectionStyle:i.applyGroupSelectionStyle}),i.usageStatistics&&ae(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),F.fabric.enableGLFiltering=!1}return D(t,[{key:"_attachColorPickerInputBoxEvents",value:function(){var t=this;this.ui.on(Tt.INPUT_BOX_EDITING_STARTED,(function(){t.isColorPickerInputBoxEditing=!0})),this.ui.on(Tt.INPUT_BOX_EDITING_STOPPED,(function(){t.isColorPickerInputBoxEditing=!1}))}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(Tt.INPUT_BOX_EDITING_STARTED),this.ui.off(Tt.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(t,e){var i=e.applyCropSelectionStyle,n=e.applyGroupSelectionStyle;t&&this._graphics.setSelectionStyle(t),i&&this._graphics.setCropSelectionStyle(t),n&&this.on("selectionCreated",(function(e){"activeSelection"===e.type&&e.set(t)}))}},{key:"_attachInvokerEvents",value:function(){var t,e,i=this,n=Tt.UNDO_STACK_CHANGED,o=Tt.REDO_STACK_CHANGED,r=Tt.EXECUTE_COMMAND,a=Tt.AFTER_UNDO,s=Tt.AFTER_REDO,l=Tt.HAND_STARTED,c=Tt.HAND_STOPPED;if(this._invoker.on(n,O()(t=this.fire).call(t,this,n)),this._invoker.on(o,O()(e=this.fire).call(e,this,o)),this.ui){var u=this._graphics.getCanvas();this._invoker.on(r,(function(t){return i.ui.fire(r,t)})),this._invoker.on(a,(function(t){return i.ui.fire(a,t)})),this._invoker.on(s,(function(t){return i.ui.fire(s,t)})),u.on(l,(function(){return i.ui.fire(l)})),u.on(c,(function(){return i.ui.fire(c)}))}}},{key:"_attachGraphicsEvents",value:function(){var t;this._graphics.on((t={},T(t,Cs,this._handlers.mousedown),T(t,Ss,this._handlers.objectMoved),T(t,Is,this._handlers.objectScaled),T(t,Ts,this._handlers.objectRotated),T(t,Ms,this._handlers.objectActivated),T(t,Es,this._handlers.objectAdded),T(t,As,this._handlers.objectModified),T(t,Ds,this._handlers.addText),T(t,Ls,this._handlers.addObject),T(t,Os,this._handlers.textEditing),T(t,js,this._handlers.textChanged),T(t,Ps,this._handlers.iconCreateResize),T(t,Ns,this._handlers.iconCreateEnd),T(t,zs,this._handlers.selectionCleared),T(t,Rs,this._handlers.selectionCreated),t))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(t){var e=t.ctrlKey,i=t.keyCode,n=t.metaKey,o=e||n;o&&(i===jt.C?this._graphics.resetTargetObjectForCopyPaste():i===jt.V?(this._graphics.pasteObject(),this.clearRedoStack()):i===jt.Z?this.undo()["catch"]((function(){})):i===jt.Y&&this.redo()["catch"]((function(){})));var r=i===jt.BACKSPACE||i===jt.DEL,a=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&a&&r&&(t.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var t=this._graphics.getActiveObjectIdForRemove();this.removeObject(t)}},{key:"_onMouseDown",value:function(t,e){this.fire(Tt.MOUSE_DOWN,t,e)}},{key:"_pushAddObjectCommand",value:function(t){var e=Fe.create(Mt.ADD_OBJECT,this._graphics,t);this._invoker.pushUndoStack(e)}},{key:"_pushModifyObjectCommand",value:function(t){var e=this,i=t.type,n=ss(t,(function(t){return ls(e._graphics.getObjectId(t),t,"activeSelection"===i)})),o=Fe.create(Mt.CHANGE_SELECTION,this._graphics,n);o.execute(this._graphics,n),this._invoker.pushUndoStack(o)}},{key:"_onObjectActivated",value:function(t){this.fire(Tt.OBJECT_ACTIVATED,t)}},{key:"_onObjectMoved",value:function(t){this.fire(Tt.OBJECT_MOVED,t)}},{key:"_onObjectScaled",value:function(t){this.fire(Tt.OBJECT_SCALED,t)}},{key:"_onObjectRotated",value:function(t){this.fire(Tt.OBJECT_ROTATED,t)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(Mt.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(t){this._graphics.changeSelectableAll(t)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(t){for(var e,i,n,o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];var s=P()(e=[this._graphics]).call(e,r);return(i=this._invoker).execute.apply(i,P()(n=[t]).call(n,I(s)))}},{key:"executeSilent",value:function(t){for(var e,i,n,o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];var s=P()(e=[this._graphics]).call(e,r);return(i=this._invoker).executeSilent.apply(i,P()(n=[t]).call(n,I(s)))}},{key:"undo",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=z().resolve(),n=0;n<e;n+=1)i=i.then((function(){return t._invoker.undo()}));return i}},{key:"redo",value:function(){for(var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=z().resolve(),n=0;n<e;n+=1)i=i.then((function(){return t._invoker.redo()}));return i}},{key:"zoom",value:function(t){var e=t.x,i=t.y,n=t.zoomLevel;this._graphics.zoom({x:e,y:i},n)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(t,e){if(!t)return z().reject(Nt.invalidParameters);var i=B().createObjectURL(t);return e=e||t.name,this.loadImageFromURL(i,e).then((function(e){return B().revokeObjectURL(t),e}))}},{key:"loadImageFromURL",value:function(t,e){return e&&t?this.execute(Mt.LOAD_IMAGE,e,t):z().reject(Nt.invalidParameters)}},{key:"addImageObject",value:function(t){return t?this.execute(Mt.ADD_IMAGE_OBJECT,t):z().reject(Nt.invalidParameters)}},{key:"startDrawingMode",value:function(t,e){return this._graphics.startDrawingMode(t,e)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(t){var e=this._graphics.getCroppedImageData(t);return e?this.loadImageFromURL(e.url,e.imageName):z().reject(Nt.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(t){this._graphics.setCropzoneRect(t)}},{key:"_flip",value:function(t){return this.execute(Mt.FLIP_IMAGE,t)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(t,e,i){var n=null;return n=i?this.executeSilent(Mt.ROTATE_IMAGE,t,e):this.execute(Mt.ROTATE_IMAGE,t,e),n}},{key:"rotate",value:function(t,e){return this._rotate("rotate",t,e)}},{key:"setAngle",value:function(t,e){return this._rotate("setAngle",t,e)}},{key:"setBrush",value:function(t){this._graphics.setBrush(t)}},{key:"setDrawingShape",value:function(t,e){this._graphics.setDrawingShape(t,e)}},{key:"setDrawingIcon",value:function(t,e){this._graphics.setIconStyle(t,e)}},{key:"addShape",value:function(t,e){return e=e||{},this._setPositions(e),this.execute(Mt.ADD_SHAPE,t,e)}},{key:"changeShape",value:function(t,e,i){var n=i?"executeSilent":"execute";return this[n](Mt.CHANGE_SHAPE,t,e)}},{key:"addText",value:function(t,e){return t=t||"",e=e||{},this.execute(Mt.ADD_TEXT,t,e)}},{key:"changeText",value:function(t,e){return e=e||"",this.execute(Mt.CHANGE_TEXT,t,e)}},{key:"changeTextStyle",value:function(t,e,i){var n=i?"executeSilent":"execute";return this[n](Mt.CHANGE_TEXT_STYLE,t,e)}},{key:"_changeActivateMode",value:function(t){"ICON"!==t&&this.getDrawingMode()!==t&&this.startDrawingMode(t)}},{key:"_onTextChanged",value:function(t){this.fire(Tt.TEXT_CHANGED,t)}},{key:"_onIconCreateResize",value:function(t){this.fire(Tt.ICON_CREATE_RESIZE,t)}},{key:"_onIconCreateEnd",value:function(t){this.fire(Tt.ICON_CREATE_END,t)}},{key:"_onTextEditing",value:function(){this.fire(Tt.TEXT_EDITING)}},{key:"_onAddText",value:function(t){this.fire(Tt.ADD_TEXT,{originPosition:t.originPosition,clientPosition:t.clientPosition})}},{key:"_onAddObject",value:function(t){var e=this._graphics.getObject(t.id);this._invoker.fire(Tt.EXECUTE_COMMAND,we(e.type)),this._pushAddObjectCommand(e)}},{key:"_onObjectAdded",value:function(t){this.fire(Es,t),this.fire(Bs,t)}},{key:"_onObjectModified",value:function(t){t.type!==wt.CROPZONE&&(this._invoker.fire(Tt.EXECUTE_COMMAND,we(t.type)),this._pushModifyObjectCommand(t))}},{key:"_selectionCleared",value:function(){this.fire(zs)}},{key:"_selectionCreated",value:function(t){this.fire(Rs,t)}},{key:"registerIcons",value:function(t){this._graphics.registerPaths(t)}},{key:"changeCursor",value:function(t){this._graphics.changeCursor(t)}},{key:"addIcon",value:function(t,e){return e=e||{},this._setPositions(e),this.execute(Mt.ADD_ICON,t,e)}},{key:"changeIconColor",value:function(t,e){return this.execute(Mt.CHANGE_ICON_COLOR,t,e)}},{key:"removeObject",value:function(t){var e=this._graphics.getObject(t),i=e.type;return this.execute(Mt.REMOVE_OBJECT,t,we(i))}},{key:"hasFilter",value:function(t){return this._graphics.hasFilter(t)}},{key:"removeFilter",value:function(t){return this.execute(Mt.REMOVE_FILTER,t)}},{key:"applyFilter",value:function(t,e,i){var n=i?"executeSilent":"execute";return this[n](Mt.APPLY_FILTER,t,e)}},{key:"toDataURL",value:function(t){return this._graphics.toDataURL(t)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(t){return t?this.execute(Mt.RESIZE_CANVAS_DIMENSION,t):z().reject(Nt.invalidParameters)}},{key:"destroy",value:function(){var t=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),Y()(this,(function(e,i){t[i]=null}),this)}},{key:"_setPositions",value:function(t){var e=this._graphics.getCenter();X()(t.left)&&(t.left=e.left),X()(t.top)&&(t.top=e.top)}},{key:"setObjectProperties",value:function(t,e){return this.execute(Mt.SET_OBJECT_PROPERTIES,t,e)}},{key:"setObjectPropertiesQuietly",value:function(t,e){this._graphics.setObjectProperties(t,e)}},{key:"getObjectProperties",value:function(t,e){var i=this._graphics.getObject(t);return i?this._graphics.getObjectProperties(t,e):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(t,e,i){return this._graphics.getObjectPosition(t,e,i)}},{key:"setObjectPosition",value:function(t,e){return this.execute(Mt.SET_OBJECT_POSITION,t,e)}},{key:"resize",value:function(t){return this.execute(Mt.RESIZE_IMAGE,t)}}]),t}();oo.mixin(Fs),Z().mixin(Fs);var Us=Fs,Hs=Ct.ICON,Ws={name:Mt.ADD_ICON,execute:function(t,e,i){var n=this,o=t.getComponent(Hs);return o.add(e,i).then((function(e){return n.undoData.object=t.getObject(e.id),e}))},undo:function(t){return t.remove(this.undoData.object),z().resolve()}};Fe.register(Ws);var Xs={name:Mt.ADD_IMAGE_OBJECT,execute:function(t,e){var i=this;return t.addImageObject(e).then((function(e){return i.undoData.object=t.getObject(e.id),e}))},undo:function(t){return t.remove(this.undoData.object),z().resolve()}};Fe.register(Xs);var Gs={name:Mt.ADD_OBJECT,execute:function(t,e){return new(z())((function(i,n){t.contains(e)?n(Nt.addedObject):(t.add(e),i(e))}))},undo:function(t,e){return new(z())((function(i,n){t.contains(e)?(t.remove(e),i(e)):n(Nt.noObject)}))}};Fe.register(Gs);var Ys=Ct.SHAPE,Vs={name:Mt.ADD_SHAPE,execute:function(t,e,i){var n=this,o=t.getComponent(Ys);return o.add(e,i).then((function(e){var i=e.id;return n.undoData.object=t.getObject(i),e}))},undo:function(t){return t.remove(this.undoData.object),z().resolve()}};Fe.register(Vs);var Zs=Ct.TEXT,Qs={name:Mt.ADD_TEXT,execute:function(t,e,i){var n=this,o=t.getComponent(Zs);if(this.undoData.object){var r=this.undoData.object;return new(z())((function(e,i){t.contains(r)?i(Nt.redo):(t.add(r),e(r))}))}return o.add(e,i).then((function(e){var i=e.id,o=t.getObject(i);return n.undoData.object=o,rs(ss(o,(function(){return ls(i,o,!1)}))),e}))},undo:function(t){return t.remove(this.undoData.object),z().resolve()}};Fe.register(Qs);var Js=Ct.FILTER,qs=null;function $s(t,e,i){var n={};return"mask"===t&&(n.object=i.mask),n.options=e,n}var Ks={name:Mt.APPLY_FILTER,execute:function(t,e,i,n){var o=t.getComponent(Js);if("mask"===e){var r=t.getObject(i.maskObjId);if(!r||!r.isType("image"))return z().reject(Nt.invalidParameters);H()(i,{mask:r}),t.remove(i.mask)}if(!this.isRedo){var a=o.getOptions(e),s=$s(e,a,i);qs=this.setUndoData(s,qs,n)}return o.add(e,i)},undo:function(t,e){var i=t.getComponent(Js);if("mask"===e){var n=this.undoData.object;return t.add(n),t.setActiveObject(n),i.remove(e)}return this.undoData.options?i.add(e,this.undoData.options):i.remove(e)}};Fe.register(Ks);var tl=Ct.ICON,el={name:Mt.CHANGE_ICON_COLOR,execute:function(t,e,i){var n=this;return new(z())((function(o,r){var a=t.getComponent(tl),s=t.getObject(e);s||r(Nt.noObject),n.undoData.object=s,n.undoData.color=a.getColor(s),a.setColor(i,s),o()}))},undo:function(t){var e=t.getComponent(tl),i=this.undoData,n=i.object,o=i.color;return e.setColor(o,n),z().resolve()}};Fe.register(el);var il=Ct.SHAPE,nl=null;function ol(t,e){var i={object:e,options:{}};return lo()(t,(function(t,n){i.options[n]=e[n]})),i}var rl={name:Mt.CHANGE_SHAPE,execute:function(t,e,i,n){var o=t.getComponent(il),r=t.getObject(e);if(!r)return z().reject(Nt.noObject);if(!this.isRedo){var a=ol(i,r);nl=this.setUndoData(a,nl,n)}return o.change(r,i)},undo:function(t){var e=t.getComponent(il),i=this.undoData,n=i.object,o=i.options;return e.change(n,o)}};Fe.register(rl);var al=Ct.TEXT,sl={name:Mt.CHANGE_TEXT,execute:function(t,e,i){var n=t.getComponent(al),o=t.getObject(e);return o?(this.undoData.object=o,this.undoData.text=n.getText(o),n.change(o,i)):z().reject(Nt.noObject)},undo:function(t){var e=t.getComponent(al),i=this.undoData,n=i.object,o=i.text;return e.change(n,o)}};Fe.register(sl);var ll=Ct.TEXT,cl=null;function ul(t,e){var i={object:e,styles:{}};return lo()(t,(function(t,n){var o=e[n];i.styles[n]=o})),i}var hl={name:Mt.CHANGE_TEXT_STYLE,execute:function(t,e,i,n){var o=t.getComponent(ll),r=t.getObject(e);if(!r)return z().reject(Nt.noObject);if(!this.isRedo){var a=ul(i,r);cl=this.setUndoData(a,cl,n)}return o.setStyle(r,i)},undo:function(t){var e=t.getComponent(ll),i=this.undoData,n=i.object,o=i.styles;return e.setStyle(n,o)}};Fe.register(hl);var dl={name:Mt.CLEAR_OBJECTS,execute:function(t){var e=this;return new(z())((function(i){e.undoData.objects=t.removeAll(),i()}))},undo:function(t){return t.add(this.undoData.objects),z().resolve()}};Fe.register(dl);var gl=Ct.FLIP,pl={name:Mt.FLIP_IMAGE,execute:function(t,e){var i=t.getComponent(gl);return this.undoData.setting=i.getCurrentSetting(),i[e]()},undo:function(t){var e=t.getComponent(gl);return e.set(this.undoData.setting)}};Fe.register(pl);var fl=Ct.IMAGE_LOADER,ml={name:Mt.LOAD_IMAGE,execute:function(t,e,i){var n,o=t.getComponent(fl),r=o.getCanvasImage(),a=r?r.width:0,s=r?r.height:0,l=io()(n=t.removeAll(!0)).call(n,(function(t){return"cropzone"!==t.type}));return st()(l).call(l,(function(t){t.evented=!0})),this.undoData={name:o.getImageName(),image:r,objects:l},o.load(e,i).then((function(t){return{oldWidth:a,oldHeight:s,newWidth:t.width,newHeight:t.height}}))},undo:function(t){var e=t.getComponent(fl),i=this.undoData,n=i.objects,o=i.name,r=i.image;return t.removeAll(!0),t.add(n),e.load(o,r)}};Fe.register(ml);var vl=Ct.FILTER,bl={name:Mt.REMOVE_FILTER,execute:function(t,e){var i=t.getComponent(vl);return this.undoData.options=i.getOptions(e),i.remove(e)},undo:function(t,e){var i=t.getComponent(vl),n=this.undoData.options;return i.add(e,n)}};Fe.register(bl);var xl={name:Mt.REMOVE_OBJECT,execute:function(t,e){var i=this;return new(z())((function(n,o){i.undoData.objects=t.removeObjectById(e),i.undoData.objects.length?n():o(Nt.noObject)}))},undo:function(t){return t.add(this.undoData.objects),z().resolve()}};Fe.register(xl);var yl={name:Mt.RESIZE_CANVAS_DIMENSION,execute:function(t,e){var i=this;return new(z())((function(n){i.undoData.size={width:t.cssMaxWidth,height:t.cssMaxHeight},t.setCssMaxDimension(e),t.adjustCanvasDimension(),n()}))},undo:function(t){return t.setCssMaxDimension(this.undoData.size),t.adjustCanvasDimension(),z().resolve()}};Fe.register(yl);var _l=Ct.ROTATION,wl=null;function kl(t){return{angle:t.getCurrentAngle()}}var Cl={name:Mt.ROTATE_IMAGE,execute:function(t,e,i,n){var o=t.getComponent(_l);if(!this.isRedo){var r=kl(o);wl=this.setUndoData(r,wl,n)}return o[e](i)},undo:function(t){var e=t.getComponent(_l),i=it(this.args,3),n=i[1],o=i[2];return"setAngle"===n?e[n](this.undoData.angle):e.rotate(-o)}};Fe.register(Cl);var Sl={name:Mt.SET_OBJECT_PROPERTIES,execute:function(t,e,i){var n=this,o=t.getObject(e);return o?(this.undoData.props={},lo()(i,(function(t,e){n.undoData.props[e]=o[e]})),t.setObjectProperties(e,i),z().resolve()):z().reject(Nt.noObject)},undo:function(t,e){var i=this.undoData.props;return t.setObjectProperties(e,i),z().resolve()}};Fe.register(Sl);var Il={name:Mt.SET_OBJECT_POSITION,execute:function(t,e,i){var n=t.getObject(e);return n?(this.undoData.objectId=e,this.undoData.props=t.getObjectProperties(e,["left","top"]),t.setObjectPosition(e,i),t.renderAll(),z().resolve()):z().reject(Nt.noObject)},undo:function(t){var e=this.undoData,i=e.objectId,n=e.props;return t.setObjectProperties(i,n),t.renderAll(),z().resolve()}};Fe.register(Il);var Ml={name:Mt.CHANGE_SELECTION,execute:function(t,e){return this.isRedo?st()(e).call(e,(function(e){t.setObjectProperties(e.id,e)})):this.undoData=as(),z().resolve()},undo:function(t){var e;return st()(e=this.undoData).call(e,(function(e){t.setObjectProperties(e.id,e)})),z().resolve()}};Fe.register(Ml);var Tl=Ct.RESIZE,El={name:Mt.RESIZE_IMAGE,execute:function(t,e){var i=t.getComponent(Tl),n=i.getOriginalDimensions();return n||(n=i.getCurrentDimensions()),this.undoData.dimensions=n,i.resize(e)},undo:function(t){var e=t.getComponent(Tl);return e.resize(this.undoData.dimensions)}};Fe.register(El);var Al=Us}(),o=o["default"],o}()}))},23987:function(t,e,i){"use strict";i.d(e,{A:function(){return j}});var n=i(3477),o=i(8906);const r={class:"info"},a={class:"header"},s={class:"header-left"},l={class:"text"},c={class:"vip-progress-box"},u={class:"progress-box"},h={key:0,class:"value"},d={style:{"font-weight":"600"}},g={key:1,class:"value"},p={style:{"font-weight":"600"}},f={class:"text"},m={class:"content"},v={class:"file-list-wrapper",style:{overflow:"auto"}},b=["infinite-scroll-disabled"],x={class:"file-info"},y={class:"file-name"},_={class:"name"},w={class:"text"},k={key:0,class:"is-invalid"},C={class:"file-time"},S={key:0,class:"loading",style:{"text-align":"center"}},I={key:0,class:"empty-box"},M={class:"tip"};function T(t,e,i,T,E,A){const D=(0,n.g2)("el-progress"),L=(0,n.g2)("el-checkbox"),O=(0,n.g2)("el-dialog"),j=(0,n.gN)("infinite-scroll");return(0,n.uX)(),(0,n.Wv)(O,{modelValue:i.visible,class:"cloud-knowledge-file-dialog","show-close":!1,"close-on-click-modal":!1,"append-to-body":!0},{header:(0,n.k6)((()=>[(0,n.Lk)("div",r,[(0,n.Lk)("div",a,[(0,n.Lk)("div",s,[(0,n.Lk)("p",l,(0,o.v_)(t.$t("cloudLibrary.title")),1),(0,n.Lk)("p",{class:(0,o.C4)(["icon",{"is-vip":A.isVip}])},null,2)]),(0,n.Lk)("div",{class:(0,o.C4)(["cancel-icon",{"cancel-icon-dark":t.isDarkMode}]),onClick:e[0]||(e[0]=e=>t.$emit("closeDialog"))},null,2)]),(0,n.Lk)("div",c,[(0,n.Lk)("div",u,[A.isVip?((0,n.uX)(),(0,n.CE)("div",h,[e[5]||(e[5]=(0,n.Lk)("p",{class:"icon"},null,-1)),(0,n.Lk)("p",null,[e[4]||(e[4]=(0,n.eW)(" 会员尊享空间，已使用：")),(0,n.Lk)("span",d,(0,o.v_)(A.storageUse),1)])])):((0,n.uX)(),(0,n.CE)("p",g,[(0,n.eW)((0,o.v_)(t.$t("cloudLibrary.nonMember")),1),(0,n.Lk)("span",p,(0,o.v_)(A.storageUse),1)])),(0,n.bF)(D,{class:(0,o.C4)({"is-vip":A.isVip}),percentage:A.progress,"show-text":!1,color:A.computedColor,"define-back-color":A.isVip?"#C6D3FF":"#D8DADD"},null,8,["class","percentage","color","define-back-color"])]),A.isVip?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"vip-rights-button",onClick:e[1]||(e[1]=(...t)=>A.toGoods&&A.toGoods(...t))},[(0,n.Lk)("p",f,(0,o.v_)(t.$t("cloudLibrary.member",{size:"1G"})),1),e[6]||(e[6]=(0,n.Lk)("p",{class:"icon"},null,-1))]))])])])),footer:(0,n.k6)((()=>[(0,n.Lk)("div",m,[e[10]||(e[10]=(0,n.Lk)("div",{class:"th-header"},"文件名",-1)),(0,n.Lk)("div",v,[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:"file-list","infinite-scroll-disabled":t.disabled,"infinite-scroll-distance":10},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.fileList,(t=>((0,n.uX)(),(0,n.CE)("div",{class:"file-item",key:t.id},[(0,n.bF)(L,{modelValue:t.checked,"onUpdate:modelValue":e=>t.checked=e,disabled:A.computedDisabled(t)},{default:(0,n.k6)((()=>[(0,n.Lk)("div",x,[t.icon?((0,n.uX)(),(0,n.CE)("p",{key:0,class:(0,o.C4)(["icon",{image:t.isimage}]),style:(0,o.Tr)({backgroundImage:`url('${t.icon}')`})},null,6)):(0,n.Q3)("",!0),(0,n.Lk)("div",y,[(0,n.Lk)("p",_,[(0,n.Lk)("span",w,(0,o.v_)(t.name+"."+t.type),1),t.is_invalid?((0,n.uX)(),(0,n.CE)("span",k,"审核未通过")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",C,(0,o.v_)(t.upload_date),1)])])])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])))),128))],8,b)),[[j,t.learMore]]),t.loading?((0,n.uX)(),(0,n.CE)("p",S,"加载中...")):(0,n.Q3)("",!0)]),A.empty?((0,n.uX)(),(0,n.CE)("div",I,[e[9]||(e[9]=(0,n.Lk)("p",{class:"icon"},null,-1)),(0,n.Lk)("div",M,[e[7]||(e[7]=(0,n.eW)(" 暂无文件，您可以去 ")),(0,n.Lk)("span",{class:"hl-blue",onClick:e[2]||(e[2]=(...t)=>A.toCloudKnowledge&&A.toCloudKnowledge(...t))},"云知识库管理页"),e[8]||(e[8]=(0,n.eW)(" 上传 "))])])):(0,n.Q3)("",!0)]),t.fileList?.length?((0,n.uX)(),(0,n.CE)("p",{key:0,class:(0,o.C4)(["button confirm-button",{"is-disabled":A.emptyChoose}]),onClick:e[3]||(e[3]=(...t)=>A.confirm&&A.confirm(...t))},(0,o.v_)(t.$t("cloudLibrary.btnText")),3)):(0,n.Q3)("",!0)])),_:1},8,["modelValue"])}i(45680);var E=i(37175),A=i(66785),D={name:"FileDialog",props:{visible:{type:Boolean,default:!1},extra:{type:Object,default:()=>{}}},data(){return{}},computed:{...(0,A.aH)("Home",["userInfo"]),...(0,A.L8)("Home",["vipCtvl"]),...(0,A.aH)("CloudKnowledge",["storage_info","uploadedFileList","loading","dataLoading"]),...(0,A.L8)("CloudKnowledge",["fileList","disabled"]),...(0,A.aH)("DarkMode",["isDarkMode"]),isVip(){return 2===this.userInfo?.member_info?.member_status},storageUse(){if(!this.storage_info?.total)return"-/-";const t=0===this.storage_info?.use?0:Math.max(Math.ceil(this.storage_info?.use/1024*100)/100,.1),e=this.isVip?`${parseFloat((this.storage_info?.total/1024/1024).toFixed(2))}GB`:`${parseFloat((this.storage_info?.total/1024).toFixed(2))}MB`;return`${t>1024?Math.ceil(t/1024*100)/100+"GB":t+"MB"}/${e}`},progress(){return this.storage_info?.use?Math.min(parseFloat((100*this.storage_info?.use/this.storage_info?.total).toFixed(2)),100):0},computedColor(){return this.progress>95?"#F94242":this.isVip?"#2454ff":"#838A95"},empty(){return!this.dataLoading&&null===this.fileList},emptyChoose(){return 0===this.uploadedFileList.filter((t=>t.checked)).length},chooseAmount(){return this.uploadedFileList.filter((t=>t.checked)).length}},mounted(){this.getKnowledgeList(),document.addEventListener("keyup",this.handleKeyUp)},methods:{...(0,A.i0)("CloudKnowledge",["getKnowledgeList","learMore"]),computedDisabled(t){if(this.extra?.include){const e=new RegExp(this.extra?.include.join("$|")+"$","i");return!t.type?.match(e)||!!t.is_invalid||this.chooseAmount>=this.extra?.MAX_COUNT&&!t.checked}return!!t.is_invalid||this.chooseAmount>=10&&!t.checked},checkFile(t){const e=this.uploadedFileList.findIndex((e=>e.id===t.id));e>-1&&(this.uploadedFileList[e].checked=!this.uploadedFileList[e].checked)},confirm(){this.emptyChoose||((0,E.M7)(this,"confirm"),this.sendCl({md:"cloud",ct:"chatuse_cloud_storage_use",ctvl:this.vipCtvl}))},toCloudKnowledge(){this.$router.push("/cloud/knowledge")},toGoods(){this.$router.push("/pay/goods"),this.sendCl({md:"cloud",ct:"chatuse_cloud_storage_member_click"})},handleKeyUp(t){"Escape"===t.code&&(0,E.M7)(this,"closeDialog")}},beforeUnmount(){document.removeEventListener("keyup",this.handleKeyUp)},emits:["closeDialog","confirm"]},L=(i(41688),i(5613));const O=(0,L.A)(D,[["render",T]]);var j=O},39641:function(t,e,i){"use strict";i.d(e,{A:function(){return qp}});var n=i(3477),o=i(8906),r=i(1648);const a={class:"conversation-container"},s={key:0,class:"last-div-glms4"},l={key:2,class:"seize-a-seat"};function c(t,e,i,c,u,h){const d=(0,n.g2)("Initpage"),g=(0,n.g2)("OldInitpage"),p=(0,n.g2)("List"),f=(0,n.g2)("PinOpening"),m=(0,n.g2)("Bottom"),v=(0,n.g2)("QuoteIndex");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",{class:(0,o.C4)(["conversation-inner scroll-display-none",{maxWidth:"glms"===i.from,dialogue:t.dataList.length>0,"glm-4":"glm-4"===i.from&&t.dataList.length<1&&i.isShowExampleTip,"mini-screen":t.isMiniScreen}])},[h.keepStarter?((0,n.uX)(),(0,n.Wv)(f,{key:1,from:i.from,isShowExampleTip:i.isShowExampleTip,isGlmShare:i.isGlmShare,isShowQuestionTip:i.isShowQuestionTip,debug:i.debug,onTriggerSearch:e[3]||(e[3]=t=>h.newSearch(t))},null,8,["from","isShowExampleTip","isGlmShare","isShowQuestionTip","debug"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[t.dataList.length<1&&i.isShowExampleTip?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},["glms"===i.from?((0,n.uX)(),(0,n.Wv)(d,{key:0,debug:i.debug,onTriggerSearch:e[0]||(e[0]=t=>h.newSearch(t))},null,8,["debug"])):(0,n.Q3)("",!0),"glm-4"===i.from?((0,n.uX)(),(0,n.Wv)(g,{key:1,onTriggerSearch:e[1]||(e[1]=t=>h.newSearch(t)),type:"glm-4"})):(0,n.Q3)("",!0)],64)):((0,n.uX)(),(0,n.Wv)(p,{key:1,onTriggerSearch:e[2]||(e[2]=t=>h.newSearch(t)),isShowQuestionTip:i.isShowQuestionTip,isGlmShare:i.isGlmShare},null,8,["isShowQuestionTip","isGlmShare"]))],64)),(0,n.bo)((0,n.Lk)("div",{class:(0,o.C4)(["conversation-bottom",{"ai-draw-padding":h.isAIDraw}])},[t.dataList.length<1&&"glm-4"===i.from?((0,n.uX)(),(0,n.CE)("div",s)):(0,n.Q3)("",!0),t.dataList.length>0||h.isAIDraw?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)(["bg-gradient",{"bg-gradient-ai-draw":h.isAIDraw}])},null,2)):((0,n.uX)(),(0,n.CE)("div",l)),(0,n.bF)(m,{ref:"bottom",onManualStopStream:h.manualStopStream,onRetry:h.retry,onTriggerSearch:e[4]||(e[4]=t=>h.newSearch(t))},null,8,["onManualStopStream","onRetry"])],2),[[r.aG,i.showBottom]])],2),t.isProd?((0,n.uX)(),(0,n.Wv)(v,{key:0})):(0,n.Q3)("",!0)])}i(45680);var u=i(5181),h=i.n(u),d=i(37175),g=i(3237),p=i(66081),f=i(30980),m=i(66785);async function v(t,e){const i=t.getReader();let n;while(!(n=await i.read()).done)e(n.value)}function b(t){let e,i,n,o=!1;return function(r){void 0===e?(e=r,i=0,n=-1):e=y(e,r);const a=e.length;let s=0;while(i<a){o&&(10===e[i]&&(s=++i),o=!1);let r=-1;for(;i<a&&-1===r;++i)switch(e[i]){case 58:-1===n&&(n=i-s);break;case 13:o=!0;case 10:r=i;break}if(-1===r)break;t(e.subarray(s,r),n),s=i,n=-1}s===a?e=void 0:0!==s&&(e=e.subarray(s),i-=s)}}function x(t,e,i){let n=_();const o=new TextDecoder;return function(r,a){if(0===r.length)null===i||void 0===i||i(n),n=_();else if(a>0){const i=o.decode(r.subarray(0,a)),s=a+(32===r[a+1]?2:1),l=o.decode(r.subarray(s));switch(i){case"data":n.data=n.data?n.data+"\n"+l:l;break;case"event":n.event=l;break;case"id":t(n.id=l);break;case"retry":const i=parseInt(l,10);isNaN(i)||e(n.retry=i);break}}}}function y(t,e){const i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}function _(){return{data:"",event:"",id:"",retry:void 0}}var w=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i};const k="text/event-stream",C=1e3,S="last-event-id";function I(t,e){var{signal:i,headers:n,onopen:o,onmessage:r,onclose:a,onerror:s,openWhenHidden:l,fetch:c}=e,u=w(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((e,h)=>{const d=Object.assign({},n);let g;function p(){g.abort(),document.hidden||I()}d.accept||(d.accept=k),l||document.addEventListener("visibilitychange",p);let f=C,m=0;function y(){document.removeEventListener("visibilitychange",p),window.clearTimeout(m),g.abort()}null===i||void 0===i||i.addEventListener("abort",(()=>{y(),e()}));const _=null!==c&&void 0!==c?c:window.fetch,w=null!==o&&void 0!==o?o:M;async function I(){var i;g=new AbortController;try{const i=await _(t,Object.assign(Object.assign({},u),{headers:d,signal:g.signal}));await w(i),await v(i.body,b(x((t=>{t?d[S]=t:delete d[S]}),(t=>{f=t}),r))),null===a||void 0===a||a(),y(),e()}catch(n){if(!g.signal.aborted)try{const t=null!==(i=null===s||void 0===s?void 0:s(n))&&void 0!==i?i:f;window.clearTimeout(m),m=window.setTimeout(I,t)}catch(o){y(),h(o)}}}I()}))}function M(t){const e=t.headers.get("content-type");if(!(null===e||void 0===e?void 0:e.startsWith(k)))throw new Error(`Expected content-type to be ${k}, Actual: ${e}`)}var T=i(1823),E=i(80932),A=i(83717),D=i(55872),L=i(87241);class O extends Error{constructor(t,e,i){super(t),this.name="RetriableError",this.status=e,this.statusText=i}}class j extends Error{constructor(t,e){super(t),this.name="RetriableJsonError",this.content=e}}class P extends Error{constructor(t){super(t),this.name="FatalError"}}const N=(0,E.IP)();async function z(t,e){return await I(t,{signal:e.signal,method:"POST",body:e.body,openWhenHidden:!0,headers:{Authorization:(0,T.gf)(),"Content-Type":"application/json","App-Name":"chatglm","X-Lang":L.Ay.global.locale,"X-Device-Id":N,"X-App-Platform":A.Fo,"X-App-Version":A.CU,"X-Request-Id":(0,D.y)()},async onopen(t){if(!(t.ok&&t.headers.get("content-type").indexOf(k)>-1)){if(t.status>=400&&t.status<500&&429!==t.status){const e=t.status;if(401===e)throw new O("open",t.status,t.statusText);if("application/json"===t.headers.get("Content-Type")){const e=await t.json();throw new j("onopen",e)}throw new P("onopen"+t.status)}throw new P("onopen_error"+t.status)}e.onopen(t)},onmessage(t){if("FatalError"===t.event)throw new P(t.data);let i={};try{i=JSON.parse(t.data)}catch(n){return(0,E.lK)({md:"request",ct:"stream_parse_error"}),{}}e.onmessage(i)},onclose(t){e.onclose(t)},onerror(t){e.onerror(t)}})}var R=i(64497),B=i(90797),F=i(51055),U=i(60482);const H="aidrawing",W={md:H,ct:"aidrawing_exposure"},X=t=>JSON.stringify({md:H,ct:"aidrawing_tools_click",ctvl:t}),G=t=>JSON.stringify({md:H,ct:"aidrawing_inspiration_click",ctvl:t}),Y=(JSON.stringify({md:H,ct:"aidrawing_pull_to_load"}),JSON.stringify({md:H,ct:"style_click"})),V=JSON.stringify({md:H,ct:"proportion_click"}),Z=JSON.stringify({md:H,ct:"clarity_click"}),Q=JSON.stringify({md:H,ct:"spellbook_click"}),J=t=>JSON.stringify({md:H,ct:"style_pop_click",ctvl:t}),q=t=>({md:H,ct:"proportion_pop_click",ctvl:t}),$=t=>JSON.stringify({md:H,ct:"clarity_pop_click",ctvl:t}),K=t=>JSON.stringify({md:H,ct:"spellbook_pop_tab_click",ctvl:t}),tt=t=>JSON.stringify({md:H,ct:"spellbook_pop_light_click",ctvl:t}),et=t=>JSON.stringify({md:H,ct:"spellbook_pop_camera_click",ctvl:t}),it=t=>JSON.stringify({md:H,ct:"spellbook_pop_composition_click",ctvl:t});var nt=i(69806),ot=i(66670),rt=i(58394),at=i(21283);const st={class:"container"},lt={class:"custom-skeleton-item-container"},ct={class:"title-logo"},ut=["src"],ht={class:"info"},dt={class:"title-line"},gt={class:"sub-title-line"},pt={class:"title-info"},ft={key:0,class:"title-info-item"},mt={key:2,class:"title-info-item"};var vt={__name:"AIDrawGlmsInfo",setup(t){const e=(0,m.Pj)(),r=(0,n.EW)((()=>e.state.Glms.assistantInfo)),a=(0,n.EW)((()=>e.state.Glms.sidebarList)),s=(0,n.EW)((()=>e.state.Glms.recentUsedList)),l=(0,n.EW)((()=>e.state.Glms.getAssistInfoLoading)),c=(0,n.EW)((()=>{const t=[...a.value||[],...s.value||[]].find((t=>t.assistant_id===r.value.assistant_id));return t&&t.hit||null}));return(t,e)=>{const a=(0,n.g2)("el-skeleton-item"),s=(0,n.g2)("el-skeleton");return(0,n.uX)(),(0,n.CE)("div",st,[(0,n.bF)(s,{loading:l.value,animated:"",throttle:300,class:"content",count:1},{template:(0,n.k6)((()=>[(0,n.Lk)("div",lt,[(0,n.bF)(a,{variant:"image",style:{width:"100px",height:"100px","margin-bottom":"10px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}}),(0,n.bF)(a,{variant:"p",style:{width:"100px",height:"30px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}}),(0,n.bF)(a,{variant:"p",style:{width:"360px",height:"24px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}}),(0,n.bF)(a,{variant:"p",style:{width:"160px",height:"20px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}})])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",ct,[(0,n.Lk)("img",{width:"68px",src:r.value.avatar||i(92167)},null,8,ut)]),(0,n.Lk)("div",ht,[(0,n.Lk)("div",dt,(0,o.v_)(r.value.name||"未命名"),1),(0,n.Lk)("div",gt,(0,o.v_)(r.value.description),1),(0,n.Lk)("div",pt,[r.value.user_nickname?((0,n.uX)(),(0,n.CE)("div",ft,[e[0]||(e[0]=(0,n.Lk)("img",{src:F},null,-1)),(0,n.eW)(" "+(0,o.v_)(r.value.user_nickname),1)])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)(" 请配置智能体Logo以开始调试 ")],64)),null!==c.value?((0,n.uX)(),(0,n.CE)("div",mt,[e[1]||(e[1]=(0,n.Lk)("img",{src:U},null,-1)),(0,n.eW)(" "+(0,o.v_)(c.value),1)])):(0,n.Q3)("",!0)])])])),_:1},8,["loading"])])}}},bt=(i(96248),i(5613));const xt=(0,bt.A)(vt,[["__scopeId","data-v-3c4998fa"]]);var yt=xt,_t=i(82582),wt=Object.defineProperty,kt=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable,It=(t,e,i)=>e in t?wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Mt=(t,e)=>{for(var i in e||(e={}))Ct.call(e,i)&&It(t,i,e[i]);if(kt)for(var i of kt(e))St.call(e,i)&&It(t,i,e[i]);return t},Tt=(t,e)=>{var i={};for(var n in t)Ct.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&kt)for(var n of kt(t))e.indexOf(n)<0&&St.call(t,n)&&(i[n]=t[n]);return i};function Et(t){return!!(0,B.o5)()&&((0,B.jr)(t),!0)}function At(t){return"function"==typeof t?t():(0,B.R1)(t)}const Dt="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const Lt=t=>null!=t,Ot=Object.prototype.toString,jt=t=>"[object Object]"===Ot.call(t),Pt=()=>{};function Nt(t){return t||(0,n.nI)()}function zt(t,e=!0,i){Nt()?(0,n.sV)(t,i):e?t():(0,n.dY)(t)}function Rt(t){var e;const i=At(t);return null!=(e=null==i?void 0:i.$el)?e:i}const Bt=Dt?window:void 0;function Ft(...t){let e,i,o,r;if("string"==typeof t[0]||Array.isArray(t[0])?([i,o,r]=t,e=Bt):[e,i,o,r]=t,!e)return Pt;Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]);const a=[],s=()=>{a.forEach((t=>t())),a.length=0},l=(t,e,i,n)=>(t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)),c=(0,n.wB)((()=>[Rt(e),At(r)]),(([t,e])=>{if(s(),!t)return;const n=jt(e)?Mt({},e):e;a.push(...i.flatMap((e=>o.map((i=>l(t,e,i,n))))))}),{immediate:!0,flush:"post"}),u=()=>{c(),s()};return Et(u),u}function Ut(){const t=(0,B.KR)(!1),e=(0,n.nI)();return e&&(0,n.sV)((()=>{t.value=!0}),e),t}function Ht(t){const e=Ut();return(0,n.EW)((()=>(e.value,!!t())))}function Wt(t,e,i={}){const o=i,{window:r=Bt}=o,a=Tt(o,["window"]);let s;const l=Ht((()=>r&&"MutationObserver"in r)),c=()=>{s&&(s.disconnect(),s=void 0)},u=(0,n.EW)((()=>{const e=At(t),i=(Array.isArray(e)?e:[e]).map(Rt).filter(Lt);return new Set(i)})),h=(0,n.wB)((()=>u.value),(t=>{c(),l.value&&r&&t.size&&(s=new MutationObserver(e),t.forEach((t=>s.observe(t,a))))}),{immediate:!0,flush:"post"}),d=()=>null==s?void 0:s.takeRecords(),g=()=>{c(),h()};return Et(g),{isSupported:l,stop:g,takeRecords:d}}function Xt(t,e,i={}){const o=i,{window:r=Bt}=o,a=Tt(o,["window"]);let s;const l=Ht((()=>r&&"ResizeObserver"in r)),c=()=>{s&&(s.disconnect(),s=void 0)},u=(0,n.EW)((()=>Array.isArray(t)?t.map((t=>Rt(t))):[Rt(t)])),h=(0,n.wB)(u,(t=>{if(c(),l.value&&r){s=new ResizeObserver(e);for(const e of t)e&&s.observe(e,a)}}),{immediate:!0,flush:"post"}),d=()=>{c(),h()};return Et(d),{isSupported:l,stop:d}}function Gt(t,e={}){const{reset:i=!0,windowResize:o=!0,windowScroll:r=!0,immediate:a=!0}=e,s=(0,B.KR)(0),l=(0,B.KR)(0),c=(0,B.KR)(0),u=(0,B.KR)(0),h=(0,B.KR)(0),d=(0,B.KR)(0),g=(0,B.KR)(0),p=(0,B.KR)(0);function f(){const e=Rt(t);if(!e)return void(i&&(s.value=0,l.value=0,c.value=0,u.value=0,h.value=0,d.value=0,g.value=0,p.value=0));const n=e.getBoundingClientRect();s.value=n.height,l.value=n.bottom,c.value=n.left,u.value=n.right,h.value=n.top,d.value=n.width,g.value=n.x,p.value=n.y}return Xt(t,f),(0,n.wB)((()=>Rt(t)),(t=>!t&&f())),Wt(t,f,{attributeFilter:["style","class"]}),r&&Ft("scroll",f,{capture:!0,passive:!0}),o&&Ft("resize",f,{passive:!0}),zt((()=>{a&&f()})),{height:s,bottom:l,left:c,right:u,top:h,width:d,x:g,y:p,update:f}}function Yt(t,e={width:0,height:0},i={}){const{window:o=Bt,box:r="content-box"}=i,a=(0,n.EW)((()=>{var e,i;return null==(i=null==(e=Rt(t))?void 0:e.namespaceURI)?void 0:i.includes("svg")})),s=(0,B.KR)(e.width),l=(0,B.KR)(e.height),{stop:c}=Xt(t,(([e])=>{const i="border-box"===r?e.borderBoxSize:"content-box"===r?e.contentBoxSize:e.devicePixelContentBoxSize;if(o&&a.value){const e=Rt(t);if(e){const t=o.getComputedStyle(e);s.value=Number.parseFloat(t.width),l.value=Number.parseFloat(t.height)}}else if(i){const t=Array.isArray(i)?i:[i];s.value=t.reduce(((t,{inlineSize:e})=>t+e),0),l.value=t.reduce(((t,{blockSize:e})=>t+e),0)}else s.value=e.contentRect.width,l.value=e.contentRect.height}),i);zt((()=>{const i=Rt(t);i&&(s.value="offsetWidth"in i?i.offsetWidth:e.width,l.value="offsetHeight"in i?i.offsetHeight:e.height)}));const u=(0,n.wB)((()=>Rt(t)),(t=>{s.value=t?e.width:0,l.value=t?e.height:0}));function h(){c(),u()}return{width:s,height:l,stop:h}}const Vt=["data-index"],Zt=(0,n.pM)({name:"VirtualWaterfall",__name:"virtual-waterfall",props:{virtual:{type:Boolean,default:!0},rowKey:{default:"id"},gap:{default:15},padding:{default:15},preloadScreenCount:{default:()=>[0,0]},itemMinWidth:{default:220},maxColumnCount:{default:10},minColumnCount:{default:2},items:{default:()=>[]},calcItemHeight:{type:Function,default:(t,e)=>250}},setup(t){const e=t;(0,n.Ht)();const i=(0,B.KR)(),{width:r}=Yt(i),{top:a}=Gt(i);function s(t){return"[object Number]"===Object.prototype.toString.call(t)}(0,n.sV)((()=>{0===r.value&&(r.value=Number.parseInt(window.getComputedStyle(i.value).width))}));const l=(0,n.EW)((()=>{if(!r.value)return 0;const t=r.value;if(t>=2*e.itemMinWidth){const i=Math.floor(t/e.itemMinWidth);return e.maxColumnCount&&i>e.maxColumnCount?e.maxColumnCount:i}return e.minColumnCount})),c=(0,B.KR)(new Array(l.value).fill(0)),u=(0,n.EW)((()=>{if(!r.value||l.value<=0)return 0;const t=(l.value-1)*e.gap;return Math.ceil((r.value-t)/l.value)})),h=(0,B.KR)([]);(0,n.nT)((()=>{if(!l.value)return void(h.value=[]);const t=e.items.length,i=new Array(t);let n=0;const o=h.value.length&&t>h.value.length;o?n=h.value.length:c.value=new Array(l.value).fill(0);for(let r=0;r<t;r++){if(o&&r<n){i[r]=h.value[r];continue}const t=g(),a=e.calcItemHeight(e.items[r],u.value),s=c.value[t],l=(u.value+e.gap)*t,d={index:r,item:e.items[r],column:t,top:s,left:l,bottom:s+a,height:a};c.value[t]+=a+e.gap,i[r]=d}h.value=i}));const d=(0,n.EW)((()=>{const t=h.value.length;if(!t)return[];if(!e.virtual)return h.value;const n=i.value.parentElement.offsetTop,o=-a.value+n,[r,s]=e.preloadScreenCount,l=i.value.parentElement.clientHeight,c=o-r*l,u=o+(s+1)*l,d=[];for(let e=0;e<t;e++){const t=h.value[e],i=t.top,n=t.bottom;(i>=c&&i<=u||n>=c&&n<=u||i<c&&n>u)&&d.push(t)}return d})),g=()=>c.value.indexOf(Math.min(...c.value));return(t,e)=>((0,n.uX)(),(0,n.CE)("div",{ref_key:"content",ref:i,style:(0,o.Tr)({position:"relative",willChange:"height",height:`${Math.max(...c.value)}px`,padding:`${s(t.padding)?t.padding+"px":t.padding}`})},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(d.value,(e=>{var i;return(0,n.uX)(),(0,n.CE)("div",{key:null!=(i=e.item[t.rowKey])?i:e.index,style:(0,o.Tr)({position:"absolute",contentVisibility:"auto",width:`${u.value}px`,height:`${e.height}px`,transform:`translate(${e.left}px, ${e.top}px)`,containIntrinsicSize:`${u.value}px ${e.height}px`}),"data-index":e.index},[(0,n.RG)(t.$slots,"default",{item:e.item,index:e.index})],12,Vt)})),128))],4))}});var Qt=i(78565),Jt=i(35574);const qt=["data-id"],$t={key:0,class:"cover"},Kt={class:"overlay"},te=["data-stats"],ee=["src"],ie="chooseSearchValue";var ne={__name:"AIDrawCard",props:{item:{type:Object,required:!0},onlyImage:{type:Boolean,default:!1},noImage:{type:Boolean,default:!1},width:{type:String,default:"100%"}},setup(t){(0,r.$9)((e=>({"7c0053ff":t.width,"2b899be4":l.value})));const e=(0,m.Pj)(),i=(0,n.EW)((()=>e.state.DarkMode.isDarkMode)),a=t,s=(0,B.KR)(!1),l=(0,B.KR)("auto");(0,n.KC)((()=>{if(!a.noImage){l.value="100%";new Promise((t=>{const e=new Image;if(e.src=a.item.image,e.complete)return s.value=!0,void t(!0);e.onload=()=>{s.value=!0,t(!0)},e.onerror=e=>{s.value=!0,t(!0)}}))}}));const{setCogViewConfig:c}=(0,Jt.g)(),u=t=>{c({style:t?.default_style,aspect_ratio:t?.default_scale||"1:1"}),(0,d.M7)(p.A,ie,t.prompt)};return(e,a)=>{const l=(0,n.gN)("click");return(0,n.uX)(),(0,n.CE)("article",{class:"card","data-id":t.item.id},[t.noImage?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",$t,[(0,n.Lk)("div",Kt,[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["create",{dark:i.value}]),onClick:a[0]||(a[0]=e=>u(t.item)),"data-stats":(0,B.R1)(G)(t.item.prompt)},a[1]||(a[1]=[(0,n.Lk)("img",{class:"icon",src:Qt,alt:""},null,-1),(0,n.Lk)("span",null,"创作同款",-1)]),10,te)),[[l]])]),(0,n.bF)(r.eB,null,{default:(0,n.k6)((()=>[s.value?((0,n.uX)(),(0,n.CE)("img",{key:0,src:t.item.image},null,8,ee)):(0,n.Q3)("",!0)])),_:1})]))],8,qt)}}};i(45833);const oe=(0,bt.A)(ne,[["__scopeId","data-v-59d46ab4"]]);var re=oe;function ae(t,e){const i=document.createElement("div");(0,r.XX)((0,n.h)(re,{item:t,width:e+"px",noImage:!0}),i),document.body.appendChild(i);const o=i.firstElementChild.clientHeight;return document.body.removeChild(i),o}const se=()=>{const t=()=>{window.scrollTo({top:0,behavior:"instant"})},e=(0,B.Kh)({loading:!1,bottomDistance:0,onlyImage:!0,topPreloadScreenCount:0,bottomPreloadScreenCount:0,virtual:!1,gap:10,padding:0,itemMinWidth:220,minColumnCount:2,maxColumnCount:10}),i=(t,i)=>{let n=0;return e.onlyImage||(n=ae(t,i)),t.height*(i/t.width)+n},o=(0,B.Kh)({page:0,size:30,total:0,max:0,list:[],end:!1}),r=async()=>{if(o.end)return;o.page+=1;const t=await fetch(`https://mock.tatakai.top/images?page=${o.page}&size=${o.size}&mode=simple`),e=await t.json();e.list.length?(o.total=e.total,o.max=e.max,o.list=[...o.list,...e.list]):o.end=!0},a=async()=>{if(e.loading)return;const t=document.documentElement.scrollHeight,i=document.documentElement.scrollTop,n=document.documentElement.clientHeight,o=t-i-n;o<e.bottomDistance&&(e.loading=!0,await r(),e.loading=!1),requestAnimationFrame(a)};return(0,n.sV)((async()=>{})),{backTop:t,waterfallOption:e,data:o,calcItemHeight:i,checkScrollPosition:a}};var le=se;const ce={class:"box",id:"aidraw"};var ue={__name:"AIDrawWaterfall",setup(t){const{backTop:e,waterfallOption:i,data:o,calcItemHeight:r,checkScrollPosition:a}=le(),{configuration:s}=(0,Jt.g)();(0,B.KR)(!1);return(t,e)=>((0,n.uX)(),(0,n.CE)("div",ce,[e[0]||(e[0]=(0,n.Lk)("div",{class:"title"},[(0,n.Lk)("div",null,[(0,n.Lk)("img",{class:"tips",src:_t,alt:""})]),(0,n.Lk)("span",{class:"text"},"一键生同款")],-1)),(0,n.bF)((0,B.R1)(Zt),{virtual:(0,B.R1)(i).virtual,gap:(0,B.R1)(i).gap,padding:(0,B.R1)(i).padding,"preload-screen-count":[(0,B.R1)(i).topPreloadScreenCount,(0,B.R1)(i).bottomPreloadScreenCount],"item-min-width":(0,B.R1)(i).itemMinWidth,"max-column-count":(0,B.R1)(i).maxColumnCount,"min-column-count":(0,B.R1)(i).minColumnCount,"calc-item-height":(0,B.R1)(r),items:(0,B.R1)(s).feeds},{default:(0,n.k6)((({item:t})=>[(0,n.bF)(re,{item:t,onlyImage:(0,B.R1)(i).onlyImage},null,8,["item","onlyImage"])])),_:1},8,["virtual","gap","padding","preload-screen-count","item-min-width","max-column-count","min-column-count","calc-item-height","items"])]))}};i(68022);const he=(0,bt.A)(ue,[["__scopeId","data-v-0ba1927b"]]);var de=he;const ge={class:"box"},pe=["onClick","data-stats"],fe=["src"],me="chooseSearchValue";var ve={__name:"AIDrawHandpickTools",setup(t){const e=(0,m.Pj)(),i=(0,n.EW)((()=>e.state.DarkMode.isDarkMode)),r=(0,B.KR)(null),a=()=>{r.value&&r.value.scrollTo({left:r.value.scrollWidth,behavior:"smooth"})},{configuration:s,setCogViewConfig:l}=(0,Jt.g)(),c=t=>{l({style:t?.default_style,aspect_ratio:t?.default_scale||"1:1"}),(0,d.M7)(p.A,me,t.prompt)};return(t,e)=>{const l=(0,n.gN)("click");return(0,n.uX)(),(0,n.CE)("div",ge,[e[1]||(e[1]=(0,n.Lk)("div",{class:"title"},[(0,n.Lk)("div",null,[(0,n.Lk)("img",{class:"tips",src:_t,alt:""})]),(0,n.Lk)("span",{class:"text"},"精选工具")],-1)),(0,n.Lk)("div",{class:"content",ref_key:"moreContainer",ref:r},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,B.R1)(s).collections,(t=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["tool-item",["tool-item",{"tool-item-dark":i.value}]]),key:t,onClick:e=>c(t),"data-stats":(0,B.R1)(X)(t.prompt)},[(0,n.Lk)("img",{src:t.image},null,8,fe)],10,pe)),[[l]]))),128))],512),(0,n.Lk)("div",{class:(0,o.C4)(["more",{dark:i.value}]),onClick:a},[(0,n.Lk)("div",{class:(0,o.C4)(["arrow",{dark:i.value}])},e[0]||(e[0]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"7",height:"12",viewBox:"0 0 7 12",fill:"none"},[(0,n.Lk)("path",{d:"M1 1L6 6.00009L1 11.0001",stroke:"#4F5866","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2)],2)])}}};i(52260);const be=(0,bt.A)(ve,[["__scopeId","data-v-536124dd"]]);var xe=be;const ye={class:"options"},_e={class:"style-wrap"},we=["onClick","data-stats"],ke=["src"],Ce={class:"text"},Se=["data-stats"],Ie={class:"style-wrap"},Me=["onClick"],Te={class:"text"},Ee=["data-stats"],Ae={class:"style-wrap"},De=["data-stats"],Le={key:0,class:"text"},Oe={class:"text"},je={class:"sub"},Pe=["data-stats"],Ne={class:"popover-wrap"},ze={class:"content"},Re=["onClick"],Be=["data-stats"],Fe="cogViewAppendPrompt";var Ue={__name:"AIDrawPromptOptions",setup(t){const e=(0,m.Pj)(),i=(0,n.EW)((()=>e.state.DarkMode.isDarkMode)),{cogViewState:r,setCogViewConfig:a,resetSkillOptions:s,configuration:l}=(0,Jt.g)(),c=(0,B.KR)("light"),u=((0,B.KR)(20),(0,B.KR)(200),(0,B.KR)({style:"style",dpi:"dpi",ratio:"ratio",skill:"skills"})),h=(0,B.KR)(""),g=(0,B.KR)(null),f=(0,B.KR)(null),v=(0,B.KR)({placement:"top",width:"fit-content",trigger:"hover",showArrow:!1,offset:20,showAfter:200,popperClass:"example_popover"}),b=t=>{g.value?.hide();const e=t.key;a({...r,style:e})},x=()=>{h.value=""},y=()=>{x(),s()},_=t=>{f.value?.hide();const e=t.value,i=t.ratio;a({...r,aspect_ratio:e,ratioIconValue:i}),(0,E._2)(q(e))},w=t=>{(0,d.M7)(p.A,Fe,{prompt:t});const e=c.value;"light"===e?(0,E._2)(JSON.parse(tt(t))):"lens"===e?(0,E._2)(JSON.parse(et(t))):"composition"===e&&(0,E._2)(JSON.parse(it(t))),a({...r,skill:{...r.skill,[c.value]:t}})},k=(t,e)=>{(0,E._2)(JSON.parse(K(t?.props?.label)))};(0,n.sV)((async()=>{}));const C=(0,B.Kh)([{name:"1:1 正方形",value:"1:1",ratio:"1-1"},{name:"4:3 图文横版封面",value:"4:3",ratio:"4-3"},{name:"3:4 图文竖版封面",value:"3:4",ratio:"3-4"}]),S=(0,B.Kh)([{name:"高清",value:"hd"},{name:"超高清",desc:"近期上线，敬请期待",value:"uhd"}]),I=(0,B.KR)({"1:1":"1024*1024","3:4":"864*1152","4:3":"1152*864","9:16":"768*1344","16:9":"1344*168"});function M(t){return"none"===t.key?i.value?"none"===r.style?t.darkCoverActive:t.darkCover:"none"===r.style?t.coverActive:t.cover:t.cover}return(t,e)=>{const i=(0,n.g2)("el-popover"),a=(0,n.g2)("el-tab-pane"),s=(0,n.g2)("el-tabs"),d=(0,n.gN)("click");return(0,n.uX)(),(0,n.CE)("div",ye,[(0,n.bF)(i,(0,n.v6)({ref_key:"stylePopoverRef",ref:g},v.value,{onShow:e[0]||(e[0]=t=>h.value=u.value.style),onHide:x}),{reference:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["prompt-item",{cur:h.value===u.value.style,active:"none"!==(0,B.R1)(r).style}]),"data-stats":(0,B.R1)(Y)},[(0,n.eW)((0,o.v_)((0,B.R1)(r).styleLabel),1)],10,Se)),[[d]])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",_e,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,B.R1)(l).styleList,(t=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["style-item",{cur:(0,B.R1)(r).style===t.key}]),key:t.key,onClick:e=>b(t),"data-stats":(0,B.R1)(J)(t.label)},[(0,n.Lk)("img",{class:"icon",style:{border:"none"},src:M(t),alt:""},null,8,ke),(0,n.Lk)("span",Ce,(0,o.v_)(t.label),1)],10,we)),[[d]]))),128))])])),_:1},16),(0,n.bF)(i,(0,n.v6)({ref_key:"ratioPopoverRef",ref:f},v.value,{onShow:e[1]||(e[1]=t=>h.value=u.value.ratio),onHide:x}),{reference:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["prompt-item",{cur:h.value===u.value.ratio,active:"1:1"!==(0,B.R1)(r).aspect_ratio}]),"data-stats":(0,B.R1)(V)},[(0,n.Lk)("span",{class:(0,o.C4)(["icon","icon-"+(0,B.R1)(r).ratioIconValue])},null,2),e[6]||(e[6]=(0,n.eW)(" ")),(0,n.Lk)("span",null,(0,o.v_)((0,B.R1)(r).aspect_ratio),1)],10,Ee)),[[d]])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",Ie,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(C,(t=>((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["ratio-item",{cur:(0,B.R1)(r).aspect_ratio===t.value}]),key:t.value,onClick:e=>_(t)},[(0,n.Lk)("div",Te,[(0,n.Lk)("span",{class:(0,o.C4)(["icon","icon-"+t.ratio])},null,2),e[5]||(e[5]=(0,n.eW)(" ")),(0,n.Lk)("span",null,(0,o.v_)(t.name),1)])],10,Me)))),128))])])),_:1},16),(0,n.bF)(i,(0,n.v6)(v.value,{onShow:e[2]||(e[2]=t=>h.value=u.value.dpi),onHide:x}),{reference:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["prompt-item",{cur:h.value===u.value.dpi}]),"data-stats":(0,B.R1)(Z)},e[7]||(e[7]=[(0,n.eW)(" 高清 ")]),10,Pe)),[[d]])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",Ae,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(S,(t=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["dpi-item",{cur:(0,B.R1)(r).dpi===t.value}]),key:t.value,"data-stats":(0,B.R1)($)(t.name)},[t.desc?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",Le,(0,o.v_)(t.name+" "+I.value[(0,B.R1)(r).aspect_ratio]),1)),t.desc?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.Lk)("span",Oe,(0,o.v_)(t.name),1),(0,n.Lk)("span",je,(0,o.v_)(t.desc),1)],64)):(0,n.Q3)("",!0)],10,De)),[[d]]))),128))])])),_:1},16),(0,n.bF)(i,(0,n.v6)(v.value,{onShow:e[4]||(e[4]=t=>h.value=u.value.skill),onHide:y}),{reference:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["prompt-item",{cur:h.value===u.value.skill}]),"data-stats":(0,B.R1)(Q)},e[8]||(e[8]=[(0,n.eW)(" 咒语书 ")]),10,Be)),[[d]])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",Ne,[(0,n.bF)(s,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=t=>c.value=t),onTabClick:k},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,B.R1)(l).skillList,((t,e)=>((0,n.uX)(),(0,n.Wv)(a,{label:t.label,key:e,name:t.key},{default:(0,n.k6)((()=>[(0,n.Lk)("div",ze,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.skills,(e=>((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["skill-item",{cur:(0,B.R1)(r).skill[t.key]===e}]),key:e,onClick:t=>w(e)},(0,o.v_)(e),11,Re)))),128))])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])])),_:1},16)])}}};i(32e3),i(52302);const He=(0,bt.A)(Ue,[["__scopeId","data-v-fd8ba988"]]);var We=He;const Xe={key:0,class:"wrap"},Ge={key:0,class:"title-container flex form-title"},Ye={class:"title-logo"},Ve=["src"],Ze={class:"flex1 title-right"},Qe={class:"title-line"},Je={class:"sub-title-line"},qe={class:"title-info"},$e={class:"title-info-item"},Ke={key:0,class:"title-info-item"},ti={key:1,class:"title-container"},ei={class:"custom-skeleton-item-container"},ii={class:"title-logo"},ni=["src"],oi={class:"title-line"},ri={class:"sub-title-line"},ai={class:"title-info"},si={class:"title-info-item"},li={key:0,class:"title-info-item"},ci={class:"actions-container"},ui={key:1,id:"aidraw",class:"content"},hi={key:1,class:"wrap-null"},di={class:"none-assistant"},gi={class:"loading-text"};var pi={__name:"Initpage_glms",props:{isNewUser:{type:Boolean,default:!1},debug:{type:Boolean,default:!1},showExampleList:{type:Boolean,default:()=>!0},hasConversation:{type:Boolean,default:()=>!1},keepStarter:{type:Boolean,default:()=>!1}},emits:["oldUser"],setup(t,{emit:e}){const r=new Set(["init","passed","unaudited","rejected"]),a=(0,m.Pj)(),s=(0,B.KR)(0),l=(0,B.KR)(0),c=(0,B.KR)(!1),u=((0,B.KR)(nt),(0,n.EW)((()=>a.state.Glms.assistantInfo))),h=(0,n.EW)((()=>a.state.Glms.sidebarList)),g=(0,n.EW)((()=>a.state.Glms.recentUsedList)),f=((0,n.EW)((()=>a.state.Detail.initStatus)),(0,n.EW)((()=>a.state.Conversation.isProd))),v=(0,n.EW)((()=>a.state.DarkMode.isDarkMode)),b=(0,n.EW)((()=>a.state.Glms.getAssistInfoLoading)),x=(0,n.EW)((()=>u.value?.user_nickname||"旧时光旅客")),y=(0,n.EW)((()=>{const t=[...h.value||[],...g.value||[]].find((t=>t.assistant_id===u.value.assistant_id));return t&&t.hit||null})),_=(0,n.EW)((()=>u.value.chat_mode===at.V6.opening_ui)),w=(0,n.EW)((()=>"65a232c082ff90a2ad2f15e2"===u.value.assistant_id)),k=(0,n.EW)((()=>{const t=!u.value.assistant_id,e=u.value&&r.has(u.value.audit_status);return t?{layout:"text_only",texts:[]}:e?_.value?{id:"opening_ui",layout:"form",formItems:u.value.opening_ui?.components||[]}:{layout:"text_only",texts:u.value.starter_prompts.filter((t=>""!==t&&!/^\s+$/.test(t))).map((t=>({text:t,instruction:{type:"text",prompt:t}})))}:!u.value.audit_status&&_.value?{id:"opening_ui",layout:"form",formItems:u.value.opening_ui?.components||[]}:null}));return(0,n.wB)((()=>u.value),(t=>{if(t&&t.assistant_id&&!c.value){const t=window.location.pathname;"/glms"===t&&((0,E.lK)({md:"createglms",ct:"preview_welcome"}),c.value=!0)}})),(0,n.sV)((async()=>{const[t,e]=(0,ot.A)();s.value=t,l.value=e,w.value&&(0,E.lK)(W)})),(0,n.xo)((()=>{(0,d.M7)(p.A,"oldUser")})),(e,r)=>{const a=(0,n.g2)("el-skeleton-item"),s=(0,n.g2)("el-skeleton");return(0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["init-page pc",{"init-scroll scroll-display-none":!f.value,"keep-starter":t.keepStarter}])},[u.value.assistant_id?((0,n.uX)(),(0,n.CE)("div",Xe,[w.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)(["content",{"content-prod":_.value&&!t.debug}])},[_.value?((0,n.uX)(),(0,n.CE)("div",Ge,[(0,n.Lk)("div",Ye,[(0,n.Lk)("img",{width:"100%",src:u.value.avatar||i(92167)},null,8,Ve)]),(0,n.Lk)("div",Ze,[(0,n.Lk)("div",Qe,(0,o.v_)(u.value.name||"未命名"),1),(0,n.Lk)("div",Je,(0,o.v_)(u.value.description),1),(0,n.Lk)("div",qe,[(0,n.Lk)("div",$e,[r[0]||(r[0]=(0,n.Lk)("img",{src:F},null,-1)),(0,n.eW)(" "+(0,o.v_)(x.value),1)]),null!==y.value?((0,n.uX)(),(0,n.CE)("div",Ke,[r[1]||(r[1]=(0,n.Lk)("img",{src:U},null,-1)),(0,n.eW)(" "+(0,o.v_)(y.value),1)])):(0,n.Q3)("",!0)])])])):((0,n.uX)(),(0,n.CE)("div",ti,[(0,n.bF)(s,{loading:b.value,animated:"",throttle:300,class:"content",count:1},{template:(0,n.k6)((()=>[(0,n.Lk)("div",ei,[(0,n.bF)(a,{variant:"image",style:{width:"100px",height:"100px","margin-bottom":"10px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}}),(0,n.bF)(a,{variant:"p",style:{width:"100px",height:"30px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}}),(0,n.bF)(a,{variant:"p",style:{width:"360px",height:"24px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}}),(0,n.bF)(a,{variant:"p",style:{width:"160px",height:"20px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}})])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",ii,[(0,n.Lk)("img",{width:"100px",src:u.value.avatar||i(92167)},null,8,ni)]),(0,n.Lk)("div",oi,(0,o.v_)(u.value.name||"未命名"),1),(0,n.Lk)("div",ri,(0,o.v_)(u.value.description),1),(0,n.Lk)("div",ai,[(0,n.Lk)("div",si,[r[2]||(r[2]=(0,n.Lk)("img",{src:F},null,-1)),(0,n.eW)(" "+(0,o.v_)(x.value),1)]),null!==y.value?((0,n.uX)(),(0,n.CE)("div",li,[r[3]||(r[3]=(0,n.Lk)("img",{src:U},null,-1)),(0,n.eW)(" "+(0,o.v_)(y.value),1)])):(0,n.Q3)("",!0)])])),_:1},8,["loading"])])),(0,n.Lk)("div",ci,[(0,n.bF)(rt.A,{agent_id:u.value.assistant_id,show:t.showExampleList,isOpeningUi:_.value,display_content:k.value,opening:u.value.opening},null,8,["agent_id","show","isOpeningUi","display_content","opening"])])],2)),w.value?((0,n.uX)(),(0,n.CE)("div",ui,[(0,n.bF)((0,B.R1)(yt),{assistantInfo:u.value},null,8,["assistantInfo"]),(0,n.bF)((0,B.R1)(xe)),(0,n.bF)((0,B.R1)(de))])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),!u.value.assistant_id&&t.debug?((0,n.uX)(),(0,n.CE)("div",hi,[(0,n.Lk)("div",di,[(0,n.Lk)("div",{class:(0,o.C4)(["loading-icon",{"loading-icon-dark":v.value}])},null,2),(0,n.Lk)("div",gi,(0,o.v_)(e.$t("glms.inputTips")),1)])])):(0,n.Q3)("",!0)],2)}}};i(93116),i(72006);const fi=(0,bt.A)(pi,[["__scopeId","data-v-e538f990"]]);var mi=fi,vi=i(3533);function bi(t,e,i,r,a,s){const l=(0,n.g2)("Item"),c=(0,n.g2)("ImageEdit");return(0,n.uX)(),(0,n.CE)("div",{ref:"conversationList",class:(0,o.C4)(["scroll-display-none detail",{"keep-starter":i.keepStarter,"conversation-list":!i.keepStarter}])},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.dataList,((e,o)=>((0,n.uX)(),(0,n.Wv)(l,(0,n.v6)({ref_for:!0},t.$attrs,{isShowQuestionTip:i.isShowQuestionTip,class:"conversation-item",key:o,index:o,style:o===t.dataList.length-1&&e.minHeight?"min-height: "+e.minHeight:"",isGlmShare:i.isGlmShare}),null,16,["isShowQuestionTip","index","style","isGlmShare"])))),128)),e[0]||(e[0]=(0,n.Lk)("div",{class:"last-div"},null,-1)),(0,n.bF)(c)],2)}const xi={class:"item"},yi={key:1,class:"latest-news"},_i={class:"latest-news-content"},wi={key:2,class:"new_ai_search_conversation"};function ki(t,e,i,r,a,s){const l=(0,n.g2)("Question"),c=(0,n.g2)("Answer"),u=(0,n.g2)("FollowUp");return(0,n.uX)(),(0,n.CE)("div",xi,[((0,n.uX)(),(0,n.Wv)(l,{item:s.item,index:i.index,key:s.item.log_id+"question",isShowQuestionTip:i.isShowQuestionTip,isGlm4:a.isGlm4,isGlmShare:i.isGlmShare},null,8,["item","index","isShowQuestionTip","isGlm4","isGlmShare"])),((0,n.uX)(),(0,n.Wv)(c,{item:s.item,index:i.index,key:s.item.log_id+"answer"},null,8,["item","index"])),i.index!==t.dataList.length-1||!s.item.printComleted||s.item.manualStopStream||!t.assistantInfo?.advanced_config?.suggestion_enabled&&!a.isGlm4||a.SpecialMsgDic[s.item.errorType]?.retryBtn||!t.clickSession||t.highSensitive?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(u,(0,n.v6)({key:0},t.$attrs,{key:s.item.conversation_id,type:"glm4",pdt:"glm4",taskId:s.item.conversation_id,userTouch:!1}),null,16,["taskId"])),s.item.is_sensitive&&s.item.printComleted||i.index===t.dataList.length-1&&t.highSensitive?((0,n.uX)(),(0,n.CE)("div",yi,[e[0]||(e[0]=(0,n.Lk)("div",{class:"line-left"},null,-1)),(0,n.Lk)("div",_i,[(0,n.Lk)("span",null,(0,o.v_)(t.$t("conversation.startNewSession")),1)]),e[1]||(e[1]=(0,n.Lk)("div",{class:"line-right"},null,-1))])):s.showHint?((0,n.uX)(),(0,n.CE)("div",wi," 搜索模型已全面升级，开启全新对话 ")):(0,n.Q3)("",!0)])}var Ci=i(30485);const Si=["id"],Ii={class:"checkboxDisabled"},Mi=["src"],Ti={class:"pr width_full"},Ei={class:"user-name"},Ai=["id"],Di=["onClick"],Li=["onClick"],Oi={class:"copy-btn-text"},ji=["id"],Pi={key:0,class:"question-image-type"},Ni=["id"],zi={class:"file"},Ri={key:0,class:"icon img-loading"},Bi={class:"file-info"},Fi={class:"name dot"},Ui={class:"status"},Hi={class:"success"},Wi={class:"type"},Xi={class:"size"},Gi=["data-upload"],Yi={class:"text"};function Vi(t,e,i,a,s,l){const c=(0,n.g2)("QuoteEcho"),u=(0,n.g2)("el-tooltip"),h=(0,n.g2)("CollapseButton"),d=(0,n.g2)("CogViewImage"),g=(0,n.gN)("exposure");return(0,n.uX)(),(0,n.CE)("div",{class:"conversation question pr flex flex-x-start flex-y-start",id:"row-question-"+i.index},[(0,n.bo)((0,n.Lk)("div",Ii,null,512),[[r.aG,t.currentOnClickedStatus&&l.disabledChecked]]),(0,n.bo)((0,n.Lk)("div",{class:(0,o.C4)(i.item.onCheckedStatus?"onCheckedStatusBtn":"unCheckedStatusBtn"),onClick:e[0]||(e[0]=(...t)=>l.handleSetShareStatus&&l.handleSetShareStatus(...t))},null,2),[[r.aG,t.currentOnClickedStatus&&!l.disabledChecked]]),(0,n.Lk)("img",{class:"user-img",src:l.showAvatar},null,8,Mi),(0,n.Lk)("div",Ti,[(0,n.Lk)("div",Ei,(0,o.v_)(i.isGlmShare?"用户":t.userInfo.nickname),1),(0,n.Lk)("div",{class:(0,o.C4)(["pr question-text-style",{"image-with-text":"image_with_text"===i.item.question_type,"echo-BgColor":i.item?.meta_data?.quote&&i.item?.meta_data?.quote?.length>0}])},[i.item?.meta_data?.quote&&i.item?.meta_data?.quote?.length>0?((0,n.uX)(),(0,n.Wv)(c,{key:0,quoteText:i.item?.meta_data?.quote},null,8,["quoteText"])):(0,n.Q3)("",!0),(0,n.Lk)("div",{id:"row-question-p-"+i.index,class:(0,o.C4)(["fs14 flex1 ft_grey3 tj question-txt dots wrap pr",{"dot-3-line":!i.item.isExpand,"question-txt-share":!i.isShowQuestionTip}]),onMouseenter:e[1]||(e[1]=(0,r.D$)(((...t)=>l.handleMouseEnter&&l.handleMouseEnter(...t)),["stop"]))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.splitQuestionByMatchedUrls,((t,i)=>((0,n.uX)(),(0,n.CE)("span",{key:i},["str"===t.type?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.eW)((0,o.v_)(t.str),1)],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[t.is_error?((0,n.uX)(),(0,n.CE)("span",{key:1,class:"link-style",onClick:(0,r.D$)((e=>l.openPage(t.url)),["stop"])},[(0,n.eW)((0,o.v_)(t.url)+" ",1),e[5]||(e[5]=(0,n.Lk)("span",{class:"parsed-failure-label"},null,-1))],8,Li)):((0,n.uX)(),(0,n.Wv)(u,{key:0,content:"“"+t.title+"”，约"+t.contentLength+"字",placement:"top"},{default:(0,n.k6)((()=>[(0,n.Lk)("span",{class:"link-style",onClick:(0,r.D$)((e=>l.openPage(t.url)),["stop"])},[(0,n.eW)((0,o.v_)(t.url),1),e[4]||(e[4]=(0,n.Lk)("span",{class:"parsed-success-label"},null,-1))],8,Di)])),_:2},1032,["content"]))],64))])))),128))],42,Ai),!i.item.isShowExpand||i.item.isExpand||i.item.isMouseMove?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(h,{key:1,isOpen:i.item.isExpand,"onUpdate:isOpen":e[2]||(e[2]=t=>l.triggerExpand(i.item)),pos:{bottom:2,right:0}},null,8,["isOpen"])),i.isShowQuestionTip&&!t.currentOnClickedStatus?((0,n.uX)(),(0,n.CE)("div",{key:2,class:"copy-btn",style:(0,o.Tr)(`left: ${s.copyX}px`),onClick:e[3]||(e[3]=(0,r.D$)((t=>l.intoEdit4Pc(i.item.question)),["stop"]))},[(0,n.Lk)("div",{class:(0,o.C4)(["copy-btn-icon",{"copy-btn-icon-dark":t.isDarkMode}])},null,2),(0,n.Lk)("div",Oi,(0,o.v_)(t.$t("conversation.copyToInput")),1)],4)):(0,n.Q3)("",!0)],2),i.item.fileList&&i.item.fileList.length?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"question-file",id:"row-question-img-"+i.index},[1===i.item.fileList?.length&&i.item.fileList[0]?.imageurl?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[!i.item.image_url&&i.item.image_type?((0,n.uX)(),(0,n.CE)("div",Pi,e[6]||(e[6]=[(0,n.Lk)("div",{class:"upload_wrap"},[(0,n.Lk)("div",{class:"img-loading img-loading_animate"})],-1)]))):(0,n.Q3)("",!0),i.item.image_url?((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["question-image",{"question-image-upload":"upload_image"===i.item.question_type,"question-image":"/main/detail"===t.$route.path}]),key:i.item.log_id,id:"row-question-img-"+i.index},[(0,n.bF)(d,{imgUrl:i.item.image_url,imgStyle:{width:"256px"},width:256,from:"question"},null,8,["imgUrl"])],10,Ni)):(0,n.Q3)("",!0)],64)):((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(i.item.fileList,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:"file"+e,class:"file-box"},[(0,n.Lk)("div",zi,[t.loading?((0,n.uX)(),(0,n.CE)("div",Ri)):((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)(["icon",{"icon-img":t.imageurl}]),style:(0,o.Tr)({backgroundImage:`url('${t.imageurl||l.getFileIcon(t)}')`})},null,6)),(0,n.Lk)("div",Bi,[(0,n.Lk)("p",Fi,(0,o.v_)(t.name),1),(0,n.Lk)("div",Ui,[(0,n.Lk)("div",Hi,[(0,n.Lk)("p",Wi,(0,o.v_)(t.type.toUpperCase()),1),(0,n.Lk)("p",Xi,(0,o.v_)(t.transferFileSize),1)])])])])])))),128))],8,ji)):(0,n.Q3)("",!0),l.showOverPercent?(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:1,"data-upload":JSON.stringify({md:"filechat",ct:"truncate_tips",ctvl:"overwords"}),class:"overpercent-box"},[e[7]||(e[7]=(0,n.Lk)("p",{class:"icon"},null,-1)),(0,n.Lk)("p",Yi,"超出字数限制，清言只阅读了前"+(0,o.v_)(i.item.fileList[0].maxReadPercent)+"%",1)],8,Gi)),[[g]]):(0,n.Q3)("",!0)])],8,Si)}var Zi=i(88422),Qi=i(87717);const Ji={class:"quote-echo-container"};var qi={__name:"QuoteEcho",props:{quoteText:{type:String,default:""}},setup(t){const e=(0,B.KR)(!1),i=(0,B.KR)(!1),r=(0,B.KR)(null),a=()=>{e.value=!e.value},s=()=>{const t=r.value?.clientWidth===r.value?.scrollWidth&&r.value?.clientHeight<r.value?.scrollHeight;e.value=!t,i.value=t};return(0,n.sV)((()=>{(0,n.dY)((()=>{s()}))})),(s,l)=>((0,n.uX)(),(0,n.CE)("div",Ji,[i.value?((0,n.uX)(),(0,n.Wv)(Qi.A,{key:0,isOpen:e.value,"onUpdate:isOpen":a,pos:{right:0,bottom:0}},null,8,["isOpen"])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,o.C4)(["quote-echo",{"quote-open":e.value}]),ref_key:"quoteTextRef",ref:r},(0,o.v_)(t.quoteText),3)]))}};i(9839);const $i=(0,bt.A)(qi,[["__scopeId","data-v-10096149"]]);var Ki=$i,tn={name:"ConversationQuestion",data(){return{copyX:0}},components:{CogViewImage:Zi.A,CollapseButton:Qi.A,QuoteEcho:Ki},props:{index:{type:Number,default:0},item:{type:Object,dafault:()=>{}},isShowQuestionTip:{type:Boolean,default:!0},isGlm4:{type:Boolean,default:!1},isGlmShare:{type:Boolean,default:!1}},watch:{"item.question":{handler(t){this.handleShowExpand()},deep:!0}},computed:{...(0,m.aH)("Home",["userInfo"]),...(0,m.aH)("Conversation",["currentOnClickedStatus"]),...(0,m.aH)("DarkMode",["isDarkMode"]),splitQuestionByMatchedUrls(){const t=this.item.question,e=this.urlMatched;if(!e||!e.length)return[{type:"str",str:t}];const i=[];let n=0;const o=e.map((t=>({...t,url:t.url.trim()}))),r=new Set,a=o.filter((t=>{const e=r.has(t.url);return r.add(t.url),!e})),s=a.map((e=>({...e,index:t.indexOf(e.url)}))).sort(((t,e)=>t.index-e.index));if(s.forEach((e=>{if(e.index>=0){if(e.index>n){const o=t?.substring(n,e.index);o&&i.push({type:"str",str:o})}i.push({type:"obj",url:e.url?.trim(),title:e.title?.trim(),is_error:e.is_error,contentLength:e.contentLength}),n=e.index+e.url.length}})),n<t.length){const e=t?.substring(n);e&&i.push({type:"str",str:e})}return i},disabledChecked({item:t}){return!(t.printComleted&&!t.forbidden&&!t.manualStopStream&&(!t.is_sensitive||t.is_intervene))},showAvatar(){return"/glmsShare"===this.$route.path?i(8695):this.userInfo?.profile?.avatar?.show_value||i(8695)},urlMatched(){const t=[];return this.item?.answerListDisplay?.length&&this.item.answerListDisplay.forEach(((e,i)=>{const n=e.searchPages;n&&n.length&&n.forEach(((i,n)=>{"openUrl"===i.type&&(i.page?.url?t.push({url:i.page?.url?.trim(),title:i.page?.title?.trim(),is_error:i.is_error,contentLength:e.meta_data?.contentLength}):t.push({url:i.searchText.split('"')[1],is_error:!0}))}))})),t},showOverPercent(){return this.item?.log_id&&1===this.item?.fileList?.length&&this.item?.fileList?.[0].maxReadPercent>0}},methods:{...(0,m.PY)("Conversation",{setShareIdList:"SET_SHARE_ID_LIST",removeShareIdList:"REMOVE_SHARE_ID_LIST",setShowShareLoginDialog:"SET_SHOW_SHARE_LOGIN_DIALOG"}),openPage(t){window.open(t)},handleSetShareStatus(){this.item.onCheckedStatus?this.removeShareIdList(this.item.log_id):this.setShareIdList({index:this.index,...this.item}),this.item.onCheckedStatus=!this.item.onCheckedStatus},handleShowExpand(){const t=this.$el.querySelector?.(".question-txt");if(t){const e=t.scrollHeight,i=108;this.item.isShowExpand=e>=i}},triggerExpand(){this.item.isExpand=!this.item.isExpand},intoEdit(t){this.isSearching||(this.sendCl({md:"detail",ct:"content_copy"}),(0,d.M7)(p.A,"chooseSearchValue",t),(0,d.M7)(p.A,"textboxFocus"))},intoEdit4Pc(t){this.userInfo?.phone?this.currentOnClickedStatus||this.intoEdit(t):this.setShowShareLoginDialog(!0)},clickFile(t){this.sendCl({md:"detail",ct:"file_click"})},getFileIcon(t){const e=t.wholeName?.substring(t.wholeName.lastIndexOf(".")+1);return"xlsx"===e||"xls"===e||"numbers"===e?i(51381):"pdf"===e?i(9062):e?.match(/ppt|pptx|key/gim)?i(69736):e?.match(/txt|doc|docx/gim)?i(84682):i(7096)},handleMouseEnter(t){const e=t.target;if(!e)return;const i=e.closest(".question-text-style"),{left:n=0,width:o}=i?.getBoundingClientRect(),r=Math.max(t.clientX-n,0)-20;this.copyX=o<r+107?o-107:r}},mounted(){this.handleShowExpand()},emits:["chooseSearchValue","textboxFocus"]};i(82892);const en=(0,bt.A)(tn,[["render",Vi],["__scopeId","data-v-15518d1c"]]);var nn=en,on=i(48600),rn=i(77793);const an={class:"code-box flex1"},sn={key:2,class:"stop-answer-default tl flex flex-start flex-y-center"};function ln(t,e,i,r,a,s){const l=(0,n.g2)("SearchLoading"),c=(0,n.g2)("item"),u=(0,n.g2)("RetryButton");return(0,n.uX)(),(0,n.CE)("div",an,[s.showSearchLoading?((0,n.uX)(),(0,n.Wv)(l,{key:0,loadingContent:a.loadingContent},null,8,["loadingContent"])):((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(i.item.answerListOutput,((t,e)=>((0,n.uX)(),(0,n.Wv)(c,{length:i.item.answerArray.length,index:e,key:e,itemLog:i.item,item:t},null,8,["length","index","itemLog","item"])))),128)),i.item.manualStopStream&&!i.item.is_sensitive?((0,n.uX)(),(0,n.CE)("div",sn,[(0,n.eW)((0,o.v_)(t.$t("conversation.stopThisSession"))+" ",1),i.index===t.dataList.length-1?((0,n.uX)(),(0,n.Wv)(u,{key:0})):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])}const cn={class:"search-loading-container"};var un={__name:"SearchLoading",props:{loadingContent:{type:String,dafault:()=>""},showExpand:{type:Boolean,default:()=>!1},expandStatus:{type:Boolean,default:()=>!1}},emits:["expand"],setup(t,{emit:e}){const i=(0,m.Pj)(),a=t,s=e,l=(0,n.EW)((()=>i.state.DarkMode.isDarkMode)),c=()=>{s("expand",!a.expandStatus)},u=(0,n.EW)((()=>a.expandStatus?l.value?"fold-btn-dark":"fold-btn":l.value?"expand-btn-dark":"expand-btn"));return(e,i)=>((0,n.uX)(),(0,n.CE)("div",cn,[(0,n.Lk)("div",{class:(0,o.C4)(["loading-icon",{"loading-icon-dark":l.value}])},null,2),(0,n.Lk)("div",{class:(0,o.C4)(["loading-text",{"loading-text-dark":l.value}])},(0,o.v_)(t.loadingContent),3),t.showExpand?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)(["expand-btn",u.value]),onClick:(0,r.D$)(c,["stop"])},null,2)):(0,n.Q3)("",!0)]))}};i(8759);const hn=(0,bt.A)(un,[["__scopeId","data-v-54cee6f4"]]);var dn=hn;function gn(t,e,i,o,r,a){const s=(0,n.g2)("ExecutionOutput"),l=(0,n.g2)("Tools"),c=(0,n.g2)("FileSlices"),u=(0,n.g2)("ImageAnswer"),h=(0,n.g2)("CodeAnswer"),d=(0,n.g2)("CommonAnswer");return"execution_output"===i.item.answer_type?((0,n.uX)(),(0,n.Wv)(s,{key:0,class:"new_type",item:i.item},null,8,["item"])):"tool_calls"===i.item.answer_type?((0,n.uX)(),(0,n.Wv)(l,{key:1,class:"new_type",itemLog:i.itemLog,item:i.item,index:i.index},null,8,["itemLog","item","index"])):"rag_slices"===i.item.answer_type?((0,n.uX)(),(0,n.Wv)(c,{key:2,itemLog:i.itemLog,item:i.item},null,8,["itemLog","item"])):r.imageAnswerList.indexOf(i.item.answer_type)>-1?((0,n.uX)(),(0,n.Wv)(u,{index:i.index,item:i.item,metaData:i.itemLog.meta_data,key:i.itemLog.log_id,answerType:i.item.answer_type,imageCount:i.item.image_count,images:i.item.image_list,isLoading:i.itemLog.isLoading,isSensitive:i.itemLog.is_sensitive,printComleted:i.itemLog.printComleted,manualStopStream:i.itemLog.manualStopStream,imageLoadError:i.item.imageLoadError},null,8,["index","item","metaData","answerType","imageCount","images","isLoading","isSensitive","printComleted","manualStopStream","imageLoadError"])):"code"===i.item.answer_type?((0,n.uX)(),(0,n.Wv)(h,{key:4,index:i.index,item:i.item,answerType:i.item.answer_type,isLoading:i.itemLog.isLoading,printComleted:i.itemLog.printComleted,content:i.item.answer,manualStopStream:i.itemLog.manualStopStream,isStreamStoped:i.itemLog.isStreamStoped,onTriggerSearch:a.newSearch},null,8,["index","item","answerType","isLoading","printComleted","content","manualStopStream","isStreamStoped","onTriggerSearch"])):((0,n.uX)(),(0,n.Wv)(d,{key:5,index:i.index,item:i.item,itemLog:i.itemLog,answerType:i.item.answer_type,isLoading:i.itemLog.isLoading,printComleted:i.itemLog.printComleted,content:i.item.answer,manualStopStream:i.itemLog.manualStopStream,error:i.item.error,isStreamStoped:i.itemLog.isStreamStoped,onTriggerSearch:a.newSearch},null,8,["index","item","itemLog","answerType","isLoading","printComleted","content","manualStopStream","error","isStreamStoped","onTriggerSearch"]))}const pn={key:0,class:"answer-content-wrap"};function fn(t,e,i,o,a,s){const l=(0,n.g2)("MarkdownItVueWithPlugin"),c=(0,n.g2)("IframeDialog");return i.isLoading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",pn,[(0,n.bF)(l,{class:"md-body tl",id:i.id,index:i.index,content:s.dispalyContent,pluginList:["markdownItContainerPlugin"],manualStopStream:i.itemLog.manualStopStream,onClick:(0,r.D$)(s.handleClick,["prevent","stop"]),onMouseover:(0,r.D$)(s.handleMove,["prevent","stop"]),onMouseleave:(0,r.D$)(s.handleLeve,["prevent","stop"])},null,8,["id","index","content","manualStopStream","onClick","onMouseover","onMouseleave"]),a.showIframe?((0,n.uX)(),(0,n.Wv)(c,{key:0,onCloseIframe:s.closeIframe,iframeUrl:a.iframeUrl},null,8,["onCloseIframe","iframeUrl"])):(0,n.Q3)("",!0)]))}const mn={class:"iframe-container"},vn=["src"];var bn={__name:"IframeDialog",props:{iframeUrl:{type:String,default:()=>""}},emits:["closeIframe"],setup(t,{emit:e}){const i=(0,B.KR)(!1),o=()=>{i.value=!0},a=e,s=()=>{a("closeIframe")};return(e,a)=>((0,n.uX)(),(0,n.CE)("div",mn,[(0,n.Lk)("iframe",{src:t.iframeUrl,class:"iframe-style",onLoad:o},null,40,vn),i.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"close-btn",onClick:(0,r.D$)(s,["stop"])})):(0,n.Q3)("",!0)]))}};i(69365);const xn=(0,bt.A)(bn,[["__scopeId","data-v-a4332d18"]]);var yn=xn,_n=i(89853),wn=i(19968),kn=i(49091),Cn=i(82645),Sn=i.n(Cn),In=i(19975),Mn=i(2589),Tn=i(59491);const En=['<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#1640d9" p-id="2126"></path></svg>','<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#4566e1" p-id="2126"></path></svg>','<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#5b79e4" p-id="2126"></path></svg>','<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#8a9fec" p-id="2126"></path></svg>','<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#b9c5f4" p-id="2126"></path></svg>','<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#e7ecfb" p-id="2126"></path></svg>','<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#b9c5f4" p-id="2126"></path></svg>','<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#8a9fec" p-id="2126"></path></svg>','<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#5b79e4" p-id="2126"></path></svg>','<svg t="1708604394457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" width="200" height="200"><path d="M512 64c247.424 0 448 200.576 448 448s-200.576 448-448 448S64 759.424 64 512 264.576 64 512 64z m0 256a192 192 0 1 0 0 384 192 192 0 0 0 0-384z" fill="#4566e1" p-id="2126"></path></svg>'];var An={name:"CommonAnswer",data(){return{asid:this.$route.params?.id||this.$route.query.assistant_id,sourceMap:{},sourceIndex:0,referenceIndex:-1,imageError:!1,answer:this.content,isAnswerLoading:!1,lastContent:"",pindex:0,timer:null,timer2:null,options:{markdownIt:{html:!0,linkify:!1},linkAttributes:{attrs:{target:"_blank",rel:"noopener"}}},iframeUrl:"",showIframe:!1,settings:{}}},components:{MarkdownItVueWithPlugin:_n.A,IframeDialog:yn},watch:{isDarkMode(t){this.setDarkMode()}},mounted(){this.setDarkMode()},computed:{...(0,m.aH)("Home",["userInfo","configuration"]),...(0,m.aH)("DarkMode",["isDarkMode"]),urlWhiteList(){return this.configuration?.urlWhiteList||[]},defaultSearchIcon(){return this.isDarkMode?Tn:In},searchSourceMap(){const t={},e=this.item?.meta_data?.citations||[];return e.forEach((e=>{const i=e?.metadata?.extra?.cited_message_idx,n=e?.metadata?.title,o=e?.metadata?.url,r=e?.metadata?.icon_link||this.defaultSearchIcon,a=e?.metadata?.media||o;t[i]={page:n,url:o,icon_link:r,media:a}})),t},toolCallsearchPages(){const t=this.itemLog.answerListOutput.filter((t=>"tool_calls"===t.answer_type&&"search"===t.tool_name)).map((t=>t.searchPages));return t},sourceCount(){const t=this.toolCallsearchPages;let e=0;for(let i=0;i<t.length;i++)t[i].forEach((t=>{const i=t.page||[];i.forEach((t=>{e++}))}));return e},searchUrlMap(){const t={},e=this.toolCallsearchPages;for(let i=0;i<e.length;i++)e[i].forEach((e=>{const i=e.page||[];i.forEach((e=>{t[e.url]=e.searchCount}))}));return t},dealedContent(){const t=En[this.pindex%10];return this.isAnswerLoading&&this.itemLog.canShowLoading?this.content+"&nbsp;"+t:this.content},dispalyContent(){let t=this.dealedContent;return this.itemLog.isOnClose||"659e54b1b8006379b4b2abd6"===this.asid||(t=t.replace(wn.$z,((t,e)=>`<span class='source-item item-$1'   style='top: 2px' data-id='$1'>\n      <img class='shuzijiaobiao' data-id='$1' src='${i(66475)}'/>\n      <span class='source-zhanweifu'></span>\n    </span>`))),t=t.replace(wn.$z,((t,e)=>{this.searchSourceMap[e];const i=this.searchSourceMap[e]?.url;if("659e54b1b8006379b4b2abd6"===this.asid)return`<span class='source-item item-${e}' data-id='${e}'>\n            <span  class='source-item-num' data-id='${e}'>${+e+1}</span>\n          <span class='source-zhanweifu-ai-search' data-id='${e}'>\n            <div class='aisearch-source-text-flex' data-url='${this.searchSourceMap[e].url}' data-id='${e}'>\n               <div class="aisearch-source-title" data-url='${this.searchSourceMap[e].url}' data-id='${e}'>${this.searchSourceMap[e].page}</div>\n               <div class="aisearch-source-name-container" data-url='${this.searchSourceMap[e].url}' data-id='${e}'>\n                  <div class="aisearch-source-icon" style="background-image: url('${this.searchSourceMap[e].icon_link}')" data-url='${this.searchSourceMap[e].url}' data-id='${e}'></div>\n                  <div class="aisearch-source-name" data-url='${this.searchSourceMap[e].url}' data-id='${e}'>${this.searchSourceMap[e].media}</div>\n                </div></span>\n        </span>`;{let t=this.searchUrlMap[i];return t||(this.sourceMap[e]||(this.sourceMap[e]=++this.sourceIndex+this.sourceCount),t=this.sourceMap[e]),`<span class='source-item item-${e}' data-id='${e}'>\n            <span  class='source-item-num' data-id='${e}'>${t}</span>\n          <span class='source-zhanweifu'></span>\n        </span>`}})),t}},props:{content:{type:String,default:()=>""},answerType:{type:String,default:()=>"default"},isLoading:{type:Boolean,default:()=>!1},id:{type:String,default:()=>`${Date.now()}`},item:{type:Object,default:()=>{}},itemLog:{type:Object,dafault:()=>{}},recomends:{type:Array,default:()=>[]},key_ref:{type:String,default:()=>""},error:{type:[Object,Boolean],default:()=>({})},manualStopStream:{type:Boolean,default:()=>!1},index:{type:Number,default:0},printComleted:{type:Boolean,default:()=>!1},isOnClose:{type:Boolean,default:()=>!1},isStreamStoped:{type:Boolean,default:function(){return!1}}},methods:{setDarkMode(){const t=document.querySelectorAll(".iframe-right-arrow");t.forEach((t=>{t.style.backgroundImage=this.isDarkMode?`url(${Mn})`:""}))},closeIframe(){this.sendCl({md:"detail",ct:"iframe_card_close",ctvl:this.itemLog.conversation_id}),this.showIframe=!1},sendData:Sn()((function(t){this.sendCl({md:"detail",ct:"answer_tool_search_hover",ctvl:t}),this.sendPv({md:"detail",ct:"search_quote_hover",ctvl:+t+1})}),1e3),triggerSearch(t){(0,d.M7)(this,"triggerSearch",t)},retry(){(0,d.M7)(this,"paseDocument",this.documentInfo)},onReferenceClick(t){t===this.referenceIndex?this.referenceIndex=-1:this.referenceIndex=t},onLoaded(t=!1){this.imageError=t},isWhiteUrl(t){for(let e=0;e<this.urlWhiteList.length;e++){const i=this.urlWhiteList[e];if(t.indexOf(i)>-1)return!0}return!1},handleClick(t){t.stopPropagation();const e=t.target.className;if("A"===t.target.tagName){const e=t.target.getAttribute("href");if(e.match(/sfile\.chatglm\.cn/gim))window.open(e,"_blank");else if(this.isWhiteUrl(e)){this.sendPv({md:"answer",ct:e});let i=e;try{const{username:t,phone:n}=this.userInfo||{};i=(0,kn.g)(e,`p=${n}&n=${t?.slice(0,16)}`)}catch(t){}window.open(i,"_blank")}else window.open(e,"_blank")}if("string"===typeof e&&e.indexOf("source-item")>-1){const e=t.target.dataset.id;if(this.searchSourceMap[e]){const t=this.searchUrlMap[this.searchSourceMap[e].url];this.sendCl({md:"detail",ct:"answer_tool_search_click",ctvl:t}),this.sendCl({md:"detail",ct:"search_quote_click",ctvl:+e+1}),window.open(this.searchSourceMap[e].url)}}if("string"===typeof e&&(e.indexOf("source-text-container")>-1||e.indexOf("source-zhanweifu")>-1)||"string"===typeof e&&e.indexOf("aisearch-source")>-1||e.indexOf("source-zhanweifu-ai-search")>-1){const e=t.target.dataset.url,i=this.searchUrlMap[e];this.sendCl({md:"detail",ct:"answer_tool_search_click",ctvl:i}),this.sendCl({md:"detail",ct:"search_quote_hover_click",ctvl:+t.target.dataset.id+1}),e&&window.open(e)}if("string"===typeof e&&e.indexOf("iframe-")>-1&&(this.sendCl({md:"detail",ct:"iframe_btn_cl",ctvl:this.itemLog.conversation_id}),this.iframeUrl=t.target.dataset.url,this.showIframe=!0),"copy-button"===t.target.id){const e=t.target.closest(".top"),i=e.nextElementSibling;this.copy(i.innerText)}},handleLeve(t){window.removeEventListener("resize",this.resize)},getFileSliceCite(t=""){return t?t.match(/\d+/)?`片段${t.match(/\d+/)?.[0]}`:`片段${t}`:""},handleMove(t){this.resize=()=>{const e=t.target.className;if("string"===typeof e&&(e.indexOf("source-item")>-1||e.indexOf("shuzijiaobiao")>-1)){let e=t.target.parentNode;e=e.parentNode;while(e){if("BODY"===e.tagName)break;if(e.className.indexOf("answer-content")>-1)break;e=e.parentNode}const n="659e54b1b8006379b4b2abd6"===this.asid?t.target.parentNode.querySelector(".source-zhanweifu-ai-search"):t.target.parentNode.querySelector(".source-zhanweifu"),o=t.target.dataset.id;if(this.searchSourceMap[o]&&"659e54b1b8006379b4b2abd6"===this.asid);else{if(!this.searchSourceMap[o])return!0===this.itemLog?.meta_data?.display_rag_slice&&(n.innerHTML=`<div class='source-text-container'>${this.getFileSliceCite(t.target?.innerText)}</div><div>`),!1;n.innerHTML=`<div class='source-text-flex' data-url='${this.searchSourceMap[o].url}' ><div class='source-text-container' data-url='${this.searchSourceMap[o].url}'>${this.searchSourceMap[o].page}</div><img class='source-img' src=${i(53766)} data-url='${this.searchSourceMap[o].url}'><div>`}if(!this.searchSourceMap[o].page)return!1;const{x:r,width:a}=e.getBoundingClientRect(),{x:s,width:l}=t.target.getBoundingClientRect(),{width:c}=n.getBoundingClientRect(),u=s+l/2,h=u-c/2,d=u+c/2,g=r+a,p=this.searchUrlMap[this.searchSourceMap[o].url];if(this.sendData(p||o),d>=g)return n.style=`left:-${c+u-g}px;`,!1;if(h<=r)return n.style=`left:-${u-r-10}px;`,!1;n.style="left:50%; transform: translateX(-50%);"}},this.resize(t),window.addEventListener("resize",(()=>{this.resize(t)}))}},updated(){if("finish"===this.item.status||this.itemLog.manualStopStream||this.item.isOnError)return this.lastContent=this.content,clearTimeout(this.timer),clearInterval(this.timer2),void(this.isAnswerLoading=!1);this.content!==this.lastContent&&(this.lastContent=this.content,clearTimeout(this.timer),clearInterval(this.timer2),this.isAnswerLoading=!1,this.timer=setTimeout((()=>{this.isAnswerLoading=!0,this.timer2=setInterval((()=>{this.pindex++}),130)}),500),this.setDarkMode())},emits:["triggerSearch","paseDocument"]};i(36331),i(22441);const Dn=(0,bt.A)(An,[["render",fn],["__scopeId","data-v-8ded7a40"]]);var Ln=Dn;const On={key:0,class:"img-answer-content-wrap"},jn={key:0,class:"text-to-image-senitive"},Pn={class:"img-answer-list"},Nn={key:0,class:"text-to-image-desc"};function zn(t,e,i,r,a,s){const l=(0,n.g2)("Item");return i.imageLoadError?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",On,[i.isSensitive?((0,n.uX)(),(0,n.CE)("div",jn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.senstiveAnswer,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e},(0,o.v_)(t),1)))),128))])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.Lk)("div",Pn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.imageCount,(t=>((0,n.uX)(),(0,n.CE)("div",{class:"img-answer-item",key:t},[(0,n.bF)(l,{item:i.item,metaData:i.metaData,isLoading:i.isLoading,isSensitive:i.isSensitive,manualStopStream:i.manualStopStream,images:i.images,index:t-1,defaultImgWidth:s.defaultImgWidth,onLoaded:s.imgLoaded},null,8,["item","metaData","isLoading","isSensitive","manualStopStream","images","index","defaultImgWidth","onLoaded"])])))),128))]),s.imageError&&s.answerComplete&&i.imageCount>0?((0,n.uX)(),(0,n.CE)("div",Nn,e[0]||(e[0]=[(0,n.Lk)("div",null,"网络错误，请稍候再试…",-1)]))):(0,n.Q3)("",!0)],64))]))}var Rn=i(53918),Bn={name:"ImageAnswerIndex",props:{item:{type:Object,dafault:()=>{}},imageLoadError:{type:Boolean,default:()=>!1},images:{type:Array,default:()=>[]},imageCount:{type:Number,default:()=>1},isLoading:{type:Boolean,default:()=>!1},content:{type:String,default:()=>""},isSensitive:{type:Boolean,default:()=>!1},manualStopStream:{type:Boolean,default:()=>!1},metaData:{type:Object,default:()=>({})}},data(){return{imageLoadErrorNum:0,imageLoadedNum:0}},components:{Item:Rn.A},computed:{...(0,m.aH)("Home",["operationData"]),imageError(){return this.imageLoadErrorNum===this.imageCount},defaultImgWidth(){return this.imageCount>1?200:500},answerComplete(){return!this.isLoading&&this.imageLoadErrorNum+this.imageLoadedNum>=this.imageCount},answer(){return this.content},answerList(){const t=new Array(this.imageCount);return t},answerBottomText(){const t=this.operationData?.text2img_list||[],e=Math.floor(Math.random()*t.length);var i=t[e];return i||""},senstiveAnswer(){return this.answer?.split?this.answer?.split("<br>"):[this.answer]}},methods:{clickRecomendText(t){this.sendCl({md:"detail",ct:"image_recomend_text_click",extra:t}),(0,d.M7)(this,"triggerSearch",t)},imgLoaded(t=!1){t&&this.imageLoadErrorNum++,this.imageLoadedNum++}},emits:["triggerSearch"]};i(34576);const Fn=(0,bt.A)(Bn,[["render",zn],["__scopeId","data-v-e5279fda"]]);var Un=Fn,Hn=i(27012),Wn=i(61127);const Xn=["data-upload"],Gn={key:1,class:"cogview"},Yn={key:0,class:"ai-stop-container"},Vn={key:0,src:Wn,alt:"",class:"tingzhiyuedu"},Zn={class:"text-stop-yuedu-container"},Qn={class:"text-error"},Jn={key:0,class:"search_container"},qn={class:"search-item-container"},$n={class:"item-title"},Kn={key:0,class:"item-day"},to={class:"item-day-text"},eo={key:0,class:"item-open-url"},io={key:0,class:"item-open-text"},no={key:1},oo=["onClick"],ro={class:"process-title-wrap"},ao={class:"process-title"},so={class:"process-url"},lo={key:0,class:"duquzongjie-container"};function co(t,e,i,a,s,l){const c=(0,n.g2)("ActionArgument"),u=(0,n.g2)("ZPThemeImage"),h=(0,n.g2)("MSearch"),d=(0,n.g2)("el-tooltip"),g=(0,n.g2)("openUrl"),p=(0,n.gN)("exposure");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{"data-upload":l.name?JSON.stringify({md:"detail",ct:"answer_tool_type",ctvl:l.name}):"",class:"tools-answer"},["action"===i.item.tool_name?((0,n.uX)(),(0,n.Wv)(c,{key:0,itemLog:i.itemLog,item:i.item},null,8,["itemLog","item"])):(0,n.Q3)("",!0),"cogview"===l.name?((0,n.uX)(),(0,n.CE)("div",Gn,[l.isStop?((0,n.uX)(),(0,n.CE)("div",Yn,[e[1]||(e[1]=(0,n.Lk)("img",{src:Hn,alt:""},null,-1)),(0,n.eW)(" "+(0,o.v_)(t.$t("conversation.stop"))+(0,o.v_)(t.$t("conversation.cogViewAIPainting")),1)])):i.item.tool_done?((0,n.uX)(),(0,n.Wv)(u,{key:2,class:"searched",imageUrl:"search_finish"})):((0,n.uX)(),(0,n.Wv)(u,{key:1,class:"searching",imageUrl:"draw_loading",imageDarkUrl:"draw_loading-dark1"})),(0,n.Lk)("span",{class:(0,o.C4)(["text",{"text-done":i.item.tool_done,"text-searchinng":!i.item.tool_done}])},(0,o.v_)(l.content),3)])):(0,n.Q3)("",!0),"msearch"===l.name?((0,n.uX)(),(0,n.Wv)(h,{key:2,itemLog:i.itemLog,item:i.item},null,8,["itemLog","item"])):(0,n.Q3)("",!0),"search"===l.name?((0,n.uX)(),(0,n.CE)(n.FK,{key:3},[(0,n.Lk)("div",{class:"search",onClick:e[0]||(e[0]=(0,r.D$)((t=>s.expand=!s.expand),["stop"]))},[l.isStop?((0,n.uX)(),(0,n.CE)("img",Vn)):(0,n.Q3)("",!0),l.isStop?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)([{"text-stop-yuedu":l.isStop}])},[(0,n.Lk)("div",Zn,(0,o.v_)(t.$t("conversation.stopLinkNetRead")),1)],2)):i.item.tool_is_error?((0,n.uX)(),(0,n.CE)("div",{key:2,class:(0,o.C4)([{"text-stop-yuedu":l.isStop}])},[(0,n.Lk)("div",Qn,(0,o.v_)(t.$t("conversation.noResult")),1)],2)):i.item.tool_done?((0,n.uX)(),(0,n.Wv)(u,{key:4,class:"searched",imageUrl:"search_finish"})):((0,n.uX)(),(0,n.Wv)(u,{key:3,class:"searching",imageUrl:"network_search",imageDarkUrl:"network_search-dark1"})),(0,n.Lk)("div",{class:(0,o.C4)(["text-parent-container",{"text-parent-container-stop":l.isStop,"text-parent-container-searhing":!i.item.tool_done}])},[(0,n.Lk)("span",{class:(0,o.C4)(["text",{"text-done":i.item.tool_done,"text-dark":t.isDarkMode}])},(0,o.v_)(l.content),3),i.item.searchPages.length>0?((0,n.uX)(),(0,n.CE)("i",{key:0,class:(0,o.C4)(["text el-icon-arrow-down",{"text-done-icon":i.item.tool_done,"text-searching-icon":!i.item.tool_done,"text-done-icon-rotate":s.expand,"text-stop":l.isStop,"text-dark":t.isDarkMode}])},null,2)):(0,n.Q3)("",!0)],2)]),s.expand?((0,n.uX)(),(0,n.CE)("div",Jn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.item.searchPages,((i,r)=>((0,n.uX)(),(0,n.CE)("div",{key:r,class:"search-item-inner-container"},[(0,n.Lk)("div",qn,[(0,n.Lk)("div",$n,[(0,n.bF)(u,{imageUrl:"all-tools-item-icon"}),(0,n.eW)(" "+(0,o.v_)("联网查询："+l.filterToolArgs(i.searchText))+" ",1),l.filterToolDay(i.searchText)?((0,n.uX)(),(0,n.CE)("p",Kn,[e[2]||(e[2]=(0,n.Lk)("span",{class:"item-day-icon"},"-",-1)),(0,n.Lk)("span",to,(0,o.v_)(t.$t("conversation.days",{num:l.filterToolDay(i.searchText)})),1)])):(0,n.Q3)("",!0)]),Array.isArray(i.page)&&i.page.length?((0,n.uX)(),(0,n.CE)("div",eo,[(0,n.bF)(u,{imageUrl:"search-open-url"}),i.is_error?((0,n.uX)(),(0,n.CE)("span",io,(0,o.v_)(t.$t("conversation.openUrlPageFailed")),1)):((0,n.uX)(),(0,n.CE)("span",no,(0,o.v_)(t.$t("conversation.openUrlPage")),1))])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,o.C4)(["search_wrap",{search_wrap_odd:i.page.length%2===0}])},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.page,((i,r)=>((0,n.uX)(),(0,n.CE)("div",{class:"process",key:r,onClick:t=>l.clickPage(i.url)},[(0,n.Lk)("div",ro,[i.is_error?((0,n.uX)(),(0,n.Wv)(d,{key:0,content:t.$t("conversation.openUrlPageFailed"),placement:"top"},{default:(0,n.k6)((()=>e[3]||(e[3]=[(0,n.Lk)("div",{class:"process_icon"},null,-1)]))),_:1},8,["content"])):(0,n.Q3)("",!0),(0,n.Lk)("div",ao,(0,o.v_)(i.searchCount+". "+i.title),1)]),(0,n.Lk)("div",so,(0,o.v_)(i.url),1)],8,oo)))),128))],2)])])))),128)),i.item.tool_done?((0,n.uX)(),(0,n.CE)("div",lo,[(0,n.bF)(u,{imageUrl:"duquwangyebingzongjie",imageDarkUrl:"read_web-dark"}),(0,n.eW)(" "+(0,o.v_)(i.item.tool_is_error?t.$t("conversation.noResult"):t.$t("conversation.readAndSummary")),1)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)],64)):(0,n.Q3)("",!0),"open"===l.name?((0,n.uX)(),(0,n.Wv)(g,{key:4,itemLog:i.itemLog,item:i.item},null,8,["itemLog","item"])):(0,n.Q3)("",!0)],8,Xn)),[[p]])])}const uo={class:"action-answer-wrap"},ho={class:"action-result-wrap"},go={key:0,class:"searching"},po={class:"content flex flex-y-center"},fo={class:"action-result-content"},mo={key:0,class:"action-result-content"},vo={class:"result-style"},bo={class:"tool-result"},xo={key:0,class:"auth-wrap"},yo={key:0},_o={class:"auth-text"},wo={key:0,class:"auth-button"},ko={key:1,class:"btn loading"},Co={key:1,class:"fw_bold"};function So(t,e,i,a,s,l){const c=(0,n.g2)("MarkdownItVueWithPlugin");return(0,n.uX)(),(0,n.CE)("div",uo,[(0,n.Lk)("div",ho,[(0,n.Lk)("div",{class:"action-status-wrap",onClick:e[0]||(e[0]=(0,r.D$)((t=>s.expand=!s.expand),["stop"]))},[i.item.tool_done||i.itemLog.manualStopStream?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)(["searched",{"search-stop":!i.item.tool_done&&i.itemLog.manualStopStream,"seatched-dark":t.isDarkMode}])},null,2)):((0,n.uX)(),(0,n.CE)("div",go)),(0,n.Lk)("div",po,[(0,n.Lk)("div",{class:(0,o.C4)(["title",{"search-stop":!i.item.tool_done&&i.itemLog.manualStopStream}])},(0,o.v_)(`“${l.assistantName}”调用工具：${i.item.tool_type}`),3),(0,n.Lk)("i",{class:(0,o.C4)(["text",{stop:!i.item.tool_done&&i.itemLog.manualStopStream,"el-icon-arrow-down":!s.expand,"el-icon-arrow-up":s.expand}])},null,2)])]),s.expand?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("div",fo,[(0,n.bF)(c,{class:(0,o.C4)([["md-body tl",{"is-expend":s.expand}],"params-style"]),content:l.actionQuery,pluginList:["markdownItContainerPlugin"],onClick:(0,r.D$)(l.handleClick,["prevent","stop"]),settings:s.settings},null,8,["class","content","onClick","settings"])]),i.item.tool_extra&&i.item.tool_extra.is_show?((0,n.uX)(),(0,n.CE)("div",mo,[e[3]||(e[3]=(0,n.Lk)("div",{class:"fw_bold header",style:{paddingLeft:"15px"}},"result",-1)),(0,n.Lk)("div",vo,[(0,n.Lk)("div",bo,(0,o.v_)(i.item.tool_result),1)])])):(0,n.Q3)("",!0)],64)):(0,n.Q3)("",!0)]),l.showAuth?((0,n.uX)(),(0,n.CE)("div",xo,[t.shareConversationId?((0,n.uX)(),(0,n.CE)("div",yo,"[你收到了一个API调用消息]")):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.Lk)("div",_o,"登录"+(0,o.v_)(i.item.tool_host)+",使用"+(0,o.v_)(i.item.tool_type),1),t.currentOnClickedStatus?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",wo,[l.isAuthError?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"btn error",onClick:e[1]||(e[1]=(...t)=>l.faliRetry&&l.faliRetry(...t))},"登录失败，重试")):l.isAuthLoading?((0,n.uX)(),(0,n.CE)("div",ko,e[4]||(e[4]=[(0,n.Lk)("div",{class:"loading-icon"},null,-1),(0,n.Lk)("div",{class:"loading-text"},"正在查询登录状态",-1)]))):((0,n.uX)(),(0,n.CE)("div",{key:2,class:"btn auth",onClick:e[2]||(e[2]=t=>l.gotoAuth(i.item.tool_result))},"去登录"))]))],64))])):(0,n.Q3)("",!0),i.item.tool_is_error?((0,n.uX)(),(0,n.CE)("div",Co,"调用动作时出错")):(0,n.Q3)("",!0)])}var Io=i(66432),Mo={name:"ActionArgument",props:{itemLog:{type:Object,default:()=>{}},item:{type:Object,default:()=>{}},index:{type:Number,default:0}},data(){return{expand:!1,maxPollTimes:20,settings:{languageName:"请求参数"}}},components:{MarkdownItVueWithPlugin:_n.A},computed:{...(0,m.aH)("Glms",["assistantInfo"]),...(0,m.aH)("DarkMode",["isDarkMode"]),...(0,m.aH)("Conversation",["currentOnClickedStatus"]),assistantName(){const t=this.itemLog?.meta_data||{};if(t.mention_assistant_name)return t.mention_assistant_name;const e=["gdetail","Glms","GlmsShare"];return this.$store.state?.Glms?.assistantInfo?.name&&e.includes(this.$route.name)?this.$store.state?.Glms?.assistantInfo?.name:"ChatGLM"},actionQuery(){const t=this.item.arguments;let e="";const i=t.match(/tool_call\(([^]*)\)/);if(i){const t=i[1];let n="",o=!1,r="",a=0;for(let i=0;i<t.length;i++){const s=t[i];if('"'!==s&&"'"!==s||(o&&s===r?o=!1:o||(o=!0,r=s)),!o)if("("===s)a++;else if(")"===s)a--;else if(","===s&&0===a){e+="\n "+n.trim(),n="";continue}n+=s}e+="\n "+n.trim()}return"```json "+e+"\n```"},showAuth(){const t=this.item.tool_extra||{};return"auth"===t.show_type},isAuthLoading(){return this.itemLog?.actionsStatus?.isLoading},isAuthError(){return this.itemLog?.actionsStatus?.isError},authRetryTimer(){return this.itemLog?.actionsStatus?.retryTimer}},watch:{"item.tool_result":function(t){t&&this.autoRetry(t)}},methods:{autoRetry(t){t&&this.$root.authAutoRetry&&(this.$root.authAutoRetry=!1,this.gotoAuth(t))},faliRetry(){this.$root.authAutoRetry=!0,(0,d.M7)(p.A,"previewSearch",this.itemLog.question)},gotoAuth(t){this.itemLog.actionsStatus.isError=!1,window.open(t,"_blank"),this.maxPollTimes=20,this.authResult()},setLoading(t){this.itemLog.actionsStatus.isLoading=t},authResult(){clearInterval(this.authRetryTimer),this.setLoading(!0),this.itemLog.actionsStatus.retryTimer=setInterval((()=>{0!==this.maxPollTimes&&(0,Io.vU)({action_id:this.item?.tool_extra?.action_id,state:this.item?.tool_extra?.state}).then((t=>{this.maxPollTimes--;const e=t.result;1===e.oauth_status?(this.stopRetry(!0),(0,d.M7)(p.A,"conversation_retry",this.index)):2===e.oauth_status?0===this.maxPollTimes&&this.stopRetry(!1):this.stopRetry(!1)})).catch((()=>{this.stopRetry(!1)}))}),5e3)},handleClick(t){if(t.stopPropagation(),"copy-button"===t.target.id){const e=t.target.closest(".top"),i=e.nextElementSibling;this.copy(i.innerText)}},stopRetry(t){clearInterval(this.authRetryTimer),this.setLoading(!1),t||(this.itemLog.actionsStatus.isError=!0)}},created(){this.itemLog.isHistory&&this.showAuth&&(this.itemLog.actionsStatus={retryTimer:-1,isError:!0,isLoading:!1})},mounted(){const t=this.item?.tool_result;t&&this.autoRetry(t)},beforeUnmount(){this.stopRetry(),this.$root.authAutoRetry=!1},emits:["previewSearch","conversation_retry"]};i(44366);const To=(0,bt.A)(Mo,[["render",So],["__scopeId","data-v-37bdb19e"]]);var Eo=To,Ao=i(43288),Do=i(88405),Lo=i(23432),Oo=i(35833);const jo={class:"loading-text"};var Po={__name:"Conclusion",props:{expandStatus:{type:Boolean,default:()=>!1},loadingContent:{type:String,dafault:()=>""}},emits:["expand"],setup(t,{emit:e}){const i=(0,m.Pj)(),a=t,s=e,l=(0,n.EW)((()=>i.state.DarkMode.isDarkMode)),c=(0,n.EW)((()=>l.value?a.expandStatus?Do:Ao:a.expandStatus?Oo:Lo)),u=()=>{(0,E._2)({md:"detail",ct:a.expandStatus?"search_off":"search_on"}),s("expand",!a.expandStatus)};return(e,i)=>((0,n.uX)(),(0,n.CE)("div",{class:"search-loading-container",onClick:(0,r.D$)(u,["stop"])},[(0,n.Lk)("div",{class:(0,o.C4)(["loading-icon",{"loading-icon-dark":l.value}])},null,2),(0,n.Lk)("div",jo,(0,o.v_)(t.loadingContent),1),(0,n.Lk)("div",{class:"expand-btn",style:(0,o.Tr)({backgroundImage:`url(${c.value})`})},null,4)]))}};i(6794);const No=(0,bt.A)(Po,[["__scopeId","data-v-cda18e26"]]);var zo=No,Ro=i(99513);const Bo={class:"single-search-container"},Fo={class:"search-text"},Uo={key:1,class:"search-title"},Ho={class:"title-text"},Wo={class:"site-icons"},Xo=["onMouseenter"],Go=["src"],Yo=["src"],Vo={class:"site-conclusion"};var Zo={__name:"singleSearch",props:{searchContent:{type:Object,dafault:()=>{}},printCompleted:{type:Boolean,default:()=>!1}},setup(t){const e=t,i=(0,m.Pj)(),r=(0,n.EW)((()=>i.state.DarkMode.isDarkMode)),a=t=>{(0,E.lK)({md:"detail",ct:"search_icon_pop"})},s=(0,n.EW)((()=>r.value?Tn:In)),l=(0,B.KR)(!1),c=(0,B.KR)(!1),u=(0,B.KR)(!1);(0,n.wB)((()=>e.searchContent.searchText),(()=>{e.printCompleted?(l.value=!0,c.value=!0,u.value=!0):(l.value=!0,setTimeout((()=>{c.value=!0}),1e3),setTimeout((()=>{u.value=!0}),2e3))}),{immediate:!0});const h=t=>{const e=/description="([^"]+)"/,i=/queries=\[([^\]]+)\]/,n=t.match(e),o=n?n[1]:null,r=t.match(i);let a=r?r[1].split('", "'):null;return a&&(a=a.map((t=>t.replace(/^"|"$/g,"")))),{description:o,queries:a}},d=(0,n.EW)((()=>h(e.searchContent?.searchText).description)),g=(0,n.EW)((()=>h(e.searchContent?.searchText).queries)),p=(0,n.EW)((()=>{const t=e.searchContent.searchSiteList?.map((t=>t.icon_link))||[];if(t.length<=5)return t;{const e=t.slice(0,4);return e.push(Ro),e}})),f=(0,n.EW)((()=>{const t=e.searchContent.searchSiteList?.map((t=>t.icon_link||s.value))||[];return t.length<=5?[]:t.slice(4)})),v=(0,n.EW)((()=>{const{searchSiteList:t,conclusionObj:i}=e.searchContent;if(!t)return"";let n=`找到${t.length}个网址`;if(i&&i.ids){const t=i.ids.split(",");t.length>0&&(n+=` 阅读了${t.length}个`)}return n}));return(e,i)=>{const h=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",Bo,[l.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)(["search-header",{"slide-in-animate":!t.printCompleted}])},[(0,n.Lk)("div",{class:(0,o.C4)(["search-icon",{"search-icon-dark":r.value}])},null,2),(0,n.Lk)("div",Fo,(0,o.v_)(d.value),1)],2)):(0,n.Q3)("",!0),c.value?((0,n.uX)(),(0,n.CE)("div",Uo,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(g.value,((e,i)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["title",{"slide-in-animate":!t.printCompleted}]),key:i},[(0,n.Lk)("div",Ho,(0,o.v_)(e),1)],2)))),128))])):(0,n.Q3)("",!0),u.value?((0,n.uX)(),(0,n.CE)("div",{key:2,class:(0,o.C4)(["reference-site",{"slide-in-animate":!t.printCompleted}])},[(0,n.Lk)("div",Wo,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(p.value.slice(0,5),((t,e)=>((0,n.uX)(),(0,n.Wv)(h,{key:e,disabled:!f.value.length||4!==e,placement:"top",offset:7,"popper-class":"site-icons-popper"},{content:(0,n.k6)((()=>[(0,n.Lk)("div",{class:"icons-left-container",onMouseenter:e=>a(t)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(f.value,(t=>((0,n.uX)(),(0,n.CE)("img",{src:t,key:t},null,8,Go)))),128))],40,Xo)])),default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.CE)("div",{class:"site-icon",key:e},[(0,n.Lk)("img",{src:t||s.value},null,8,Yo)]))])),_:2},1032,["disabled"])))),128))]),(0,n.Lk)("div",Vo,(0,o.v_)(v.value),1)],2)):(0,n.Q3)("",!0)])}}};i(39769),i(33367);const Qo=(0,bt.A)(Zo,[["__scopeId","data-v-0f07f598"]]);var Jo=Qo;const qo={class:"sites-cited-list-container"},$o=["onClick"],Ko={class:"site-description"},tr={class:"site-info"},er={class:"site-name"};var ir={__name:"SitesCitedList",props:{sitesCitedArr:{type:Array,dafault:()=>[]}},setup(t){const e=(0,m.Pj)(),i=t,a=(0,B.KR)(0),s=(0,B.KR)(3),l=(0,n.EW)((()=>e.state.DarkMode.isDarkMode)),c=t=>{"left"===t?(a.value=a.value-1,s.value=s.value-1):(a.value=a.value+1,s.value=s.value+1)},u=t=>{(0,E._2)({md:"detail",ct:"search_web"}),window.open(t)},h=(0,n.EW)((()=>i.sitesCitedArr.slice(a.value,a.value+4)));return(e,i)=>((0,n.uX)(),(0,n.CE)("div",qo,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(h.value,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{class:"site-card",onClick:(0,r.D$)((e=>u(t.url)),["stop"])},[(0,n.Lk)("div",Ko,(0,o.v_)(`${a.value+e+1}.${t.title}`),1),(0,n.Lk)("div",tr,[(0,n.Lk)("div",{class:(0,o.C4)(["site-icon",{"dark-site-icon":l.value}]),style:(0,o.Tr)(t.icon_link?{backgroundImage:"url("+t.icon_link+")"}:{})},null,6),(0,n.Lk)("div",er,(0,o.v_)(t.media||t.url),1)])],8,$o)))),256)),t.sitesCitedArr.length>4&&a.value>0?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("div",{class:(0,o.C4)(["left-block",{"block-dark":l.value}])},null,2),(0,n.Lk)("div",{class:(0,o.C4)(["left-btn",{"left-btn-dark":l.value}]),onClick:i[0]||(i[0]=(0,r.D$)((t=>c("left")),["stop"]))},null,2)],64)):(0,n.Q3)("",!0),t.sitesCitedArr.length>4&&s.value+1<t.sitesCitedArr.length?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.Lk)("div",{class:(0,o.C4)(["right-block",{"block-dark":l.value}])},null,2),(0,n.Lk)("div",{class:(0,o.C4)(["right-btn",{"right-btn-dark":l.value}]),onClick:i[1]||(i[1]=(0,r.D$)((t=>c("right")),["stop"]))},null,2)],64)):(0,n.Q3)("",!0)]))}};i(88278);const nr=(0,bt.A)(ir,[["__scopeId","data-v-6e91c563"]]);var or=nr;const rr={class:"searchinfo-container"},ar={key:0,class:"search-container"};var sr={__name:"searchInfo",props:{item:{type:Object,dafault:()=>{}},itemLog:{type:Object,dafault:()=>{}}},setup(t){const e=t,i=(0,B.KR)(!0),a=(0,B.KR)("搜索分析..."),s=(0,B.KR)(!1),l=(0,n.EW)((()=>{const t=[];return e.item.searchPages.forEach(((e,i)=>{e.searchSiteList&&t.push(...e.searchSiteList)})),t})),c=(0,n.EW)((()=>{let t="",i={};if(e.itemLog.answerListDisplay&&e.itemLog.answerListDisplay[1]&&(i=e.itemLog.answerListDisplay[1].meta_data),i&&i.citations&&i.citations.length)t=i.click_ids&&i.click_ids.length?`总结答案：基于${i.citations.length}个搜索来源，阅读了${i.click_ids.length}个网页`:`总结答案：基于${i.citations.length}个搜索来源`;else{const i=e.item.searchPages?.reduce(((t,e)=>t+e.searchSiteList?.length?e.searchSiteList.length:0),0);t=l.value.length>0?`总结答案：基于${i}个搜索来源，阅读了${l.value.length}个网页`:`总结答案：基于${i}个搜索来源`}return t})),u=t=>{s.value=t},h=t=>{t.style.height=`${t.scrollHeight}px`,t.style.opacity="1",t.style.minHeight="0"},d=t=>{t.style.height="0",t.style.padding="0",t.style.opacity="0"},g=t=>{t.style.height="",t.style.padding="",t.style.opacity="",i.value=!1};return(e,p)=>((0,n.uX)(),(0,n.CE)("div",rr,[t.itemLog.printComleted||t.itemLog.manualStopStream||t.item.tool_done?((0,n.uX)(),(0,n.Wv)(zo,{key:0,loadingContent:c.value,onExpand:u,expandStatus:s.value},null,8,["loadingContent","expandStatus"])):((0,n.uX)(),(0,n.Wv)(dn,{key:1,loadingContent:a.value},null,8,["loadingContent"])),(0,n.bF)(r.eB,{name:!i.value||t.itemLog.printComleted?"":"singlesearch",onBeforeLeave:h,onLeave:d,onAfterLeave:g},{default:(0,n.k6)((()=>[!t.item.tool_done&&!t.itemLog.printComleted||s.value?((0,n.uX)(),(0,n.CE)("div",ar,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.item.searchPages,((e,r)=>((0,n.uX)(),(0,n.Wv)(Jo,{printCompleted:!i.value||t.itemLog.printComleted,searchContent:e,style:(0,o.Tr)({marginTop:0===r?"0":"12px"}),key:r},null,8,["printCompleted","searchContent","style"])))),128))])):(0,n.Q3)("",!0)])),_:1},8,["name"]),t.item.tool_done?((0,n.uX)(),(0,n.Wv)(or,{key:2,sitesCitedArr:l.value},null,8,["sitesCitedArr"])):(0,n.Q3)("",!0)]))}};i(49647);const lr=(0,bt.A)(sr,[["__scopeId","data-v-4d8e0ad8"]]);var cr=lr;const ur={class:"msearch-container"};var hr={__name:"msearch",props:{item:{type:Object,dafault:()=>{}},itemLog:{type:Object,dafault:()=>{}}},setup(t){const e=t;(0,n.EW)((()=>e.item.searchContent));return(e,i)=>((0,n.uX)(),(0,n.CE)("div",ur,[(0,n.bF)(cr,{item:t.item,itemLog:t.itemLog},null,8,["item","itemLog"])]))}};i(68899);const dr=(0,bt.A)(hr,[["__scopeId","data-v-16e925a0"]]);var gr=dr;const pr={class:"open-url-container"},fr={key:0,src:Wn,alt:"",class:"tingzhiyuedu"},mr={class:"text-stop-yuedu-container"},vr={class:"text-error"},br={key:0,class:"open-url-detail"},xr={class:"title"},yr={class:"open-url-text"},_r={class:"search-pages"},wr=["onClick"],kr={class:"title"},Cr={class:"url"},Sr={class:"conclusion"},Ir={class:"conclusion-text"};function Mr(t,e,i,a,s,l){return(0,n.uX)(),(0,n.CE)("div",pr,[(0,n.Lk)("div",{class:"search",onClick:e[0]||(e[0]=(0,r.D$)((t=>s.expand=!s.expand),["stop"]))},[l.isStop?((0,n.uX)(),(0,n.CE)("img",fr)):(0,n.Q3)("",!0),l.isStop?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)([{"text-stop-yuedu":l.isStop}])},[(0,n.Lk)("div",mr,(0,o.v_)(t.$t("conversation.stopLinkNetRead")),1)],2)):i.item.tool_is_error?((0,n.uX)(),(0,n.CE)("div",{key:2,class:(0,o.C4)([{"text-stop-yuedu":l.isStop}])},[(0,n.Lk)("div",vr,[e[1]||(e[1]=(0,n.Lk)("div",{class:"warning-icon"},null,-1)),(0,n.Lk)("div",null,(0,o.v_)(`${t.$t("conversation.linkNetRead")}：${t.$t("conversation.openUrlFailed",{url:l.urlSearched[0]})}`),1)])],2)):i.item.tool_done?((0,n.uX)(),(0,n.CE)("div",{key:4,class:(0,o.C4)(["searched",{"searched-dark":t.isDarkMode}])},null,2)):((0,n.uX)(),(0,n.CE)("div",{key:3,class:(0,o.C4)(["searching",{"searching-dark":t.isDarkMode}])},null,2)),i.item.tool_is_error?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:5,class:(0,o.C4)(["text-parent-container",{"text-parent-container-stop":l.isStop,"text-parent-container-searhing":!i.item.tool_done}])},[(0,n.Lk)("span",{class:(0,o.C4)(["text",{"text-done":i.item.tool_done}])},(0,o.v_)(l.content),3),i.item.searchPages.length>0?((0,n.uX)(),(0,n.CE)("i",{key:0,class:(0,o.C4)(["text el-icon-arrow-down",{"text-done-icon":i.item.tool_done,"text-searching-icon":!i.item.tool_done,"text-done-icon-rotate":s.expand,"text-stop":l.isStop}])},null,2)):(0,n.Q3)("",!0)],2))]),s.expand&&!i.item.tool_is_error&&i.item.searchText?((0,n.uX)(),(0,n.CE)("div",br,[(0,n.Lk)("div",xr,[(0,n.Lk)("div",{class:(0,o.C4)(["open-url-icon",{"open-url-icon-dark":t.isDarkMode}])},null,2),(0,n.Lk)("div",yr,(0,o.v_)(t.$t("conversation.openUrlPage")),1)]),(0,n.Lk)("div",_r,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.item.searchPages,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"single-page",onClick:e=>l.clickPage(t.page.url,l.urlSearched[1])},[(0,n.Lk)("div",kr,(0,o.v_)(t.page.title||l.urlSearched[1]),1),(0,n.Lk)("div",Cr,(0,o.v_)(t.page.url||l.urlSearched[1]),1)],8,wr)))),128))]),(0,n.Lk)("div",Sr,[(0,n.Lk)("div",{class:(0,o.C4)(["conclusion-icon",{"conclusion-icon-dark":t.isDarkMode}])},null,2),(0,n.Lk)("div",Ir,(0,o.v_)(t.$t("conversation.readAndSummary")),1)])])):(0,n.Q3)("",!0)])}var Tr={name:"openUrl",props:{item:{type:Object,dafault:()=>{}},itemLog:{type:Object,dafault:()=>{}}},data(){return{expand:!1,last:""}},computed:{...(0,m.aH)("DarkMode",["isDarkMode"]),urlSearched(){const t=this.item.searchContent?.match(/.*open_url\("(.*)"\).*$/);let e="";return e=t[1].length>28?t[1].slice(0,28)+"...":t[1],[e,t[1]]||0},isStop(){return(this.itemLog.isOnError||this.itemLog.manualStopStream)&&!this.item.tool_done},name(){return this.item.tool_name},content(){if(this.isStop||this.item.tool_is_error||!this.item.searchPages||!this.item.searchPages.length)return"";const t=this.item.searchPages[0];let{title:e}=t.page;return e&&(e.trim(),e.length>14&&(e=e.slice(0,14)+"...")),this.item?.meta_data?.contentLength&&e?`联网阅读：打开“${e}”, 读取${this.item?.meta_data?.contentLength}字`:"联网阅读：打开网页并总结"}},methods:{clickPage(t,e){t?window.open(t):window.open(e)}}};i(56154);const Er=(0,bt.A)(Tr,[["render",Mr],["__scopeId","data-v-9bd17f76"]]);var Ar=Er,Dr=i(86104),Lr={name:"ConversationAnswerTools",components:{ActionArgument:Eo,openUrl:Ar,MSearch:gr},props:{item:{type:Object,dafault:()=>{}},itemLog:{type:Object,dafault:()=>{}},index:{type:Number,default:0}},data(){return{expand:!1,last:""}},computed:{...(0,m.aH)("DarkMode",["isDarkMode"]),isStop(){return(this.itemLog.isOnError||this.itemLog.manualStopStream)&&!this.item.tool_done},name(){return this.item.tool_name},content(){const t=this.item.searchContent;if("cogview"===this.name)return this.isStop?"":this.item.tool_done?`${this.$t("conversation.cogViewAIPainting")}：${this.$t("conversation.done")}`:`${this.$t("conversation.cogViewAIPainting")}...`;if("search"===this.name){if(this.isStop||this.item.tool_is_error)return"";if(this.item.tool_done){const t=this.item.searchPages;let e=0;t.forEach((t=>{e+=t.page.length}));let i="";return t.length&&(i+=this.$t("conversation.searchNumber",{num:t.length})),e&&(i+=`${i?"，":""}${this.$t("conversation.openSummary",{num:e})}`),i}return t.indexOf("search")>-1?`${this.$t("conversation.linkNetRead")}：${(0,Dr.y8)(t)}`:`${this.$t("conversation.openUrlPage")}：${(0,Dr.y8)(t)}`}return""}},beforeUnmount(){},methods:{filterToolArgs:Dr.y8,filterToolDay:Dr.bp,clickPage(t){window.open(t)},async newSearch(t){}},mounted(){},updated(){if(this.item.tool_simple_search&&!this.setTimer){this.setTimer=!0;const t=this.item.searchPages[0]?.page||[];t.forEach(((t,e)=>{setTimeout((()=>{this.item.searchContent=t.title}),500*e)}))}}};i(49539);const Or=(0,bt.A)(Lr,[["render",co],["__scopeId","data-v-4cc61afc"]]);var jr=Or;function Pr(t,e,i,o,a,s){const l=(0,n.g2)("MarkdownItVueWithPlugin");return(0,n.uX)(),(0,n.CE)("div",null,[e[0]||(e[0]=(0,n.Lk)("div",{class:"result-top"},[(0,n.Lk)("p",null,"结果")],-1)),(0,n.bF)(l,{class:"md-body md-body-result",content:i.item.content,pluginList:["markdownItContainerPlugin"],onClick:(0,r.D$)(s.handleClick,["prevent","stop"])},null,8,["content","onClick"])])}var Nr={name:"ConversationAnswerExecutionOutput",components:{MarkdownItVueWithPlugin:_n.A},props:{item:{type:Object,dafault:()=>{}}},data(){return{last:""}},async mounted(){},beforeUnmount(){},methods:{handleClick(){}}};i(7423);const zr=(0,bt.A)(Nr,[["render",Pr],["__scopeId","data-v-a87d84e2"]]);var Rr=zr;const Br={key:0,class:"answer-content-wrap code"},Fr={class:"text-search-container"};function Ur(t,e,i,a,s,l){const c=(0,n.g2)("MarkdownItVueWithPlugin");return i.isLoading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Br,[(0,n.Lk)("div",{class:"answer-status-wrap",onClick:e[0]||(e[0]=(0,r.D$)((t=>s.expand=!s.expand),["stop"]))},["init"!==i.item.content_status||i.manualStopStream?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,o.C4)(["searched",{"search-stop":i.manualStopStream&&!t.isDarkMode,"searched-dark":t.isDarkMode,"search-stop-dark":i.manualStopStream&&t.isDarkMode}])},null,2)):((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)(["searching",{"searching-dark":t.isDarkMode}])},null,2)),(0,n.Lk)("div",Fr,[(0,n.Lk)("div",{class:(0,o.C4)(["tl fw_bold title",{isSearch:"init"===i.item.content_status,"isSearch-dark":"init"===i.item.content_status&&t.isDarkMode,stop:this.manualStopStream}])},"  "+(0,o.v_)(l.dispalyStatus),3),(0,n.Lk)("i",{class:(0,o.C4)(["text",{"el-icon-arrow-down":!s.expand,"el-icon-arrow-up":s.expand}])},null,2)])]),s.expand?((0,n.uX)(),(0,n.Wv)(c,{key:0,class:(0,o.C4)(["md-body tl",{"is-expend":s.expand}]),id:i.id,index:i.index,content:l.dispalyContent,pluginList:["markdownItContainerPlugin"],onClick:(0,r.D$)(l.handleClick,["prevent","stop"])},null,8,["class","id","index","content","onClick"])):(0,n.Q3)("",!0)]))}var Hr={name:"CodeAnswer",data(){return{expand:!1}},components:{MarkdownItVueWithPlugin:_n.A},computed:{...(0,m.aH)("DarkMode",["isDarkMode"]),dispalyContent(){const t=this.content;return"```"+this.item.recipient+"\n"+t+"\n```"},dispalyStatus(){return this.manualStopStream?"停止代码生成":"finish"===this.item.content_status?"代码生成：已完成":"代码生成..."}},methods:{handleClick(t){if(t.stopPropagation(),"copy-button"===t.target.id){const e=t.target.closest(".top"),i=e.nextElementSibling;this.copy(i.innerText)}}},watch:{},props:{content:{type:String,default:()=>""},answerType:{type:String,default:()=>"default"},isLoading:{type:Boolean,default:()=>!1},id:{type:String,default:()=>`${Date.now()}`},item:{type:Object,default:()=>{}},recomends:{type:Array,default:()=>[]},key_ref:{type:String,default:()=>""},error:{type:[Object,Boolean],default:()=>({})},manualStopStream:{type:Boolean,default:()=>!1},index:{type:Number,default:0},printComleted:{type:Boolean,default:()=>!1},isOnClose:{type:Boolean,default:()=>!1},isStreamStoped:{type:Boolean,default:function(){return!1}}}};i(64358);const Wr=(0,bt.A)(Hr,[["render",Ur],["__scopeId","data-v-2efe711e"]]);var Xr=Wr;const Gr={class:"slice-left"},Yr={class:"slice-right flex flex flex-y-center"},Vr={class:"slice-title flex dot"},Zr={class:"slice-title-name dot"},Qr={key:0,class:"slice-detail-wrapper"},Jr={key:2,class:"hint"},qr={class:"show-all-text flex flex-y-center"},$r=["src"],Kr=["data-upload"],ta={key:1,class:"slice-not-found flex flex-y-center"},ea={class:"slice-title"},ia={key:1,class:"slice-loading flex flex-y-center"},na={class:"loading-title"};function oa(t,e,i,a,s,l){const c=(0,n.g2)("FileSliceDetail"),u=(0,n.g2)("FileSliceDown"),h=(0,n.gN)("exposure");return(0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["file-slices-container",{expand:s.expand}])},["finish"===i.item.status?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[i.item.ragSlices&&i.item.ragSlices.length>0?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("div",{class:"slice-header hover-style",onClick:e[0]||(e[0]=(0,r.D$)(((...t)=>l.handleExpand&&l.handleExpand(...t)),["stop"]))},[(0,n.Lk)("div",Gr,[(0,n.Lk)("div",{class:(0,o.C4)(["slice-icon",{"slice-icon-dark":t.isDarkMode}])},null,2)]),(0,n.Lk)("div",Yr,[(0,n.Lk)("div",Vr,[e[2]||(e[2]=(0,n.Lk)("div",null,"在“",-1)),(0,n.Lk)("div",Zr,(0,o.v_)(l.configName),1),(0,n.Lk)("div",null,"”中找到“"+(0,o.v_)(i.item.ragSlices.length)+(0,o.v_)(l.unit)+"”相关"+(0,o.v_)(l.fileType),1)]),(0,n.Lk)("i",{class:(0,o.C4)(["slice-arrow el-icon-arrow-down",{contract:s.expand}])},null,2)])]),s.expand?((0,n.uX)(),(0,n.CE)("div",Qr,[l.showFirstSlice?((0,n.uX)(),(0,n.Wv)(c,{key:0,slice:l.firstSlice,order:1},null,8,["slice"])):((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(i.item.ragSlices,((t,e)=>((0,n.uX)(),(0,n.Wv)(c,{key:e,order:e+1,slice:t,isDoc:l.isDoc},null,8,["order","slice","isDoc"])))),128)),this.isProd?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",Jr,"提示："+(0,o.v_)(l.tips),1)),l.showFirstSlice?((0,n.uX)(),(0,n.CE)("div",{key:3,onClick:e[1]||(e[1]=t=>s.showAll=!0),class:"show-all-btn flex flex-x-center"},[(0,n.Lk)("div",qr,[e[3]||(e[3]=(0,n.Lk)("div",{class:""},"展开全部",-1)),(0,n.Lk)("img",{src:l.showAllIcon},null,8,$r)])])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),!s.expand||this.isProd||l.showFirstSlice?(0,n.Q3)("",!0):(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:1,class:"slice-detail-wrapper thumsUp","data-upload":JSON.stringify({md:"detail",ct:"thumbs_up_rag",extra:i.itemLog.log_id})},[e[4]||(e[4]=(0,n.Lk)("span",null,"本次知识库切片结果是否有用？",-1)),(0,n.bF)(u,{item:i.itemLog},null,8,["item"])],8,Kr)),[[h]])],64)):i.item.ragSlices&&0===i.item.ragSlices.length?((0,n.uX)(),(0,n.CE)("div",ta,[(0,n.Lk)("div",{class:(0,o.C4)(["slice-icon",{"slice-icon-dark":t.isDarkMode}])},null,2),(0,n.Lk)("div",ea,"未找到相关"+(0,o.v_)(l.fileType),1)])):(0,n.Q3)("",!0)],64)):((0,n.uX)(),(0,n.CE)("div",ia,[e[5]||(e[5]=(0,n.Lk)("div",{class:"loading-icon"},null,-1)),(0,n.Lk)("div",na,"搜索“"+(0,o.v_)(l.configName)+"”",1)]))],2)}var ra=i(73720);const aa={key:0,class:"document-order flex flex-y-center dot flex-x-between"},sa={class:"flex flex-y-center flex1 document-order-left dot"},la={class:"slice-score flex flex-x-center flex-y-center"},ca={class:"document-name flex flex-y-center flex1"},ua=["src"],ha={class:"dot"},da={key:1,class:"text"};function ga(t,e,i,r,a,s){const l=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["slice-detail",{"is-doc":i.isDoc}])},[i.isDoc?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",aa,[(0,n.Lk)("div",sa,"片段"+(0,o.v_)(i.order),1),(0,n.bF)(l,{"popper-class":"slice-tooltip",effect:"dark",placement:"top",content:"片段相关性得分"},{default:(0,n.k6)((()=>[(0,n.Lk)("span",la,(0,o.v_)(i.slice.score.toFixed(2)),1)])),_:1})])),(0,n.Lk)("div",ca,[(0,n.Lk)("img",{src:s.getFileIcon(i.slice.document_name,i.slice)},null,8,ua),(0,n.Lk)("span",ha,(0,o.v_)(i.slice.document_name),1)]),i.isDoc?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",da,(0,o.v_)(i.slice.text),1))],2)}var pa={name:"FileSliceDetail",props:{slice:{type:Object,dafault:()=>{}},order:{type:Number,default:1},isDoc:{type:Boolean,default:!1}},methods:{handleExpand(){this.expand=!this.expand,this.showAll=!1},getFileIcon:ra.I3}};i(82054);const fa=(0,bt.A)(pa,[["render",ga],["__scopeId","data-v-234e4e46"]]);var ma=fa;const va={class:"file-slice-down"},ba=["src"],xa=["src"],ya=["src"],_a=["src"];function wa(t,e,i,a,s,l){const c=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",va,[i.item.is_slice_up?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(c,{key:0,content:l.usefulContent,placement:"top",disabled:!!t.currentOnClickedStatus,transition:"none","open-delay":10,enterable:!1},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:(0,o.C4)(["shim thumbs-up",{canuse:l.enabled,shimGrey:t.currentOnClickedStatus}]),onClick:e[0]||(e[0]=(0,r.D$)((t=>l.thumbsUp(i.item,"good","submit_rag")),["stop"]))},[(0,n.Lk)("img",{src:l.ThumbupGrey},null,8,ba)],2)])),_:1},8,["content","disabled"])),i.item.is_slice_up?((0,n.uX)(),(0,n.Wv)(c,{key:1,content:l.usefulContent,placement:"top",disabled:!!t.currentOnClickedStatus,transition:"none","open-delay":10,enterable:!1},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:(0,o.C4)(["shim thumbs-up-on",{canuse:l.enabled}]),title:"点赞成功",onClick:e[1]||(e[1]=(0,r.D$)((t=>l.thumbsUp(i.item,"good","reset_rag")),["stop"]))},[(0,n.Lk)("img",{src:l.ThumeUpDown},null,8,xa)],2)])),_:1},8,["content","disabled"])):(0,n.Q3)("",!0),i.item.is_slice_down?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(c,{key:2,content:l.unusefulContent,placement:"top",disabled:!!t.currentOnClickedStatus,transition:"none","open-delay":10,enterable:!1},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:(0,o.C4)(["shim thumbs-down",{canuse:l.enabled,shimGrey:t.currentOnClickedStatus,"thumbs-selecting":t.thumbsUpModelIndex===i.index}]),onClick:e[2]||(e[2]=(0,r.D$)((t=>l.thumbsUp(i.item,"bad","submit_rag",i.index)),["stop"]))},[(0,n.Lk)("img",{src:l.ThumeDownGrey},null,8,ya)],2)])),_:1},8,["content","disabled"])),i.item.is_slice_down?((0,n.uX)(),(0,n.Wv)(c,{key:3,content:l.unusefulContent,placement:"top","popper-class":"thumbs-down-tooltip",transition:"none","open-delay":10,enterable:!1},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:(0,o.C4)(["shim thumbs-down-on",{canuse:l.enabled}]),onClick:e[3]||(e[3]=(0,r.D$)((t=>l.thumbsUp(i.item,"bad","reset_rag",i.index)),["stop"]))},[(0,n.Lk)("img",{src:l.ThumbDoneDark},null,8,_a)],2)])),_:1},8,["content"])):(0,n.Q3)("",!0)])}var ka={data(){return{source:(0,kn.P)("source"),sharedConversationId:(0,kn.P)("convo")}},methods:{setConversationisSearching(t){this.$store.commit("Conversation/SET_STATUS",{name:"isSearching",value:t})}}},Ca=i(30349),Sa={name:"Actions-down",mixins:[ka],props:{index:{type:Number,default:0},item:{type:Object,dafault:()=>{}}},data(){return{showFeedback:!1}},computed:{...(0,m.aH)("Conversation",["dataList","isSearching","currentOnClickedStatus","thumbsUpModelIndex"]),...(0,m.aH)("Home",["userInfo"]),...(0,m.aH)("DarkMode",["isDarkMode"]),ThumbupGrey({isDarkMode:t}){const e=i(t?12361:21437);return e},ThumeUpDown({isDarkMode:t}){const e=i(t?51935:85158);return e},ThumeDownGrey({isDarkMode:t}){const e=i(t?31905:41276);return e},ThumbDoneDark({isDarkMode:t}){const e=i(t?51040:4931);return e},enabled(){return"finish"===this.item.status},usefulContent(){return this.enabled?"有用":"请等待答案生成完成后，进行评价"},unusefulContent(){return this.enabled?"没用":"请等待答案生成完成后，进行评价"}},methods:{thumbsUp(t,e,i,n){!this.currentOnClickedStatus&&this.enabled&&(this.userInfo?.phone?("submit_rag"===i&&("bad"===e?this.sendCl({md:"detail",ct:"thumbs_down",extra:t.log_id}):this.sendCl({md:"detail",ct:"thumbs_up",extra:t.log_id})),"share"===this.source?("submit_rag"===i?(t.is_slice_up="good"===e,t.is_slice_down="bad"===e,this.$message.success({message:"评价成功",duration:800}),this.isShowReport="bad"===e):(t.is_slice_up=!1,t.is_slice_down=!1,this.$message.success("评价取消"),this.isShowReport=!1),this.$forceUpdate()):(0,Ca.dE)({task_id:t.log_id,score:e,type:i}).then((n=>{"submit_rag"===i?(t.is_slice_up="good"===e,t.is_slice_down="bad"===e,this.$message.success({message:"评价成功",duration:800})):(t.is_slice_up=!1,t.is_slice_down=!1,this.$message.success("评价取消"))}))):this.showLoginAndApplyDialog=!0)}}};i(72730);const Ia=(0,bt.A)(Sa,[["render",wa],["__scopeId","data-v-5ae87268"]]);var Ma=Ia,Ta=i(77857),Ea={name:"FileSlices",components:{FileSliceDetail:ma,FileSliceDown:Ma},data(){return{expand:!1,showAll:!1,showSliceThumsUp:!1,isScopeFirstSlice:!1}},props:{item:{type:Object,dafault:()=>{}},itemLog:{type:Object,dafault:()=>{}}},computed:{...(0,m.aH)("Glms",["assistantInfo","firstDebug","isFirstSlice"]),...(0,m.L8)("Conversation",["lastItem","isProd"]),...(0,m.aH)("DarkMode",["isDarkMode"]),tips(){return this.assistantInfo?.knowledge_config?.display_rag_slice?"此操作会导致您的知识库外露给用户，请慎重选择":"该信息仅调试可见，不会暴露给智能体用户"},showAllIcon({isDarkMode:t}){const e=i(t?83297:78575);return e},configName(){return this.assistantInfo?.knowledge_config?.name||"知识库"},firstSlice(){return this.item.ragSlices?.[0]||{}},showFirstSlice(){return this.item.ragSlices?.length>1&&!this.showAll&&this.hasText(this.item.ragSlices?.[0],"text")},fileType(){return this.hasText(this.item.ragSlices?.[0],"text")?"片段":"文件"},unit(){return this.hasText(this.item.ragSlices?.[0],"text")?"条":"个"},isDoc(){return!this.hasText(this.item.ragSlices?.[0],"text")}},methods:{handleExpand(){this.expand=!this.expand,this.showAll=!1},getFileIcon:ra.I3,hasText(t,e){return"[object Object]"===Object.prototype.toString.apply(t)&&Object.prototype.hasOwnProperty.call(t,e)}}};i(4284);const Aa=(0,bt.A)(Ea,[["render",oa],["__scopeId","data-v-3387698e"]]);var Da=Aa;const La=["img2img","img","image"];var Oa={name:"ConversationAnswerItem",components:{CommonAnswer:Ln,ImageAnswer:Un,Tools:jr,ExecutionOutput:Rr,CodeAnswer:Xr,FileSlices:Da},props:{index:{type:Number,default:0},length:{type:Number,default:0},itemLog:{type:Object,dafault:()=>{}},item:{type:Object,dafault:()=>{}}},data(){return{imageAnswerList:La}},computed:{...(0,m.aH)("Conversation",["dataList"])},methods:{async newSearch(t){}}};i(45684);const ja=(0,bt.A)(Oa,[["render",gn],["__scopeId","data-v-68408d8c"]]);var Pa=ja,Na=i(69187);const za={class:"retry-button"};var Ra={__name:"RetryButton",setup(t){const{t:e}=L.Ay.global,{proxy:i}=(0,n.nI)(),a=(0,m.Pj)(),s=(0,n.EW)((()=>a.state.Conversation.dataList)),l=(0,n.EW)((()=>a.state.Conversation.highSensitive)),c=(0,n.EW)((()=>{const t=s.value[s.value?.length-1];return!t?.regens||t?.regens?.length<5})),u=(0,n.EW)((()=>c.value?e("conversation.regenerate"):"最多支持5次回答")),h=(0,n.WQ)("regenerate"),d=()=>{c.value&&(h(),i.sendCl({md:"detail",ct:"retry"}))};return(t,e)=>{const i=(0,n.g2)("el-tooltip");return(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",za,[(0,n.bF)(i,{content:u.value,placement:"top",transition:"none","open-delay":100},{default:(0,n.k6)((()=>[(0,n.Lk)("button",{class:(0,o.C4)(["btn stop flex 11",{disabled:!c.value}]),onClick:d},[e[0]||(e[0]=(0,n.Lk)("img",{src:Na},null,-1)),(0,n.Lk)("span",null,(0,o.v_)(t.$t("conversation.regenerate")),1)],2)])),_:1},8,["content"])],512)),[[r.aG,!l.value]])}}};i(89821);const Ba=(0,bt.A)(Ra,[["__scopeId","data-v-9b16f29a"]]);var Fa=Ba,Ua={name:"ConversationAnswerAnswer",components:{item:Pa,RetryButton:Fa,SearchLoading:dn},props:{index:{type:Number,default:0},item:{type:Object,dafault:()=>{}}},data(){return{isOver:!1,source:"",loadingContent:"搜索分析..."}},computed:{...(0,m.aH)("Conversation",["dataList"]),...(0,m.aH)("DarkMode",["isDarkMode"]),...(0,m.aH)("Glms",["assistantInfo"]),showSearchLoading(){const t=this.$route.params?.id;return this.item.isLoading&&"659e54b1b8006379b4b2abd6"===t}},async mounted(){},beforeUnmount(){},methods:{async newSearch(t){}}};i(64154);const Ha=(0,bt.A)(Ua,[["render",ln],["__scopeId","data-v-490d2b4c"]]);var Wa=Ha,Xa=i(27789);const Ga={class:"copy"},Ya=["disabled"];function Va(t,e,i,r,a,s){const l=(0,n.g2)("ZPThemeImage"),c=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",Ga,[(0,n.bF)(c,{content:t.$t("conversation.clickToCopy"),placement:"top",disabled:!!t.currentOnClickedStatus,transition:"none","open-delay":100},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:(0,o.C4)(["shim copy",{canuse:!t.isSearching,shimGrey:t.currentOnClickedStatus}]),onClick:e[0]||(e[0]=(...t)=>s.copyTxt&&s.copyTxt(...t)),disabled:!!t.currentOnClickedStatus},[(0,n.bF)(l,{imageUrl:"copy_icon_pc"})],10,Ya)])),_:1},8,["content","disabled"])])}var Za={name:"Actions-copy",props:{item:{type:Object,dafault:()=>{}}},data(){return{thumbsUpModelIndex:-1}},computed:{...(0,m.aH)("Conversation",["isSearching","currentOnClickedStatus"])},methods:{copyTxt(){if(this.currentOnClickedStatus)return!1;const t=this.item.answerArray.filter((t=>"function_result"===t.answer_type)).reduce(((t,e)=>{const i=e?.extra||{};return t||"auth"===i.show_type}),!1),e=this.item.answerArray.filter((t=>"text"===t.answer_type||"code"===t.answer_type||"execution_output"===t.answer_type||"image"===t.answer_type)).reduce(((t,e,i,n)=>{let o=e.answer;return"execution_output"===e.answer_type&&(o=e.content),"image"===e.answer_type&&(o=e.image.reduce(((t,e,i,n)=>t+e.image_url+(n!==i.length-1?"\n":"")),"")),t+o.replace(/\n+/g,"\n").replace(wn.$z,"")+(n!==i.length-1?"\n":"")}),""),i=this.item.log_id;e?(this.sendCl({md:"detail",ct:"copy",extra:i}),this.copy(e.replace(/\n+/g,"\n"))):t&&(this.sendCl({md:"detail",ct:"copy",extra:i}),this.copy("你收到了一个API调用消息"))}}};i(17149);const Qa=(0,bt.A)(Za,[["render",Va],["__scopeId","data-v-6b3dad21"]]);var Ja=Qa,qa=i(15602);const $a={class:"down"};function Ka(t,e,i,a,s,l){const c=(0,n.g2)("ZPThemeImage"),u=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",$a,[i.item.is_up?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(u,{key:0,content:t.$t("conversation.like"),placement:"top",disabled:!!t.currentOnClickedStatus,transition:"none","open-delay":10,enterable:!1},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:(0,o.C4)(["shim thumbs-up",{canuse:!t.isSearching,shimGrey:t.currentOnClickedStatus}]),onClick:e[0]||(e[0]=(0,r.D$)((t=>l.thumbsUp(i.item,"good","submit")),["stop"]))},[(0,n.bF)(c,{imageUrl:"thumb_up_pc"})],2)])),_:1},8,["content","disabled"])),i.item.is_up?((0,n.uX)(),(0,n.Wv)(u,{key:1,content:t.$t("conversation.like"),placement:"top",disabled:!!t.currentOnClickedStatus,transition:"none","open-delay":10,enterable:!1},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:"shim thumbs-up-on",title:"点赞成功",onClick:e[1]||(e[1]=(0,r.D$)((t=>l.thumbsUp(i.item,"good","reset")),["stop"]))},[(0,n.bF)(c,{imageUrl:"thumb_up_done"})])])),_:1},8,["content","disabled"])):(0,n.Q3)("",!0),i.item.is_down?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(u,{key:2,content:t.$t("conversation.dislike"),placement:"top",disabled:!!t.currentOnClickedStatus,transition:"none","open-delay":10,enterable:!1},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:(0,o.C4)(["shim thumbs-down",{canuse:!t.isSearching,shimGrey:t.currentOnClickedStatus,"thumbs-selecting":t.thumbsUpModelIndex===i.index}]),onClick:e[2]||(e[2]=(0,r.D$)((t=>l.thumbsUp(i.item,"bad","submit",i.index)),["stop"]))},[(0,n.bF)(c,{imageUrl:"thumb_down_pc"})],2)])),_:1},8,["content","disabled"])),i.item.is_down?((0,n.uX)(),(0,n.Wv)(u,{key:3,content:t.$t("conversation.dislike"),placement:"top","popper-class":"thumbs-down-tooltip",transition:"none","open-delay":10,enterable:!1},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:"shim thumbs-down-on",onClick:e[3]||(e[3]=(0,r.D$)((t=>l.thumbsUp(i.item,"bad","reset",i.index)),["stop"]))},[(0,n.bF)(c,{imageUrl:"thumb_down_done"})])])),_:1},8,["content"])):(0,n.Q3)("",!0)])}var ts={name:"Actions-down",mixins:[ka],props:{index:{type:Number,default:0},item:{type:Object,dafault:()=>{}},exposured:{type:Boolean,dafault:!1}},data(){return{showFeedback:!1}},computed:{...(0,m.aH)("Conversation",["dataList","isSearching","currentOnClickedStatus","thumbsUpModelIndex"]),...(0,m.aH)("Home",["userInfo"])},methods:{thumbsUp(t,e,i,n){if(!this.currentOnClickedStatus)if(this.userInfo?.phone){if("submit"===i){const i=this.exposured?{extra:t.log_id}:{};"bad"===e?this.sendCl({md:"detail",ct:"thumbs_down",...i}):this.sendCl({md:"detail",ct:"thumbs_up",...i})}if("bad"===e&&"submit"===i?(this.$store.commit("Conversation/SET_MODELINDEX",n),this.dataList.length):this.$store.commit("Conversation/SET_MODELINDEX",-1),"share"===this.source)"submit"===i?(t.is_up="good"===e,t.is_down="bad"===e,this.$message.success({message:"good"===e?this.$t("conversation.feedbackSubmittedGood"):this.$t("conversation.feedbackSubmittedBad"),duration:800}),this.isShowReport="bad"===e):(t.is_up=!1,t.is_down=!1,this.$message.success(this.$t("conversation.cancelled")),this.isShowReport=!1),this.$forceUpdate();else{const n=this.exposured?{score_guide:!0}:{};(0,Ca.dE)({task_id:t.log_id,score:e,type:i,...n}).then((n=>{"submit"===i?(t.is_up="good"===e,t.is_down="bad"===e,this.$message.success({message:"good"===e?this.$t("conversation.feedbackSubmittedGood"):this.$t("conversation.feedbackSubmittedBad"),duration:800})):(t.is_up=!1,t.is_down=!1,this.$message.success(this.$t("conversation.cancelled"))),this.$emit("clicked")}))}}else this.showLoginAndApplyDialog=!0}}};i(57657);const es=(0,bt.A)(ts,[["render",Ka],["__scopeId","data-v-1d32b5a8"]]);var is=es;const ns={class:"share"},os=["disabled"];function rs(t,e,i,a,s,l){const c=(0,n.g2)("ZPThemeImage"),u=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",ns,[(0,n.bF)(u,{content:t.$t("conversation.share"),placement:"top",disabled:!!t.currentOnClickedStatus,transition:"none","open-delay":100,enterable:!1},{default:(0,n.k6)((()=>[t.isSensitiveStatus||"news"===i.item.answer_type?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("i",{key:0,class:(0,o.C4)(["shim share",{shimGrey:t.currentOnClickedStatus}]),onClick:e[0]||(e[0]=(0,r.D$)((e=>l.clickShareBtn(i.item,i.index,t.dataList.length)),["stop"])),disabled:!!t.currentOnClickedStatus},[(0,n.bF)(c,{imageUrl:"share_pc"})],10,os))])),_:1},8,["content","disabled"])])}var as=i(72839),ss={name:"Actions-share",mixins:[ka],props:{index:{type:Number,default:0},item:{type:Object,dafault:()=>{}}},data(){return{}},computed:{...(0,m.aH)("Conversation",["dataList","isSearching","currentOnClickedStatus","sharedIdList","clickSession"]),...(0,m.L8)("Conversation",["isSensitiveStatus","lastItem"]),...(0,m.aH)("Home",["userInfo"])},methods:{...(0,m.PY)("Conversation",{setGlmsShare:"SET_GLMS_SHARE",setShareIdList:"SET_SHARE_ID_LIST",setCurrentOnClickedStatus:"SET_CURRENT_ON_CLICKED_STATUS",setShowShareLoginDialog:"SET_SHOW_SHARE_LOGIN_DIALOG"}),async clickShareBtn(t,e,i){if(!this.userInfo?.phone)return this.setShowShareLoginDialog(!0);if(this.isSearching)this.$message.error(this.$t("conversation.isGenerating"));else if(!this.currentOnClickedStatus)try{if(this.isGlmsShare&&this.shareConversationId&&!this.clickSession&&!this.lastItem.conversation_id){const{result:{log_id_list:t,conversation_id:e}={}}=await(0,as.pq)(this.shareConversationId);this.dataList.forEach(((i,n)=>{i.log_id=t[n],i.conversation_id=e}))}this.setGlmsShare(!0),this.setShareIdList({index:e,...t}),this.setCurrentOnClickedStatus(!0),t.onCheckedStatus=!0}catch(n){}}}};i(84006);const ls=(0,bt.A)(ss,[["render",rs],["__scopeId","data-v-6d5c6b19"]]);var cs=ls;const us={class:"regenerate"};var hs={__name:"regenerate",props:{item:{type:Object,default:()=>({})}},setup(t){const{t:e}=L.Ay.global,{proxy:i}=(0,n.nI)(),r=(0,n.WQ)("regenerate"),a=(0,m.Pj)(),s=(0,n.EW)((()=>a.state.Conversation.isSearching)),l=(0,n.EW)((()=>a.state.Conversation.currentOnClickedStatus)),c=(0,n.EW)((()=>a.state.Conversation.dataList)),u=(0,n.EW)((()=>{const t=c.value[c.value?.length-1];return!t?.regens||t?.regens?.length<5})),h=(0,n.EW)((()=>u.value?e("conversation.regenerateResponse"):"最多支持5次回答")),d=(0,Xa.lq)(),g=(0,n.EW)((()=>"/main/alltoolsdetail"===d.path)),p=(0,n.EW)((()=>a.state.Glms.assistantInfo)),f=()=>{const t=p.value?.assistant_id;let e;//! assistantId ?  : `assistant_${assistantId}`
e=g.value?"index_glm4":`assistant_${t}`,(0,E._2)({md:"detail",ct:"change_answer",pds:e})},v=()=>{!s.value&&u.value&&(f(),l.value||r())};return(t,e)=>{const i=(0,n.g2)("ZPThemeImage"),r=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",us,[(0,n.bF)(r,{content:h.value,placement:"top",disabled:!!l.value,transition:"none","open-delay":100},{default:(0,n.k6)((()=>[(0,n.Lk)("i",{class:(0,o.C4)(["shim regenerate",{canuse:!s.value,shimGrey:l.value||!u.value}]),onClick:v},[(0,n.bF)(i,{imageUrl:"regenerate",imageDarkUrl:"regenerate_dark"})],2)])),_:1},8,["content","disabled"])])}}};i(93250);const ds=(0,bt.A)(hs,[["__scopeId","data-v-b5803b0a"]]);var gs=ds,ps=i(84379),fs=i(10889);const ms={class:"first-debug-tips"};function vs(t,e,i,o,a,s){return a.showFirstDebugTips?((0,n.uX)(),(0,n.Wv)(r.eB,{key:0,name:"firstDebug-enter"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",ms,[e[1]||(e[1]=(0,n.Lk)("img",{src:ps,alt:"first-debug",class:"first-debug"},null,-1)),(0,n.Lk)("img",{src:fs,alt:"close-icon",class:"first-debug-close",onClick:e[0]||(e[0]=(...t)=>s.firstDebugClose&&s.firstDebugClose(...t))})])])),_:1})):(0,n.Q3)("",!0)}var bs={name:"Actions-Interact",mixins:[],components:{},props:{index:{type:Number,default:0},item:{type:Object,dafault:()=>{}},interactContainer:{type:String,dafault:""},show:{type:[Number,Boolean],dafault:-1}},data(){return{showFirstDebugTips:!1,timer:null,firstDebugObserver:null,observeTarget:null,firstDebugChecked:!1}},computed:{...(0,m.aH)("Glms",["assistantInfo","createGmlsConfig"]),...(0,m.L8)("Conversation",["isProd"])},watch:{show(t,e){t&&this.checkFirstDebugTips()}},methods:{firstDebugClose(){this.showFirstDebugTips&&(this.showFirstDebugTips=!1,(0,Ta.aI)(this.assistantInfo?.assistant_id))},showFirstDebug(){this.firstDebugChecked||this.item.manualStopStream||this.item.is_sensitive&&!this.item.is_intervene||(this.showFirstDebugTips=this.item?.answerListOutput.some((t=>"rag_slices"===t.answer_type)),this.showFirstDebugTips&&(this.$emit("exposeFirstDebug"),this.firstDebugChecked=!0,this.timer=setTimeout((()=>{this.firstDebugClose()}),3e3)))},checkFirstDebugTips(){const t=this.createGmlsConfig?.Knowledge_tips?.is_open;if(this.isProd||!t||!(0,Ta.UP)(this.assistantInfo?.assistant_id))return;const e={root:null,rootMargin:"0px",threshold:1};this.firstDebugObserver=new IntersectionObserver((t=>{t[0].intersectionRatio<=0||this.showFirstDebug()}),e),this.observeTarget=document.querySelector(`#${this.interactContainer}`),this.firstDebugObserver.observe(this.observeTarget)}},beforeUnmount(){clearTimeout(this.timer),this.observeTarget&&this.firstDebugObserver&&this.firstDebugObserver?.unobserve(this.observeTarget)}};i(22035);const xs=(0,bt.A)(bs,[["render",vs],["__scopeId","data-v-ca92b9d4"]]);var ys=xs,_s=i(61141);const ws={class:"regenerate"},ks=["src"],Cs=["src"];var Ss={__name:"answerSwitch",props:{item:{type:Object,default:()=>({})},regens:{type:Array,default:()=>[]}},setup(t){const{proxy:e}=(0,n.nI)(),r=(0,m.Pj)(),a=(i(38263),(0,B.KR)(".conversation-list"),(0,n.EW)((()=>r.state.Conversation.isSearching))),s=(0,n.EW)((()=>r.state.Conversation.currentOnClickedStatus)),l=(0,n.EW)((()=>r.state.Conversation.dataList)),c=(0,n.EW)((()=>{const t=l.value[l.value?.length-1];return t})),u=(0,n.EW)({get:()=>c.value.curIndex,set:t=>{const e=l.value[l.value?.length-1];e.curIndex=t}}),h=(0,n.EW)((()=>c.value?.regens?.length)),d=(0,Xa.lq)(),g=(0,n.EW)((()=>"/main/alltoolsdetail"===d.path)),f=(0,n.EW)((()=>0===u.value)),v=(0,n.EW)((()=>u.value===c.value?.regens?.length-1)),b=(0,n.EW)((()=>r.state.DarkMode.isDarkMode)),x=(0,n.EW)((()=>r.state.Glms.assistantInfo)),y=(0,n.EW)((()=>{const t=b.value?i(43414):i(38263);return t})),_=(0,n.EW)((()=>{const t=b.value?i(35388):i(3021);return t})),w=()=>{s.value||0!==u.value&&(u.value--,c.value.curIndex=u.value,S())},k=()=>{s.value||u.value>=h.value-1||(u.value++,c.value.curIndex=u.value,S())},C=()=>{const t=x.value?.assistant_id;let e;//! assistantId ?  : `assistant_${assistantId}`
e=g.value?"index_glm4":`assistant_${t}`,(0,E._2)({md:"detail",ct:"change_num",pds:e})},S=()=>{C();const t=c.value,e=t.regens;e.forEach((e=>{e.id===t.id&&(e.is_up=t.is_up,e.is_down=t.is_down)}));const i=e[u.value],{recommandState:n}=(0,_s.a)();i.question=t.question,i.regen=!0,i.forbidden=!1,p.A.$emit("switch_answer",i.id),l.value[l.value.length-1]={...i,curIndex:u.value,regens:e}};return(t,e)=>((0,n.uX)(),(0,n.CE)("div",ws,[(0,n.Lk)("i",{class:(0,o.C4)(["btn regenerate",{canuse:!a.value,disabled:f.value||s.value}]),onClick:w},[(0,n.Lk)("img",{src:y.value},null,8,ks)],2),(0,n.Lk)("span",{class:(0,o.C4)(["indicator",{disabled:s.value}])},(0,o.v_)(u.value+1)+"/"+(0,o.v_)(h.value),3),(0,n.Lk)("i",{class:(0,o.C4)(["btn regenerate",{canuse:!a.value,disabled:v.value||s.value}]),onClick:k},[(0,n.Lk)("img",{src:(s.value,_.value)},null,8,Cs)],2)]))}};i(12951);const Is=(0,bt.A)(Ss,[["__scopeId","data-v-c8311c8e"]]);var Ms=Is;const Ts=["id"],Es={class:"tip"},As={class:"interact-operate"},Ds={class:"flex"},Ls={class:"flex"},Os={class:"line"};var js={__name:"Interact",props:{index:{type:Number,default:0},item:{type:Object,default:()=>({})}},setup(t){const{t:e}=L.Ay.global,i=(0,m.Pj)(),a=(0,Xa.lq)(),{proxy:s}=(0,n.nI)(),l=t,c=(0,B.KR)(`interactContainer-${l.item.log_id}`),u=(0,B.KR)(!1),h=(0,B.KR)(null),d=((0,n.EW)((()=>i.state.Conversation.isSearching)),(0,n.EW)((()=>i.state.Conversation.currentOnClickedStatus)),(0,n.EW)((()=>i.state.Conversation.isSensitiveStatus)),(0,n.EW)((()=>i.state.Conversation.thumbsUpModelIndex))),g=(0,n.EW)((()=>i.state.Conversation.clickSession)),p=(0,n.EW)((()=>i.state.Conversation.dataList)),f=(0,n.EW)((()=>i.state.Conversation.highSensitive)),v=(0,n.EW)((()=>{const{index:t}=l;return t===p.value.length-1})),b=(0,n.EW)((()=>i.state.Home?.userInfo)),x=(0,n.EW)((()=>{const t=l.item,e=a.params.id,i=["66a1c8f8d042e99383005c12","66c33d33d02b0a044cdfffc9"],n=(t.printComleted||t.manualStopStream)&&!t.forbidden&&t.answerArray.length&&!i.includes(e);return n})),y=(0,n.EW)((()=>g)),_=(0,n.EW)((()=>g&&"Glms"!==a.name)),w=(0,n.EW)((()=>a?.query?.is_share)),k=()=>{i.commit("Conversation/SET_MODELINDEX",-1)},C=()=>{h.value?.firstDebugClose(),u.value=!1},S=t=>{const n=l.item,o=u.value?{score_guide:!0}:{};(0,Ca.dE)({task_id:n.log_id,score:"bad",type:"submit",...t,institution:b.value?.institution,...o}).then((t=>{n.is_up=!1,n.is_down=!0,s.$message.success(e("conversation.submited")),i.commit("Conversation/SET_MODELINDEX",-1)}))};return(0,n.sV)((()=>{document.addEventListener("click",k)})),(0,n.xo)((()=>{document.removeEventListener("click",k)})),(e,i)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)({"interact-container":x.value}),id:c.value},[x.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)(["interact",{interact_reset_padding:t.item.manualStopStream}]),style:(0,o.Tr)("margin-top: 0; display: "+(p.value.length-1===t.index||d.value===t.index?"flex":"none")),ref:"interact"},[(0,n.bo)((0,n.Lk)("div",Es,i[1]||(i[1]=[(0,n.Lk)("span",null,"以上内容为 AI 生成，不代表开发者立场，请勿删除或修改本标记",-1)]),512),[[r.aG,t.item.answer]]),(0,n.bo)((0,n.Lk)("div",As,[(0,n.bo)((0,n.Lk)("div",Ds,[y.value&&!w.value?((0,n.uX)(),(0,n.Wv)(is,{key:0,item:t.item,index:t.index,exposured:u.value,onClicked:C},null,8,["item","index","exposured"])):(0,n.Q3)("",!0),(0,n.bF)(Ja,{item:t.item},null,8,["item"]),!_.value||w.value||f.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(cs,{key:1,item:t.item,index:t.index},null,8,["item","index"]))],512),[[r.aG,!t.item.manualStopStream&&!t.item.isOnError]]),(0,n.bo)((0,n.Lk)("div",Ls,[(0,n.bo)((0,n.Lk)("div",Os,null,512),[[r.aG,!t.item.manualStopStream&&!t.item.isOnError]]),(0,n.bo)((0,n.bF)(gs,{item:t.item,index:t.index},null,8,["item","index"]),[[r.aG,!t.item.manualStopStream&&!t.item.isOnError]]),(0,n.bo)((0,n.bF)(Ms,{item:t.item},null,8,["item"]),[[r.aG,t.item?.regens?.length>1]])],512),[[r.aG,v.value&&!w.value&&!f.value]])],512),[[r.aG,!t.item.is_sensitive||t.item.is_intervene]])],6)):(0,n.Q3)("",!0),d.value===t.index?((0,n.uX)(),(0,n.Wv)(qa.A,{key:1,class:"thumbs-up",source:e.source,onClose:k,onSubmit:S},null,8,["source"])):(0,n.Q3)("",!0),(0,n.bF)(ys,{item:t.item,show:x.value,ref_key:"downGuideRef",ref:h,interactContainer:c.value,onExposeFirstDebug:i[0]||(i[0]=t=>u.value=!0)},null,8,["item","show","interactContainer"])],10,Ts))}};i(2394);const Ps=(0,bt.A)(js,[["__scopeId","data-v-7339bc8f"]]);var Ns=Ps,zs=i(83458);const Rs=["id"],Bs={class:"robotIcon"},Fs={key:1,class:"glm4Avatar"},Us={key:1,class:"glmsChatAvatar"},Hs={class:"answer-content flex1"},Ws={class:"assistant-name"},Xs={class:"label"},Gs={src:on,alt:""},Ys={src:rn,alt:""},Vs={key:0,class:"error-box"};var Zs={__name:"index",props:{index:{type:Number,default:0},item:{type:Object,dafault:()=>{}}},setup(t){const e=(0,Xa.lq)(),i=t,a=(0,n.EW)((()=>zs.A.state.DarkMode.isDarkMode)),s=["img2img","img","image"],l=["gdetail","Glms","GlmsShare"],c=(0,B.KR)(-1),u=(0,B.KR)(""),h=((0,n.EW)((()=>{const{item:t}=i;return t.answerList})),(0,n.EW)((()=>{const{item:t}=i,n=t?.meta_data||{};return n.mention_assistant_name?n.mention_assistant_name:zs.A.state?.Glms?.assistantInfo?.name&&l.includes(e.name)?zs.A.state?.Glms?.assistantInfo?.name:"ChatGLM"}))),d=(0,n.EW)((()=>{const{item:t}=i,n=t?.meta_data||{};return n.mention_assistant_avatar?n.mention_assistant_avatar:zs.A.state?.Glms?.assistantInfo?.avatar&&l.includes(e.name)?zs.A.state?.Glms?.assistantInfo?.avatar:""})),g=(0,n.EW)((()=>{const t=zs.A.state.Glms?.assistantInfo?.assistant_id;return"659e54b1b8006379b4b2abd6"===t}));return(0,n.sV)((()=>{const t=window.location.pathname;u.value="/main/alltoolsdetail"===t?"glm4":"glms"})),(e,i)=>{const l=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"answer",id:"row-answer-"+t.index},[(0,n.Lk)("div",{class:(0,o.C4)(["panel",{"thumsp-down":t.index===c.value}])},[(0,n.Lk)("div",{class:(0,o.C4)(["flex flex-x-between flex-y-start",{"answer-loading":t.item.isLoading}])},[(0,n.Lk)("div",Bs,[d.value?((0,n.uX)(),(0,n.Wv)(l,{key:0,class:"avatar_wrap",content:h.value,placement:"top"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,o.C4)(["glmsChatAvatar",{isLoading:t.item.isLoading&&!g.value}]),style:(0,o.Tr)({backgroundImage:"url("+d.value+")"})},null,6)])),_:1},8,["content"])):"glm4"===u.value?((0,n.uX)(),(0,n.CE)("div",Fs,[t.item.isLoading&&-1===s.indexOf(t.item.answer_type)?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)([a.value?"loadingIcon-dark":"loadingIcon"])},null,2)):t.item?.regen?((0,n.uX)(),(0,n.CE)("div",Us)):((0,n.uX)(),(0,n.CE)("div",{key:2,class:(0,o.C4)(["robotEmerge",{"robotEmerge-dark":a.value}])},null,2))])):((0,n.uX)(),(0,n.CE)("div",{key:2,class:(0,o.C4)(["glmsChatAvatar",{isLoading:t.item.isLoading}]),style:(0,o.Tr)(d.value?{backgroundImage:"url("+d.value+")"}:{})},null,6))]),(0,n.Lk)("div",Hs,[(0,n.Lk)("div",Ws,[(0,n.Lk)("span",null,(0,o.v_)(h.value),1),(0,n.Lk)("span",Xs,[(0,n.bo)((0,n.Lk)("img",Gs,null,512),[[r.aG,a.value]]),(0,n.bo)((0,n.Lk)("img",Ys,null,512),[[r.aG,!a.value]])])]),(0,n.bF)(Wa,{item:t.item,index:t.index},null,8,["item","index"]),t.item.errorType?((0,n.uX)(),(0,n.CE)("div",Vs,(0,o.v_)(t.item.errorText?t.item.errorText:(0,B.R1)(Ci.F3).default),1)):(0,n.Q3)("",!0),(0,n.bF)(Ns,{item:t.item,index:t.index},null,8,["item","index"])])],2)],2)],8,Rs)])}}};i(6527),i(95677);const Qs=(0,bt.A)(Zs,[["__scopeId","data-v-7d75bd00"]]);var Js=Qs,qs=i(80412),$s=i(9781),Ks={name:"ConversationItem",components:{Question:nn,Answer:Js,FollowUp:qs.A},props:{index:{type:Number,default:0},isShowQuestionTip:{type:Boolean,default:!0},isGlmShare:{type:Boolean,default:!1}},data(){return{isGlm4:"/main/alltoolsdetail"===this.$route.path,SpecialMsgDic:Ci.F3}},computed:{...(0,m.aH)("Conversation",["dataList","clickSession","highSensitive","new_ai_search_conversation"]),...(0,m.aH)("Glms",["assistantInfo"]),item(){return this.dataList[this.index]},showHint(){const t=this.$route.params?.id;return!1===this.new_ai_search_conversation&&"659e54b1b8006379b4b2abd6"===t}},setup(){const{createSession:t}=(0,$s.o)();return{createSession:t}},methods:{newSession(){this.createSession?.()}},created(){},async mounted(){},beforeUnmount(){}};i(38572);const tl=(0,bt.A)(Ks,[["render",ki],["__scopeId","data-v-71df4e0a"]]);var el=tl,il=i(42551),nl=(i(19856),i(21607)),ol=i(9905),rl=i(66333),al=i(44334),sl=i(13757),ll=i(90012);const cl=i(55026),ul=i(90503),{editTypes:hl}=(0,ll.J)(),dl=(0,B.KR)(hl[0].value),gl=(0,B.KR)(null),pl=(0,B.KR)(null),fl=(0,B.KR)(!0),ml=(0,B.KR)(!0),vl=(0,B.KR)(30),bl=()=>{fl.value=gl.value?.isEmptyUndoStack(),ml.value=gl.value?.isEmptyRedoStack()},xl=()=>{gl.value.on("undoStackChanged",(t=>{bl()})),gl.value.on("objectAdded",(t=>{})),gl.value.on("objectMoved",(t=>{})),gl.value.on("objectActivated",(t=>{})),gl.value.on("objectAdded",(t=>{})),pl.value?.addEventListener("click",(()=>{}))},yl=async()=>{gl.value?.stopDrawingMode(),"brush"===dl.value?gl.value.startDrawingMode("FREE_DRAWING",{color:"rgba(36, 84, 255, 0.50)",width:vl.value}):"rect"===dl.value?(gl.value.startDrawingMode("SHAPE"),gl.value.setDrawingShape("rect",{fill:"rgba(64, 129, 255, 0.40)",stroke:"white",strokeWidth:0,strokeStyle:"dash",isRegular:!0})):"circle"===dl.value&&(gl.value.startDrawingMode("SHAPE"),gl.value.setDrawingShape("circle",{fill:"rgba(64, 129, 255, 0.40)",stroke:"white",strokeWidth:0,strokeStyle:"dash",isRegular:!0}));while(await(gl.value?.undo()))gl.value?.undo();gl.value?.clearUndoStack(),gl.value?.clearRedoStack(),bl()},_l=()=>{(0,n.dY)((async()=>{if(!pl.value)return;gl.value&&(gl.value.destroy(),gl.value=null);const t=Math.min(pl.value?.offsetWidth,pl.value?.offsetHeight);gl.value=new cl(pl.value,{cssMaxWidth:t,cssMaxHeight:t,selectionStyle:{cornerSize:10,cornerStyle:"circle",cornerColor:"white",cornerStrokeColor:"white",lineWidth:1,borderColor:"white",rotatingPointOffset:0}});const e=document.querySelector(".tui-image-editor-canvas-container"),i=e.querySelectorAll("canvas");Array.from(i).forEach((e=>{e.width=t,e.height=t,e.style.width=`${t}px`,e.style.height=`${t}px`,e.style.maxWidth=`${t}px`,e.style.maxHeight=`${t}px`}));const n=await(0,sl.ey)(ul,t,t),o=(0,sl.Xz)(n,"transparentImage.png");setTimeout((()=>{gl.value?.loadImageFromFile(o,"transparentImage").then((t=>{xl(),yl()}))}),100)}))},wl=t=>{const e=pl.value.querySelector(".tui-image-editor-canvas-container");e?.contains(t.target)||gl.value?.deactivateAll()},kl=async()=>{await(gl.value?.undo());bl()},Cl=async()=>{await(gl.value?.redo());bl()},Sl=()=>{bl(),gl.value?.clearObjects(),gl.value?.clearUndoStack(),gl.value?.clearRedoStack(),gl.value?._initHistory(),gl.value?._clearHistory(),gl.value?.destroy(),gl.value=null,_l()};function Il(){return{editorInstance:gl,currentEditType:dl,editorElement:pl,undoStackIsEmpty:fl,redoStackIsEmpty:ml,lineWidth:vl,repaint:Sl,setEmptyStatus:bl,initImageEditor:_l,revoke:kl,redo:Cl,cancelActive:wl}}const Ml={key:0,class:"vip-tips-modal"},Tl={class:"vip-tips"},El={class:"desc-text"};var Al={__name:"vipTip",setup(t){const e=(0,Xa.rd)(),{showVipTip:i,clickTab:r}=(0,rl.B)(),{curTab:a,curTabName:s,dealCurImage:l}=(0,al.g)(),{EnumKeys:c,tabs:u}=(0,ll.J)(),{editorInstance:h,initImageEditor:d}=Il(),g=(0,m.Pj)(),p=(0,n.EW)((()=>2===g.state?.Home?.userInfo?.member_info?.member_status)),f={[c.repaint]:"局部修改，轻松实现PS",[c.hd]:"高清重绘，增强清晰度"},v=(0,n.EW)((()=>f[r.value]||f[c.repaint])),b=()=>{(0,E._2)({md:"pay_point",ct:"click",pds:"cogview",ctvl:s.value,extra:"popup_close"}),i.value=!1,a.value=u[0].key,l(!0),h.value?.destroy(),h.value=null},x=()=>{(0,E._2)({md:"pay_point",ct:"click",pds:"cogview",ctvl:s.value,extra:"立即开通"}),e.push({path:"/pay/goods",query:{from:"imageEdit"}})};return(0,n.wB)(p,(t=>{t&&(i.value=!1,a.value===c.repaint&&d())}),{immediate:!0}),(t,e)=>(0,B.R1)(i)?((0,n.uX)(),(0,n.CE)("div",Ml,[(0,n.Lk)("div",Tl,[e[0]||(e[0]=(0,n.Lk)("img",{src:ol,alt:""},null,-1)),(0,n.Lk)("div",El,(0,o.v_)(v.value),1),(0,n.Lk)("div",{class:"goVip",onClick:x}," "),(0,n.Lk)("div",{class:"close",onClick:b}," ")])])):(0,n.Q3)("",!0)}};i(36761);const Dl=(0,bt.A)(Al,[["__scopeId","data-v-6dcb0f5f"]]);var Ll=Dl,Ol=i(84277),jl=i(17384),Pl=i(32788);const Nl=(0,B.KR)(!1),zl=(0,B.KR)(!1),Rl=()=>{const t=document.querySelector(".custom-swiper");t.scrollWidth>t.offsetWidth?t.scrollLeft+t.offsetWidth>=t.scrollWidth?(Nl.value=!0,zl.value=!1):0===t.scrollLeft?(Nl.value=!1,zl.value=!0):(Nl.value=!0,zl.value=!0):(Nl.value=!1,zl.value=!1)},Bl=()=>{const t=document.querySelector(".custom-swiper"),e=document.querySelector(".swiper-slide-active");e&&t.scrollTo({left:e.offsetLeft-t.offsetWidth/2+e.offsetWidth/2,behavior:"smooth"})},Fl=()=>{Rl();const t=document.querySelector(".custom-swiper");t.addEventListener("scroll",Rl)};function Ul(){return{leftCanClick:Nl,rightCanClick:zl,initObserver:Fl,slideScrollToView:Bl}}const Hl={class:"swiper-container"},Wl={class:"swiper-content"},Xl={key:0,src:Ol,alt:"left"},Gl={key:1,src:jl,alt:"left"},Yl={class:"custom-swiper"},Vl=["src","onClick"],Zl={key:0,src:Pl,class:"origin-tag",alt:"原图"},Ql={key:0,src:Ol,alt:"right"},Jl={key:1,src:jl,alt:"right"};var ql={__name:"imageSwiper",setup(t){const{showEdit:e,curImage:i,curTabImages:a,originImage:s,curTab:l,isLoading:c,images:u,getCacheImage:h,dealCurImage:d}=(0,al.g)(),{EnumKeys:g}=(0,ll.J)(),{leftCanClick:p,rightCanClick:f,slideScrollToView:v}=Ul(),{repaint:b}=Il(),x=(0,m.Pj)(),y=(0,n.EW)((()=>x.state.DarkMode.isDarkMode)),_=(0,n.EW)((()=>{const t=u[l.value],e=d();return[e,...t]})),w=t=>{const e=document.querySelector(".custom-swiper");e.scrollTo({left:e.scrollLeft+e.offsetWidth*t,behavior:"smooth"})},k=t=>{c.value?nl.nk.warning("重绘中，请稍后尝试"):(i.value.includes(t)||l.value!==g.repaint||b(),i.value=t)},C=(t,e)=>t.length===e.length+1&&e.every(((e,i)=>e===t[i]));return(0,n.wB)(_,((t,i)=>{e.value&&(C(t,i)||!a[l.value]?k(t[t.length-1]):k(a[l.value]),(0,n.dY)((()=>{v()})))})),(t,e)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",Hl,[(0,n.Lk)("div",Wl,[(0,n.Lk)("div",{class:(0,o.C4)(["swiper-page",(0,B.R1)(p)?"swiper-page-prev":""])},[(0,n.bo)((0,n.Lk)("div",{class:"swiper-prev",onClick:e[0]||(e[0]=t=>w(-1))},[y.value?((0,n.uX)(),(0,n.CE)("img",Xl)):((0,n.uX)(),(0,n.CE)("img",Gl))],512),[[r.aG,(0,B.R1)(p)]])],2),(0,n.Lk)("div",Yl,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(_.value,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:(0,o.C4)(["swiper-slide",t.includes((0,B.R1)(i))?"swiper-slide-active":""])},[(0,n.Lk)("img",{src:(0,B.R1)(h)(t),alt:"",onClick:e=>k(t),class:"swiper-img"},null,8,Vl),t.includes((0,B.R1)(s))?((0,n.uX)(),(0,n.CE)("img",Zl)):(0,n.Q3)("",!0)],2)))),128))]),(0,n.Lk)("div",{class:(0,o.C4)(["swiper-page",(0,B.R1)(f)?"swiper-page-next":""])},[(0,n.bo)((0,n.Lk)("div",{class:"swiper-next",onClick:e[1]||(e[1]=t=>w(1))},[y.value?((0,n.uX)(),(0,n.CE)("img",Ql)):((0,n.uX)(),(0,n.CE)("img",Jl))],512),[[r.aG,(0,B.R1)(f)]])],2)])],512)),[[r.aG,(0,B.R1)(l)!==(0,B.R1)(g).origin]])}};i(65210);const $l=(0,bt.A)(ql,[["__scopeId","data-v-96a88a54"]]);var Kl=$l,tc=i(62835),ec=i.p+"media/case.4fad23bf.mp4";const ic={class:"editor-bar"},nc=["src"],oc=["src"],rc={class:"editor-wrapper"},ac=["src"],sc={key:0,class:"loading-mask"},lc=["src"],cc={class:"absolute-area"},uc={key:0,src:tc,alt:"loading"},hc={key:1,src:ec,autoplay:"",loop:"",muted:""};var dc={__name:"editor",setup(t){const e=(0,m.Pj)(),{EnumKeys:a}=(0,ll.J)(),{curTab:s,isLoading:l,getCacheImage:c,stopGenerate:u}=(0,al.g)(),{editorElement:h,editorInstance:d,undoStackIsEmpty:g,redoStackIsEmpty:p,lineWidth:f,currentEditType:v,revoke:b,redo:x}=Il(),y=()=>{const t=document.querySelector(".editor-wrapper .image"),e=document.querySelector(".editor-wrapper .loading-mask .invisible");t&&e&&(e.style.width=`${t.offsetWidth}px`,e.style.height=`${t.offsetHeight}px`)};(0,n.wB)(l,(t=>{t&&(0,n.dY)((()=>{y()}))}),{immediate:!0});const _=i(26541),w=async(t=f.value)=>{const e=await(0,sl.aD)(_,t),i=`url(${e}) ${t/2} ${t/2}, crosshair !important;`;let n=document.getElementById("image-edit-canvas-cursor-style");n?n.innerHTML=`.editor-area .editor-content .editor-wrapper .editor canvas { cursor: ${i}; }`:(n=document.createElement("style"),n.id="image-edit-canvas-cursor-style",n.innerHTML=`.editor-area .editor-content .editor-wrapper .editor canvas { cursor: ${i}; }`,document.head.appendChild(n))};(0,n.wB)(v,(t=>{if("brush"===t)w(f.value);else{const t=document.getElementById("image-edit-canvas-cursor-style");t&&t.remove()}(0,n.dY)((()=>{const t=document.querySelector(".operation-area .prompt-text-area textarea");t&&t.focus()}))}),{immediate:!0}),(0,n.wB)(f,(t=>{d.value?.setBrush({width:t}),w(t)}),{immediate:!0});const k=(0,n.EW)((()=>e.state.DarkMode.isDarkMode));(0,n.sV)((()=>{window.addEventListener("resize",y)})),(0,n.hi)((()=>{window.removeEventListener("resize",y)}));const C=(0,n.EW)((()=>{const t=k.value?i(90689):i(29320);return t})),S=(0,n.EW)((()=>{const t=k.value?i(80799):i(41694);return t}));return(t,e)=>{const i=(0,n.g2)("el-button");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bo)((0,n.Lk)("div",ic,[(0,B.R1)(s)===(0,B.R1)(a).repaint?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(i,{onClick:(0,B.R1)(b),class:(0,o.C4)(["btn",{isDisabled:(0,B.R1)(l)||(0,B.R1)(g)}]),text:"",disabled:(0,B.R1)(g)},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:C.value,alt:"undo"},null,8,nc),e[3]||(e[3]=(0,n.Lk)("span",null,"撤销",-1))])),_:1},8,["onClick","disabled","class"]),(0,n.bF)(i,{onClick:(0,B.R1)(x),class:(0,o.C4)(["btn",{isDisabled:(0,B.R1)(l)||(0,B.R1)(p)}]),text:"",disabled:(0,B.R1)(p)},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:S.value,alt:"repaint"},null,8,oc),e[4]||(e[4]=(0,n.Lk)("span",null,"重做",-1))])),_:1},8,["onClick","disabled","class"])],64)):(0,n.Q3)("",!0)],512),[[r.aG,(0,B.R1)(s)!==(0,B.R1)(a).origin]]),(0,n.Lk)("div",{class:(0,o.C4)(["editor-content",(0,B.R1)(s)!==(0,B.R1)(a).origin?"repaint-content":""])},[(0,n.Lk)("div",rc,[(0,n.Lk)("div",{ref_key:"editorElement",ref:h,class:"editor"},null,512),(0,n.Lk)("img",{class:"image",src:(0,B.R1)(c)(),alt:"",onError:e[0]||(e[0]=(...t)=>(0,B.R1)(sl.Us)&&(0,B.R1)(sl.Us)(...t)),onLoad:e[1]||(e[1]=(...t)=>(0,B.R1)(sl.OE)&&(0,B.R1)(sl.OE)(...t))},null,40,ac),(0,B.R1)(l)?((0,n.uX)(),(0,n.CE)("div",sc,[(0,n.Lk)("img",{src:(0,B.R1)(c)(),alt:"",class:"invisible"},null,8,lc),(0,n.Lk)("div",cc,[(0,B.R1)(s)===(0,B.R1)(a).hd?((0,n.uX)(),(0,n.CE)("img",uc)):(0,B.R1)(s)===(0,B.R1)(a).repaint?((0,n.uX)(),(0,n.CE)("video",hc)):(0,n.Q3)("",!0),e[5]||(e[5]=(0,n.Lk)("p",null,"正在努力生成，您可以听个小曲等一等",-1)),(0,n.Lk)("div",{class:"stop-generate",onClick:e[2]||(e[2]=(...t)=>(0,B.R1)(u)&&(0,B.R1)(u)(...t))},"停止生成")])])):(0,n.Q3)("",!0)])],2)],64)}}};i(26430),i(6832);const gc=(0,bt.A)(dc,[["__scopeId","data-v-319164be"]]);var pc=gc,fc=i(82735),mc=i(90172),vc=i(67869),bc=i(51729);const{t:xc}=L.Ay.global,{EnumKeys:yc}=(0,ll.J)(),{repaint:_c,editorInstance:wc,currentEditType:kc,undoStackIsEmpty:Cc}=Il(),{images:Sc,curImage:Ic,originImage:Mc,originPrompt:Tc,curTabName:Ec,isLoading:Ac,curTab:Dc,controller:Lc}=(0,al.g)(),Oc=(0,B.Kh)({prompt:"",image_url:"",mask_url:""}),jc=(0,B.KR)(""),Pc=(t,e)=>{kc.value!==t&&_c(),kc.value=t,(0,E._2)({md:"part_fix",ct:"click",pds:"cogview",ctvl:"局部修改",extra:e})};let Nc=null;const zc=200,Rc=(0,B.KR)(""),Bc=(0,n.EW)((()=>jc.value.trim()&&!Cc.value)),Fc=async()=>{if(Bc.value){(0,E._2)({md:"part_fix",ct:"search_start",pds:"cogview",ctvl:"局部修改"}),Nc=setTimeout((()=>{Ac.value=!0}),zc),Rc.value=wc.value.toDataURL();try{const t=await(0,sl.WK)(Rc.value),e=(0,sl.Xz)(t,"editedImage.png"),{result:i}=await(0,sl.QM)(e),n={prompt:jc.value,image_url:Ic.value.split("?")[0],mask_url:i.file_url};Lc.value=new AbortController;const o=await(0,bc.P)(n,Lc.value.signal);10031===o.status?nl.nk.warning("内容敏感，请修改重试"):(jc.value="",Oc.prompt=n.prompt,Oc.image_url=n.image_url,Oc.mask_url=n.mask_url,o.result?.file_url&&Sc[Dc.value].push(o.result.file_url))}catch(t){}finally{clearTimeout(Nc),Ac.value=!1}}},Uc=(0,n.EW)((()=>Object.keys(Oc).every((t=>Oc[t])))),Hc=async()=>{if(!Ac.value&&Uc.value)try{(0,E._2)({md:"afresh",ct:"click",pds:"cogview",ctvl:"局部修改"}),Nc=setTimeout((()=>{Ac.value=!0}),zc),Lc.value=new AbortController;const t=await(0,bc.P)(Oc,Lc.value.signal);Sc[Dc.value].push(t.result?.file_url)}catch(t){}finally{clearTimeout(Nc),Ac.value=!1}},Wc=(0,n.EW)((()=>Sc[yc.hd].length>0)),Xc=(0,n.EW)((()=>!Ic.value.includes(Mc.value))),Gc=async()=>{if(Ac.value)nl.nk.warning("正在生成");else try{(0,E._2)({md:Wc.value?"afresh":"create",ct:"click",pds:"cogview",ctvl:"高清重绘"}),Nc=setTimeout((()=>{Ac.value=!0}),zc),Lc.value=new AbortController;const t=await zs.A.dispatch("CloudKnowledge/downloadHD",{src_img:Mc.value.split("?")[0],prompt:Tc.value||"",signal:Lc.value.signal});Sc[Dc.value].push(t.result?.img_url)}catch(t){}finally{clearTimeout(Nc),Ac.value=!1}},Yc=(0,n.EW)((()=>Sc[Dc.value].length>0)),Vc=async()=>{if(!Ac.value&&(Dc.value===yc.origin||Yc.value)){(0,E._2)({md:"download",ct:"click",pds:"cogview",ctvl:Ec.value});try{A.MA?(0,sl.Ed)(Ic.value):(await(0,sl.Ay)(Ic.value),nl.nk.success(xc("conversation.downloadSuccess")))}catch(t){nl.nk.error("下载失败")}}};function Zc(){return{lastSearchParams:Oc,prompt:jc,canSearch:Bc,canRetry:Uc,handleChangeType:Pc,handleSearch:Fc,retry:Hc,hasHd:Wc,curIsHd:Xc,generateHd:Gc,canDownload:Yc,downloadFile:Vc}}const Qc={class:"operation-area"},Jc={class:"operation-title"},qc=["src"],$c={key:0,class:"operation-example"},Kc=["src"],tu=["src"],eu={key:1,class:"operation-example"},iu=["src","alt"],nu=["src","alt"],ou={key:0,class:"slider-area"},ru={class:"prompt-text-area"},au=["src"],su={class:"btn-area"},lu=["src"];var cu={__name:"operation",setup(t){const{titleMap:e,EnumKeys:r,editTypes:a}=(0,ll.J)(),{curTab:s,isLoading:l}=(0,al.g)(),{prompt:c,canSearch:u,canRetry:h,canDownload:d,hasHd:g,curIsHd:p,handleChangeType:f,handleSearch:v,retry:b,downloadFile:x,generateHd:y}=Zc(),_=(0,m.Pj)(),{lineWidth:w,undoStackIsEmpty:k,currentEditType:C}=Il(),S=(0,n.EW)((()=>_.state.DarkMode.isDarkMode)),I=(0,n.EW)((()=>{const t=S.value?i(62593):i(77024);return t})),M=(0,n.EW)((()=>{const t=S.value?i(95935):i(74828);return t})),T=(0,n.EW)((()=>{const t=S.value?i(4663):i(2600);return t})),E=(0,n.EW)((()=>{const t=S.value?i(3656):i(75899);return t}));return(t,i)=>{const m=(0,n.g2)("el-radio-button"),_=(0,n.g2)("el-radio-group"),k=(0,n.g2)("el-slider"),A=(0,n.g2)("el-input"),D=(0,n.g2)("el-button");return(0,n.uX)(),(0,n.CE)("div",Qc,[(0,n.Lk)("p",Jc,[(0,n.eW)((0,o.v_)((0,B.R1)(e)[(0,B.R1)(s)].title),1),(0,B.R1)(e)[(0,B.R1)(s)].isBeta?((0,n.uX)(),(0,n.CE)("img",{key:0,src:T.value,alt:"beta"},null,8,qc)):(0,n.Q3)("",!0)]),(0,B.R1)(s)!==(0,B.R1)(r).repaint?((0,n.uX)(),(0,n.CE)("div",$c,[(0,B.R1)(s)===(0,B.R1)(r).origin?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[i[9]||(i[9]=(0,n.Fv)('<div class="img-wrapper"><p>局部修改</p><img class="example-img" src="'+fc+'" alt=""><p class="mt-10">高清重绘</p><img class="example-img" src="'+mc+'" alt=""></div><div class="example-text"> 可下载原图，或加入VIP会员使用“局部修改”和“高清重绘”进行二次创作。 </div>',2)),(0,n.Lk)("div",{class:"btn download-btn",onClick:i[0]||(i[0]=(...t)=>(0,B.R1)(x)&&(0,B.R1)(x)(...t))},i[8]||(i[8]=[(0,n.Lk)("img",{src:vc,alt:""},null,-1),(0,n.eW)(" 下载图片 ")]))],64)):(0,n.Q3)("",!0),(0,B.R1)(s)===(0,B.R1)(r).hd?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[i[11]||(i[11]=(0,n.Lk)("div",{class:"img-wrapper"},[(0,n.Lk)("img",{class:"example-img",src:mc,alt:""}),(0,n.Lk)("div",{class:"example-text mt-0"}," 轻松放大图像，增强清晰度与画面丰富度。非常适合细化细节或提升图像纹理。 ")],-1)),(0,n.Lk)("div",{class:(0,o.C4)(["btn hd-btn",{isLoading:(0,B.R1)(l)}]),onClick:i[1]||(i[1]=(...t)=>(0,B.R1)(y)&&(0,B.R1)(y)(...t))},[(0,B.R1)(g)&&(0,B.R1)(p)?((0,n.uX)(),(0,n.CE)("img",{key:0,src:I.value,alt:""},null,8,Kc)):((0,n.uX)(),(0,n.CE)("img",{key:1,src:M.value,alt:""},null,8,tu)),(0,n.eW)(" "+(0,o.v_)((0,B.R1)(g)&&(0,B.R1)(p)?"重新":"立即")+"生成 ",1)],2),(0,n.Lk)("div",{class:(0,o.C4)(["btn download-btn",{isLoading:(0,B.R1)(l)||!(0,B.R1)(d)}]),onClick:i[2]||(i[2]=t=>(0,B.R1)(x)())},i[10]||(i[10]=[(0,n.Lk)("img",{src:vc,alt:""},null,-1),(0,n.eW)(" 下载图片 ")]),2)],64)):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",eu,[i[16]||(i[16]=(0,n.Lk)("div",{class:"img-wrapper"},[(0,n.Lk)("img",{class:"example-img",src:fc,alt:""}),(0,n.Lk)("p",{class:"text-item"},[(0,n.Lk)("span",null,"第1步:"),(0,n.eW)(" 选择需要修改的图片区域。 ")]),(0,n.Lk)("p",{class:"text-item"},[(0,n.Lk)("span",null,"第2步:"),(0,n.eW)(" 输入文字，AI根据描述在选择区域重新生成图片内容。 ")])],-1)),(0,n.bF)(_,{modelValue:(0,B.R1)(C),"onUpdate:modelValue":i[3]||(i[3]=t=>(0,B.i9)(C)?C.value=t:null),class:"radio-area"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,B.R1)(a),(t=>((0,n.uX)(),(0,n.Wv)(m,{key:t.value,value:t.value,onClick:e=>(0,B.R1)(f)(t.value,t.label),class:"custom-radio-btn"},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{class:"radio-icon",src:(0,B.R1)(C)===t.value?t.hoverIcon:S.value?t.iconDark:t.icon,alt:t.value},null,8,iu),(0,n.Lk)("img",{class:"radio-icon-hover",src:t.hoverIcon,alt:t.value},null,8,nu),(0,n.eW)(" "+(0,o.v_)(t.label),1)])),_:2},1032,["value","onClick"])))),128))])),_:1},8,["modelValue"]),"brush"===(0,B.R1)(C)?((0,n.uX)(),(0,n.CE)("p",ou,[i[12]||(i[12]=(0,n.eW)(" 画笔大小 ")),(0,n.bF)(k,{modelValue:(0,B.R1)(w),"onUpdate:modelValue":i[4]||(i[4]=t=>(0,B.i9)(w)?w.value=t:null),min:5,max:100},null,8,["modelValue"])])):(0,n.Q3)("",!0),(0,n.Lk)("div",ru,[(0,n.bF)(A,{modelValue:(0,B.R1)(c),"onUpdate:modelValue":i[5]||(i[5]=t=>(0,B.i9)(c)?c.value=t:null),placeholder:"提出你的修改要求",type:"textarea",autofocus:""},null,8,["modelValue"]),(0,n.bF)(D,{type:"primary",onClick:(0,B.R1)(v),class:(0,o.C4)(["submit-btn",{isLoading:(0,B.R1)(l)||!(0,B.R1)(u)}])},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:E.value,alt:""},null,8,au),i[13]||(i[13]=(0,n.eW)(" 修改"))])),_:1},8,["onClick","class"])]),(0,n.Lk)("div",su,[(0,n.Lk)("div",{class:(0,o.C4)(["btn regenerate-btn",{isLoading:(0,B.R1)(l)||!(0,B.R1)(h)}]),onClick:i[6]||(i[6]=(...t)=>(0,B.R1)(b)&&(0,B.R1)(b)(...t))},[(0,n.Lk)("img",{src:I.value,alt:""},null,8,lu),i[14]||(i[14]=(0,n.eW)(" 重新生成 "))],2),(0,n.Lk)("div",{class:(0,o.C4)(["btn download-btn",{isLoading:(0,B.R1)(l)||!(0,B.R1)(d)}]),onClick:i[7]||(i[7]=(...t)=>(0,B.R1)(x)&&(0,B.R1)(x)(...t))},i[15]||(i[15]=[(0,n.Lk)("img",{src:vc,alt:""},null,-1),(0,n.eW)(" 下载图片 ")]),2)])]))])}}};i(27467);const uu=cu;var hu=uu;i(12708);const du={class:"tabs"},gu=["onClick"],pu=["src"],fu=["src"],mu={class:"tabs-title"},vu={class:"editor-area"},bu=["src"];var xu={__name:"index",emits:["search"],setup(t,{emit:e}){const r=(0,m.Pj)(),{EnumKeys:a,tabs:s,editTypes:l}=(0,ll.J)(),{showEdit:c,curImage:u,isLoading:h,curTab:d,curTabName:g,images:p,curTabImages:f,controller:v,handleClose:b,addPopStateListener:x,removePopStateListener:y}=(0,al.g)(),{initObserver:_,slideScrollToView:w}=Ul(),{editorInstance:k,currentEditType:C,lineWidth:S,initImageEditor:I,cancelActive:M}=Il(),{showVipTip:T,clickTab:A}=(0,rl.B)(),{prompt:D,lastSearchParams:L}=Zc(),O=(0,n.EW)((()=>2===r.state?.Home?.userInfo?.member_info?.member_status));(0,n.wB)(d,((t,e)=>{f[e]=u.value}));const j=(t,e)=>{if(h.value)nl.nk.warning("重绘中，请稍后尝试");else{if((0,E._2)({md:"sidebar_tab",ct:"click",pds:"cogview",ctvl:e}),t!==a.origin&&!O.value)return d.value=t,A.value=t,void(T.value=!0);if(t===a.repaint){if(t===d.value)return;C.value=l[0].value,(0,n.dY)((()=>{I()}))}else k.value?.destroy(),k.value=null;d.value=t}},P=()=>{k.value?.destroy(),k.value=null,Object.keys(p).forEach((t=>{p[t]=[]})),Object.keys(L).forEach((t=>{L[t]=""})),Object.keys(f).forEach((t=>{f[t]=""})),D.value=""};(0,n.sV)((()=>{x()})),(0,n.wB)(c,(t=>{t?(0,n.dY)((()=>{w(),_(),P(),d.value===a.repaint&&((0,E._2)({md:"part_fix",ct:"click",pds:"cogview",ctvl:g.value,extra:l.find((t=>t.value===C.value))?.label}),I(),O.value||(T.value=!0,A.value=d.value)),(0,sl.S8)(),x()})):(P(),v.value?.abort(),y(),T.value=!1)})),(0,Xa.V6)(((t,e,i)=>{t.fullPath!==e.fullPath?(c.value=!1,T.value=!1,y(),i()):i()}));const N=(0,n.EW)((()=>r.state.DarkMode.isDarkMode)),z=(0,n.EW)((()=>{const t=(N.value,i(35727));return t})),R=(0,n.EW)((()=>{const t=N.value?i(75292):i(37986);return t}));return(0,Xa.JZ)(((t,e,i)=>{y(),"/pay/goods"!==t.path||"imageEdit"!==t.query.from?(c.value=!1,T.value=!1,i()):i()})),(t,e)=>{const i=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(i,{modelValue:(0,B.R1)(c),"onUpdate:modelValue":e[2]||(e[2]=t=>(0,B.i9)(c)?c.value=t:null),title:"",fullscreen:"","show-close":!1,class:"editor-dialog","append-to-body":""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",du,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,B.R1)(s),(t=>((0,n.uX)(),(0,n.CE)("div",{key:t.key,class:(0,o.C4)(["tabs-item",t.key===(0,B.R1)(d)?"active-item":""]),onClick:e=>j(t.key,t.name)},[(0,n.Lk)("img",{src:t.key===(0,B.R1)(d)?N.value?t.iconActiveDark:t.iconActive:N.value?t.iconDark:t.icon,alt:"",class:"tabs-icon"},null,8,pu),t.isVip?((0,n.uX)(),(0,n.CE)("img",{key:0,src:z.value,alt:"vip",class:"vip"},null,8,fu)):(0,n.Q3)("",!0),(0,n.Lk)("span",mu,(0,o.v_)(t.name),1)],10,gu)))),128))]),(0,n.Lk)("div",{class:"editor-container",onClick:e[1]||(e[1]=(...t)=>(0,B.R1)(M)&&(0,B.R1)(M)(...t))},[(0,n.Lk)("div",vu,[(0,n.bF)(pc),(0,n.bF)(Kl),(0,n.Lk)("div",{class:"close-btn",onClick:e[0]||(e[0]=(...t)=>(0,B.R1)(b)&&(0,B.R1)(b)(...t))},[(0,n.Lk)("img",{src:R.value,alt:""},null,8,bu)])]),(0,n.bF)(hu)])])),_:1},8,["modelValue"]),(0,n.bF)(Ll)],64)}}};i(32973);const yu=xu;var _u=yu,wu=i(92016);function ku(){const t=(0,B.KR)(null),e=(0,wu.M7)("Conversation",["lastItem"]),i=()=>{t.value&&t.value.scrollTo({top:t.value.scrollHeight,behavior:"smooth"})};return(0,n.sV)((()=>{e.lastItem.value?.conversation_id&&i()})),(0,n.wB)((()=>e.lastItem.value.conversation_id),((t,e)=>{t&&t!==e&&(0,n.dY)((()=>{i()}))})),{targetRef:t,scrollToBottom:i}}var Cu={name:"ConversationList",props:{isShowQuestionTip:{type:Boolean,default:!0},isGlmShare:{type:Boolean,default:!1},keepStarter:{type:Boolean,default:!1}},components:{Item:el,ImageEdit:_u},data(){return{}},computed:{...(0,m.aH)("Conversation",["dataList"])},created(){},setup(){const{targetRef:t}=ku();return{conversationList:t}},mounted(){this.keepStarter||il.A.$emit("initScroll",this.$refs.conversationList)},methods:{}};i(41290);const Su=(0,bt.A)(Cu,[["render",bi],["__scopeId","data-v-7a387a46"]]);var Iu=Su;const Mu={class:"animate__bounceInUp bottom"};function Tu(t,e,i,o,r,a){const s=(0,n.g2)("SearchBox"),l=(0,n.g2)("GoBottom");return(0,n.uX)(),(0,n.CE)("div",Mu,[(0,n.bF)(s,(0,n.v6)(t.$attrs,{class:"component-box-new",style:a.styleObj,initRows:3,maxRows:3,minRows:3,ref:"searchBox"}),null,16,["style"]),(0,n.bF)(l)])}const Eu={class:"input-outer"},Au={class:"search flex flex-x-between flex-y-start no-effect"},Du={key:0,ref:"searchImprove",class:"search-improve"},Lu={class:"title-box"},Ou=["onClick","onMouseover"],ju=["data-upload"],Pu=["innerHTML"],Nu={class:"sub-title"},zu={key:0,class:"icon"},Ru={key:0,style:{"margin-bottom":"8px"}},Bu=["data-upload"],Fu={class:"text text-multi"},Uu={class:"input-wrap flex flex-x-between flex-y-center"},Hu={class:"input-box-inner"},Wu={key:1,class:"improve-editor",ref:"insertimprovebox"},Xu=["placeholder"],Gu={class:"suggest-slot-middle"},Yu={class:"suggest-slot-middle-inner"},Vu=["data-upload","onClick"],Zu={class:"suggest-slot-right"},Qu=["src"],Ju={class:"shareFooter"},qu={class:"shareLeft"},$u={class:"selectAllText"},Ku={class:"shareRight"},th={key:1,class:"generateLinkGrey"},eh={class:"footer"};function ih(t,e,a,s,l,c){const u=(0,n.g2)("CreateSession"),h=(0,n.g2)("QuoteContentShow"),d=(0,n.g2)("AtAssistPopover"),g=(0,n.g2)("AIDrawPromptOptions"),p=(0,n.g2)("UploadPreiew2"),f=(0,n.g2)("UploadFile"),m=(0,n.g2)("EditableDiv"),v=(0,n.g2)("el-tooltip"),b=(0,n.g2)("upload"),x=(0,n.g2)("Policy"),y=(0,n.gN)("exposure"),_=(0,n.gN)("resize");return(0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["search-container",c.hasCurAssist?"container-mt":""]),style:{"z-index":"1001"},onClick:e[22]||(e[22]=(...t)=>c.clickComponent&&c.clickComponent(...t))},[(0,n.Lk)("div",{class:(0,o.C4)(["search-box-container",{"no-border":t.glmsShare}])},["Glms"===t.$route.name||t.glmsShare?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(u,{key:0,show:!l.atAssistPopoverIsShow},null,8,["show"])),(0,n.bo)((0,n.bF)(h,{hasCurAssist:c.hasCurAssist},null,8,["hasCurAssist"]),[[r.aG,c.showQuoteContext&&!t.glmsShare]]),(0,n.bo)((0,n.bF)(d,{ref:"atAssistPopover",inputValue:l.inputValue,inputRef:t.$refs.textbox,insertPromptBoxHtml:l.insertPromptBoxHtml,editableDivRef:t.$refs.insertpromptbox?.$refs?.editor,showQuoteContext:c.showQuoteContext,onChangeValue:c.changeValue,onGetAtAssistSelect:c.getAtAssistSelect},null,8,["inputValue","inputRef","insertPromptBoxHtml","editableDivRef","showQuoteContext","onChangeValue","onGetAtAssistSelect"]),[[r.aG,!t.glmsShare]]),(0,n.bo)((0,n.Lk)("div",Eu,[(0,n.Lk)("div",Au,[l.showImprove?((0,n.uX)(),(0,n.CE)("div",Du,[(0,n.Lk)("div",Lu,[e[23]||(e[23]=(0,n.Lk)("div",{class:"title-left"},[(0,n.Lk)("p",{class:"icon"}),(0,n.Lk)("p",{class:"text"},"指令模板")],-1)),(0,n.Lk)("div",{class:"title-right",onClick:e[0]||(e[0]=(...t)=>c.closeTemplate&&c.closeTemplate(...t))})]),(0,n.Lk)("div",{class:"content-container",onScroll:e[2]||(e[2]=(...t)=>c.improveScroll&&c.improveScroll(...t))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.improveList,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["content-outer",l.improveSelect===i?"content-outer-select":""]),key:"improve"+t.title+i,onClick:e=>c.improveInsert(i,t.title),onMouseover:t=>c.improveEnter(i),onMouseout:e[1]||(e[1]=(...t)=>c.improveLeave&&c.improveLeave(...t))},[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:"improve-content","data-upload":JSON.stringify({md:"improve_template",ct:"improve_template_pop",ctvl:t.title,ctnm:i+1,extra:l.improveMatchWords.join(",")})},[(0,n.Lk)("p",{class:"title",innerHTML:t.title},null,8,Pu),(0,n.Lk)("p",Nu,(0,o.v_)(t.content),1)],8,ju)),[[y]]),l.improveSelect!==i||l.isHover?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",zu))],42,Ou)))),128))],32)],512)):(0,n.Q3)("",!0),(0,n.Lk)("div",{id:"search-input-box",class:(0,o.C4)(["input-box",{failed:!l.verification,noTopBorder:c.hasCurAssist||c.showQuoteContext,aidraw:c.isAIDraw}])},[c.isAIDraw?((0,n.uX)(),(0,n.CE)("div",Ru,[(0,n.bF)(g)])):(0,n.Q3)("",!0),t.contentOverPercent>0&&t.fileList?.length>1?(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:1,"data-upload":JSON.stringify({md:"filechat",ct:"prevent_tips",ctvl:"overwords"}),class:"overpercent-box"},[e[24]||(e[24]=(0,n.Lk)("p",{class:"icon icon-multi"},null,-1)),(0,n.Lk)("p",Fu,(0,o.v_)(c.maxReadPercentText),1)],8,Bu)),[[y]]):(0,n.Q3)("",!0),(0,n.bF)(p),(0,n.Lk)("div",Uu,[c.showUploadIcon?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)(["upload-image-wrap",{disable:t.isUploading}])},[(0,n.bF)(f)],2)):(0,n.Q3)("",!0),(0,n.Lk)("div",Hu,[l.isInsertPrompt?((0,n.uX)(),(0,n.Wv)(m,{key:0,ref:"insertpromptbox",modelValue:l.insertPromptBoxHtml,"onUpdate:modelValue":e[3]||(e[3]=t=>l.insertPromptBoxHtml=t),onPaste:e[4]||(e[4]=t=>c.handlePaste(t)),onInput:c.handleDivInput},null,8,["modelValue","onInput"])):l.isInsertImprove||l.addslot?((0,n.uX)(),(0,n.CE)("div",Wu,[(0,n.bF)(m,{ref:"insertpromptbox",modelValue:l.insertPromptBoxHtml,"onUpdate:modelValue":e[5]||(e[5]=t=>l.insertPromptBoxHtml=t)},null,8,["modelValue"])],512)):(0,n.bo)(((0,n.uX)(),(0,n.CE)("textarea",{key:2,slot:"reference",class:"scroll-display-none",ref:"textbox",rows:"1",placeholder:t.quoteMarkdownText?l.HAS_QUOTE_PLACEHOLDER:c.randomPlaceholder,"onUpdate:modelValue":e[6]||(e[6]=t=>l.inputValue=t),onKeypress:e[7]||(e[7]=(...t)=>c.eventListen&&c.eventListen(...t)),onBlur:e[8]||(e[8]=(...t)=>c.onBlur&&c.onBlur(...t)),onFocus:e[9]||(e[9]=(...t)=>c.onFocus&&c.onFocus(...t)),onKeydown:e[10]||(e[10]=(...t)=>c.onKeyDown&&c.onKeyDown(...t)),onClick:e[11]||(e[11]=(...t)=>c.handleInputChange&&c.handleInputChange(...t)),onInput:e[12]||(e[12]=(...t)=>c.handleInput&&c.handleInput(...t)),onPaste:e[13]||(e[13]=(...t)=>c.handleInputPaste&&c.handleInputPaste(...t))},null,40,Xu)),[[r.Jo,l.inputValue]]),l.askList&&l.askList.length?((0,n.uX)(),(0,n.CE)("div",{key:3,class:(0,o.C4)(["suggest-slot",{"show-upload-icon":c.showUploadIcon}])},[e[27]||(e[27]=(0,n.Lk)("div",{class:"suggest-slot-left"},[(0,n.Lk)("p",{class:"icon"}),(0,n.Lk)("p",{class:"text"},"添加要求")],-1)),(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",Gu,[(0,n.Lk)("div",Yu,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.askList,((t,i)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:"ask","data-upload":JSON.stringify({md:"improve_condition",ct:"improve_condition_pop",ctvl:t.title,ctnm:i+1}),key:"ask"+t.title+i,onClick:e=>c.addSlot(i,t.title)},[(0,n.Lk)("p",null,(0,o.v_)(t.title),1),e[25]||(e[25]=(0,n.Lk)("p",{class:"icon"},null,-1))],8,Vu)),[[y]]))),128))])])),[[_,c.handleResize]]),(0,n.Lk)("div",Zu,[(0,n.Lk)("p",{class:(0,o.C4)(["left-arrow",-1===l.moveIndex?"disabled":""]),onClick:e[14]||(e[14]=(...t)=>c.clickLeft&&c.clickLeft(...t))},null,2),e[26]||(e[26]=(0,n.Lk)("p",{class:"divider"},null,-1)),(0,n.Lk)("p",{class:(0,o.C4)(["right-arrow",l.moveIndex>=l.wList.length-1?"disabled":""]),onClick:e[15]||(e[15]=(...t)=>c.clickRight&&c.clickRight(...t))},null,2)])],2)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",{class:(0,o.C4)({enter:!0,searching:t.isSearching,"m-three-row":l.isThreeRow})},[(0,n.bF)(v,{content:c.empty?t.$t("conversation.stopGenerating"):"中断生成并发送新指令",placement:"top",manual:!0,visible:t.isSearching&&l.stopStreamTip},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{onClick:e[16]||(e[16]=t=>c.clickSearch(!0)),class:(0,o.C4)(["enter_icon",{disable:t.isUploading||t.contentOverPercent&&t.fileList.length>1}]),onMouseout:e[17]||(e[17]=(...t)=>c.onMouseout&&c.onMouseout(...t)),src:t.isSearching&&c.empty?(t.isDarkMode,i(76207)):t.isDarkMode?i(68775):i(4990),onMouseover:e[18]||(e[18]=(...t)=>c.onMouseover&&c.onMouseover(...t))},null,42,Qu)])),_:1},8,["content","visible"])],2)])],2)])],512),[[r.aG,!t.glmsShare]]),(0,n.bF)(b,{ref:"imginput"},null,512)],2),(0,n.bo)((0,n.Lk)("div",Ju,[(0,n.Lk)("div",qu,[(0,n.Lk)("div",{class:(0,o.C4)(t.selectedAllStatus?"onCheckedStatusBtn":"unCheckedStatusBtn"),onClick:e[19]||(e[19]=(...t)=>c.changeSelectedAllStatus&&c.changeSelectedAllStatus(...t))},null,2),(0,n.Lk)("div",$u,(0,o.v_)(t.$t("conversation.selectAll")),1)]),(0,n.Lk)("div",Ku,[(0,n.Lk)("div",{class:"cancelBtn",onClick:e[20]||(e[20]=(...t)=>c.handleCancel&&c.handleCancel(...t))},(0,o.v_)(t.$t("common.cancelText")),1),t.sharedIdList.length?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"generateLink",onClick:e[21]||(e[21]=(...t)=>c.generateLink&&c.generateLink(...t))},[e[28]||(e[28]=(0,n.Lk)("div",{class:"link"},null,-1)),(0,n.Lk)("div",null,(0,o.v_)(t.$t("conversation.regenerateShareLink")),1)])):(0,n.Q3)("",!0),t.sharedIdList.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",th,[e[29]||(e[29]=(0,n.Lk)("div",{class:"link"},null,-1)),(0,n.Lk)("div",null,(0,o.v_)(t.$t("conversation.regenerateShareLink")),1)]))])],512),[[r.aG,t.glmsShare]]),(0,n.Lk)("div",eh,[(0,n.bF)(x)])],2)}var nh=i(93945),oh=i(76676),rh=i(97300);const ah={class:"file"},sh={class:"file-info"},lh={class:"name dot"},ch={class:"status"},uh={key:0,class:"loading"},hh={class:"text"},dh=["onClick"],gh={key:2,class:"success"},ph={class:"type"},fh={class:"size"},mh=["onClick"],vh={key:1,class:"is-cloud"};function bh(t,e,i,a,s,l){return(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["file-list-box",{isSmall:s.isSmall}])},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.fileList,((i,r)=>((0,n.uX)(),(0,n.CE)("div",{key:"file"+r,class:"file-box"},[(0,n.Lk)("div",ah,[(0,n.Lk)("div",{class:(0,o.C4)(["icon",{"icon-img":i.imageurl}]),style:(0,o.Tr)({backgroundImage:`url('${i.imageurl||l.getFileIcon(i)}')`})},[i.error?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)(["answer-error-icon",{"file-retry-cover":!i.imageurl}])},e[0]||(e[0]=[(0,n.Lk)("p",{class:"file-retry-icon"},null,-1)]),2)):(0,n.Q3)("",!0)],6),(0,n.Lk)("div",sh,[(0,n.Lk)("p",lh,(0,o.v_)(i.name),1),(0,n.Lk)("div",ch,[i.finish||i.error?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",uh,[(0,n.Lk)("p",{class:(0,o.C4)(["icon",{"icon-dark":t.isDarkMode}])},null,2),(0,n.Lk)("p",hh,(0,o.v_)(t.$t("conversation.uploading")),1)])),i.error?((0,n.uX)(),(0,n.CE)("p",{key:1,class:"retry",onClick:e=>t.handleRetry(i)},(0,o.v_)(t.$t("conversation.reUpload")),9,dh)):(0,n.Q3)("",!0),i.finish?((0,n.uX)(),(0,n.CE)("div",gh,[(0,n.Lk)("p",ph,(0,o.v_)(i.type.toUpperCase()),1),(0,n.Lk)("p",fh,(0,o.v_)(i.transferFileSize),1)])):(0,n.Q3)("",!0)])]),i.finish||i.error?((0,n.uX)(),(0,n.CE)("p",{key:0,class:"close",onClick:e=>t.handleDelete(i)},null,8,mh)):(0,n.Q3)("",!0),i.isCloud?((0,n.uX)(),(0,n.CE)("p",vh)):(0,n.Q3)("",!0)])])))),128))],2)),[[r.aG,t.fileList&&t.fileList.length]])}var xh=i(19803),yh={name:"UploadPreview2",components:{},data(){return{isSmall:!1,resizeObserver:null}},computed:{...(0,m.aH)("UploadFile",["fileList"]),...(0,m.aH)("DarkMode",["isDarkMode"])},mounted(){this.addResizeObserver()},unmounted(){this.removeResizeObserver()},methods:{...(0,m.i0)("UploadFile",["handleDelete","handleRetry"]),addResizeObserver(){this.resizeObserver=new ResizeObserver((t=>{const e=t[0],i=Array.isArray(e.contentBoxSize)?e.contentBoxSize[0]:e.contentBoxSize,n=i.inlineSize;e&&(this.isSmall=n<500)}));const t=document.querySelector(".file-list-box");t&&this.resizeObserver.observe(t)},removeResizeObserver(){this.resizeObserver?.disconnect(),this.resizeObserver=null},getFileIcon:xh.I}};i(12910);const _h=(0,bt.A)(yh,[["render",bh],["__scopeId","data-v-40c935b1"]]);var wh=_h;const kh=["data-stats"],Ch={class:"text"},Sh={class:"select"},Ih={class:"text"};function Mh(t,e,i,a,s,l){const c=(0,n.g2)("el-upload"),u=(0,n.g2)("el-tooltip"),h=(0,n.g2)("ZPThemeImage"),d=(0,n.g2)("FileDialog"),g=(0,n.g2)("Dialog"),p=(0,n.g2)("VipUpgradeDialog"),f=(0,n.gN)("click");return(0,n.uX)(),(0,n.CE)("div",null,[t.isBeta?((0,n.uX)(),(0,n.Wv)(u,{key:1,effect:"dark",content:t.$t("conversation.uploadFormatTips"),placement:"top",visible:s.tooltipVisible},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,o.C4)(["upload-image-btn upload-image-btn-isBeta",[t.fileList.length>=10||t.contentOverPercent>0&&t.fileList.length>1?"upload-image-btn-disabled":"",{"upload-image-btn-dark":t.isDarkMode}]]),onClick:e[3]||(e[3]=(0,r.D$)(((...t)=>l.handleClick&&l.handleClick(...t)),["stop"])),onMouseover:e[4]||(e[4]=t=>s.tooltipVisible=!0),onMouseout:e[5]||(e[5]=t=>s.tooltipVisible=!1)},[(0,n.Lk)("div",{class:(0,o.C4)(["select-box",{"select-box-disabled":s.visible||s.dialogInfo.visible}]),ref:"selectBox",onMouseover:e[1]||(e[1]=(0,r.D$)((t=>s.tooltipVisible=!1),["stop"])),onMouseout:e[2]||(e[2]=(0,r.D$)((t=>s.tooltipVisible=!1),["stop"]))},[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:"select",onClick:e[0]||(e[0]=(...t)=>l.handleCloudClick&&l.handleCloudClick(...t)),"data-stats":JSON.stringify({ct:"document_upload_cloud",ctid:l.lastAssistantId})},[(0,n.bF)(h,{class:(0,o.C4)(["cloud-icon",{"cloud-icon-dark":t.isDarkMode}]),imageUrl:"cloud-file-icon"},null,8,["class"]),(0,n.Lk)("p",Ch,(0,o.v_)(t.$t("conversation.uploadCloud")),1)],8,kh)),[[f]]),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(c,{ref:"upload",class:"upload-demo",action:"","before-upload":t.beforeUpload,multiple:"",limit:10-t.fileList.length,"on-exceed":l.handleExceed,"show-file-list":!1,"http-request":l.uploadFile,disabled:t.fileList.length>=10||t.contentOverPercent>0&&t.fileList.length>1,"data-stats":JSON.stringify({ct:"document_upload_local",ctid:l.lastAssistantId})},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Sh,[(0,n.bF)(h,{class:"local-icon",imageUrl:"local-file-icon"}),(0,n.Lk)("p",Ih,(0,o.v_)(t.$t("conversation.uploadLocal")),1)])])),_:1},8,["before-upload","limit","on-exceed","http-request","disabled","data-stats"])),[[f]])],34)],34)])),_:1},8,["content","visible"])):((0,n.uX)(),(0,n.Wv)(u,{key:0,effect:"dark",content:t.$t("conversation.uploadFormatTips"),placement:"top"},{default:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(c,{ref:"upload",class:"upload-demo",action:"","before-upload":t.beforeUpload,multiple:"",limit:10-t.fileList.length,"on-exceed":l.handleExceed,"show-file-list":!1,"http-request":l.uploadFile,disabled:t.fileList.length>=10||t.contentOverPercent>0&&t.fileList.length>1||s.visible||s.dialogInfo.visible},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,o.C4)(["upload-image-btn",[t.fileList.length>=10||t.contentOverPercent>0&&t.fileList.length>1?"upload-image-btn-disabled":"",{"upload-image-btn-dark":t.isDarkMode}]])},null,2)])),_:1},8,["before-upload","limit","on-exceed","http-request","disabled"])),[[f,{ct:"document_upload_local",ctid:l.lastAssistantId}]])])),_:1},8,["content"])),s.visible?((0,n.uX)(),(0,n.Wv)(d,{key:2,visible:s.visible,onCloseDialog:l.closeDialog,onConfirm:l.confirm},null,8,["visible","onCloseDialog","onConfirm"])):(0,n.Q3)("",!0),s.dialogInfo.visible?((0,n.uX)(),(0,n.Wv)(g,{key:3,dialogInfo:s.dialogInfo,onHandlerDialogVisible:l.handlerDialogVisible},null,8,["dialogInfo","onHandlerDialogVisible"])):(0,n.Q3)("",!0),(0,n.bF)(p,{dialogInfo:s.vipDialogInfo,onHandlerDialogVisible:l.handlerDialogVisible},null,8,["dialogInfo","onHandlerDialogVisible"])])}var Th=i(23987),Eh=i(22550),Ah=i(48216);let Dh=null;const Lh=t=>{Dh=t},Oh=()=>{let t=!1;window.addEventListener("compositionstart",(e=>{t=!0,e.target.composing=!0})),window.addEventListener("compositionend",(e=>{if(!e.target.composing)return;t=!1,e.target.composing=!1;const i=document.createEvent("HTMLEvents");i.initEvent("input",!0,!0),window.dispatchEvent(i)}));var e="";window.addEventListener("input",(i=>{if(!Dh)return;if(Dh.selectAll)return;if(!Dh.isInsertImprove&&!Dh.addslot&&t)return void(e=i.data);e&&(i.data=e,e="");const n=document.querySelector(".prosemirror-editor");n&&!n.innerText.replace(/^\s*[\r\n]/gm,"")?(Dh.$refs.insertpromptbox&&(Dh.insertPromptBoxHtml="",Dh.clearBtnShow=!1),Dh.isInsertPrompt=!1,Dh.isInsertImprove=!1,Dh.inputValue="",Dh.improveSource="",setTimeout((()=>{Dh.setFocus()})),Dh.showClearBtn()):n&&n.innerText.replace(/^\s*[\r\n]/gm,"")&&(Dh.isInsertImprove?(Dh.inputValue=n.innerText,Dh.showClearBtn()):(Dh.inputValue=n.innerText.replace(/^\s*[\r\n]/gm,""),Dh.showClearBtn()))})),window.addEventListener("click",(t=>{if(t.target.closest("highlight-input")){const e=document.querySelectorAll("highlight-input");e.forEach((e=>{e.contains(t.target)?(t.target.parentElement.style.outline="1px solid rgb(36, 84, 255)",t.target.parentElement.classList.add("hover-highlight-input"),t.target.style.background="#fff",t.target.style.borderRadius="0px",t.target.style.color="#1A2029",t.target.style.cursor="text"):(e.parentElement.style.outline="1px solid transparent",e.parentElement.classList.remove("hover-highlight-input"),e.parentElement.style.boxShadow="none",e.style.background="rgba(36, 84, 255, 0.1)",e.style.color="#4f5866",e.style.borderRadius="4px",e.style.cursor="pointer")}))}else if(!t.target.classList.contains("insert-prompt")){let e=t.target.parentElement;while(e){if(e.classList.contains("insert-prompt"))break;if(e===document.body){const t=document.querySelectorAll("highlight-input");t.forEach((t=>{t.parentElement.style.outline="1px solid transparent",t.parentElement.classList.remove("hover-highlight-input"),t.parentElement.style.boxShadow="none",t.style.background="rgba(36, 84, 255, 0.1)",t.style.color="#4f5866",t.style.borderRadius="4px",t.style.cursor="pointer"}));break}e=e.parentElement}}})),window.addEventListener("keydown",(t=>{if(Dh)if(Dh.isAddLine=(t.ctrlKey||t.shiftKey||t.metaKey||t.altKey)&&"Enter"===t.key,"Tab"===t.key){t.preventDefault();const e=document.querySelectorAll("highlight-input"),i=window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0);let n=-1;if(e.forEach(((t,e)=>{t.parentElement.style.outline="1px solid transparent",t.parentElement.classList.remove("hover-highlight-input"),t.parentElement.style.boxShadow="none",t.style.background="rgba(36, 84, 255, 0.1)",t.style.color="#4f5866",t.style.borderRadius="4px",t.style.cursor="pointer",i?.intersectsNode(t.parentElement)&&(n=e)})),-1!==n){const t=(n+1)%e.length,i=e[t];i.parentElement.style.outline="1px solid rgb(36, 84, 255)",i.parentElement.classList.add("hover-highlight-input"),i.style.background="#fff",i.style.color="#1A2029",i.style.borderRadius="0px",i.style.cursor="text";const o=document.createRange();o.selectNodeContents(i),o.setStartAfter(i),o.collapse(!0);const r=window.getSelection();r.removeAllRanges(),r.addRange(o)}else{const t=document.querySelector("highlight-input");if(t){const e=document.createRange();e.selectNodeContents(t),t.parentElement.style.outline="1px solid rgb(36, 84, 255)",t.parentElement.classList.add("hover-highlight-input"),t.style.background="#fff",t.style.color="#1A2029",t.style.cursor="text",t.style.borderRadius="4px";const i=window.getSelection();i.removeAllRanges(),i.addRange(e)}}}else if(Dh.isAddLine){const t=document.querySelector(".prosemirror-editor");if(t)if(Dh.isInsertImprove)Dh.inputValue=t.innerText;else{const e=window.getSelection(),i=e.rangeCount>0&&e.getRangeAt(0),n=document.createElement("span");n.textContent="\n",i?.deleteContents(),i?.insertNode(n),i?.setStartAfter(n),i?.collapse(!0),e.removeAllRanges(),i&&e.addRange(i),Dh.inputValue=t.innerText}}else if("Enter"===t.key){if(Dh.isSearching)return;if(-1!==Dh.improveSelect&&!Dh.isHover)return void setTimeout((()=>{Dh.improveInsert(Dh.improveSelect,Dh.improveList[Dh.improveSelect].title)}),0);const e=document.querySelector(".prosemirror-editor");if(e&&t.preventDefault(),Dh.showImprove=!1,Dh.$refs.atAssistPopover?.popoverVisible)t.preventDefault(),t.stopPropagation();else if(e){const t=e.innerText;Dh.inputValue=t.replace(/^\s*[\r\n]/gm,""),setTimeout((()=>{Dh.clickSearch(),e.innerHTML="",Dh.isInsertPrompt=!1,Dh.isInsertImprove=!1}),200)}}else if("Backspace"===t.key){Dh&&Dh.showClearBtn();const e=window.getSelection(),i=e.rangeCount>0&&e.getRangeAt(0),n=i?.commonAncestorContainer,o=1===n?.nodeType?n:n?.parentNode,r=o?.previousElementSibling;if(o&&o.classList.contains("highlight-input")){const e=window.getSelection(),i=e.toString();o.textContent===i&&(o.textContent=" ",t.preventDefault());const n=e.rangeCount>0&&e.getRangeAt(0),r=n?.startOffset,a=n?.endOffset;1===r&&1===a&&t.preventDefault()}r&&r.classList.contains("span-highlight-input")&&r.parentNode.removeChild(r);const a=document.querySelectorAll("highlight-input");if(o.classList.contains("span-highlight-input")&&" "===o.childNodes[0].textContent)return void t.preventDefault();if(a&&o.parentElement.classList.contains("span-highlight-input")&&o.textContent&&1===o.textContent.length){t.preventDefault(),o.textContent=" ";const e=document.createRange();e.setStartAfter(o),e.collapse(!0);const i=window.getSelection();i.removeAllRanges(),i.addRange(e)}}else"ArrowUp"===t.key?Dh.showImprove&&(Dh.isHover=!1,Dh.$nextTick((()=>{Dh.$refs.textbox.blur()})),-1===Dh.improveSelect?Dh.improveSelect=0:0!==Dh.improveSelect&&(Dh.improveSelect-=1),document.getElementsByClassName("content-outer")[Dh.improveSelect].scrollIntoView({behavior:"smooth"})):"ArrowDown"===t.key&&Dh.showImprove&&(Dh.isHover=!1,Dh.$nextTick((()=>{Dh.$refs.textbox.blur()})),-1===Dh.improveSelect?Dh.improveSelect=0:Dh.improveSelect<Dh.improveList.length-1&&(Dh.improveSelect+=1,document.getElementsByClassName("content-outer")[Dh.improveSelect].scrollIntoView({behavior:"smooth"})))})),window.addEventListener("keyup",(t=>{Dh&&"Backspace"===t.key&&Dh.$nextTick((()=>{const t=document.querySelector(".prosemirror-editor");t&&(""!==t.innerText&&"\n"!==t.innerText||(Dh.inputValue=""))}))})),document.addEventListener("selectionchange",(async()=>{if(!Dh)return;const{pathname:t}=window.location||{};if(t?.startsWith("/activity"))return!1;document.getSelection().toString()}))},jh=i(4990),Ph=(i(76207),"65940acff94777010aa6b796");var Nh={data(){return{visible:!1,tooltipVisible:!1,dialogInfo:{},vipDialogInfo:{},glmsId:Ph}},components:{FileDialog:Th.A,Dialog:Eh.A,VipUpgradeDialog:Ah.A},computed:{...(0,m.aH)("DarkMode",["isDarkMode"]),...(0,m.aH)("UploadFile",["fileList"]),...(0,m.aH)("CloudKnowledge",["uploadedFileList"]),...(0,m.L8)("Home",["vipLevel","vipCtvl","isBeta"]),...(0,m.L8)("UploadFile",["isUploading","contentOverPercent","exceed"]),...(0,m.L8)("Glms",["assistantId"]),lastAssistantId(){return this.assistantId||this.glmsId}},watch:{contentOverPercent(t){}},mounted(){document.addEventListener("click",this.hideCloud)},methods:{...(0,m.i0)("Home",["SetSyncStorage"]),...(0,m.i0)("UploadFile",["beforeUpload"]),...(0,m.i0)("CloudKnowledge",["syncCloud"]),hideCloud(){const t=document.querySelector(".select-box"),e=t?.style?.visibility;e&&(t.style.visibility="hidden")},handleCloudClick(){this.visible=!0},getFileIcon(t){const e=t.name.substring(t.name.lastIndexOf(".")+1);return"xlsx"===e||"xls"===e||"numbers"===e?i(50490):"zip"===e?i(92046):(0,nh.ZQ)(e)?i(67831):(0,nh._m)(e)?i(50129):i(86727)},handleExceed(t,e){this.$message.warning("最多上传10个文件")},uploadFile(t){const e=document.querySelector(".select-box");e&&(e.style.visibility="hidden"),this.$store.dispatch("UploadFile/uploadFile",t.file).then((t=>{!localStorage.getItem("chooseCloudSyncDialog")&&this.isBeta&&(this.dialogInfo={id:"cloudSyncDialog",visible:!0,title:this.$t("cloudLibrary.syncCloud.title"),showCancel:!0,content:this.$t("cloudLibrary.syncCloud.content"),confirmText:this.$t("cloudLibrary.syncCloud.confirm"),cancelText:this.$t("cloudLibrary.syncCloud.cancel"),cancelType:"action",class:"cloud-sync-dialog",data:{file:{file_url:t.result.file_url,file_name:t.result.file_name,content_length:t.result.content_length||0}}},this.sendPv({md:"cloud",ct:"cloud_storage_syn_pop"}),localStorage.setItem("chooseCloudSyncDialog",!0))})).catch((t=>{1===t?.data?.status&&(2===this.vipLevel?this.$message.success("云知识库空间不足，未自动同步"):(this.vipDialogInfo={id:"vipDialog",status:"cloudFull",visible:!0,novipText:"100M",vipText:"1G",tip:"云知识库空间不足，升级后可享受1G云空间"},this.sendPv({md:"cloud",ct:"cloud_storage_notenough_pop"})))})).finally((()=>{this.$refs.upload.clearFiles()}))},closeDialog(){this.visible=!1,this.$store.commit("CloudKnowledge/RESET_DATA")},confirm(){const t=this.uploadedFileList.filter((t=>t.checked));this.fileList.length+t.length>10?this.$message.error("一次最多使用10个文件"):(this.$store.commit("UploadFile/ADD_FILELIST",t),this.closeDialog())},handlerDialogVisible({id:t,type:e}){"cancel"===e?this[t]={...this[t],visible:!1,data:{}}:"confirm"===e?"cloudSyncDialog"===this[t].id&&(this.sendCl({md:"cloud",ct:"cloud_storage_syn_on"}),this.SetSyncStorage({enabled:!0}).then((()=>{this[t]={...this[t],visible:!1},this.syncCloud({...this[t].data.file}).then((()=>{})).catch((t=>{1===t?.data?.status&&(2===this.vipLevel?this.$message.success("云知识库空间不足，未自动同步"):(this.vipDialogInfo={id:"vipDialog",status:"cloudFull",visible:!0,novipText:"100M",vipText:"1G",tip:"云知识库空间不足，升级后可享受1G云空间"},this.sendPv({md:"cloud",ct:"cloud_storage_notenough_pop"})))}))})).catch((()=>{}))):"action"===e&&"cloudSyncDialog"===this[t].id&&(this.sendCl({md:"cloud",ct:"cloud_storage_syn_off"}),this.SetSyncStorage({enabled:!1}).then((()=>{this[t]={...this[t],visible:!1}})).catch((()=>{})))},handleClick(){if(this.tooltipVisible=!1,this.fileList.length>=10||this.contentOverPercent>0&&this.fileList.length>1||this.visible||this.dialogInfo.visible)return;const t=document.querySelector(".select-box");t&&("visible"!==t.style.visibility&&this.sendPv({ct:"document_upload",ctid:this.lastAssistantId}),t.style.visibility="visible"!==t.style.visibility?"visible":"hidden")}},beforeUnmount(){document.removeEventListener("click",this.hideCloud)}};i(85518);const zh=(0,bt.A)(Nh,[["render",Mh],["__scopeId","data-v-594e0e30"]]);var Rh=zh,Bh=i(13618);const Fh="quote_gurad_show_status",Uh=3e3,Hh="1",Wh=80,Xh=20,Gh=["p","h1","h2","h3","h4","h5","h6","blockquote","li"],Yh="请针对选择内容进一步提问",Vh=".katex",Zh=14,Qh="detail",Jh="index_glm4",qh="quote_pop",$h="quote_click",Kh="quote_close",td="search_start",ed=JSON.stringify({md:Qh,ct:qh,pds:Jh}),id={md:Qh,ct:$h,pds:Jh},nd=t=>JSON.stringify({...id,ctvl:t,pds:Jh}),od=JSON.stringify({md:Qh,ct:Kh,pds:Jh}),rd={md:Qh,ct:td,pds:Jh},ad={class:"quote-content-show"},sd={class:"quote-content-show-content thinScroll"},ld=["data-stats"];var cd={__name:"QuoteContentShow",props:{hasCurAssist:{type:Boolean,default:!1}},setup(t){const e=()=>{zs.A.commit(`Conversation/${Bh.O}`,"")},i=(0,n.EW)((()=>zs.A?.state?.Conversation?.quoteMarkdownText));return(r,a)=>{const s=(0,n.gN)("click");return(0,n.uX)(),(0,n.CE)("div",ad,[(0,n.Lk)("div",{class:(0,o.C4)(["quote-content-show-box",{"show-border-bottom":t.hasCurAssist}])},[(0,n.Lk)("div",sd,(0,o.v_)(i.value),1)],2),(0,n.bo)((0,n.Lk)("div",{class:"close-quote","data-stats":(0,B.R1)(od),onClick:e},null,8,ld),[[s]])])}}};i(25648);const ud=(0,bt.A)(cd,[["__scopeId","data-v-ce887456"]]);var hd=ud;function dd(t,e,i,o,r,a){return(0,n.uX)(),(0,n.CE)("div",{contenteditable:"true",class:"prosemirror-editor scroll-display-none",ref:"editor",onInput:e[0]||(e[0]=(...t)=>a.inputText&&a.inputText(...t)),onBlur:e[1]||(e[1]=(...t)=>a.inputBlur&&a.inputBlur(...t)),onFocus:e[2]||(e[2]=(...t)=>a.inputFocus&&a.inputFocus(...t)),onPaste:e[3]||(e[3]=(...t)=>a.handlePaste&&a.handlePaste(...t))},null,544)}var gd={name:"editableDiv",props:{modelValue:{type:String,default:""}},data(){return{isBlur:!0}},watch:{modelValue(t){this.isBlur&&(this.$refs.editor.innerHTML=t)}},methods:{inputText(t){(0,d.M7)(this,"update:modelValue",this.$refs.editor.innerText,t?.data)},inputFocus(){this.isBlur=!1},inputBlur(){this.isBlur=!0},handlePaste(t){(0,d.M7)(this,"paste",t)}},emits:["update:modelValue","paste"]};const pd=(0,bt.A)(gd,[["render",dd]]);var fd=pd;const md={class:"atAssistPopover"},vd={class:"title"},bd={class:"close-area"},xd={class:"content"},yd={class:"skeleton-item"},_d=["itemid","onClick","onMouseenter"],wd={class:"assist-padding"},kd={class:"item-text"},Cd=["src","alt"],Sd={class:"text-content"},Id=["src","alt"],Md={class:"assist-title"},Td=["src","alt"],Ed={class:"close-area"},Ad=["src"];function Dd(t,e,i,a,s,l){const c=(0,n.g2)("el-skeleton-item"),u=(0,n.g2)("el-skeleton"),h=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",md,[(0,n.bo)((0,n.Lk)("div",{class:(0,o.C4)(["assist-popover",{"popover-adjust":l.hasCurAssist,"popover-bottom":s.assistantList?.length<=5||s.listLoading}])},[(0,n.Lk)("div",vd,[e[5]||(e[5]=(0,n.eW)(" 选择智能体 ")),(0,n.Lk)("div",bd,[((0,n.uX)(),(0,n.CE)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:e[0]||(e[0]=(...t)=>l.handlePopoverClose&&l.handlePopoverClose(...t))},e[4]||(e[4]=[(0,n.Lk)("path",{d:"M3.14905 3.14777L12.8508 12.8496",stroke:"#838A95","stroke-linecap":"round"},null,-1),(0,n.Lk)("path",{d:"M13.0016 2.99786L2.99725 13.0022",stroke:"#838A95","stroke-linecap":"round"},null,-1),(0,n.Lk)("g",{style:{"mix-blend-mode":"darken"},opacity:"0.01"},[(0,n.Lk)("rect",{width:"16",height:"16",fill:"white"})],-1)])))])]),(0,n.Lk)("div",xd,[(0,n.bF)(u,{loading:s.listLoading,animated:"",throttle:0,class:"content",count:5},{template:(0,n.k6)((()=>[(0,n.Lk)("div",yd,[(0,n.bF)(c,{variant:"image",style:{width:"24px",height:"24px","border-radius":"12px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}}),(0,n.bF)(c,{variant:"p",style:{"margin-left":"8px",height:"18px",background:"var(--el-skeleton-bgcolor, #f2f0f5)"}})])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",{onMouseleave:e[1]||(e[1]=(0,r.D$)(((...t)=>l.handleMouseLeave&&l.handleMouseLeave(...t)),["stop"]))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.assistantList,(t=>((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["assist-item",{selected:s.selectedAssist.assistant_id===t.assistant_id}]),key:t.assistant_id,itemid:t.assistant_id,onClick:e=>l.selectAssist(t),onMouseenter:e=>l.handleMouseEnter(t)},[(0,n.Lk)("div",wd,[(0,n.Lk)("div",kd,[(0,n.Lk)("img",{src:t.avatar,alt:t.name},null,8,Cd),(0,n.Lk)("span",null,(0,o.v_)(t.name),1),(0,n.Lk)("span",Sd,(0,o.v_)("public"===t["view_type"]?t.description:""),1)]),(0,n.Lk)("img",{src:s.typeImg[t.view_type],alt:t.name,class:"item-type"},null,8,Id)])],42,_d)))),128))],32)])),_:1},8,["loading"])])],2),[[r.aG,s.popoverVisible]]),(0,n.bo)((0,n.Lk)("div",{class:(0,o.C4)(["current-assist",{"no-top-border":i.showQuoteContext}])},[(0,n.Lk)("div",Md,[e[6]||(e[6]=(0,n.eW)(" 与 ")),(0,n.bF)(h,{class:"item",effect:"dark",content:"切换智能体",placement:"top"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{onClick:e[2]||(e[2]=(...t)=>l.curAssistClick&&l.curAssistClick(...t)),class:"click-area clickable"},[(0,n.Lk)("img",{src:t.curAssist?.avatar,alt:t.curAssist?.name},null,8,Td),(0,n.Lk)("span",null,(0,o.v_)(t.curAssist?.name),1)])])),_:1}),e[7]||(e[7]=(0,n.eW)(" 对话 "))]),(0,n.Lk)("div",Ed,[(0,n.Lk)("img",{class:"close-icon",src:l.closeIcon,onClick:e[3]||(e[3]=(...t)=>l.cancelCurAssist&&l.cancelCurAssist(...t))},null,8,Ad)])],2),[[r.aG,l.hasCurAssist]])])}var Ld=i(52733),Od={name:"atAssistPopover",props:{inputValue:{type:String,default:""},inputRef:{type:HTMLTextAreaElement,default:null},insertPromptBoxHtml:{type:String,default:""},editableDivRef:{type:HTMLDivElement,default:null},showQuoteContext:{type:Boolean,default:!1}},data(){return{assistantList:[],popoverVisible:!1,typeImg:{self:i(11287),recent:i(53180),public:i(36069)},selectedAssist:null,isAutoComplete:!1,listLoading:!0,openType:"",isActiveClose:!1,lastSearchStr:"",isPassiveScroll:!1,isComposition:!1}},computed:{...(0,m.aH)("Conversation",["curAssist"]),...(0,m.aH)("DarkMode",["isDarkMode"]),hasCurAssist(){return this.curAssist?.assistant_id},closeIcon({isDarkMode:t}){const e=i(t?71047:32188);return e}},watch:{popoverVisible(t){this.$emit("getAtAssistSelect",t),t?(this.isPassiveScroll=!0,this.isActiveClose=!1,"switch"===this.openType?this.sendPv({md:"chat",ct:"at_switch_list_pop",pds:this.assistantId?`assistant_${this.assistantId}`:`assistant_${Ph}`}):this.sendPv({md:"chat",ct:"at_list_pop",pds:this.assistantId?`assistant_${this.assistantId}`:`assistant_${Ph}`})):this.openType=""},inputRef(t){t&&(t.addEventListener("compositionstart",this.handleCompositionStart),t.addEventListener("compositionend",this.handleCompositionEnd))},editableDivRef(t){t&&(t.addEventListener("compositionstart",this.handleCompositionStart),t.addEventListener("compositionend",this.handleCompositionEnd))}},mounted(){this.addEventListener()},beforeUnmount(){window.removeEventListener("click",this.handleWindowClick),document.removeEventListener("selectionchange",this.handleSelectionChange),window.removeEventListener("keydown",this.handleKeyDown)},methods:{addEventListener(){window.addEventListener("click",this.handleWindowClick,!0),document.addEventListener("selectionchange",this.handleSelectionChange),window.addEventListener("keydown",this.handleKeyDown)},handleCompositionStart(){this.isComposition=!0},handleCompositionEnd(){this.isComposition=!1},handleWindowClick(t){if(this.popoverVisible){const e=document.querySelector(".assist-popover"),i=document.querySelector(".input-outer");e&&i&&!e.contains(t.target)&&!i.contains(t.target)&&(this.popoverVisible=!1,this.isActiveClose=!0)}},handleSelectionChange(){this.inputRef!==document.activeElement&&this.editableDivRef!==document.activeElement||this.handleInputChange()},handleKeyDown(t){if(t.metaKey&&"Enter"===t.key){const t=this.getCursorIndex(),e=this.getFirstAtBeforeCursor();if(-1!==e){const i=this.getCurVal().slice(e+1,t),n=this.assistantList.find((t=>t.name.trim()===i.trim()));n&&(this.selectedAssist=n,this.$store.commit("Conversation/SET_CUR_ASSIST",n),this.popoverVisible=!1)}}else if("Enter"===t.key)this.popoverVisible&&!this.isComposition&&(t.preventDefault(),t.stopPropagation(),this.setCurAssist());else if("ArrowUp"===t.key){if(this.popoverVisible){if(t.preventDefault(),this.selectedAssist?.assistant_id){const t=this.assistantList.findIndex((t=>t.assistant_id===this.selectedAssist.assistant_id));t>0&&(this.selectedAssist=this.assistantList[t-1])}else this.selectedAssist=this.assistantList[0]||{};this.adjustScroll("up")}}else if("ArrowDown"===t.key){if(this.popoverVisible){if(t.preventDefault(),this.selectedAssist?.assistant_id){const t=this.assistantList.findIndex((t=>t.assistant_id===this.selectedAssist.assistant_id));t<this.assistantList.length-1&&(this.selectedAssist=this.assistantList[t+1])}else this.selectedAssist=this.assistantList[this.assistantList.length-1]||{};this.adjustScroll("down")}}else"Escape"===t.key?(this.popoverVisible&&(this.isActiveClose=!0),this.popoverVisible=!1):"Backspace"===t.key&&document.activeElement===this.editableDivRef&&this.handleInputChange()},adjustScroll(t){this.isPassiveScroll=!0;const e=document.querySelector(".assist-popover"),i=e.querySelector(".content"),n=e.querySelector(".title"),o=e.querySelector(`.assist-item[itemid="${this.selectedAssist.assistant_id}"]`);if(!o)return;const r=o.offsetTop,a=o.offsetTop+o.clientHeight,s=i.scrollTop+n.clientHeight,l=s+i.clientHeight;a<=l&&r>=s||(i.scrollTop="down"===t?a-i.clientHeight-n.clientHeight:r-n.clientHeight)},changeValue(t,e){(0,d.M7)(this,"changeValue",{key:t,value:e})},handlePopoverClose(){this.popoverVisible=!1,"switch"===this.openType?this.sendCl({md:"chat",ct:"at_switch_list_close",pds:this.assistantId?`assistant_${this.assistantId}`:`assistant_${Ph}`}):this.sendCl({md:"chat",ct:"at_list_close",pds:this.assistantId?`assistant_${this.assistantId}`:`assistant_${Ph}`})},curAssistClick(){this.isActiveClose=!1,this.isAutoComplete=!1,"@"!==this.getCurVal()[this.getCurVal().length-1]&&(this.inputRef?this.changeValue("inputValue",this.inputValue+"@"):(this.getCurEle().lastChild.textContent+="@",this.changeValue("insertPromptBoxHtml",this.getCurEle()?.innerHTML||""))),this.inputRef?(this.getCurEle()?.focus(),this.getCurEle().selectionStart=this.inputValue.length,this.getCurEle().selectionEnd=this.inputValue.length):this.setSelection(),this.openType="switch",this.sendPv({md:"chat",ct:"at_item_switch",pds:this.assistantId?`assistant_${this.assistantId}`:`assistant_${Ph}`})},setSelection(){const t=new Range;t.collapse(!0);let e=this.getCurEle().lastChild;while(3!==e.nodeType)e=e.lastChild;t.setStart(e,e.textContent.length);const i=window.getSelection();i.removeAllRanges(),i.addRange(t)},selectAssist(t){this.selectedAssist=t,this.setCurAssist()},handleMouseEnter(t){this.isPassiveScroll?this.isPassiveScroll=!1:this.selectedAssist=t},handleMouseLeave(){this.selectedAssist={}},cancelCurAssist(){this.$store.commit("Conversation/SET_CUR_ASSIST",{})},getCurEle(){return this.inputRef||this.editableDivRef},getCurVal(){return this.inputRef?this.inputValue:this.insertPromptBoxHtml},getCursorIndex(){if(this.inputRef)return this.getCurEle()?.selectionStart;const t=document.getSelection();return t?.baseOffset},getFirstAtBeforeCursor(){const t=this.getCursorIndex();let e="";if(this.inputRef)e=this.inputValue;else{const t=document.getSelection();e=t.focusNode?.textContent}let i=-1;for(let n=t-1;n>=0;n--)if("@"===e[n]){i=n;break}return i},handleInputChange:Sn()((async function(){if(this.isAutoComplete)return void(this.isAutoComplete=!1);if(-1===this.getCurVal()?.indexOf("@"))return void(this.popoverVisible=!1);const t=this.getCursorIndex(),e=this.getFirstAtBeforeCursor();if(-1===e)this.popoverVisible=!1;else{const i=this.getCurVal().slice(e+1,t);if(i.includes(" ")||i.length>20||i.includes("\n"))return void(this.popoverVisible=!1);if(""===i&&""===this.lastSearchStr&&this.popoverVisible||i&&i===this.lastSearchStr||!this.popoverVisible&&this.isActiveClose)return void(!this.isActiveClose&&this.assistantList?.length&&(this.popoverVisible=!0));if(i&&i.includes(this.lastSearchStr)&&!this.assistantList?.length)return;await this.getAssistantList(i)}}),200),async getAssistantList(t){try{const e={keyword:t,pageSize:40};this.listLoading=!0,this.isActiveClose||(this.popoverVisible=!0),this.lastSearchStr=t;const i=await(0,Ld.Wn)(e);this.assistantList=(i?.result?.list||[]).filter((t=>t.name)),0===this.assistantList?.length?(this.popoverVisible=!1,this.selectedAssist={},this.sendCl({md:"chat",ct:"at_list_empty",ctvl:t,pds:this.assistantId?`assistant_${this.assistantId}`:`assistant_${Ph}`})):(this.autoMatch()||(this.selectedAssist=this.assistantList[0]),this.showAssistList())}catch(e){this.popoverVisible=!1,this.selectedAssist={},this.assistantList=[]}finally{this.listLoading=!1}},autoMatch(){for(let t=0;t<this.assistantList.length;t++){const e=this.getFirstAtBeforeCursor(),i=this.getCursorIndex(),n=this.getCurVal().slice(e+1,i);if(n&&this.assistantList[t].name&&n===this.assistantList[t].name)return this.selectedAssist=this.assistantList[t],!0}return!1},showAssistList(){this.isActiveClose||(this.popoverVisible=!0),this.curAssist?.assistant_id&&this.assistantList.find((t=>t.assistant_id===this.curAssist.assistant_id))&&(this.selectedAssist={...this.curAssist}),this.setCenter()},setCenter(){this.$nextTick((()=>{const t=document.querySelector(".assist-popover .assist-item.selected");t&&t.scrollIntoView({block:"center"})}))},setCurAssist(){this.$store.commit("Conversation/SET_CUR_ASSIST",this.selectedAssist),this.isActiveClose=!1,"switch"===this.openType?this.sendCl({md:"chat",ct:"at_switch_list_click",ctvl:this.curAssist?.assistant_id,extra:this.curAssist?.view_type,pds:this.assistantId?`assistant_${this.assistantId}`:`assistant_${Ph}`}):this.sendCl({md:"chat",ct:"at_list_click",ctvl:this.curAssist?.assistant_id,extra:this.curAssist?.view_type,pds:this.assistantId?`assistant_${this.assistantId}`:`assistant_${Ph}`}),this.popoverVisible=!1;const t=this.getFirstAtBeforeCursor(),e=this.getCursorIndex();if(-1!==t){if(this.inputRef)this.changeValue("inputValue",this.inputValue.slice(0,t)+this.inputValue.slice(e));else{const i=document.getSelection();i.focusNode.textContent=i.focusNode.textContent.slice(0,t)+i.focusNode.textContent.slice(e);const n=document.createRange();n.selectNodeContents(i.focusNode),n.collapse(!0),n.setStart(i.focusNode,t),i.removeAllRanges(),i.addRange(n),this.changeValue("insertPromptBoxHtml",this.getCurEle()?.innerHTML||"")}this.isAutoComplete=!0}}},emits:["changeValue"]};i(99717);const jd=(0,bt.A)(Od,[["render",Dd]]);var Pd=jd,Nd=i(48975),zd=i(87865),Rd=i(4633),Bd=i.n(Rd);Oh();var Fd={name:"SearchBox",props:{documentInit:{type:Boolean,default:()=>!1},searchValue:{type:String,default:()=>""},isShowRetry:{type:Boolean,default:()=>!1},retryCanUse:{type:Boolean,default:()=>!0},autoPlaceholder:{type:String,default:()=>L.Ay.global.t("conversation.inputPlaceholder")},sharedConversationId:{type:String,default:()=>""},source:{type:String,default:()=>""},taskId:{type:String,default:()=>""}},components:{Upload:rh.A,UploadFile:Rh,UploadPreiew2:wh,EditableDiv:fd,AtAssistPopover:Pd,QuoteContentShow:hd,CreateSession:Nd.A,AIDrawPromptOptions:We},data(){return{iscomposition:!1,insertPromptLight:[],originPromptText:"",originPromptData:{},isInsertPrompt:!1,editorView:null,editorState:null,effect:!0,defaultHeight:0,maxRows:3,minRows:1,inputValue:"",inputLength:0,verification:!0,isThreeRow:!1,textareaStatus:"normal",clearBtnShow:!1,showImprove:!1,isInsertImprove:!1,improveList:[],improveMatchWords:[],improveSource:"",askList:[],wList:[],moveIndex:-1,improveSelect:-1,addslot:!1,isAddLine:!1,isHover:!1,placeholderList:[],triggerTemplate:!1,triggerCondition:!1,selectAll:!1,showUploadAnimate:!1,showShareGuide:!1,imgList:[],uploadStatus:0,end:2,insertPromptBoxHtml:"",atAssistPopoverIsShow:!1,stopStreamTip:!0,timer:null,HAS_QUOTE_PLACEHOLDER:Yh}},computed:{...(0,m.aH)("Home",["userInfo","configuration"]),...(0,m.aH)("UploadFile",["fileList"]),...(0,m.aH)("DarkMode",["isDarkMode"]),...(0,m.aH)("Conversation",["isSearching","isOver","isLoading","glmsShare","sharedIdList","dataList","clickSession","curAssist","quoteMarkdownText"]),...(0,m.aH)("Glms",["assistantInfo"]),...(0,m.L8)("Conversation",["lastItem","isProd","selectedAllStatus"]),...(0,m.L8)("UploadFile",["isUploading","contentOverPercent","maxReadPercent"]),...(0,m.L8)("Glms",["assistantId"]),...(0,m.L8)("Home",["isBeta"]),useImprove(){return this.isProd},focused(){return"focus"===this.textareaStatus},isAIDraw(){return"65a232c082ff90a2ad2f15e2"===this.assistantInfo.assistant_id&&"/main/alltoolsdetail"!==this.$route.path},isConversation(){return this.lastItem.isEventSourceaOpen&&!this.lastItem.printComleted},isManualStopStream(){return this.lastItem.manualStopStream},isEventSourceaOpen(){return this.lastItem.isEventSourceaOpen},isImageUploading(){const t=this.lastItem;return!!(t&&t.nativeUpload&&t.isImageUploading)},showUploadIcon(){const t=this.$route.params?.id,e=["659e54b1b8006379b4b2abd6","66a1c8f8d042e99383005c12","66c33d33d02b0a044cdfffc9"];return!e.includes(t)&&this.configuration?.detail?.uploadIcon||!1},showQuoteContext(){return this.quoteMarkdownText?.length>0&&!this.atAssistPopoverIsShow},hasCurAssist(){return Boolean(this.curAssist?.assistant_id)},randomPlaceholder(){return this.showUploadAnimate?"":this.fileList.length?this.$t("conversation.inputFilePlaceholder"):"alltoolsdetail"===this.$route.name?this.$t("conversation.inputGLMPlaceholder"):this.$t("conversation.inputPlaceholder")},maxReadPercentText(){return this.$t("conversation.fileLengthLimit",{num:this.maxReadPercent})},empty(){return!this.inputValue.replace(/\n/gi,"").trim()&&0===this.fileList?.length&&0===this.quoteMarkdownText?.length}},watch:{inputValue(t,e){t||(this.isInsertPrompt=!1,this.showImprove=!1,this.improveSource="",this.isInsertImprove=!1,this.addslot=!1,this.improveList=[],this.askList=[],this.$nextTick((()=>{this.$refs.textbox&&this.$refs.textbox.focus()}))),setTimeout((()=>{this.isInsertPrompt||(this.setTextareaHeight(this.$refs.textbox),this.showClearBtn())}));let i=t.trim();this.inputLength=i.length,i&&i.length>this.limitLength?(i=i.slice(0,this.limitLength),this.inputValue=i,this.inputLength=i.length,this.verification=!1,this.$message.info(this.$t("conversation.inputMaxLimit",{num:this.limitLength}))):this.verification=!0,(0,d.M7)(this,"setSearchValue",i.replace(/^\s*[\r\n]/gm,"")),this.handleInputChange()},showImprove(t){t&&(this.triggerTemplate=!0,this.sendPv({md:"improve_template",ct:"improve_template_module_pop"}))},"askList.length"(t){t&&(this.triggerCondition=!0,this.sendPv({md:"improve_condition",ct:"improve_condition_module_pop"}))},isInsertImprove(t){t&&this.askList.length&&this.calcItems()},userInfo(t,e){t?.phone&&this.showUploadAnimateIcon()},"fileList.length"(){this.calcMaxHeight()},quoteMarkdownText(t,e){setTimeout((()=>{t?.length&&t!==e&&this.$refs.textbox?.focus?.()}),300)}},mounted(){if(document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.setBlur()})),document.body.addEventListener("focusin",(t=>{const e=this.$refs.textbox||this.$refs.insertpromptbox?.$refs?.editor;A.OF&&e&&setTimeout((()=>{e.scrollIntoView(!0)}),300)})),Lh(this),this.getTextareaInitHeight(),this.addEventOn(),h()(this.$refs.textbox).off("paste").on("paste",(()=>{setTimeout((()=>{this.setTextareaHeight(this.$refs.textbox)}))})),this.inputValue=this.searchValue,window.electronAPI?.registerSearchBox){const t=history.state?.params?.gettext;if(t){const e=t.trim();if(!this.userInfo?.phone)return;this.inputValue="",this.inputLength=0,setTimeout((()=>{this.inputValue=e,this.inputLength=this.inputValue.length,this.setTextareaHeight(this.$refs.textbox)}),10)}window.electronAPI.registerSearchBox(((t,e)=>{const i=e.trim();this.userInfo?.phone&&(this.inputValue="",this.inputLength=0,setTimeout((()=>{this.inputValue=i,this.inputLength=this.inputValue.length,this.setTextareaHeight(this.$refs.textbox)}),10))}))}this.calcMaxHeight("onload"),this.timer=setTimeout((()=>{this.stopStreamTip=!1}),5e3),this.$nextTick((()=>{this.$refs.textbox&&this.$refs.textbox.focus()}))},beforeUnmount(){this.timer&&clearTimeout(this.timer),this.stopStreamTip=!0,(0,d.GW)(p.A,"textboxFocus"),(0,d.GW)(p.A,"textboxBlur"),(0,d.GW)(p.A,"clearPromptHtml"),(0,d.GW)(p.A,"chooseSearchValue"),(0,d.GW)(p.A,"cogViewAppendPrompt")},methods:{...(0,m.PY)("Conversation",{setGlmsShare:"SET_GLMS_SHARE",setClearShareIdList:"SET_CLEAR_SHARE_ID_LIST",setCurrentOnClickedStatus:"SET_CURRENT_ON_CLICKED_STATUS",setShowShareLoginDialog:"SET_SHOW_SHARE_LOGIN_DIALOG",setDataList:"SET_DATA_LIST",setClickSession:"SET_CLICK_SESSION"}),addEventOn(){(0,d.eX)(p.A,"textboxFocus",(()=>{this.setFocus()})),(0,d.eX)(p.A,"textboxBlur",(()=>{this.setBlur()})),(0,d.eX)(p.A,"clearPromptHtml",(()=>{this.promptInsertHtml()})),(0,d.eX)(p.A,"chooseSearchValue",(t=>{this.handlePromptInsert(t)})),(0,d.eX)(p.A,"cogViewAppendPrompt",(({prompt:t})=>{let e="";this.inputValue?this.inputValue+=`，${t}`:this.inputValue=t,e=this.inputValue,this.handlePromptInsert(e)}))},handlePromptInsert(t){this.isInsertPrompt=!1,this.resetImprove(),this.inputValue=t,(0,d.M7)(this,"setSearchValue",t),this.$nextTick((()=>{this.$refs.textbox&&this.$refs.textbox.focus()}))},generateLink(){this.sharedIdList.sort(((t,e)=>t.index-e.index));const t=this.sharedIdList.map((t=>t.log_id));(0,as.Ug)({history_ids:t,assistant_id:history.state?.params?.id}).then((t=>{const{short_url:e}=t.result,i=this.sharedIdList[0];let{question:n,img_list:o,file_list:r}=i;n||(Array.isArray(o)&&!o.length&&Array.isArray(r)&&r.length&&(n=r[0].file_url||""),Array.isArray(r)&&!r.length&&Array.isArray(o)&&o.length&&(n=o[0].image_url||""));let a="智谱清言";"gdetail"===this.$route.name&&(a+=`智能体「${this.assistantInfo.name}」`),n=n.length>20?`${n.substring(0,19)}... →点击查看${a}的回答`:`${n} →点击查看${a}的回答`;const s=`https://${window.location.hostname}${e}`,l=`${n}${s}`;navigator.clipboard&&"function"===typeof navigator.clipboard.writeText?navigator.clipboard.writeText(l).then((()=>{this.$message.success(this.$t("conversation.copiedUrlToShare"))})).catch((t=>{setTimeout((()=>{this.myCopy(l)}),0)})):(this.$message.success(this.$t("conversation.copiedUrlToShare")),this.copyToClipboard(l),document.execCommand("copy"))})).finally((()=>{this.handleCancel(),(0,d.M7)(p.A,"refreshSessionList")}))},handleCancel(){this.setGlmsShare(!1),this.setClearShareIdList(),this.setCurrentOnClickedStatus(!1),this.dataList.forEach((t=>{t.onCheckedStatus=!1}))},changeSelectedAllStatus(){const t=[];if(this.selectedAllStatus)return this.dataList.forEach((t=>t.onCheckedStatus=!1)),this.setClearShareIdList(t);this.dataList.forEach(((e,i)=>{!e.printComleted||e.forbidden||e.manualStopStream||e.is_sensitive&&!e.is_intervene||(e.onCheckedStatus=!0,t.push({...e,index:i}))})),this.setClearShareIdList(t)},calcMaxHeight(t){this.$nextTick((()=>{const e=document.querySelector(".file-list-box"),i=e?344-e.offsetHeight-20:344;document.querySelector("textarea")&&(document.querySelector("textarea").style.maxHeight=`${i}px`),document.querySelector(".prosemirror-editor")&&(document.querySelector(".prosemirror-editor").style.maxHeight=`${i}px`),"onload"!==t&&document.querySelector(".footer")?.scrollIntoView()}))},handlePaste(t){const e=(t.clipboardData||window.clipboardData).items;let i=null;try{if(!e||0===e.length)return;for(let t=0;t<e.length;t++)if(-1!==e[t].type.indexOf("image")){i=e[t].getAsFile();break}}catch(n){}i&&t.preventDefault()},showUploadAnimateIcon(){(0,zd.Lg)(zd.Ge)||setTimeout((()=>{this.showUploadAnimate=!0,(0,zd.ZB)(zd.Ge,1),setTimeout((()=>{this.showUploadAnimate=!1}),2e3)}),500)},clickComponent(){(0,d.M7)(this,"clickComponent")},retryUpload(){this.$refs.imginput._uploadImgChangeInner()},copyToClipboard(t){const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},myCopy(t,e=this.$t("conversation.copiedUrlToShare")){this.$copyText(t).then((()=>{this.$message.success(e)})).catch((t=>{this.$message.error("糟糕，链接生成失败，请重新尝试！")}))},cleatInput(){this.$refs.insertpromptbox&&(this.insertPromptBoxHtml=""),this.isInsertPrompt=!1,this.isInsertImprove=!1,this.inputValue="",this.showClearBtn(),this.setFocus(),setTimeout((()=>{this.setFocus()})),setTimeout((()=>{this.setFocus()}),50)},showClearBtn(){setTimeout((()=>{if(this.isInsertPrompt||this.isInsertImprove){const t=this.$refs.insertpromptbox?.$refs?.editor;if(!t)return void(this.clearBtnShow=!1);const e=t.scrollHeight;this.clearBtnShow=e>70}else this.clearBtnShow=this.isThreeRow}))},promptInsertHtml(t){if(this.showImprove=!1,this.isInsertImprove=!1,!t)return this.inputValue="",this.$refs.insertpromptbox&&(this.insertPromptBoxHtml=""),this.isInsertPrompt=!1,void(this.insertPromptLight=[]);this.originPromptData=t;let e=t.text;this.scrollToBottom("#session-container .session-block"),this.isInsertPrompt=!0,this.inputValue=e.replace(/\[(.*?)\]/g," $1 "),this.originPromptText=this.inputValue,this.insertPromptLight=[],this.$nextTick((()=>{const t=/\[(.*?)\]/g;let i;while(null!==(i=t.exec(e)))this.insertPromptLight.push(i[1]);e=e.replace(/\[(.*?)\]/g,'<span class="span-highlight-input" style="margin: 0 5px; padding: 3px 3px; border-radius: 4px;"><highlight-input contenteditable="true" class="highlight-input" style="padding: 0 8px 0 4px; color: #4f5866;  cursor: pointer;"> $1</highlight-input></span><span> </span>'),h()(".enter").css("align-self","end");const n=e.replace(/(.+?)\n/g,"<p>$1</p>");A.OF?this.insertPromptBoxHtml=n+"<span><br></span>":this.insertPromptBoxHtml=n,this.$nextTick((()=>{const t=document.querySelector("highlight-input");if(t){t.contentEditable=!0,t.parentElement.classList.add("hover-highlight-input"),t.style.background="var(--bg_floating_white_1, #363739)",t.style.cursor="text",t.style.color="var(--txt_icon_black_1, rgba(255, 255, 255, 0.95))",t.style.borderRadius="0px",t.parentElement.style.outline="1px solid rgb(36, 84, 255)";const e=document.createRange();e.selectNodeContents(t),e.setStartAfter(t),e.collapse(!0);const i=window.getSelection();i.removeAllRanges(),i.addRange(e),t.focus()}this.showClearBtn()}))})),setTimeout((()=>{const t=document.querySelector("highlight-input");t&&(t.parentElement.classList.add("hover-highlight-input"),t.style.background="var(--bg_floating_white_1, #363739)",t.style.cursor="text",t.style.color="var(--txt_icon_black_1, rgba(255, 255, 255, 0.95))",t.style.borderRadius="0px",t.parentElement.style.outline="1px solid rgb(36, 84, 255)")}))},getDebounceImproveList:Sn()((function(t,e){(0,oh.v)({prompt:t,_id:this.userInfo?._id}).then((t=>{if(""===this.inputValue)return;const{doc:e,words:i}=t?.result;if(this.improveMatchWords=i,e.length)if(this.improveList=e.map((t=>({...t,title:t.title,content:t.show_text,intobox_text:t.intobox_text}))),this.improveList.filter((t=>!!t.title)).length)this.showImprove=!0,this.improveSource="",this.isInsertImprove=!1,this.askList=[],this.$nextTick((()=>{this.$refs.textbox.focus(),this.$refs.searchImprove.style.top=-(this.$refs.searchImprove.offsetHeight+12)+"px"}));else{this.showImprove=!1;const{condition:t,condition_text:e}=this.improveList[0];this.askList=t.map(((t,i)=>({title:t,content:e[i]})))}else this.showImprove=!1,this.isInsertImprove=!1,this.$nextTick((()=>{this.$refs.textbox.focus()}))})).catch((t=>{}))}),300),improveInsertHtml(t,e){if(this.improveSource=e,this.showImprove=!1,!t)return this.inputValue="",this.$refs.insertpromptbox&&(this.insertPromptBoxHtml=""),this.isInsertImprove=!1,void(this.insertPromptLight=[]);const i=t;this.scrollToBottom("#session-container .session-block"),this.inputValue=i.replace(/\[(.*?)\]/g," $1 "),this.originPromptText=this.inputValue,this.insertPromptLight=[],this.$nextTick((()=>{const t=/\[(.*?)\]/g;let e;while(null!==(e=t.exec(i)))this.insertPromptLight.push(e[1]);h()(".enter").css("align-self","end");const n=i.replace(/(.+?)\n/g,"<p>$1</p>");this.insertPromptBoxHtml=n,this.$nextTick((()=>{const t=document.querySelector("highlight-input");if(t){t.contentEditable=!0,t.parentElement.classList.add("hover-highlight-input"),t.style.background="var(--bg_floating_white_1, #363739)",t.style.cursor="text",t.style.color="var(--txt_icon_black_1, rgba(255, 255, 255, 0.95))",t.style.borderRadius="0px",t.parentElement.style.outline="1px solid rgb(36, 84, 255)";const e=document.createRange();e.selectNodeContents(t),e.setStartAfter(t),e.collapse(!0);const i=window.getSelection();i.removeAllRanges(),i.addRange(e),t.focus()}else{const t=document.querySelector(".prosemirror-editor");if(t){const e=document.createRange();e.selectNodeContents(t),e.collapse(!1);const i=window.getSelection();i.removeAllRanges(),i.addRange(e)}}this.showClearBtn()}))})),setTimeout((()=>{const t=document.querySelector("highlight-input");t&&(t.parentElement.classList.add("hover-highlight-input"),t.style.background="var(--bg_floating_white_1, #363739)",t.style.cursor="text",t.style.color="var(--txt_icon_black_1, rgba(255, 255, 255, 0.95))",t.style.borderRadius="0px",t.parentElement.style.outline="1px solid rgb(36, 84, 255)")}))},improveInsert(t,e){this.sendCl({md:"improve_template",ct:"improve_template_click",ctvl:e,ctnm:t+1,extra:this.improveMatchWords.join(",")}),this.improveSelect=t,this.improveInsertHtml(this.improveList[t].intobox_text,"template"),this.isInsertImprove=!0,this.improveSelect=-1;const{condition:i,condition_text:n}=this.improveList[t];this.askList=i.map(((t,e)=>({title:t,content:n[e]})))},improveEnter(t){this.isScroll?setTimeout((()=>{this.isScroll=!1}),100):(this.isHover=!0,this.improveSelect=t,this.$nextTick((()=>{this.$refs.textbox.focus()})))},improveLeave(){this.isScroll?setTimeout((()=>{this.isScroll=!1}),100):(this.isHover=!1,this.improveSelect=-1,this.$nextTick((()=>{this.$refs.textbox.focus()})))},improveScroll(){this.isScroll=!0},closeTemplate(){this.showImprove=!1,this.improveSource="template",this.sendCl({md:"improve_template",ct:"improve_template_close",ctvl:this.improveList.map((t=>t.title)).join(","),ctid:this.improveMatchWords.join(",")}),this.improveMatchWords=[]},calcItems(t=!0){this.wList=[],t&&(this.moveIndex=-1),this.$nextTick((()=>{const t=document.querySelector(".suggest-slot-middle");if(t){const t=parseFloat(window.getComputedStyle(document.querySelector(".suggest-slot-middle")).width),e=parseFloat(window.getComputedStyle(document.querySelector(".suggest-slot-middle-inner")).gap);let i=0;const n=this.askList.length;while(i<n-1){let o=0;for(let r=i;r<n;r++){const a=window.getComputedStyle(document.querySelectorAll(".ask")[r]),s=parseFloat(a.width),l=parseFloat(a.paddingLeft),c=parseFloat(a.paddingRight),u=s+l+c+e;if(o+u-e>t){i=r,this.wList.push(o);break}if(r===n-1){i=r;break}o+=u}}}}))},handleResize(){this.calcItems(!1)},clickLeft(){if(this.moveIndex<=-1)return;let t;this.moveIndex-=1,-1===this.moveIndex?t=0:(t=this.wList.reduce(((t,e,i)=>(i<=this.moveIndex&&(t+=e),t)),0),0===t&&(this.moveIndex=-1)),this.$nextTick((()=>{document.querySelector(".suggest-slot-middle-inner").style.transform=`translateX(-${t}px)`}))},clickRight(){if(this.moveIndex>=this.wList.length-1)return;this.moveIndex+=1;const t=this.wList.reduce(((t,e,i)=>(i<=this.moveIndex&&(t+=e),t)),0);this.$nextTick((()=>{document.querySelector(".suggest-slot-middle-inner").style.transform=`translateX(-${t}px)`}))},addSlot(t,e){this.improveSource="template",this.addslot=!0,this.sendCl({md:"improve_condition",ct:"improve_condition_click",ctvl:e,ctnm:t+1}),this.$nextTick((()=>{const e=`<p class="improve-slot" style="padding-top: 12px; padding-bottom: 0">${this.askList[t].title}：${this.askList[t].content}</p>`,i=/\[(.*?)\]/g;let n;while(null!==(n=i.exec(e)))this.insertPromptLight.push(n[1]);this.insertPromptBoxHtml||(this.insertPromptBoxHtml+=this.inputValue),this.insertPromptBoxHtml+=e;const o=document.createRange(),r=document.getElementsByClassName("improve-slot"),a=r[r.length-1];o.selectNodeContents(a),o.setStartAfter(a),o.collapse(!0);const s=window.getSelection();s.removeAllRanges(),s.addRange(o);const l=document.getElementsByClassName("prosemirror-editor")[0];l&&l.innerText.replace(/^\s*[\r\n]/gm,"")&&(this.inputValue=l.innerText.replace(/^\s*[\r\n]/gm,"")),l.scrollHeight>l.clientHeight&&setTimeout((()=>{l.scrollTop=l.scrollHeight}),0)}))},getTextareaInitHeight(){const t=document.querySelector(".input-box textarea");t&&(this.defaultHeight=t.clientHeight),setTimeout((()=>{const t=document.querySelector(".input-box textarea");t&&(this.defaultHeight=t.clientHeight)}),300)},openShareDialog(){this.isSearching||(0,d.M7)(this,"openShareDialog")},retry(){this.sendCl({md:"detail",ct:"retry"}),(0,d.M7)(this,"retry")},closeStream(){return new Promise((t=>{(0,d.M7)(this,"manualStopStream",t)}))},setTextareaHeight(t){if(!t)return;h()(t).css({height:"auto"}).height(25);let e=t.scrollHeight,i=!1;e>272?e=272:e>this.defaultHeight&&(i=!0),i&&(h()(t).css({height:"auto"}).height(e-1),t.scrollHeight<e&&(e-=this.defaultHeight)),e>2*this.defaultHeight?this.isThreeRow=!0:this.isThreeRow=!1,t.classList.contains("prosemirror-editor")||(this.inputValue?h()(t).css({height:"auto"}).height(e):(h()(t).css({height:"auto"}).height(25),this.isThreeRow=!1)),this.sessionBlockHeight()},setFocus(){if(!this.userInfo?.phone&&this.isGlmsShare&&this.shareConversationId)return!1;this.$refs.textbox&&this.$refs.textbox.focus()},setBlur(){this.$refs.textbox&&this.$refs.textbox.blur()},onBlur(){this.textareaStatus="normal"},onFocus(){if(!this.userInfo?.phone&&this.isGlmsShare&&this.shareConversationId)return this.setShowShareLoginDialog(!0);this.textareaStatus="focus",this.scrollToBottom("#session-container .session-block")},async clickSearch(){if(this.isSearching){if(await this.closeStream(),this.empty)return}else if(this.empty)return this.$message.error(this.$t("conversation.emptyContentTips")),void(this.verification=!1);if((this.triggerTemplate||this.triggerCondition)&&(this.triggerTemplate=!1,this.triggerCondition=!1),this.clickComponent(),!this.userInfo?.phone)return this.setShowShareLoginDialog(!0);if(!this.isUploading){if(this.isImageUploading)this.$message.error(this.$t("conversation.isGenerating"));else if(this.userInfo){if(this.isUploading)return void this.$message.error("文件正在上传中");if(this.contentOverPercent&&this.fileList.length>1)return void this.$message.error("文件内容超出限制，请删减");if(this.inputLength>this.limitLength)return void this.$message.error(this.$t("conversation.inputMaxLimit",{num:this.limitLength}));if(this.quoteMarkdownText){const t=this.hasCurAssist?"quote_assitant":"quote";this.sendCl({...rd,ctvl:this.inputValue,extra:t})}if((this.isInsertImprove||this.addslot)&&this.sendCl({md:"improve_input",ct:"improve_input",extra:this.originPromptText===this.inputValue?"unchange":"change"}),this.isInsertPrompt){this.inputValue=this.inputValue.replace(/\[(.*?)]/g,"$1"),this.insertPromptBoxHtml="",this.isInsertPrompt=!1;const t=this.originPromptText===this.inputValue;t?this.sendCl({md:"prompt",ct:"inert_prompt_items_unchange",extra:this.originPromptData.id}):this.sendCl({md:"prompt",ct:"inert_prompt_items_change",extra:this.originPromptData.id})}else this.isInsertImprove&&(this.insertPromptBoxHtml="");try{this.clickSession||(this.setDataList([]),this.setClickSession(!0)),this.triggerSearch(),this.cleatInput(),this.isInsertImprove=!1,this.addslot=!1,this.improveList=[],this.askList=[],document.activeElement.blur()}catch(t){}}else this.sendCl({md:"detail",ct:"goToLogin",ctid:"clickSearch"}),this.goToLogin("clickSearch");return!1}},resetImprove(){this.showImprove=!1,this.improveSource="",this.isInsertImprove=!1,this.addslot=!1,this.improveList=[],this.askList=[]},eventListen(t){if("Enter"===t.key){if(t.shiftKey||t.altKey)return!1;t.preventDefault(),t.stopPropagation(),this.$refs?.atAssistPopover?.popoverVisible?this.$refs.atAssistPopover?.setCurAssist():this.clickSearch()}},onKeyDown(t){if(setTimeout((()=>{this.setTextareaHeight(this.$refs.textbox)}),10),t.metaKey&&"Enter"===t.key){const e=this.$refs.textbox,i=e.selectionStart;return this.inputValue=this.inputValue.slice(0,i)+"\n"+this.inputValue.slice(i),this.$nextTick((()=>{e.setSelectionRange(i+1,i+1)})),setTimeout((()=>{t.target.scroll(0,t.target.scrollTop+25)}),10),!1}},handleDivInput(t,e){"@"===e&&(this.$refs.atAssistPopover.isActiveClose=!1)},handleInput(t){"@"===t?.data&&(this.$refs.atAssistPopover.isActiveClose=!1),"@"===t?.data&&this.$store.commit("NewDialog/SET_DIALOG_SHOW",!0),this.$store.commit("NewDialog/SET_DIALOG_SHOW",!1)},handleInputPaste(t){t.clipboardData.getData("text").includes("@")&&(this.$refs.atAssistPopover.isActiveClose=!1)},handleInputChange(){this.$refs.atAssistPopover?.handleInputChange()},changeValue({key:t,value:e}){this[t]=e},compositionstart(){this.iscomposition=!0},compositionend(){this.iscomposition=!1},onMouseout(){this.pcImproveSendImg=jh,this.stopStreamTip=!1},onMouseover(){this.stopStreamTip=!0},async addNewSession(){this.isSearching&&await this.closeStream(),this.$store.commit("Home/SET_IS_SHOW_MENU",!1);const t={dataList:[],id:"",isNewTopic:!0};(0,d.M7)(p.A,"changeSession",t),this.setFocus()},triggerSearch(){const t=this.fileList.map((t=>t.type));t.length&&this.sendCl({md:"filechat",ct:"search_start",ctvl:t.join(",")});let e={};const i=this.inputValue,n=this.fileList.map(((t,e)=>({...t,order:e}))).filter((t=>t.finish)).filter((t=>t.isimage)).map((t=>({file_name:t.wholeName,file_id:t.isCloud?"":t.id,image_url:t.url,file_size:t.isCloud?1024*t.size:t.size,order:t.order}))),o=this.fileList.map(((t,e)=>({...t,order:e}))).filter((t=>t.finish)).filter((t=>!t.isimage)).map((t=>({file_id:t.isCloud?"":t.id,file_url:t.url,file_name:t.wholeName,file_size:t.isCloud?1024*t.size:t.size,order:t.order,maxReadPercent:this.contentOverPercent>0?this.maxReadPercent:0})));let r="";i?n.length?r="image_with_text":o.length&&(r="file_with_text"):n.length?r="image_upload":o.length&&(r="file_upload"),e={value:this.quoteMarkdownText.length>0&&!i?"进一步解释！":i,img_list:n,file_list:o,fileList:this.fileList,question_type:r},this.assistantInfo?.assistant_id&&Bd()(this.lastItem)&&this.sendCl({md:"glms",ct:"glms_start"}),(0,d.M7)(this,"triggerSearch",e)},showPrompt(){this.$store.commit("Prompt2/SET_SHOW_H5_PROMPT_STATUS",!0)},uploadImage(){if(this.isUploading)return;if(!this.userInfo?.phone)return;const t=this.isSearching||this.isImageUploading;t?this.$message.error(this.$t("conversation.isGenerating")):(this.sendCl({md:"detail",ct:"input_upload",extra:"img_upload"}),this.$refs.imginput._clickComponent())},getAtAssistSelect(t){this.atAssistPopoverIsShow=t}},emits:["setSearchValue","changeSession","triggerSearch","refreshSessionList","clickComponent","openShareDialog","retry","manualStopStream"]};i(72677);const Ud=(0,bt.A)(Fd,[["render",ih],["__scopeId","data-v-87100820"]]);var Hd=Ud,Wd=i(39891),Xd={name:"ConversationBottom",props:{},components:{SearchBox:Hd,GoBottom:Wd.A},data(){return{}},computed:{...(0,m.aH)("Conversation",["addFocus"]),isGlm(){return this.$route.path.startsWith("/glms")},styleObj(){return this.isGlm?{"min-width":"auto"}:{}}},watch:{addFocus(t){t&&(this.setFocus(),this.$store.commit("Conversation/SET_ADDFOCUS",!1))}},created(){},async mounted(){this.setInitData(),this.setFocus()},beforeDestroy(){},methods:{setFocus(){this.$refs.searchBox?.value&&this.$refs.searchBox?.value?.setFocus()},setInitData(){const t=(0,zd.Lg)(zd.t8);this.$route.query?.onsuggestion&&t&&((0,d.M7)(p.A,"chooseSearchValue",t),(0,d.M7)(p.A,"textboxFocus"),(0,zd.$1)(zd.t8))}}};i(60982);const Gd=(0,bt.A)(Xd,[["render",Tu],["__scopeId","data-v-90715b9e"]]);var Yd=Gd,Vd={__name:"index",props:{from:{type:String,default:"glms"},debug:{type:Boolean,default:!1},isShowQuestionTip:{type:Boolean,default:!1},isShowExampleTip:{type:Boolean,default:!1},isGlmShare:{type:Boolean,default:!1}},setup(t){const e=t,{dataList:i}=(0,wu.J0)("Conversation",["dataList"]),o=(0,n.EW)((()=>i.value?.length>=1||!e.isShowExampleTip)),{targetRef:r}=ku(),a=(0,m.Pj)();return(0,n.sV)((()=>{r.value&&il.A.$emit("initScroll",r.value)})),(0,Xa.JZ)(((t,e,i)=>{a.commit("Glms/SET_ASSISTANT_INFO",{}),i()})),(e,i)=>((0,n.uX)(),(0,n.CE)("div",{class:"keep-starter-container scroll-display-none conversation-list",ref_key:"keepStarterRef",ref:r},["glms"===t.from&&t.isShowExampleTip?((0,n.uX)(),(0,n.Wv)(mi,{key:0,debug:t.debug,onTriggerSearch:i[0]||(i[0]=t=>e.$emit("triggerSearch",t)),hasConversation:o.value,keepStarter:!0},null,8,["debug","hasConversation"])):(0,n.Q3)("",!0),o.value?((0,n.uX)(),(0,n.Wv)(Iu,{key:1,onTriggerSearch:i[1]||(i[1]=t=>e.$emit("triggerSearch",t)),isShowQuestionTip:t.isShowQuestionTip,isGlmShare:t.isGlmShare,keepStarter:!0},null,8,["isShowQuestionTip","isGlmShare"])):(0,n.Q3)("",!0)],512))}};i(36146);const Zd=(0,bt.A)(Vd,[["__scopeId","data-v-510e55d4"]]);var Qd=Zd,Jd=i(43181),qd=i(72556),$d=i(78303),Kd=i(8096),tg=i(97539),eg=i(78722);const ig=["id","data-stats"],ng={class:"button-mask flex flex-center"},og=["src"],rg=["src"],ag=["data-upload"];var sg={__name:"QuoteButton",props:{quoteButtonHandle:{type:Function,default:null},quoteButtonId:{type:String,default:""},containerWidth:{type:Number,default:0},quoteContent:{type:String,default:""}},setup(t){return(e,i)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,o.C4)(["quote-button flex flex-center",t.quoteButtonId]),id:t.quoteButtonId,onClick:i[0]||(i[0]=(0,r.D$)(((...e)=>t.quoteButtonHandle&&t.quoteButtonHandle(...e)),["prevent"])),"data-stats":(0,B.R1)(nd)(t.quoteContent)},[(0,n.Lk)("div",ng,[(0,n.Lk)("img",{src:(0,B.R1)($d)},null,8,og),(0,n.Lk)("img",{src:(0,B.R1)(Kd),class:"quote-button-hover"},null,8,rg),(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:"quote-button-text","data-upload":(0,B.R1)(ed)},i[1]||(i[1]=[(0,n.eW)("引用")]),8,ag)),[[(0,B.R1)(eg.A)]])])],10,ig)),[[(0,B.R1)(tg.A)]])}};i(58623),i(91833);const lg=(0,bt.A)(sg,[["__scopeId","data-v-1e489978"]]);var cg=lg;function ug(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}return t}function hg(t,e){return Array(e+1).join(t)}function dg(t){return t.replace(/^\n*/,"")}function gg(t){var e=t.length;while(e>0&&"\n"===t[e-1])e--;return t.substring(0,e)}var pg=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function fg(t){return wg(t,pg)}var mg=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function vg(t){return wg(t,mg)}function bg(t){return kg(t,mg)}var xg=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function yg(t){return wg(t,xg)}function _g(t){return kg(t,xg)}function wg(t,e){return e.indexOf(t.nodeName)>=0}function kg(t,e){return t.getElementsByTagName&&e.some((function(e){return t.getElementsByTagName(e).length}))}var Cg={};function Sg(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function Ig(t){for(var e in this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[],t.rules)this.array.push(t.rules[e])}function Mg(t,e,i){for(var n=0;n<t.length;n++){var o=t[n];if(Tg(o,e,i))return o}}function Tg(t,e,i){var n=t.filter;if("string"===typeof n){if(n===e.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(e.nodeName.toLowerCase())>-1)return!0}else{if("function"!==typeof n)throw new TypeError("`filter` needs to be a string, array, or function");if(n.call(t,e,i))return!0}}function Eg(t){var e=t.element,i=t.isBlock,n=t.isVoid,o=t.isPre||function(t){return"PRE"===t.nodeName};if(e.firstChild&&!o(e)){var r=null,a=!1,s=null,l=Dg(s,e,o);while(l!==e){if(3===l.nodeType||4===l.nodeType){var c=l.data.replace(/[ \r\n\t]+/g," ");if(r&&!/ $/.test(r.data)||a||" "!==c[0]||(c=c.substr(1)),!c){l=Ag(l);continue}l.data=c,r=l}else{if(1!==l.nodeType){l=Ag(l);continue}i(l)||"BR"===l.nodeName?(r&&(r.data=r.data.replace(/ $/,"")),r=null,a=!1):n(l)||o(l)?(r=null,a=!0):r&&(a=!1)}var u=Dg(s,l,o);s=l,l=u}r&&(r.data=r.data.replace(/ $/,""),r.data||Ag(r))}}function Ag(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function Dg(t,e,i){return t&&t.parentNode===e||i(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}Cg.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}},Cg.lineBreak={filter:"br",replacement:function(t,e,i){return i.br+"\n"}},Cg.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,i){var n=Number(e.nodeName.charAt(1));if("setext"===i.headingStyle&&n<3){var o=hg(1===n?"=":"-",t.length);return"\n\n"+t+"\n"+o+"\n\n"}return"\n\n"+hg("#",n)+" "+t+"\n\n"}},Cg.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),"\n\n"+t+"\n\n"}},Cg.list={filter:["ul","ol"],replacement:function(t,e){var i=e.parentNode;return"LI"===i.nodeName&&i.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}},Cg.listItem={filter:"li",replacement:function(t,e,i){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var n=i.bulletListMarker+"   ",o=e.parentNode;if("OL"===o.nodeName){var r=o.getAttribute("start"),a=Array.prototype.indexOf.call(o.children,e);n=(r?Number(r)+a:a+1)+".  "}return n+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}},Cg.indentedCodeBlock={filter:function(t,e){return"indented"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,i){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},Cg.fencedCodeBlock={filter:function(t,e){return"fenced"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,i){var n,o=e.firstChild.getAttribute("class")||"",r=(o.match(/language-(\S+)/)||[null,""])[1],a=e.firstChild.textContent,s=i.fence.charAt(0),l=3,c=new RegExp("^"+s+"{3,}","gm");while(n=c.exec(a))n[0].length>=l&&(l=n[0].length+1);var u=hg(s,l);return"\n\n"+u+r+"\n"+a.replace(/\n$/,"")+"\n"+u+"\n\n"}},Cg.horizontalRule={filter:"hr",replacement:function(t,e,i){return"\n\n"+i.hr+"\n\n"}},Cg.inlineLink={filter:function(t,e){return"inlined"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e){var i=e.getAttribute("href");i&&(i=i.replace(/([()])/g,"\\$1"));var n=Sg(e.getAttribute("title"));return n&&(n=' "'+n.replace(/"/g,'\\"')+'"'),"["+t+"]("+i+n+")"}},Cg.referenceLink={filter:function(t,e){return"referenced"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e,i){var n,o,r=e.getAttribute("href"),a=Sg(e.getAttribute("title"));switch(a&&(a=' "'+a+'"'),i.linkReferenceStyle){case"collapsed":n="["+t+"][]",o="["+t+"]: "+r+a;break;case"shortcut":n="["+t+"]",o="["+t+"]: "+r+a;break;default:var s=this.references.length+1;n="["+t+"]["+s+"]",o="["+s+"]: "+r+a}return this.references.push(o),n},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}},Cg.emphasis={filter:["em","i"],replacement:function(t,e,i){return t.trim()?i.emDelimiter+t+i.emDelimiter:""}},Cg.strong={filter:["strong","b"],replacement:function(t,e,i){return t.trim()?i.strongDelimiter+t+i.strongDelimiter:""}},Cg.code={filter:function(t){var e=t.previousSibling||t.nextSibling,i="PRE"===t.parentNode.nodeName&&!e;return"CODE"===t.nodeName&&!i},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",i="`",n=t.match(/`+/gm)||[];while(-1!==n.indexOf(i))i+="`";return i+e+t+e+i}},Cg.image={filter:"img",replacement:function(t,e){var i=Sg(e.getAttribute("alt")),n=e.getAttribute("src")||"",o=Sg(e.getAttribute("title")),r=o?' "'+o+'"':"";return n?"!["+i+"]("+n+r+")":""}},Ig.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){return t.isBlank?this.blankRule:(e=Mg(this.array,t,this.options))||(e=Mg(this._keep,t,this.options))||(e=Mg(this._remove,t,this.options))?e:this.defaultRule;var e},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};var Lg="undefined"!==typeof window?window:{};function Og(){var t=Lg.DOMParser,e=!1;try{(new t).parseFromString("","text/html")&&(e=!0)}catch(i){}return e}function jg(){var t=function(){};return Pg()?t.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e}:t.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e},t}function Pg(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){Lg.ActiveXObject&&(t=!0)}return t}var Ng,zg=Og()?Lg.DOMParser:jg();function Rg(t,e){var i;if("string"===typeof t){var n=Bg().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");i=n.getElementById("turndown-root")}else i=t.cloneNode(!0);return Eg({element:i,isBlock:fg,isVoid:vg,isPre:e.preformattedCode?Fg:null}),i}function Bg(){return Ng=Ng||new zg,Ng}function Fg(t){return"PRE"===t.nodeName||"CODE"===t.nodeName}function Ug(t,e){return t.isBlock=fg(t),t.isCode="CODE"===t.nodeName||t.parentNode.isCode,t.isBlank=Hg(t),t.flankingWhitespace=Wg(t,e),t}function Hg(t){return!vg(t)&&!yg(t)&&/^\s*$/i.test(t.textContent)&&!bg(t)&&!_g(t)}function Wg(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var i=Xg(t.textContent);return i.leadingAscii&&Gg("left",t,e)&&(i.leading=i.leadingNonAscii),i.trailingAscii&&Gg("right",t,e)&&(i.trailing=i.trailingNonAscii),{leading:i.leading,trailing:i.trailing}}function Xg(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function Gg(t,e,i){var n,o,r;return"left"===t?(n=e.previousSibling,o=/ $/):(n=e.nextSibling,o=/^ /),n&&(3===n.nodeType?r=o.test(n.nodeValue):i.preformattedCode&&"CODE"===n.nodeName?r=!1:1!==n.nodeType||fg(n)||(r=o.test(n.textContent))),r}var Yg=Array.prototype.reduce,Vg=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Zg(t){if(!(this instanceof Zg))return new Zg(t);var e={rules:Cg,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,e){return e.isBlock?"\n\n":""},keepReplacement:function(t,e){return e.isBlock?"\n\n"+e.outerHTML+"\n\n":e.outerHTML},defaultReplacement:function(t,e){return e.isBlock?"\n\n"+t+"\n\n":t}};this.options=ug({},e,t),this.rules=new Ig(this.options)}function Qg(t){var e=this;return Yg.call(t.childNodes,(function(t,i){i=new Ug(i,e.options);var n="";return 3===i.nodeType?n=i.isCode?i.nodeValue:e.escape(i.nodeValue):1===i.nodeType&&(n=qg.call(e,i)),$g(t,n)}),"")}function Jg(t){var e=this;return this.rules.forEach((function(i){"function"===typeof i.append&&(t=$g(t,i.append(e.options)))})),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function qg(t){var e=this.rules.forNode(t),i=Qg.call(this,t),n=t.flankingWhitespace;return(n.leading||n.trailing)&&(i=i.trim()),n.leading+e.replacement(i,t,this.options)+n.trailing}function $g(t,e){var i=gg(t),n=dg(e),o=Math.max(t.length-i.length,e.length-n.length),r="\n\n".substring(0,o);return i+r+n}function Kg(t){return null!=t&&("string"===typeof t||t.nodeType&&(1===t.nodeType||9===t.nodeType||11===t.nodeType))}Zg.prototype={turndown:function(t){if(!Kg(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(""===t)return"";var e=Qg.call(this,new Rg(t,this.options));return Jg.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else{if("function"!==typeof t)throw new TypeError("plugin must be a Function or an Array of Functions");t(this)}return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return Vg.reduce((function(t,e){return t.replace(e[0],e[1])}),t)}};var tp=Zg;function ep(t="__quote_button_container-id__",{top:e,left:i}){if(document.getElementById(t))return document.getElementById(t);const n=document.createElement("div");return n.id=t,n.style.userSelect="none",n.style.position="absolute",n.style.top=(e??-99)+"px",n.style.left=(i??99)+"px",n.style.zIndex=9999,{container:n,containerId:t}}const ip="__quote-button-id__",np="__quote-container-id__",op=(0,B.KR)(""),rp=(0,B.KR)(""),ap=(0,B.KR)(!1),sp=(0,B.KR)(null),lp=(0,B.KR)(2),cp=t=>{if(t?.target?.closest("#"+ip))return;const e=document.querySelector("#"+np);e?.remove?.();const i=document.querySelector("."+ip);i?.remove?.()},up=t=>{2!==t?.button&&(cp(t),window.getSelection()?.removeAllRanges?.())},hp=[".source-item",".interact-container","#"+ip];function dp(t){const e=t=>{hp.forEach((e=>{const i=t?.querySelector?.(e);i&&(i?.length>0?i.forEach((t=>{t.remove()})):i.remove())}))};return t?.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e(t):t?.length>0&&t.forEach((t=>{e(t)})),t}function gp(t){let e=t.querySelectorAll(rp.value),i="";const n=new XMLSerializer;e&&e?.length>0?(e=dp(e),e.forEach((t=>{i+=n.serializeToString(t)}))):(e=dp(t),i=n.serializeToString(t));const o=new tp;return o.turndown(i)}function pp(){const t=window.getSelection();if(0===t.rangeCount)return!1;let e=!0;const i=t.anchorNode,n=t.focusNode;return e=!!(i?.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING),e}function fp(){const t=window.getSelection(),e=t.anchorNode?.parentElement?.closest(Vh);if(e)return!0;const i=t.getRangeAt(0),n=i?.getBoundingClientRect();let o=Xh;return i?.endContainer?.parentNode?.localName&&Gh.includes(i?.endContainer?.parentNode?.localName?.toLowerCase?.())&&(o=window.getComputedStyle(i?.endContainer?.parentNode).lineHeight||Xh),o&&(o=parseFloat(o)),n?.height<=o}function mp(t){if(t?.nodeType===Node.TEXT_NODE)return t?.parentNode;const e=t?.childNodes;return e?.length>0?mp(e[e.length-1]):t}function vp(t,e){const i=window.getSelection();if(0===i.rangeCount)return;const n=i.getRangeAt(i.rangeCount-1),o=n.endContainer,r=n.endOffset;if(o.nodeType===Node.TEXT_NODE){const e=o.parentNode,i=o.splitText(r);e.insertBefore(t,i)}else if(o?.closest?.(rp.value)){const e=o?.previousElementSibling;if(e){const i=mp(e);i.appendChild(t)}else o.insertBefore(t,o.childNodes[r])}else{o.insertBefore(t,o.childNodes[r]);const i=e?.childNodes,n=i?.[i.length-1];let a=n?.lastChild;a.nodeType===Node.TEXT_NODE&&(a=a?.parentNode),a&&a.appendChild(t)}const a=document.createRange();a.setStartAfter(t),a.setEndAfter(t)}function bp(t,e){const i=pp(),n=document.createElement("span"),o=t?.getBoundingClientRect?.(),r=fp(),a=i&&!r;let s=0;a?(vp(n,t),e?.endContainer?.parentNode?.localName&&Gh.includes(e?.endContainer?.parentNode?.localName?.toLowerCase?.())&&(s=window.getComputedStyle(e?.endContainer?.parentNode)?.lineHeight),s=s?parseFloat(s):Xh+6):e.insertNode(n);const l=n.getBoundingClientRect(),{width:c,left:u,top:h}=o,d=l?.left-u-(a?Wh:0),g=l?.top-h+(a?s+2:-43),p={left:d>c-Wh?c-Wh:d<0?0:d,top:g};n.remove();const f=document.getSelection();return f.rangeCount>0&&(f.removeAllRanges(),f.addRange(e)),p}function xp(t){if(ap.value)return;const e=window.getSelection(),i=e.rangeCount>0&&e?.getRangeAt(0);if(!e.rangeCount||e.rangeCount<1)return!1;const n=t?.target?.closest(rp.value)||e.anchorNode?.parentElement?.closest(rp.value);if(!n)return;const o=i?.toString();if(o?.length<lp.value)return;const a=bp(n,i),{container:s}=ep(np,a),l=i?.cloneContents?.()?gp(i?.cloneContents(),n):"",c=(0,r.Ef)(cg,{quoteButtonId:ip,containerWidth:n?.getBoundingClientRect()?.width,quoteContent:l,quoteButtonHandle:()=>{op.value=l,up(),c.unmount(),document.getElementById(np)?.remove?.()}});c.mount(s);const u=n?.childNodes[0];s&&(u?n?.insertBefore&&n?.insertBefore(s,u):n?.appendChild&&n?.appendChild(s))}function yp(){sp?.value&&(sp.value.onmouseup=xp),sp?.value&&(sp.value.onmousedown=up)}function _p(){cp(),sp?.value&&(sp.value.onmousedown=null)}function wp(){op.value=""}function kp({containerClassName:t,listenerContainer:e,minLength:i=2},o){return e&&t?(sp.value=e,rp.value=t,lp.value=i,ap.value=o.value,(0,n.wB)(o,(t=>{ap.value=t,t&&up()})),(0,n.sV)((()=>{(0,n.dY)(yp)})),(0,n.hi)((()=>{_p(),sp?.value&&(sp.value.onmouseup=null)})),[op,xp,wp]):{}}var Cp=i(65287),Sp=i(89206);const Ip=["id"],Mp={class:"close-btn"};var Tp={__name:"QuoteGuard",props:["closeQuoteGuard","guardContainerId"],setup(t){return(e,i)=>((0,n.uX)(),(0,n.CE)("div",{class:"quote-guard-container",id:t.guardContainerId},[i[2]||(i[2]=(0,n.Lk)("div",{class:"quote-guard-content flex flex-between"},[(0,n.Lk)("div",{class:"quote-guard-text"},[(0,n.Lk)("p",null,[(0,n.eW)("选择"),(0,n.Lk)("span",null,"「段落」")]),(0,n.Lk)("p",null,"可继续追问～")]),(0,n.Lk)("img",{class:"quote-guard-example",src:Cp,alt:""})],-1)),i[3]||(i[3]=(0,n.Lk)("div",{class:"triangle-down"},null,-1)),(0,n.Lk)("div",Mp,[(0,n.Lk)("div",{class:"close-btn-circle flex flex-center",onClick:i[0]||(i[0]=(0,r.D$)(((...e)=>t.closeQuoteGuard&&t.closeQuoteGuard(...e)),["stop"]))},i[1]||(i[1]=[(0,n.Lk)("img",{src:Sp,alt:"关闭"},null,-1)]))])],8,Ip))}};i(89447);const Ep=(0,bt.A)(Tp,[["__scopeId","data-v-d0727766"]]);var Ap=Ep;const Dp=function(){const t=localStorage.getItem(Fh);return t===Hh}(),Lp=(0,B.KR)(!1),Op="__guard-container__",jp=(0,B.KR)(!1),Pp=(0,B.KR)(!1),Np=(0,B.KR)(!0);async function zp(t,e){const i=t?.innerText;if(!i)return;if(Lp.value)return;const n=i.length<Zh?i.length:Zh;Lp.value=!0,await Fp(t,n,0),Bp(t),setTimeout((()=>{!Np.value&&"function"===typeof e&&e(),Rp()}),Uh)}function Rp(){const t=document.getElementById(Op);t&&t?.remove(),localStorage.setItem(Fh,Hh)}function Bp(t){const e=t?.getBoundingClientRect(),i=t?.parentNode,n=i?.getBoundingClientRect(),o={left:0,top:e?.top-n?.top-94},a=(0,r.Ef)(Ap,{guardContainerId:Op,closeQuoteGuard:t=>{t.stopPropagation(),Rp(),jp.value=!1}}),{container:s}=ep(Op,o);i&&i?.appendChild(s),a.mount(s),jp.value=!0}function Fp(t,e,i){const n=document.createRange();n.setStart(t.firstChild,0);const o=window.getSelection();return new Promise(((r,a)=>{try{const a=()=>{n.setEnd(t.firstChild,i++),o.removeAllRanges(),o.addRange(n),i<=e?requestAnimationFrame((()=>{a()})):r(n)};a()}catch(s){a(s)}}))}function Up(t,e){const i=new IntersectionObserver((n=>{n.forEach((n=>{n.isIntersecting&&(zp(t,e),Pp.value=!0,i.unobserve(t))}))}),{threshold:1});i.observe(t)}function Hp({isAutoRemoveRange:t=!0,afterCallback:e=null}){function i(t){Dp||Pp.value||Up(t,e)}return Np.value=t,[Dp,i,jp]}var Wp={__name:"index",setup(t){const e=(0,B.KR)("/glmsShare"===window.location.pathname),[i,o,r]=kp({containerClassName:".markdown-body",listenerContainer:document.getElementById("session-container")||document.body},e),[a,s,l]=Hp({isAutoRemoveRange:!1,afterCallback:()=>{o()}});(0,n.wB)(i,(t=>{zs.A.commit(`Conversation/${Bh.O}`,t)}));const c=(0,n.EW)((()=>zs.A.state.Conversation.quoteMarkdownText));(0,n.wB)(c,((t,e)=>{t===e||t||r()}));const u=(0,n.EW)((()=>zs.A.state.Conversation.glmsShare)),h=(0,n.EW)((()=>zs.A.state.Conversation.isSearching));(0,n.wB)([u,l,h],(([t])=>{e.value=t||h.value}));const d=(0,n.EW)((()=>zs.A.state.Conversation.currentSessionIsOver)),g=()=>{const t=(0,n.EW)((()=>zs.A.state.Conversation.dataList));if(d.value){t.value.length;const e=document.querySelectorAll(".markdown-body p"),i=e[e.length-1];if(a)return;i&&s(i)}};return a||(0,n.wB)(d,(t=>{t&&g()})),(0,n.xo)((()=>{zs.A.commit(`Conversation/${Bh.O}`,"")})),(t,e)=>((0,n.uX)(),(0,n.CE)("span"))}};const Xp=Wp;var Gp=Xp;const Yp=["finish","done","intervene"],Vp="https://chatglm.cn/chatglm",Zp=`${Vp}/backend-api/assistant/stream`;var Qp={name:"ConversationIndex",provide(){return{triggerSearch:this.newSearch,retry:this.retry,regenerate:this.regenerate,manualStopStream:this.manualStopStream}},mixins:[ka],components:{Initpage:mi,List:Iu,Bottom:Yd,OldInitpage:vi.A,QuoteIndex:Gp,PinOpening:Qd},props:{isGlmShare:{type:Boolean,default:!1},isShowQuestionTip:{type:Boolean,default:!0},isShowExampleTip:{type:Boolean,default:!0},showBottom:{type:Boolean,default:!0},channelId:{type:String,default:""},refreshStatus:{type:Boolean,default:!1},debug:{type:Boolean,default:!1},from:{type:String,default:""}},data(){return{timeOutDelay:3e4,delayTimer:"",socketEvent:"",isFadeout:!1,lock:!1,scrollTarget:".conversation-list",value:"",scrollSpeed:32,printSpeed:30,printIndex:0,visibilitychanged:!1,url:Zp,searchStartTime:0,searchStart:!1,stream_search_respond_time:0,regenRawItem:{},finalQuoteLogId:"",assistantStart:!1}},computed:{...(0,m.aH)("Conversation",["dataList","isSearching","isOver","curAssist","quoteMarkdownText","highSensitive"]),...(0,m.L8)("Conversation",["lastItem","isProd"]),...(0,m.L8)("Glms",["assistantId"]),...(0,m.aH)("Glms",["recentUsedList","sidebarList","draftId"]),...(0,m.aH)("Home",["isMiniScreen"]),...(0,m.aH)("Glms",["assistantInfo"]),...(0,m.aH)("Conversation",["new_ai_search_conversation"]),presentations(){return"activity.chatglm.com"===location.host&&window.innerWidth>1950},isAIDraw(){return"65a232c082ff90a2ad2f15e2"===this.assistantId&&"/main/alltoolsdetail"!==this.$route.path},keepStarter(){return!!this.assistantInfo?.advanced_config?.pin_opening_settings}},watch:{refreshStatus(t){this.refreshStatus&&((0,d.M7)(p.A,"refreshConversation"),(0,d.M7)(this,"restoreRefreshStatus"))}},setup(){const{recommandState:t,setRecommendPrompt:e,clearRecommandCache:i}=(0,_s.a)(),{createSession:n}=(0,$s.o)(),{cogViewState:o,resetPromptOptions:r}=(0,Jt.g)();return{clearRecommandCache:i,createSession:n,cogViewState:o,resetPromptOptions:r}},methods:{searchPerformance(t,e){const i=t.lastItem.log_id;if("tool_calls"===e.type){const n=e.tool_calls;if("browser"===n.name){const e=/search\([^)]*\)/,o=n.arguments;if(e.test(o)){Date.now();t.sendPf({md:"search",ct:"search_tool_start_time",ctid:i,ctnm:Date.now()-t.searchStartTime,extra:Date.now()+"-"+t.searchStartTime})}else{Date.now();t.sendPf({md:"search",ct:"search_tool_open_result_time",ctid:i,ctnm:Date.now()-t.searchStartTime,extra:Date.now()+"-"+t.searchStartTime})}}}else if("browser_result"===e.type){Date.now();t.sendPf({md:"search",ct:"search_tool_open_success_time",ctid:i,ctnm:Date.now()-t.searchStartTime,extra:Date.now()+"-"+t.searchStartTime})}else if("system_error"===e.type){if(!e.meta_data)return;const{failedCommand:n,failedURL:o}=e.meta_data;if(n){const e=/search\([^)]*\)/;if(e.test(n)){Date.now();t.sendPf({md:"search",ct:"search_tool_open_failure_time",ctid:i,ctnm:Date.now()-t.searchStartTime,extra:Date.now()+"-"+t.searchStartTime})}}else if(o){Date.now();t.sendPf({md:"search",ct:"search_tool_open_result_failure_time",ctid:i,ctnm:Date.now()-t.searchStartTime,extra:Date.now()+"-"+t.searchStartTime})}}else if("quote_result"===e.type){Date.now();t.sendPf({md:"search",ct:"search_tool_open_result_success_time",ctid:i,ctnm:Date.now()-t.searchStartTime,extra:Date.now()+"-"+t.searchStartTime})}},dealQuestionData(t){const e={mention_assistant_id:this.curAssist?.assistant_id,mention_assistant_name:this.curAssist?.name,mention_assistant_avatar:this.curAssist?.avatar};return"string"===typeof t?{question_type:"default",value:t,agent:e,img_list:[]}:"object"===typeof t?{question_type:t.question_type||"default",value:t.value||"",agent:e,img_list:t.img_list||[],file_list:t.file_list||[],fileList:t.fileList||[]}:void 0},async newSearch(t){if(this.clearRecommandCache(),this.presentations||(0,d.M7)(p.A,"textboxFocus"),this.$store.commit("Conversation/SET_SHOW_GO_BOTTOM",!1),this.isSearching)return;this.setConversationisSearching(!0);const e=this.dealQuestionData(t);(this.lastItem.is_sensitive||this.highSensitive)&&(this.$store.commit("Conversation/NEW_SESSION"),this.$store.commit("Conversation/SET_CUR_ASSIST",{})),!1===this.new_ai_search_conversation&&"659e54b1b8006379b4b2abd6"===this.assistantId&&(this.$store.commit("Conversation/NEW_SESSION"),this.$store.commit("Conversation/SET_NEW_AI_SEARCH_CONVERSATION",!0)),this.stopActionAuth(this.lastItem);const i=(0,f.GU)();i.conversation_id=this.lastItem.conversation_id||"",i.question_type=e.question_type,i.question=e.value,i.img_list=e.img_list,i.file_list=e.file_list,i.fileList=e.fileList,i.agent=e.agent,e.question_type.startsWith("image_")&&(i.image_type=!0);const n={},o=this.lastItem;if(i.agent){const{mention_assistant_id:t,mention_assistant_name:e,mention_assistant_avatar:r}=i.agent;n.mention_assistant_id=t,n.mention_assistant_name=e,n.mention_assistant_avatar=r,n.mention_conversation_id="",o.agent&&o.agent.mention_assistant_id===t&&(n.mention_conversation_id=o.meta_data.mention_conversation_id)}const{style:r,aspect_ratio:a}=this.cogViewState;if(this.isAIDraw&&(r||a)&&(n.cogview={aspect_ratio:a,style:r}),i.meta_data=n,this.lastItem?.regens?.length>0){this.lastItem?.regens[0].log_id;this.finalQuoteLogId=this.lastItem.log_id}this.clearInput(),this.isOver&&await this.fadeOut(),this.dataList.push(i),this.isOver&&await this.fadeIn(),this.search({item:i,followup:t?.followup}),this.commitState(Bh.O,"")},buildSearchMessages(t,e){const i=[];if(this.isAIDraw&&t.question){const{style:e,styleLabel:i}=this.cogViewState;e&&"none"!==e&&(t.question+=` 风格：${i}`)}const n=t.question;return n&&i.push({type:"text",text:n}),t.img_list.length>0&&i.push({type:"image",image:t.img_list}),t.file_list?.length>0&&i.push({type:"file",file:t.file_list}),[{role:"user",content:i}]},async search({item:t,isRetry:e=!1,regen:i=!1,followup:n=!1}){t.question;if(this.lock=!1,this.visibilitychanged=!1,this.setConversationisSearching(!0),this.searchStartTime=Date.now(),this.searchStart=!0,this.assistantStart=!0,this.debug&&this.searchStartTime&&this.$emit("firstSearched"),(0,f.vX)(t,{isRetry:e}),"glms"===this.from){const t=this.$route.query?.onsuggestion?{pds:"chat_recommend"}:{};this.sendPv({md:"detail4",ct:"search_start",ctvl:"preview",extra:this.searchStartTime,...t})}else{const t=this.curAssist?.source===wn.FC.recommend?{pds:"chat_recommend_@GLMs"}:{};this.sendPv({md:"detail4",ct:"search_start",extra:this.searchStartTime,...t})}this.scrollToBottom(this.scrollTarget,500);const o={is_test:!this.isProd,input_question_type:"xxxx",channel:this.channelId,draft_id:this.draftId,quote:this.quoteMarkdownText||t?.meta_data?.quote};if(i){o.quote=t?.meta_data?.quote;const{retry_log_id:e=""}=this.regenRawItem?.meta_data;o.retry_log_id=e||this.regenRawItem?.log_id}o.quote_log_id="",!n&&i||(o.quote_log_id=this.finalQuoteLogId);const r=this.buildSearchMessages(t,i),a=JSON.stringify({assistant_id:this.assistantId||"65940acff94777010aa6b796",conversation_id:t.conversation_id,meta_data:{...t.meta_data,...o,platform:A.Fo},messages:r});"undefined"!==typeof fetch&&(t?.meta_data?.mention_assistant_id&&this.sendPv({md:"detail4",ct:"at_assistant",ctvl:t.meta_data.mention_assistant_id}),this.send(a))},async manualStopStream(t){if(this.sendCl({md:"initpage",ct:"stop_active"}),this.lastItem.id)try{await(0,g.vN)({history_id:this.lastItem.id})}catch(e){}this.lastItem.manualStopStream=!0,this.lastItem.isLoading=!1,this.lastItem?.answerArray?.push("本次答案已被终止"),this.stopPrint(),this.doFinally(),this.closeEvent(),t&&t()},async handleStreamerror(t){if(401!==t.status)this.$message.error("Error"),this.manualStopStream();else{const t=await(0,qd.vn)();t?(this.closeEvent(),this.setConversationisSearching(!1),this.retry(this.dataList.length-1)):(this.$message.error("检测到你长时间未操作，请重新登录"),this.manualStopStream())}},retry(t){if(!this.isSearching){const e=this.lastItem;e.canShowLoading=!0,e.isLoading=!0,e.answer="",e.answerListDisplay=[],e.answerListOutput=[],e.answerArray=[],e.errorType=void 0,e.manualStopStream=!1,e.is_up=!1,e.is_down=!1,e.image_count=0,e.image_list=[],e.isOnError=!1,this.search({index:t,item:e,isRetry:!0})}},regenerate(t){if(this.regenRawItem={...this.lastItem},this.isSearching)return;const e=this.lastItem;e.canShowLoading=!0,e.isLoading=!0,e.answer="",e.answerListDisplay=[],e.answerListOutput=[],e.answerArray=[],e.errorType=void 0,e.manualStopStream=!1,e.is_up=!1,e.is_down=!1,e.image_count=0,e.image_list=[],e.isOnError=!1,this.search({index:t,item:e,isRetry:!1,regen:!0})},disposeRegenerateAnwser(){if(Object.keys(this.regenRawItem).length>0){let t=[this.regenRawItem];this.lastItem?.regens?.length&&(t=[...this.lastItem.regens]);const e={...this.lastItem,regens:[...t]};return t.push(e),this.lastItem.regens=t,this.lastItem.curIndex=t.length-1,void(this.regenRawItem={})}this.finalQuoteLogId=""},stopActionAuth(t){const e=t.actionsStatus||{};clearInterval(e.retryTimer),e.isError=!0},clearInput(){this.$store.commit("UploadFile/RESET_DATA")},async send(t){const e=this;e.$store.commit("Conversation/SET_HIGH_SENSITIVE",!1);const i=this.abortController=new AbortController;e.delayTimer=setTimeout((()=>{this.doFinally()}),this.timeOutDelay),await z(`${this.url}`,{body:t,signal:i.signal,async onmessage(t){if(clearTimeout(e.delayTimer),!e.highSensitive){if(e.lastItem.id=t.id,e.lastItem.conversation_id=t.conversation_id,e.lastItem.assistant_id=t.assistant_id,e.lastItem.status=t.status,e.lastItem.meta_data=t.meta_data,e.lastItem.last_error=t.last_error,e.lastItem.log_id=t.id,"init"===t.status){const i=t.parts.pop();if(i&&i.content&&i.content.length){const t=(0,Jd.P)(i.content);e.searchPerformance(e,t)}if(i&&i.content&&e.searchStart){const t=i.content;t&&t.length&&(e.searchStart=!1,e.stream_search_respond_time=Date.now()-e.searchStartTime)}(0,R.X0)(i,e)}if("finish"===t.status){if(t.parts&&Array.isArray(t.parts)){let i="";if(t.parts.length>0){const e=t.parts[t.parts.length-1]?.content;Array.isArray(e)&&e.length&&(i=e[e.length-1]?.text)}e.sendPf({md:"detail",ct:"stream_search_respond_time",ctid:t.id,ctvl:t.meta_data?.answer_type,ctnm:e.stream_search_respond_time}),e.sendPf({md:"detail",ct:"stream_search_respond_to_end_time",ctnm:t.meta_data?.total_time,ctid:t.id,ctvl:t.meta_data?.answer_type,extra:i?.length})}(0,R.Fp)(e),e.sendPv({md:"detail",ct:"stream_search_finish",ctid:e.lastItem.log_id}),e.doFinally()}if("error"===t.status&&(e.sendPv({md:"detail",ct:"stream_search_error",ctid:e.lastItem.log_id,extra:t?.last_error?.error_code}),(0,R.nO)(t.last_error,e)),"intervene"===t.status){if(e.sendPv({md:"detail",ct:"stream_search_sensitive",ctid:e.lastItem.log_id,ctvl:t.last_error?.intervene_type}),t.parts.some((t=>"HIGH"===t?.error?.risk_level)))return await e.manualStopStream(),e.$store.commit("Conversation/SET_HIGH_SENSITIVE",!0),(0,nl.nk)({message:"换个话题试试吧",type:"warning"}),void(1===e.dataList.length?setTimeout((()=>{e.createSession?.()}),50):setTimeout((()=>{e.dataList.pop()}),50));(0,R.FN)(t.last_error,e)}if(e.lastItem.isLoading)for(let t=0;t<e.lastItem.answerListDisplay.length;t++){const i=e.lastItem.answerListDisplay[t];return"text"===i.answer_type?void(i.answer&&e.setAnswerStart()):void e.setAnswerStart()}}},onopen(t){e.outputStr(),e.lastItem.isEventSourceaOpen=!0,clearTimeout(e.timeOutDelay),e.setAutoScroll(e.dataList.length-1),(0,R.N8)(e)},onclose(t){e.doFinally(),e.sendPv({md:"detail",ct:"stream_close",ctid:e.lastItem.log_id})},onerror(t){if(t instanceof O)throw e.sendPv({md:"detail",ct:"stream_error_retriable",ctid:e.lastItem.log_id,ctvl:"error:"+t?.status}),e.handleStreamerror(t),t;if(t instanceof j)throw e.sendPv({md:"detail",ct:"stream_error_json",ctid:e.lastItem.log_id,ctvl:"error:"+t?.content?.status}),e.handleStreamJsonerror(t),t;let i=t;if("object"===typeof t&&(i=t.toString()),"TypeError: network error"===i&&(e.pageHiden||e.visibilitychanged))throw e.handelNetworkError(),e.sendPv({md:"detail",ct:"stream_network_error",ctid:e.lastItem.log_id,ctvl:(e.pageHiden?"hidden:":"show:")+e.visibilitychanged,extra:JSON.stringify(i)}),new O("network");throw e.sendPv({md:"detail",ct:"stream_error",ctid:e.lastItem.log_id,ctvl:(e.pageHiden?"hidden:":"show:")+e.visibilitychanged,extra:JSON.stringify(i)}),new Error(t)}}).catch((t=>{t instanceof O||t instanceof j||(e.sendPv({md:"detail",ct:"stream_answer_error",ctid:e.lastItem.log_id,extra:JSON.stringify(t)}),e.handelError("glms_error"))}))},setAnswerStart(){this.$store.dispatch("Glms/getMenuList"),this.sendPv({md:"detail",ct:"stream_answer_start",ctid:this.lastItem.log_id}),this.lastItem.isLoading=!1,this.lastItem.image_url=this.lastItem.img_list[0]?.image_url||""},closeEvent(){this.abortController?.abort()},handleStreamJsonerror(t){this.lastItem.errorType=t?.content?.status||"json_error",this.lastItem.errorText=t?.content?.message,this.lastItem.forbidden=!0,this.lastItem.isOnError=!0,this.handleErrOnRegenerate(this.lastItem.errorText),this.stopPrint(),this.doFinally()},handleErrOnRegenerate(t){this.lastItem.answerArray.push(t),this.lastItem.manualStopStream=!0,this.lastItem.isLoading=!1,this.lastItem.forbidden=!1},handelNetworkError(){this.manualStopStream()},handelError(){this.sendPv({md:"initpage",ct:"stop_passive"}),this.lastItem.errorType="user_error",this.lastItem.errorText=this.$t("conversation.systemErrorTips"),this.lastItem.forbidden=!0,this.lastItem.isOnError=!0,this.lastItem.isLoading=!1,this.stopPrint(),this.doFinally(),this.handleErrOnRegenerate(this.lastItem.errorText)},hendleSpecialMsg(t,e,{forbidden:i=!0}={}){this.lastItem.errorType=t,this.lastItem.errorText=e,this.lastItem.forbidden=i,this.lastItem.isOnError=!0,this.handleErrOnRegenerate(this.lastItem.errorText),this.stopPrint(),this.doFinally()},doFinally(){this.lastItem.isOnClose=!0,this.lastItem.isLoading=!1,this.$bus.$emit("refreshSessionList")},handleSensitive(){this.lastItem.isOnError=!0,this.printIndex=0,this.doFinally()},exponentialDecay(t,e){if(!t)return this.printSpeed;const i=4,n=.01,o=30,r=i+(o-i)*Math.exp(-n*(t-1));return e?r/1.2:r},typeWritter(){const t=1;let e=30;const i=this.lastItem?.answerListDisplay?.[this.printIndex];if(i){const t=i.text?.substring(i.answer?.length);e=this.exponentialDecay(t.length)}setTimeout((()=>{const e=this.lastItem,i=this.printIndex,n=e.answerListDisplay&&e.answerListDisplay[i];if(e.answerListOutput=e.answerListDisplay?.slice(0,i+1),e.manualStopStream||e.errorType)return;if(e.isOnClose&&this.printIndex===e.answerListDisplay.length&&Yp.indexOf(e?.status)>-1)return void this.stopPrint();const o=(0,Jd.P)(e.answerListDisplay);if(o&&!e.isOnClose&&this.printIndex===e.answerListDisplay.length){if(!o.answer_type)return e.isWaitforContent=!0,void this.typeWritter();if(("text"===o.answer_type||"code"===o.answer_type)&&"finish"===o.status&&o.answer===o.text)return e.isWaitforContent=!0,void this.typeWritter()}if(e.isWaitforContent=!1,n){if("text"===n.answer_type)if("finish"===n.status&&n.answer===n.text)n.answer=n.text,this.printIndex++;else{this.assistantStart&&(this.sendPf({md:"search",ct:"search_assistant_output_time",ctid:this.lastItem.id,ctnm:Date.now()-this.searchStartTime,extra:Date.now()+"-"+this.searchStartTime}),this.assistantStart=!1);const e=n.text.substring(n.answer.length),i=e.match(wn.gG)||e.match(wn.hY);if(i){const e=i[0].length||t;return n.answer=n.text.substring(0,n.answer.length+e),void this.typeWritter()}const o=e.match(wn.kl),r=e.match(wn.BR);if(o&&e.length<13&&!r)return"finish"===n.status&&(n.answer=n.text,this.printIndex++),void this.typeWritter();const a=e.match(wn.vY),s=e.match(wn._9);if(a&&!s)return"finish"===n.status&&(n.answer=n.text,this.printIndex++),void this.typeWritter();n.answer=n.text.substring(0,n.answer.length+t)}else"code"===n.answer_type?"finish"===n.status?(n.answer=n.text,this.printIndex++):n.answer=n.text:this.printIndex++;this.typeWritter()}else this.typeWritter()}),e)},outputStr(){this.printIndex=0,this.lock||(this.lock=!0,this.typeWritter())},stopPrint(){this.lastItem.isWaitforContent=!1,this.lastItem.printComleted=!0,this.lastItem.manualStopStream||this.commitState(Bh.E,!0),clearTimeout(this.scrollStartTimer),this.setConversationisSearching(!1),this.lastItem.canShowLoading=!1,setTimeout((()=>{clearInterval(this.scrollTimer)}),this.printSpeed),this.lock=!1,"glms"!==this.from&&(this.presentations||(0,d.M7)(p.A,"textboxFocus")),this.disposeRegenerateAnwser()},hendleOutputOver(){this.doFinally()},setAutoScroll(t){const e=this;this.scrollStartTimer=setTimeout((()=>{const i=h()(`#row-answer-${t}`);let n=i.innerHeight(),o=n,r=-1;clearInterval(this.scrollTimer),this.scrollTimer=setInterval((()=>{const t=h()(this.scrollTarget).scrollTop();if(r-t>50&&(this.lastItem.userTouch=!0,clearInterval(this.scrollTimer)),r=t,n=i.innerHeight(),n!==o){const t=h()(this.scrollTarget)[0];if(!t)return;const e=t.scrollHeight;h()(this.scrollTarget).scrollTop(e+(n-o)),o=n}}),e.scrollSpeed)}),500)},showPrintData(){const t=this.lastItem,e=t.answerListDisplay||[];e.forEach((t=>{"text"!==t.answer_type&&"code"!==t.answer_type||(t.answer=t.text)})),t.answerListOutput=e,this.printIndex=e.length-1},visibilitychange(){"visible"===document.visibilityState?(this.pageHiden=!1,this.showPrintData()):(this.visibilitychanged=!0,this.pageHiden=!0)},commitState(t,e){this.$store.commit(`Conversation/${t}`,e)}},mounted(){document.addEventListener("visibilitychange",this.visibilitychange),p.A.$on("conversation_retry",(t=>{this.retry(t)})),p.A.$on("refreshConversation",(t=>{this.$store.commit("Glms/RESET_ASSISTANT_UI_COMPS"),this.manualStopStream(),this.$store.commit("Conversation/SET_DATA_LIST",[])})),p.A.$on("previewSearch",(t=>{setTimeout((()=>{this.newSearch(t)}),100)}))},beforeUnmount(){p.A.$off("previewSearch"),p.A.$off("refreshConversation"),p.A.$off("conversation_retry"),document.removeEventListener("visibilitychange",this.visibilitychange)},emits:["refreshConversation","restoreRefreshStatus","textboxFocus","refreshSessionList"]};i(74261);const Jp=(0,bt.A)(Qp,[["render",c],["__scopeId","data-v-a383a220"]]);var qp=Jp},22550:function(t,e,i){"use strict";i.d(e,{A:function(){return m}});var n=i(3477),o=i(8906),r=i(1648);const a={class:"text"},s={key:0,class:"content"},l=["onClick"],c=["innerHTML"];function u(t,e,i,u,h,d){const g=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.Wv)(g,{modelValue:i.dialogInfo.visible,"onUpdate:modelValue":e[3]||(e[3]=t=>i.dialogInfo.visible=t),class:(0,o.C4)(["chatglm-dialog",i.dialogInfo.class||""]),"show-close":!1,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{header:(0,n.k6)((()=>[(0,n.Lk)("p",a,(0,o.v_)(i.dialogInfo.title),1),(0,n.Lk)("p",{class:(0,o.C4)(["icon",{"icon-dark":t.isDarkMode}]),onClick:e[0]||(e[0]=t=>d.handlerDialog({id:"dialogInfo",type:"cancel"}))},null,2)])),footer:(0,n.k6)((()=>[i.dialogInfo.showCancel?((0,n.uX)(),(0,n.CE)("p",{key:0,class:"button cancel-button",onClick:e[1]||(e[1]=t=>d.handlerDialog({id:"dialogInfo",type:i.dialogInfo.cancelType||"cancel"}))},(0,o.v_)(i.dialogInfo.cancelText||"取消"),1)):(0,n.Q3)("",!0),(0,n.Lk)("p",{class:"button confirm-button",onClick:e[2]||(e[2]=t=>d.handlerDialog({id:"dialogInfo",type:"confirm"}))},(0,o.v_)(i.dialogInfo.confirmText),1)])),default:(0,n.k6)((()=>["privacy"===i.dialogInfo.type?((0,n.uX)(),(0,n.CE)("p",s,[e[4]||(e[4]=(0,n.eW)(" 我已阅读并同意 ")),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.dialogInfo.privacy,((t,e)=>((0,n.uX)(),(0,n.CE)("span",{class:"policy-link",style:{"font-weight":"700",cursor:"pointer"},key:"privacy"+e,onClick:(0,r.D$)((e=>d.goToPrivacy(t)),["prevent"])},(0,o.v_)("《"+t.name+"》"),9,l)))),128))])):((0,n.uX)(),(0,n.CE)("p",{key:1,class:"content",innerHTML:i.dialogInfo.content},null,8,c))])),_:1},8,["modelValue","class"])}var h=i(66785),d=i(37175),g={name:"Dialog",props:{dialogInfo:{type:Object,default:()=>{}}},data(){return{}},mounted(){this.dialogInfo.privacy&&this.sendPv({md:"pay",ct:"pay_deal_pop"})},methods:{handlerDialog(t){this.dialogInfo.privacy&&("confirm"===t.type?this.sendCl({md:"pay",ct:"pay_deal_pop_agree"}):"cancel"===t.type&&this.sendCl({md:"pay",ct:"pay_deal_pop_cancel"})),(0,d.M7)(this,"handlerDialogVisible",t)},goToPrivacy(t){this.sendCl({md:"pay",ct:"pay_deal_pop_detail",ctvl:t.log}),window.open(t.url,"_blank")}},computed:{...(0,h.aH)("DarkMode",["isDarkMode"])},emits:["handlerDialogVisible"]},p=(i(52400),i(5613));const f=(0,p.A)(g,[["render",u]]);var m=f},12708:function(t,e,i){var n=i(28095);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("73b359e8",n,!0,{sourceMap:!1,shadowMode:!1})},19856:function(t,e,i){var n=i(40701);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("9358cace",n,!0,{sourceMap:!1,shadowMode:!1})},41688:function(t,e,i){var n=i(59263);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("734e3cf6",n,!0,{sourceMap:!1,shadowMode:!1})},22035:function(t,e,i){var n=i(862);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("af8f6f4a",n,!0,{sourceMap:!1,shadowMode:!1})},72730:function(t,e,i){var n=i(6236);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("280d0dce",n,!0,{sourceMap:!1,shadowMode:!1})},69365:function(t,e,i){var n=i(38598);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("8d4bb10e",n,!0,{sourceMap:!1,shadowMode:!1})},2394:function(t,e,i){var n=i(16241);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("7190df84",n,!0,{sourceMap:!1,shadowMode:!1})},12951:function(t,e,i){var n=i(58548);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("4cb49e5f",n,!0,{sourceMap:!1,shadowMode:!1})},17149:function(t,e,i){var n=i(2030);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("71466868",n,!0,{sourceMap:!1,shadowMode:!1})},57657:function(t,e,i){var n=i(62010);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("2a134d6e",n,!0,{sourceMap:!1,shadowMode:!1})},93250:function(t,e,i){var n=i(86049);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("21b24018",n,!0,{sourceMap:!1,shadowMode:!1})},84006:function(t,e,i){var n=i(34163);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("5b94eb33",n,!0,{sourceMap:!1,shadowMode:!1})},64154:function(t,e,i){var n=i(4127);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("d14c36ac",n,!0,{sourceMap:!1,shadowMode:!1})},64358:function(t,e,i){var n=i(92041);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("70b8a40a",n,!0,{sourceMap:!1,shadowMode:!1})},36331:function(t,e,i){var n=i(3432);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("696197bb",n,!0,{sourceMap:!1,shadowMode:!1})},22441:function(t,e,i){var n=i(84882);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("67294927",n,!0,{sourceMap:!1,shadowMode:!1})},7423:function(t,e,i){var n=i(11558);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("2a7b5c3f",n,!0,{sourceMap:!1,shadowMode:!1})},34576:function(t,e,i){var n=i(18677);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("89ea1f80",n,!0,{sourceMap:!1,shadowMode:!1})},8759:function(t,e,i){var n=i(32694);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("35899cc2",n,!0,{sourceMap:!1,shadowMode:!1})},44366:function(t,e,i){var n=i(70895);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("dac08866",n,!0,{sourceMap:!1,shadowMode:!1})},82054:function(t,e,i){var n=i(33281);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("4b22c6eb",n,!0,{sourceMap:!1,shadowMode:!1})},4284:function(t,e,i){var n=i(27161);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("15330d93",n,!0,{sourceMap:!1,shadowMode:!1})},49539:function(t,e,i){var n=i(59586);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("0cc27541",n,!0,{sourceMap:!1,shadowMode:!1})},6794:function(t,e,i){var n=i(69317);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("86dd3fd2",n,!0,{sourceMap:!1,shadowMode:!1})},88278:function(t,e,i){var n=i(74725);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("4991dd0b",n,!0,{sourceMap:!1,shadowMode:!1})},68899:function(t,e,i){var n=i(77006);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("d631aec8",n,!0,{sourceMap:!1,shadowMode:!1})},56154:function(t,e,i){var n=i(62103);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("1ee18ae3",n,!0,{sourceMap:!1,shadowMode:!1})},49647:function(t,e,i){var n=i(97880);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("6f54d397",n,!0,{sourceMap:!1,shadowMode:!1})},39769:function(t,e,i){var n=i(41134);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("25c0096a",n,!0,{sourceMap:!1,shadowMode:!1})},33367:function(t,e,i){var n=i(39752);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("72a70fe1",n,!0,{sourceMap:!1,shadowMode:!1})},26430:function(t,e,i){var n=i(11601);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("791cb51b",n,!0,{sourceMap:!1,shadowMode:!1})},6832:function(t,e,i){var n=i(81703);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("619fb571",n,!0,{sourceMap:!1,shadowMode:!1})},65210:function(t,e,i){var n=i(83467);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("27b35efa",n,!0,{sourceMap:!1,shadowMode:!1})},27467:function(t,e,i){var n=i(40710);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("564eb52c",n,!0,{sourceMap:!1,shadowMode:!1})},36761:function(t,e,i){var n=i(79174);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("59df3ea6",n,!0,{sourceMap:!1,shadowMode:!1})},32973:function(t,e,i){var n=i(40822);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("c21b6760",n,!0,{sourceMap:!1,shadowMode:!1})},6527:function(t,e,i){var n=i(70136);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("2f5ea2d6",n,!0,{sourceMap:!1,shadowMode:!1})},95677:function(t,e,i){var n=i(4490);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("3d23af01",n,!0,{sourceMap:!1,shadowMode:!1})},45684:function(t,e,i){var n=i(32765);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("535b7737",n,!0,{sourceMap:!1,shadowMode:!1})},60982:function(t,e,i){var n=i(26771);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("4b19def6",n,!0,{sourceMap:!1,shadowMode:!1})},99717:function(t,e,i){var n=i(79192);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("488d599a",n,!0,{sourceMap:!1,shadowMode:!1})},72677:function(t,e,i){var n=i(48976);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("c170be98",n,!0,{sourceMap:!1,shadowMode:!1})},36146:function(t,e,i){var n=i(91981);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("d48378a4",n,!0,{sourceMap:!1,shadowMode:!1})},82892:function(t,e,i){var n=i(42653);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("1ad15d28",n,!0,{sourceMap:!1,shadowMode:!1})},58623:function(t,e,i){var n=i(50206);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("002224a7",n,!0,{sourceMap:!1,shadowMode:!1})},91833:function(t,e,i){var n=i(45048);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("4628e08a",n,!0,{sourceMap:!1,shadowMode:!1})},25648:function(t,e,i){var n=i(58407);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("0011494e",n,!0,{sourceMap:!1,shadowMode:!1})},9839:function(t,e,i){var n=i(14614);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("f8439144",n,!0,{sourceMap:!1,shadowMode:!1})},89447:function(t,e,i){var n=i(25823);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("f3eaae56",n,!0,{sourceMap:!1,shadowMode:!1})},89821:function(t,e,i){var n=i(96652);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("0a1ce352",n,!0,{sourceMap:!1,shadowMode:!1})},74261:function(t,e,i){var n=i(44324);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("62399cb0",n,!0,{sourceMap:!1,shadowMode:!1})},38572:function(t,e,i){var n=i(82839);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("89e74dbc",n,!0,{sourceMap:!1,shadowMode:!1})},41290:function(t,e,i){var n=i(5177);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("5b607c82",n,!0,{sourceMap:!1,shadowMode:!1})},85518:function(t,e,i){var n=i(98133);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("66ee1562",n,!0,{sourceMap:!1,shadowMode:!1})},12910:function(t,e,i){var n=i(94667);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("1a504e59",n,!0,{sourceMap:!1,shadowMode:!1})},93116:function(t,e,i){var n=i(42155);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("4ed1c4d7",n,!0,{sourceMap:!1,shadowMode:!1})},72006:function(t,e,i){var n=i(15433);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("1fcf71ed",n,!0,{sourceMap:!1,shadowMode:!1})},45833:function(t,e,i){var n=i(89104);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("9ffd66e2",n,!0,{sourceMap:!1,shadowMode:!1})},96248:function(t,e,i){var n=i(19301);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("49dbe8ba",n,!0,{sourceMap:!1,shadowMode:!1})},52260:function(t,e,i){var n=i(29979);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("07d498c1",n,!0,{sourceMap:!1,shadowMode:!1})},32e3:function(t,e,i){var n=i(51835);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("8c9c86b4",n,!0,{sourceMap:!1,shadowMode:!1})},52302:function(t,e,i){var n=i(75141);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("7b161b92",n,!0,{sourceMap:!1,shadowMode:!1})},68022:function(t,e,i){var n=i(81925);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("5425ddcc",n,!0,{sourceMap:!1,shadowMode:!1})},52400:function(t,e,i){var n=i(20533);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var o=i(89434).A;o("c55104e8",n,!0,{sourceMap:!1,shadowMode:!1})},6958:function(t){"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAHlJREFUKBVjYBgFOEOAEVkmPDxc89+/f6eAYjzI4kD2FyYmJrOVK1deh4kzwRggGiQBVJCELAZig8SQNYHEmEEEMrh69eo1HR0dfqCYJUickZGxf9WqVf3IakBsFBthklpaWmVA9mEQhrJhUoTp0NBQCRAmrHL4qgAAuu4cWZOZIGsAAAAASUVORK5CYII="},81607:function(t){"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAMBJREFUKBWVkjEOwjAMRe2WgZW7IIHEDdhghhuwcQ42rlJugAQS54Cxa5cq1QM5TUpByZfS2j9+dlJVt/tX5ZxbS4ZU9VLkQvSHKTIGRaVJYFmKrBbTCJxE2UgCdDzMZDkHrOV6b95V0US6UmgKodujEZbJg0B0ZgEModO5lrY1TMQf1TpyJGBEjD+E2NPN7ukIUDiF/BfEXgRiGEw8NgkffYGYwCi808fpn/6OvfUfsDr/Vc1IfRf8sKnFVqeiVQfDu0tf/nWH9gAAAABJRU5ErkJggg=="},90260:function(t){"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAdBJREFUWAnFl0FuwjAQRZ0ukiugHqFSOQNdseuKW3ALzkA4BateICvUGyCxrtRFd4WuunH/TzykaYJrnLEYaTJJsP2+x8GZZCbQrLU5mj7Bn+EP8HvnCObd+R7xBV5lWfaNON4AnsA38E94qLEt+0yiFaBzAV/Bv+Cxxr4co7hKCDpw1q9wLeNYYdlAwyn8TYt8Hme3+8D5ozcTaMCZ68PXa2tnM2sbEcOZAJhrrpl2DAcTOGNjZPSfCdzkw6JrfbiMv+osBe4y9WOedhm4jZfhbENWuxS44H9Wz/xw4WzqLOAqh1+zycgAwzEMzr5k5gaHOa9ULBwuuDkFlHI1Kl4PJ66kgIpnoywOTmRFAYcbwYk9UMApWkD8zAV5ihcwHk4Rx7gl0IFTQL0EFc+CTQ9OZHWH3YhlVJiVpTHbrTGLhTHLZVgff6s9lyBsI9KduSS83oj+34rTwJutmBmCnMsvozRwZqB5GTkBw6/jdPDu69iJ6BYk6eCcfbcgcQIK/MByaaiMqm8rHcjol2TnpWDhyAKSGdA3FrxtJUToX0ODqatetfGE+8tyEUOV8GY5dGRwLP/MBS4RHQr4bT7NRAQjlcOTfZxmv2G+c4hI8nn+Ax5PG/zhI393AAAAAElFTkSuQmCC"}}]);